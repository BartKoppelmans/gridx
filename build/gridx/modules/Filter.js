//>>built
define("gridx/modules/Filter","../core/_Module ../core/model/extensions/ClientFilter ../core/model/extensions/Query dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/Deferred".split(" "),function(h,p,q,r,f,e,m){function n(a,b,c){e.isFunction(c)&&(a=c(a));switch(b){case "number":return parseFloat(a,10);case "boolean":return!!a;case "date":return a=new Date(a),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.getTime();case "time":return a=new Date(a),a.setDate(1),a.setMonth(0),
a.setFullYear(2E3),a.getTime();default:return String(a)}}function d(a,b,c,g){e.isArray(c)&&(c=f.map(c,function(a){return a.expr}));return e.mixin(a,{expr:e.mixin({op:b,data:c},g||{})})}function l(a,b,c,g,d){b=String(b.apply(0,a));a=String(c.apply(0,a));g||(b=b.toLowerCase(),a=a.toLowerCase());return d(b,a)}h=r(h,{name:"filter",modelExtensions:[p,q],constructor:function(){this.setFilter(this.arg("preCondition"),1)},serverMode:!1,setupQuery:function(a){return a},setFilter:function(a,b){a!=this._checker&&
(this._checker=a,this.refresh(b))},getFilter:function(){return this._checker},refresh:function(a){var b=this,c=b.grid,d=b.model,k=new m,e=b._checker;if(b.arg("serverMode")){var f=b.arg("setupFilterQuery")||b.arg("setupQuery");d.query(f.call(b,e&&e.expr))}else d.filter(e);d.clearCache();m.when(!a&&c.body.refresh(),function(){k.callback();b.onFilter()},function(a){k.errback(a)});return k},onFilter:function(){}});return e.mixin(h,{column:function(a,b,c,g){b=String(b||"string").toLowerCase();return d(function(d){return n(d[g?
"rawData":"data"][a],b,c)},b,a,{isCol:!0})},value:function(a,b,c){b=String(b||typeof a).toLowerCase();a=n(a,b,c);return d(function(){return a},b,a)},isEmpty:function(a,b){return d(function(){var c=a.apply(0,arguments);return b?0<=f.indexOf(b,c):""===c||null===c||void 0===c},"isEmpty",[a])},and:function(){var a=f.filter(arguments,function(a){return e.isFunction(a)});return d(function(){var b=arguments;return f.every(a,function(a){return a.apply(0,b)})},"and",a)},or:function(){var a=f.filter(arguments,
function(a){return e.isFunction(a)});return d(function(){var b=arguments;return f.some(a,function(a){return a.apply(0,b)})},"or",a)},not:function(a){return d(function(){return!a.apply(0,arguments)},"not",[a])},equal:function(a,b){return d(function(){return a.apply(0,arguments)===b.apply(0,arguments)},"equal",[a,b])},greater:function(a,b){return d(function(){return a.apply(0,arguments)>b.apply(0,arguments)},"greater",[a,b])},less:function(a,b){return d(function(){return a.apply(0,arguments)<b.apply(0,
arguments)},"less",[a,b])},greaterEqual:function(a,b){return d(function(){return a.apply(0,arguments)>=b.apply(0,arguments)},"greaterEqual",[a,b])},lessEqual:function(a,b){return d(function(){return a.apply(0,arguments)<=b.apply(0,arguments)},"lessEqual",[a,b])},match:function(a,b){return d(function(){return 0<=String(a.apply(0,arguments)).search(b)},"match",[a,{expr:{op:"regex",data:b}}])},contain:function(a,b,c){return d(function(){return l(arguments,a,b,c,function(a,b){return 0<=a.indexOf(b)})},
"contain",[a,b])},startWith:function(a,b,c){return d(function(){return l(arguments,a,b,c,function(a,b){return a.substring(0,b.length)===b})},"startWith",[a,b])},endWith:function(a,b,c){return d(function(){return l(arguments,a,b,c,function(a,b){return a.substring(a.length-b.length)===b})},"endWith",[a,b])}})});
//@ sourceMappingURL=Filter.js.map