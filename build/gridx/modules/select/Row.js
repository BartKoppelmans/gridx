//>>built
define("gridx/modules/select/Row","dojo/_base/declare dojo/_base/array dojo/_base/sniff dojo/_base/event dojo/query dojo/_base/lang dojo/dom-class dojo/keys ./_RowCellBase ../../core/_Module".split(" "),function(g,h,k,l,m,n,e,p,q,r){return g(q,{name:"selectRow",rowMixin:{select:function(){this.grid.select.row.selectById(this.id);return this},deselect:function(){this.grid.select.row.deselectById(this.id);return this},isSelected:function(){return this.grid.select.row.isSelected(this.id)},isSelectable:function(){return this.grid.select.row._isSelectable(this.id)},
setSelectable:function(a){this.grid.select.row.setSelectable(this.id,a)}},treeMode:!0,setSelectable:function(a,b){var c=this.model,d=this.grid.body.getRowNode({rowId:a});c.setMarkable(a,b);this.unselectable[a]=!b;d&&(e.toggle(d,"gridxRowUnselectable",!b),this.onHighlightChange({row:parseInt(d.getAttribute("visualindex"),10)},c.getMark(a)))},getSelected:function(){return this.model.getMarkedIds()},clear:function(a){if(this.arg("enabled")){var b=this.model;h.forEach(b.getMarkedIds(),function(c){c!==
a&&b.markById(c,0)});b.when()}},_type:"row",_isSelectable:function(a){var b=this.arg("unselectable");return a in b?!b[a]:!0},_getUnselectableRows:function(){var a=[],b=this.arg("unselectable"),c;for(c in b)this.unselectable[c]&&a.push(c);return a},_init:function(){var a=this,b=a.grid,c=a.arg("unselectable",{});a.model.treeMarkMode("",a.arg("treeMode"));for(var d in c)a.model.setMarkable(d,!c[d]);a.inherited(arguments);a.model._spTypes.select=1;a.model.setMarkable(n.hitch(a,"_isSelectable"));a.batchConnect([b,
"onRowClick",function(f){(a.arg("triggerOnCell")&&!e.contains(f.target,"gridxTreeExpandoIcon")&&!e.contains(f.target,"gridxTreeExpandoInner")||!f.columnId)&&a._select(f.rowId,b._isCopyEvent(f))}],[b.body,"onAfterRow",function(a){var b=!a.isSelectable();e.toggle(a.node(),"gridxRowUnselectable",b)}],[b,4>k("ff")?"onRowKeyUp":"onRowKeyDown",function(c){if((a.arg("triggerOnCell")||!c.columnId)&&c.keyCode==p.SPACE){var d=b.cell(c.rowId,c.columnId);if(!d||!d.isEditing||!d.isEditing())a._select(c.rowId,
b._isCopyEvent(c)),l.stop(c)}}])},_onMark:function(a,b,c,d){"select"==d&&(this._highlight(a,b),this[b?"onSelected":"onDeselected"](this.grid.row(a,1),a),this._onSelectionChange())},_highlight:function(a,b){var c=m('[rowid\x3d"'+this.grid._escapeId(a)+'"]',this.grid.mainNode),d=b&&"mixed"!=b;c.length&&(c.forEach(function(a){e.toggle(a,"gridxRowSelected",d);e.toggle(a,"gridxRowPartialSelected","mixed"==b);a.setAttribute("aria-selected",!!d)}),this.onHighlightChange({row:parseInt(c[0].getAttribute("visualindex"),
10)},b))},_markById:function(a,b){var c=this.model;this.grid.row(a);c.treeMarkMode()&&(!c.getMark(a)&&b)&&(b="mixed");c.markById(a,b);c.when()},_onRender:function(a,b){var c=this.model,d=a+b,f,e;for(f=a;f<d;++f)if(e=this.grid.body.getRowNode({visualIndex:f}))e=e.getAttribute("rowid"),this._highlight(e,c.getMark(e))}})});
//@ sourceMappingURL=Row.js.map