//>>built
define("gridx/modules/dnd/Column","dojo/_base/declare dojo/_base/array dojo/dom-geometry dojo/dom-class dojo/query ./_Base ../../core/_Module".split(" "),function(v,m,q,w,g,x,y){return v(x,{name:"dndColumn",required:["_dnd","selectColumn","moveColumn"],getAPIPath:function(){return{dnd:{column:this}}},preload:function(){var a=this.grid;this.inherited(arguments);this._selector=a.select.column;this.connect(a.header,"onRender","_initHeader")},load:function(){this._initHeader();this.loaded.callback()},
accept:[],provide:["grid/columns"],_checkDndReady:function(a){return this._selector.isSelected(a.columnId)?(this._selectedColIds=this._selector.getSelected(),this.grid.dnd._dnd.profile=this,!0):!1},onDraggedOut:function(){},_cssName:"Column",_initHeader:function(){g(".gridxCell",this.grid.header.domNode).attr("aria-grabbed","false")},_onBeginDnd:function(a){var c=this;a.delay=c.arg("delay");m.forEach(c._selectedColIds,function(a){g('[colid\x3d"'+c.grid._escapeId(a)+'"].gridxCell',c.grid.header.domNode).attr("aria-grabbed",
"true")})},_getDndCount:function(){return this._selectedColIds.length},_onEndDnd:function(){g('[aria-grabbed\x3d"true"].gridxCell',this.grid.header.domNode).attr("aria-grabbed","false")},_buildDndNodes:function(){var a=this.grid.id;return m.map(this._selectedColIds,function(c){return["\x3cdiv id\x3d'",a,"_dndcolumn_",c,"' gridid\x3d'",a,"' columnid\x3d'",c,"'\x3e\x3c/div\x3e"].join("")}).join("")},_onBeginAutoScroll:function(){var a=this.grid.autoScroll;this._autoScrollV=a.vertical;a.vertical=!1},
_onEndAutoScroll:function(){this.grid.autoScroll.vertical=this._autoScrollV},_getItemData:function(a){return a.substring((this.grid.id+"_dndcolumn_").length)},_calcTargetAnchorPos:function(a,c){for(var b=a.target,e=this,h=e.grid,m=h.isLeftToRight(),k=h._columns,n={height:c.h+"px",width:"",top:""},s=h._escapeId,t=function(b){var p=b.getAttribute("colid"),f=h._columnsById[p].index,d=b,r=b,l=b=f;if(e._selector.isSelected(p)){for(b=f;0<b&&e._selector.isSelected(k[b-1].id);)--b;d=g(".gridxHeaderRow [colid\x3d'"+
s(k[b].id)+"']",h.headerNode)[0];for(l=f;l<k.length-1&&e._selector.isSelected(k[l+1].id);)++l;r=g(".gridxHeaderRow [colid\x3d'"+s(k[l].id)+"']",h.headerNode)[0]}d&&r?(p=q.position(d),f=q.position(r),d=a.clientX<(p.x+f.x+f.w)/2,n.left=d?p.x-c.x-1+"px":f.x+f.w-c.x-1+"px",e._target=d^m?l+1:b):delete e._target;return n};b;){if(w.contains(b,"gridxCell"))return t(b);b=b.parentNode}var u=g(".gridxRow",h.bodyNode)[0],d=q.position(u.firstChild);if(d.x+d.w<=a.clientX)n.left=d.x+d.w-c.x-1+"px",e._target=k.length;
else if(d.x>=a.clientX)n.left=d.x-c.x-1+"px",e._target=0;else if(g(".gridxCell",u).some(function(c){var d=q.position(c);if(d.x<=a.clientX&&d.x+d.w>=a.clientX)return b=c,!0}))return t(b);return n},_onDropInternal:function(a,c){var b=this;if(0<=b._target){var e=m.map(b._selectedColIds,function(a){return b.grid._columnsById[a].index});b.grid.move.column.move(e,b._target)}},_onDropExternal:function(){}})});
//@ sourceMappingURL=Column.js.map