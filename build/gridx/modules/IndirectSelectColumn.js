//>>built
define("gridx/modules/IndirectSelectColumn","dojo/_base/declare dojo/_base/array dojo/_base/event dojo/query dojo/_base/lang dojo/dom-class dojo/_base/Deferred dojo/keys ../core/_Module ./RowHeader".split(" "),function(q,m,r,k,s,g,p,t,u){return q(u,{name:"indirectSelect",required:["selectRow"],position:0,width:"20px",all:!0,preload:function(){var b=this,a=b.grid,c=a.select.row,d=a._columns,e=b.arg("width"),e={id:"__indirectSelect__",decorator:s.hitch(this,"_createSelector"),headerStyle:"text-align: center;",
style:"text-align: center;",rowSelectable:!0,sortable:!1,filterable:!1,editable:!1,padding:!1,ignore:!0,declaredWidth:e,width:e};b.batchConnect([c,"onHighlightChange","_onHighlightChange"],[c,"onSelectionChange","_onSelectionChange"],[c,"clear","_onClear"],a.filter&&[a.filter,"onFilter","_onSelectionChange"],[a.body,"onMoveToCell",function(c,d,e){c={columnId:"__indirectSelect__"};"__indirectSelect__"==a._columns[d].id?b._onMouseOver(c):b._onMouseOut()}],[a,"onCellMouseOver","_onMouseOver"],[a,"onCellMouseOut",
"_onMouseOut"]);d.splice(b.arg("position"),0,e);a._columnsById[e.id]=e;m.forEach(d,function(a,b){a.index=b});c.selectByIndex&&b.arg("all")&&(b._allSelected={},e.name=b._createSelectAllBox(),b.connect(a,"onHeaderCellMouseDown",function(a){"__indirectSelect__"==a.columnId&&b._onSelectAll()}),b.connect(a,"onHeaderCellKeyDown",function(a){"__indirectSelect__"==a.columnId&&a.keyCode==t.SPACE&&(r.stop(a),b._onSelectAll())}));a.header._build()},_createSelectAllBox:function(){return this._createCheckBox(this._allSelected[this._getPageId()])},
_getPageId:function(){return this.grid.view.rootStart+","+this.grid.view.rootCount},_createSelector:function(b,a){var c=this.model.getMark(a);isUnselectable=!this.grid.row(a,1).isSelectable();return this._createCheckBox(!0===c,"mixed"==c,isUnselectable)},_createCheckBox:function(b,a,c){var d=this._getDijitClass();return['\x3cspan role\x3d"',this._isSingle()?"radio":"checkbox",'" class\x3d"gridxIndirectSelectionCheckBox dijitReset dijitInline ',d," ",b?d+"Checked":"",a?d+"Partial":"",c&&b?d+"CheckedDisabled":
"",c&&a?dijitClas+"PartialDisabled":"",c&&!b&&!a?d+"Disabled":"",'" aria-checked\x3d"',b?"true":a?"mixed":"false",'"\x3e\x3cspan class\x3d"gridxIndirectSelectionCheckBoxInner"\x3e',b?"\x26#10003;":a?"\x26#9646;":"\x26#9744;","\x3c/span\x3e\x3c/span\x3e"].join("")},_getDijitClass:function(){return this._isSingle()?"dijitRadio":"dijitCheckBox"},_isSingle:function(){var b=this.grid.select.row;return b.hasOwnProperty("multiple")&&!b.arg("multiple")},_onClear:function(b){var a=this._getDijitClass()+"Checked",
c=this.grid;k("."+a,this.grid.bodyNode).removeClass(a);c.select.row.isSelected(b)&&k('[rowid\x3d"'+c._escapeId(b)+'"].gridxRow .gridxIndirectSelectionCheckBox',c.bodyNode).addClass(a)},_onHighlightChange:function(b,a){var c=k('[visualindex\x3d"'+b.row+'"].gridxRow',this.grid.bodyNode)[0],d=c?k(".gridxIndirectSelectionCheckBox",c)[0]:void 0;if(d){var e=this._getDijitClass(),h="mixed"==a,f=a&&!h,c=c.getAttribute("rowid");isUnselectable=!this.grid.row(c).isSelectable();g.toggle(d,e+"Checked",f);g.toggle(d,
e+"Partial",h);g.toggle(d,e+"CheckedDisabled",f&&isUnselectable);g.toggle(d,e+"PartialDisabled",h&&isUnselectable);g.toggle(d,e+"Disabled",!f&&!h&&isUnselectable);d.setAttribute("aria-checked",f?"true":h?"mixed":"false");d.firstChild.innerHTML=f?"\x26#10003;":h?"\x26#9646;":"\x26#9744;"}},_onMouseOver:function(b){var a=this.grid.select.row;a.arg("triggerOnCell")||"__indirectSelect__"==b.columnId?(a.triggerOnCell||(this._triggerOnCell=!1,a.triggerOnCell=!0),a.arg("holdingCtrl")||(this._holdingCtrl=
!1,a.holdingCtrl=!0)):this._onMouseOut()},_onMouseOut:function(){var b=this.grid.select.row;this.hasOwnProperty("_triggerOnCell")&&(b.triggerOnCell=!1,delete this._triggerOnCell);this.hasOwnProperty("_holdingCtrl")&&(b.holdingCtrl=!1,delete this._holdingCtrl)},_onSelectAll:function(){var b=this.grid;b.select.row[this._allSelected[this._getPageId()]?"deselectByIndex":"selectByIndex"]([0,b.view.visualCount-1])},_onSelectionChange:function(b){var a=this,c,d=a.grid,e,h=d.view,f=a.model,g=h.rootStart,
l=h.rootCount,k=m.filter(b||d.select.row.getSelected(),function(a){return!f.treePath(a).pop()});b=d.select.row._getUnselectableRows();var n=m.filter(b,function(a){return!f.parentId(a)&&!d.select.row.isSelected(a)});l===f.size()?e=l&&l-n.length==k.length:(c=new p,f.when({start:g,count:l},function(){var a=m.filter(m.map(k,function(a){return f.idToIndex(a)}),function(a){return a>=g&&a<g+l});n=m.filter(n,function(a){a=f.idToIndex(a);return a>=g&&a<g+l});e=l-n.length==a.length;c.callback()}));p.when(c,
function(){if(a.arg("all")){a._allSelected[a._getPageId()]=e;var b=a._createSelectAllBox();d._columnsById.__indirectSelect__.name=b;d.header.getHeaderNode("__indirectSelect__").innerHTML=b}})}})});
//@ sourceMappingURL=IndirectSelectColumn.js.map