//>>built
define("gridx/mobile/PullRefresh","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/aspect dojo/dom-construct dojo/dom-class dojo/query dojo/i18n!./nls/PullRefresh".split(" "),function(h,f,k,l,g,c,m,d){return h(null,{readyToRefresh:!1,state:"normal",triggerHeight:50,lastId:null,buildRendering:function(){this.inherited(arguments);var a=this;l.before(this.bodyPane,"slideTo",function(b,e,c){"number"==typeof b.y&&(0==b.y&&"normal"!=a.state)&&(b.y=a.triggerHeight,"ready"==a.state&&(a.loadNew(),
a._setPullRefreshState("loading")))});this.connect(this.bodyPane,"scrollTo",function(b){"number"==typeof b.y&&0!=b.y&&(b.y>a.triggerHeight?"normal"==a.state&&a._setPullRefreshState("ready"):"ready"==a.state&&a._setPullRefreshState("normal"))})},loadNew:function(){var a=f.mixin({lastId:this.lastId},this.query);this.store.query(a,this.queryOptions).then(f.hitch(this,"_loadNewComplete"),f.hitch(this,"onError"))},_loadNewComplete:function(a){a=a.items||a;var b=[];a.length&&(m("\x3e.mobileGridxRow",this.bodyPane.containerNode),
this.lastId=a[0][this.store.idProperty],k.forEach(a,function(a){b.push(this._createRow(a))},this),g.place(b.join(""),this.pullRefreshWrapper,"after"));this._setPullRefreshState("normal");this.bodyPane.slideTo({y:0})},_setPullRefreshState:function(a){var b=this.pullRefreshWrapper,e=b.lastChild;c.remove(b,"releaseToRefresh");c.remove(b,"inLoading");this.state=a;switch(a){case "normal":e.innerHTML=d.pullToRefresh;break;case "ready":e.innerHTML=d.releaseToRefresh;c.add(b,"releaseToRefresh");break;case "loading":e.innerHTML=
d.waitForLoading,c.add(b,"inLoading")}},_buildBody:function(){this.inherited(arguments);this.pullRefreshWrapper=g.create("div",{className:"mobileGridxPullRefreshWrapper"},this.bodyPane.containerNode,"first");this.pullRefreshWrapper.innerHTML='\x3cimg src\x3d"'+this._blankGif+'"/\x3e\x3cspan class\x3d"mobileGridxPullRefreshLabel"\x3e'+d.pullToRefresh+"\x3c/span\x3e"}})});
//@ sourceMappingURL=PullRefresh.js.map