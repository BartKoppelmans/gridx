//>>built
define("gridx/mobile/Grid","dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/aspect dojo/string dojo/dom-class dojox/mobile/_StoreMixin dojox/mobile/Pane dojox/mobile/ScrollablePane dojo/i18n!./nls/common dojo/_base/Deferred dojo/has".split(" "),function(m,n,v,g,h,w,p,k,q,r,s,t,u,l){m.experimental("gridx/mobile/Grid");return n("gridx.mobile.Grid",[r,q],{autoHeight:!0,showHeader:!1,vScroller:!0,hScroller:!1,columns:null,setColumns:function(a){this.columns=
a;this.refresh()},buildGrid:function(){this.columns&&this._buildHeader();this.store&&this._buildBody();this.resize()},_buildHeader:function(){if(this.showHeader){this.headerNode.style.display="block";var a=['\x3cdiv class\x3d"mobileGridxHeaderRow"\x3e\x3ctable\x3e\x3ctr\x3e'],b=this;g.forEach(this.columns,function(c){var d=c.textDir||b.textDir;a.push('\x3cth class\x3d"mobileGridxHeaderCell ',c.cssClass||"",c.align?" align-"+c.align:"",c.width?'" style\x3d"width:'+c.width+';"':"","\x3e",l("dojo-bidi")&&
d?b._enforceTextDirWithUcc(c.title,d):c.title,"\x3c/th\x3e")});a.push("\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e");this.headerNode.innerHTML=a.join("")}else this.headerNode.style.display="none"},_buildBody:function(a){if(a&&a.length){var b=[];g.forEach(a,function(a,d){b.push(this._createRow(a,1==d%2))},this);this.bodyPane.containerNode.innerHTML=b.join("")}else this.bodyPane.containerNode.innerHTML='\x3cdiv class\x3d"mobileGridxNoDataNode"\x3e'+t.noDataMsg+"\x3c/div\x3e"},_createRow:function(a){var b=
this.store.getIdentity(a),c=['\x3cdiv class\x3d"mobileGridxRow"',b?' rowId\x3d"'+b+'"':"","\x3e\x3ctable\x3e\x3ctr\x3e"];g.forEach(this.columns,function(b){var e=this._getCellContent(b,a),f=b.textDir||this.textDir;l("dojo-bidi")&&f&&(e=this._enforceTextDirWithUcc(e,f));c.push('\x3ctd class\x3d"mobileGridxCell ',b.cssClass||b.align?(b.cssClass||"")+(b.align?" align-"+b.align:""):"",'"',b.width?' style\x3d"width:'+b.width+';"':"","\x3e",e,"\x3c/td\x3e")},this);c.push("\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e");
return c.join("")},_getCellContent:function(a,b){var c=a.formatter;return a.template?p.substitute(a.template,b):c?c(b,a):b[a.field]},buildRendering:function(){this.inherited(arguments);k.add(this.domNode,"mobileGridx");this.domNode.innerHTML='\x3cdiv class\x3d"mobileGridxHeader"\x3e\x3c/div\x3e\x3cdiv class\x3d"mobileGridxBody"\x3e\x3c/div\x3e\x3cdiv class\x3d"mobileGridxFooter"\x3e\x3c/div\x3e';this.headerNode=this.domNode.childNodes[0];this.bodyNode=this.domNode.childNodes[1];this.footerNode=this.domNode.childNodes[2];
this.containerNode=this.bodyNode;var a=(this.vScroller?"v":"")+(this.hScroller?"h":"");a||(a="v");this.bodyPane=new s({scrollDir:a,scrollType:1},this.bodyNode);this.bodyPane._useTopLeft=!1;if(this.showHeader){var b=this.headerNode;this.connect(this.bodyPane,"scrollTo",function(a){"number"==typeof a.x&&(b.firstChild.style.webkitTransform=this.bodyPane.makeTranslateStr({x:a.x}))});this.connect(this.bodyPane,"slideTo",function(a,d,e){this.bodyPane._runSlideAnimation({x:this.bodyPane.getPos().x},{x:a.x},
d,e,b.firstChild,2)});this.connect(this.bodyPane,"stopAnimation",function(){k.remove(b.firstChild,"mblScrollableScrollTo2")})}},resize:function(){this.inherited(arguments);var a=this.domNode.offsetHeight;if(this.autoHeight){this.domNode.style.height="auto";var b=this.domNode,c=b.parentNode,a=this.bodyPane.getScreenSize().h;g.forEach(c.childNodes,function(c){c!=b&&(a-=c.offsetHeight||0)})}a=a-this.headerNode.offsetHeight-this.footerNode.offsetHeight;this.bodyNode.style.height=a+"px"},startup:function(){this.bodyPane.startup();
this.inherited(arguments);this.refresh();this.resize()},onComplete:function(a){this._buildBody(a)},onError:function(a){},onUpdate:function(a,b){h.place(this._createRow(a),this.bodyNode.firstChild,b)},onDelete:function(a,b){h.destroy(this.bodyNode.firstChild.childNodes[b])},PDF:"\u202c",LRE:"\u202a",RLE:"\u202b",_enforceTextDirWithUcc:function(a,b){b=this._checkContextual&&a&&"auto"===b?this._checkContextual(a.replace(/<[^>]*>/g,"")):b;return("rtl"===b?this.RLE:this.LRE)+a+this.PDF},_setTextDirAttr:function(a){this.textDir!=
a&&(this.textDir=a,this.refresh())},refresh:function(){this._buildHeader();if(!this.store)return null;var a=this,b=this.store.query(this.query,this.queryOptions);u.when(b,function(c){c.items&&(c=c.items);b.observe&&b.observe(function(b,c,f){if(-1<c)a.onDelete(b,c);if(-1<f)a.onUpdate(b,f)},!0);a.onComplete(c)},function(b){a.onError(b)});this.resize();return b}})});
//@ sourceMappingURL=Grid.js.map