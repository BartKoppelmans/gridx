//>>built
require({cache:{"gridx/core/model/_Extension":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/_base/array"],function(l,i,j){return l([],{constructor:function(g){var e=this.inner=g._model;this._cnnts=[];this.model=g;g._model=this;e&&(this.connect(e,"onDelete","_onDelete"),this.connect(e,"onNew","_onNew"),this.connect(e,"onSet","_onSet"))},destroy:function(){j.forEach(this._cnnts,i.disconnect)},connect:function(g,e,b,h){g=i.connect(g,e,h||this,b);this._cnnts.push(g);return g},_onNew:function(){this.onNew.apply(this,
arguments)},_onSet:function(){this.onSet.apply(this,arguments)},_onDelete:function(){this.onDelete.apply(this,arguments)},onNew:function(){},onDelete:function(){},onSet:function(){},_call:function(g,e){var b=this[g],h=this.inner;return b?b.apply(this,e||[]):h&&h._call(g,e)},_mixinAPI:function(){var g,e=this.model,b=arguments,h=function(b){return function(){return e._model._call(b,arguments)}};for(g=b.length-1;g>=0;--g)e[b[g]]=h(b[g])}})})},"gridx/core/model/extensions/Sort":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/_base/json","../_Extension"],function(l,i,j,g){return l(g,{name:"sort",priority:30,constructor:function(e,b){var h=b.baseSort;this.clear();this._mixinAPI("sort");if(h&&h.length)this._baseSort=h,this._sort()},clear:function(){},sort:function(){this.model._addCmd({name:"_cmdSort",scope:this,args:arguments})},_cmdSort:function(){var e=arguments;this._sort.apply(this,e[e.length-1])},_sort:function(e){var b=this.model,h=this._baseSort,m=b._cache,d=m.options=m.options||{},a,f,c;
if(i.isArrayLike(e)){for(a=0;a<e.length;++a)f=e[a],f.colId?f.attribute=m.columns?m.columns[f.colId].field||f.colId:f.colId:f.colId=f.attribute;h&&(e=e.concat(h))}else e=h;d.sort&&d.sort.length?j.toJson(d.sort)!==j.toJson(e)&&(c=1):e&&e.length&&(c=1);d.sort=i.clone(e);c&&m.clear();b._msg("storeChange")}})})},"gridx/modules/VScroller":function(){define(["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/event","dojo/_base/sniff","dojo/_base/query","dojo/keys","dojox/html/metrics","../core/_Module"],
function(l,i,j,g,e,b,h,m){return l(m,{name:"vScroller",forced:["body","vLayout","columnWidth"],optional:["pagination"],getAPIPath:function(){return{vScroller:this}},preload:function(){var d=this.grid,a=this.domNode=d.vScrollerNode;this.stubNode=a.firstChild;if(g("ie")<8)this.stubNode.style.width=h.getScrollbar().w+"px";d.autoHeight?a.style.display="none":this.domNode.style.width=h.getScrollbar().w+"px";d.hLayout.register(null,a,1)},load:function(d,a){var f=this,c=f.grid,k=c.bodyNode;f.batchConnect([f.domNode,
"onscroll","_doScroll"],[k,"onmousewheel","_onMouseWheel"],[c.mainNode,"onkeypress","_onKeyScroll"],[c.body,"onRender","_onBodyChange"],[c.body,"onForcedScroll","_onForcedScroll"],[c,"_onResizeEnd","_onBodyChange"],g("ff")&&[k,"DOMMouseScroll","_onMouseWheel"]);a.then(function(){i.when(f._init(d),function(){f.domNode.style.width="";f.loaded.callback()})})},scrollToRow:function(d,a){var f=new i,c=this.grid.bodyNode,k=this.domNode,n=0,u=e('[visualindex="'+d+'"]',c)[0];if(u){var n=u.offsetTop,b=c.scrollTop;
if(a)return k.scrollTop=n,f.callback(!0),f;else if(n<b)n-=b;else if(n+u.offsetHeight>b+c.clientHeight)n=n+u.offsetHeight-b-c.clientHeight;else return f.callback(!0),f;k.scrollTop+=n}f.callback(!!u);return f},_init:function(){this._onForcedScroll()},_doScroll:function(){this.grid.bodyNode.scrollTop=this.domNode.scrollTop},_onMouseWheel:function(d){this.grid.autoHeight||(this.domNode.scrollTop-=typeof d.wheelDelta==="number"?d.wheelDelta/3:-40*d.detail,j.stop(d))},_onBodyChange:function(){var d=this,
a=d.grid;window.setTimeout(function(){d.stubNode.style.height=a.bodyNode.scrollHeight+"px";d._doScroll();a.vScrollerNode.scrollTop=a.vScrollerNode.scrollTop||0},0)},_onForcedScroll:function(){var d=this,a=d.grid.body;return d.model.when({start:a.rootStart,count:a.rootCount},function(){a.renderRows(0,a.rootCount||d.model.size()-a.rootStart)})},_onKeyScroll:function(d){var n;var k;var a=this.grid.body,f=this.grid.focus,c=this.domNode;if(!f||f.currentArea()=="body"){if(d.keyCode==b.HOME)a._focusCellRow=
0,c.scrollTop=0;else if(d.keyCode==b.END)a._focusCellRow=a.visualCount-1,c.scrollTop=this.stubNode.clientHeight-a.domNode.offsetHeight;else if(d.keyCode==b.PAGE_UP)k=a._focusCellRow=Math.max(a.renderStart-a.renderCount,0),a=k,this.scrollToRow(a,1);else if(d.keyCode==b.PAGE_DOWN)n=a._focusCellRow=Math.min(a.visualCount-1,a.renderStart+a.renderCount),a=n,this.scrollToRow(a,1);else return;j.stop(d)}}})})},"gridx/core/model/Model":function(){define(["require","dojo/_base/declare","dojo/_base/array","dojo/_base/lang",
"dojo/_base/Deferred","dojo/DeferredList","dojo/_base/connect"],function(l,i,j,g,e,b,h){var m=g.isArrayLike,d=g.isString;return i([],{constructor:function(a){var f=a.cacheClass,f=typeof f=="string"?l(f):f;this.store=a.store;this._exts={};this._cmdQueue=[];this._model=this._cache=new f(this,a);this._createExts(a.modelExtensions||[],a);a=this._model;this._connects=[h.connect(a,"onDelete",this,"onDelete"),h.connect(a,"onNew",this,"onNew"),h.connect(a,"onSet",this,"onSet")]},destroy:function(){j.forEach(this._connects,
h.disconnect);for(var a in this._exts)this._exts[a].destroy()},when:function(){this._oldSize=this.size();this._addCmd({name:"_cmdRequest",scope:this,args:arguments,async:1});return this._exec()},scan:function(a,f){var c=new e,k=a.start||0,n=a.pageSize||this._cache.pageSize||1,d=a.count,b=d>0?k+d:Infinity,m=a.whenScope||this,h=a.whenFunc||m.when,g=function(k){c.progress(k/(d>0?k+d:m.size()));h.call(m,{id:[],range:[{start:k,count:n}]},function(){var c,a,d=[];for(c=k;c<k+n&&c<b;++c)if(a=m.byIndex(c))d.push(a);
else{b=-1;break}if(f(d,k)||c==b)b=-1}).then(function(){b==-1?c.callback():g(k+n)})};g(k);return c},onDelete:function(){},onNew:function(){},onSet:function(){},onSizeChange:function(){},_msg:function(){},_addCmd:function(a){var f=this._cmdQueue,c=f[f.length-1];c&&c.name==a.name&&c.scope==a.scope?c.args.push(a.args||[]):(a.args=[a.args||[]],f.push(a))},_onSizeChange:function(){var a=this._oldSize,f=this._oldSize=this.size();if(a!=f)this.onSizeChange(f,a)},_execEvents:function(a,f){this._onSizeChange();
f&&f.call(a)},_cmdRequest:function(){var a=this;return new b(j.map(arguments,function(f){var c=f[0],k=g.hitch(a,a._execEvents,f[2],f[1]);if(c===null||!f.length)return f=new e,k(),f.callback(),f;return a._model._call("when",[a._normArgs(c),k])}),0,1)},_exec:function(){var a=this,f=a._cache,c=new e,k=a._cmdQueue,n=function(c,k){a._busy=0;f.skipCacheSizeCheck=0;f._checkSize&&f._checkSize();k?c.errback(k):c.callback()},d=function(){if(j.some(k,function(c){return c.name=="_cmdRequest"}))try{for(;k.length;){var a=
k.shift(),f=a.scope[a.name].apply(a.scope,a.args);if(a.async){e.when(f,d,g.partial(n,c));return}}}catch(b){n(c,b);return}n(c)};if(a._busy)return a._busy;a._busy=c;f.skipCacheSizeCheck=1;d();return c},_createExts:function(a,f){a=j.filter(a,function(c){return(c=typeof c=="string"?l(c):c)&&c.prototype});a.sort(function(c,k){return c.prototype.priority-k.prototype.priority});for(var c=0,k=a.length;c<k;++c)if(c==a.length-1||a[c]!=a[c+1]){var n=new a[c](this,f);this._exts[n.name]=n}},_normArgs:function(a){var f,
c=[],k=[],n={range:c,id:k},b=function(c){return typeof c=="number"&&c>=0},e=function(a){if(a&&b(a.start))c.push(a);else if(b(a))c.push({start:a,count:1});else if(m(a))for(f=a.length-1;f>=0;--f)b(a[f])?c.push({start:a[f],count:1}):a[f]&&b(a[f].start)?c.push(a[f]):d(a)&&k.push(a[f]);else d(a)&&k.push(a)};if(a&&(a.index||a.range||a.id))if(e(a.index),e(a.range),m(a.id))for(f=a.id.length-1;f>=0;--f)k.push(a.id[f]);else a.id&&k.push(a.id);else e(a);!c.length&&!k.length&&this.size()<0&&c.push({start:0,count:this._cache.pageSize||
1});return n}})})},"gridx/core/_Module":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/_base/connect"],function(l,i,j,g,e){var b=i.isFunction,l=l([],{constructor:function(b,d){this.grid=b;this.model=b.model;this.loaded=new g;this._cnnts=[];this._sbscs=[];i.mixin(this,d)},destroy:function(){var b=j.forEach;b(this._cnnts,e.disconnect);b(this._sbscs,e.unsubscribe)},arg:function(e,d,a){arguments.length==2&&b(d)&&(a=d,d=void 0);var f=this.grid,
c=this[e];if(!this.hasOwnProperty(e)){var k=this.name+e.substring(0,1).toUpperCase()+e.substring(1);f[k]===void 0?d!==void 0&&(c=d):c=f[k]}this[e]=a&&!a(c)?d:c;return c},connect:function(h,d,a,f,c){var k=this.grid,n=f||this,h=h===k&&typeof d=="string"?e.connect(h,d,function(){var f=arguments;k._eventFlags[d]===c&&(b(a)?a.apply(n,f):b(n[a])&&n[a].apply(n,f))}):e.connect(h,d,n,a);this._cnnts.push(h);return h},batchConnect:function(){for(var b=0,d=arguments,a=d.length;b<a;++b)i.isArrayLike(d[b])&&this.connect.apply(this,
d[b])},subscribe:function(b,d,a){b=e.subscribe(b,a||this,d);this._sbscs.push(b);return b}}),h=l._modules={};l.register=function(b){var d=b.prototype;return h[d.name||d.declaredClass]=b};l._markupAttrs=["id","name","field","width","dataType","!formatter","!decorator","!sortable"];return l})},"gridx/modules/ColumnResizer":function(){define(["dojo/_base/declare","dojo/_base/sniff","dojo/_base/window","dojo/dom","dojo/dom-style","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/query","../core/_Module"],
function(l,i,j,g,e,b,h,m,d,a){function f(c){var a=c.target;if(a){if(/table/i.test(a.tagName)){for(var c=c.offsetX||c.layerX||0,f=0,a=a.rows[0].cells;c>0;)c-=a[f].offsetWidth,f++;return a[f]||null}for(;a&&a.tagName;){if(a.tagName.toLowerCase()=="th")return a;a=a.parentNode}}return null}var c=b.remove;return l(a,{name:"columnResizer",minWidth:20,detectWidth:5,load:function(){var c=this.grid;this.batchConnect([c.header.innerNode,"mousemove","_mousemove"],[c,"onHeaderMouseOut","_mouseout"],[c,"onHeaderMouseDown",
"_mousedown",this,this.name],[j.doc,"mousemove","_docMousemove"],[j.doc,"onmouseup","_mouseup"]);this.loaded.callback()},getAPIPath:function(){return{columnResizer:this}},columnMixin:{setWidth:function(c){this.grid.columnResizer.setWidth(this.id,c)}},setWidth:function(c,a){var f=this.grid,b=this.arg("minWidth"),h,a=parseInt(a,10);a<b&&(a=b);f._columnsById[c].width=a+"px";d('[colid="'+c+'"]',f.domNode).forEach(function(c){h||(h=i("webkit")?c.offsetWidth:e.get(c,"width"));c.style.width=a+"px"});f.header.onRender();
f.body.onRender();f.vLayout.reLayout();this.onResize(c,a,h)},onResize:function(){},_mousemove:function(a){var n=f(a),d=this.grid._eventFlags;if(n&&(this._resizing&&c(n,"gridxHeaderCellOver"),!this._resizing&&n&&!this._ismousedown))a=this._readyToResize=this._isInResizeRange(a),d.onHeaderMouseDown=d.onHeaderCellMouseDown=a?this.name:void 0,b.toggle(j.body(),"gridxColumnResizing",a),a&&c(n,"gridxHeaderCellOver")},_docMousemove:function(c){this._resizing&&this._updateResizerPosition(c)},_mouseout:function(){if(!this._resizing)this._readyToResize=
0,c(j.body(),"gridxColumnResizing")},_updateResizerPosition:function(c){var a=c.pageX-this._startX,f=this._targetCell,d=this.grid,b=d.hScroller,h=0,c=c.pageX-this._gridX,h=this.arg("minWidth");f.offsetWidth+a<h&&(c=this._startX-this._gridX-f.offsetWidth+h);a=b&&b.container.offsetHeight?b.container:d.bodyNode;h=a.parentNode.offsetTop+a.offsetHeight-d.header.domNode.offsetTop;e.set(this._resizer,{top:d.header.domNode.offsetTop+"px",left:c+"px",height:h+"px"})},_showResizer:function(c){if(!this._resizer)this._resizer=
h.create("div",{className:"gridxColumnResizer"},this.grid.domNode,"last"),this.connect(this._resizer,"mouseup","_mouseup");this._resizer.style.display="block";this._updateResizerPosition(c)},_hideResizer:function(){this._resizer.style.display="none"},_mousedown:function(c){var a=this.grid.bodyNode;this._readyToResize?(g.setSelectable(this.grid.domNode,!1),j.doc.onselectstart=function(){return!1},this._resizing=1,this._startX=c.pageX,this._gridX=m.position(a).x-a.offsetLeft,this._showResizer(c)):this._ismousedown=
1},_mouseup:function(a){this._ismousedown=0;if(this._resizing){this._readyToResize=this._resizing=0;c(j.body(),"gridxColumnResizing");g.setSelectable(this.grid.domNode,!0);j.doc.onselectstart=null;var f=this._targetCell,a=a.pageX-this._startX;this.grid.isLeftToRight()||(a=-a);var a=(i("webkit")?f.offsetWidth:e.get(f,"width"))+a,d=this.arg("minWidth");a<d&&(a=d);this.setWidth(f.getAttribute("colid"),a);this._hideResizer()}},_isInResizeRange:function(c){var a=f(c),d;var b=c.target,h=f(c);if(h)if(/table/i.test(b.tagName))d=
0;else{d=c.offsetX;if(d==void 0)d=c.layerX;/th/i.test(b.tagName)||(d+=b.offsetLeft);i("ff")&&/th/i.test(b.tagName)&&(c=d-parseInt(e.get(h.parentNode.parentNode.parentNode,"marginLeft"),10)-h.offsetLeft-h.offsetParent.offsetLeft,c>=0&&(d=c))}else d=1E5;c=this.arg("detectWidth");b=this.grid.isLeftToRight();if(d<c)return b?!!(this._targetCell=a.previousSibling):(this._targetCell=a,1);else if(d>a.offsetWidth-c&&d<=a.offsetWidth)return b?(this._targetCell=a,1):!!(this._targetCell=a.previousSibling);return 0}})})},
"gridx/modules/VLayout":function(){define(["dojo/_base/declare","dojo/dom-geometry","dojo/DeferredList","../core/_Module"],function(l,i,j,g){return l(g,{name:"vLayout",getAPIPath:function(){return{vLayout:this}},preload:function(){var e=this,b=e.grid;e.connect(b,"_onResizeEnd",function(b,g){var d,a=[];for(d in g)a.push(g[d]);(new j(a)).then(function(){e.reLayout()})});b.autoHeight?e.connect(b.body,"onRender","reLayout"):e.connect(b,"setColumns",function(){setTimeout(function(){e.reLayout()},0)})},
load:function(e,b){var h=this;b.then(function(){h._defs&&h._mods?(new j(h._defs)).then(function(){h._layout();h.loaded.callback()}):h.loaded.callback()})},register:function(e,b,h,g,d){this._defs=this._defs||[];this._mods=this._mods||{};this._mods[h]=this._mods[h]||[];this._defs.push(d||e.loaded);this._mods[h].push({p:g||0,mod:e,nodeName:b})},reLayout:function(){var e,b=0,h;for(e in this._mods)(h=this.grid[e])&&(b+=i.getMarginBox(h).h);this._updateHeight(b)},_layout:function(){var e,b=0,h=this._mods,
g,d,a,f,c;for(e in h)if(g=this.grid[e]){a=h[e];a.sort(function(c,a){return c.p-a.p});for(d=0;d<a.length;++d)f=a[d].mod,c=a[d].nodeName,f&&f[c]&&g.appendChild(f[c]);b+=i.getMarginBox(g).h}this._updateHeight(b)},_updateHeight:function(e){var b=this.grid,h=b.domNode,g=b.mainNode.style;b.autoHeight?b.vScroller.loaded.then(function(){var d=b.bodyNode.lastChild,d=d?d.offsetTop+d.offsetHeight:0;h.style.height=d+e+"px";g.height=d+"px"}):g.height=h.clientHeight-e+"px"}})})},"gridx/util":function(){define({stopEvent:function(l){l&&
l.stopPropagation&&l.preventDefault&&(l.stopPropagation(),l.preventDefault())},biSearch:function(l,i){var j=0,g=l.length,e;for(e=Math.floor((j+g)/2);j+1<g;e=Math.floor((j+g)/2))i(l[e])>0?g=e:j=e;return l.length&&i(l[j])>=0?j:g}})},"gridx/core/model/cache/_Cache":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","../_Extension"],function(l,i,j,g,e){var b=j.hitch,h=j.mixin,m=i.indexOf;return l(e,{constructor:function(d,a){var f=this,c=f.store=a.store,
k=c.fetch;f.columns=a.columns;!k&&c.notify?f.connect(c,"notify",function(c,a){c===void 0?f._onDelete(a):a===void 0?f._onNew(c):f._onSet(c)}):(f.connect(c,k?"onSet":"put","_onSet"),f.connect(c,k?"onNew":"add","_onNew"),f.connect(c,k?"onDelete":"remove","_onDelete"));f.clear();f._mixinAPI("byIndex","byId","indexToId","idToIndex","size","treePath","hasChildren","keep","free")},destroy:function(){this.inherited(arguments);this.clear()},clear:function(){this._filled=0;this._priority=[];this._struct={};
this._cache={};this._size={};this._struct[""]=[];this._size[""]=-1},byIndex:function(d,a){this._init("byIndex",arguments);return this._cache[this.indexToId(d,a)]},byId:function(d){this._init("byId",arguments);return this._cache[d]},indexToId:function(d,a){this._init("indexToId",arguments);var f=this._struct[a||""];return typeof d=="number"&&d>=0?f&&f[d+1]:void 0},idToIndex:function(d){this._init("idToIndex",arguments);var a=this._struct,a=m(a[a[d]&&a[d][0]]||[],d);return a>0?a-1:-1},treePath:function(d){for(var a=
this._struct,f=[];d!==void 0;)f.unshift(d),d=a[d]&&a[d][0];return f[0]!==""?[]:(f.pop(),f)},hasChildren:function(d){var a=this.store,f;this._init("hasChildren",arguments);f=this.byId(d);return a.hasChildren&&a.hasChildren(d,f&&f.item)},size:function(d){this._init("size",arguments);var a=this._size[d||""];return a>=0?a:-1},onBeforeFetch:function(){},onAfterFetch:function(){},onSetColumns:function(d){var a,f,c,k;this.columns=d;for(a in this._cache)for(c in f=this._cache[a],d)k=d[c],f.data[c]=this._formatCell(k.id,
f.rawData)},_itemToObject:function(d){var a=this.store;if(a.fetch){var f={};i.forEach(a.getAttributes(d),function(c){f[c]=a.getValue(d,c)});return f}return d},_formatCell:function(d,a){var f=this.columns[d];return f.formatter?f.formatter(a):a[f.field||d]},_formatRow:function(d){var a=this.columns,f={},c;for(c in a)f[c]=this._formatCell(c,d);return f},_addRow:function(d,a,f,c,k){var k=k||"",b=this._struct,h=this._priority,e=b[k];if(!e)throw Error("Fatal error of cache._addRow: parent item "+k+" of "+
d+" is not loaded");if(e[a+1]){if(e[a+1]!==d)throw Error("Fatal error of cache._addRow: different row id "+d+" and "+e[a+1]+" for same row index "+a);}else e[a+1]=d;b[d]=b[d]||[k];k||(a=m(h,d),a>=0&&h.splice(a,1),h.push(d));this._cache[d]={data:this._formatRow(f),rawData:f,item:c};this._filled=1},_loadChildren:function(d){var a=this,f=new g,c=a.store,k=a.byId(d),k=k&&c.getChildren&&c.getChildren(k.item)||[];g.when(k,function(k){for(var b=0,h,e=a._size[d]=k.length;b<e;++b)h=k[b],a._addRow(c.getIdentity(h),
b,a._itemToObject(h),h,d);f.callback()},b(f,f.errback));return f},_onBegin:function(d){this._size[""]=parseInt(d,10)},_onComplete:function(d,a,f){try{for(var c=0,k;k=f[c];++c)this._addRow(this.store.getIdentity(k),a+c,this._itemToObject(k),k);d.callback()}catch(b){d.errback(b)}},_storeFetch:function(d){var a=this.store,f=new g,c=h({},this.options||{},d),k=b(this,this._onBegin),d=b(this,this._onComplete,f,d.start),n=b(f,f.errback);this.onBeforeFetch();a.fetch?a.fetch(h(c,{onBegin:k,onComplete:d,onError:n})):
(a=a.query(c.query,c),g.when(a.total,k),g.when(a,d,n));f.then(b(this,this.onAfterFetch));return f},_onSet:function(d){var a=this.store.getIdentity(d),f=this.idToIndex(a),c=this.treePath(a);c.length&&this._addRow(a,f,this._itemToObject(d),d,c.pop());this.onSet(a,f,this._cache[a])},_onNew:function(d,a){var f=this.store,c=this._itemToObject(d),k=a&&a[f.fetch?"item":"parent"];k&&f.getIdentity(k);var b=this._size[""];this.clear();this.onNew(f.getIdentity(d),0,{data:this._formatRow(c),rawData:c,item:d});
!k&&b>=0&&(this._size[""]=b+1,this.model._onSizeChange())},_onDelete:function(b){var a=this.store,f=this._struct,b=a.fetch?a.getIdentity(b):b,c=this.treePath(b);if(c.length){var k,n,a=[b],h=c.pop(),e=this._size,g=e[""],i=m(f[h],b);f[h].splice(i,1);--e[h];for(k=0;k<a.length;++k)if(c=f[a[k]])for(n=c.length-1;n>0;--n)a.push(c[n]);for(k=a.length-1;k>=0;--k)n=a[k],delete this._cache[n],delete f[n],delete e[n];k=m(this._priority,b);k>=0&&this._priority.splice(k,1);this.onDelete(b,i-1);!h&&g>=0&&(e[""]=
g-1,this.model._onSizeChange())}else this.onDelete(b)}})})},"gridx/Grid":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-class","dojo/dom-geometry","dojo/_base/query","dijit/_WidgetBase","dijit/_FocusMixin","dijit/_TemplatedMixin","dojo/text!./templates/Grid.html","./core/Core","./core/_Module","./modules/Header","./modules/Body","./modules/VLayout","./modules/HLayout","./modules/VScroller","./modules/HScroller","./modules/ColumnWidth"],function(l,i,j,g,e,b,
h,m,d,a,f,c,k,n,u,s,w,r,v){var q=i.forEach,o=function(){},l=l("gridx.Grid",[h,d,m,f],{templateString:a,coreModules:[k,n,u,s,w,r,v],coreExtensions:[],postCreate:function(){this.inherited(arguments);this._eventFlags={};this.modules=this.coreModules.concat(this.modules||[]);this.modelExtensions=this.coreExtensions.concat(this.modelExtensions||[]);g.toggle(this.domNode,"gridxRtl",!this.isLeftToRight());this.lastFocusNode.setAttribute("tabIndex",this.domNode.getAttribute("tabIndex"));this._initEvents(this._compNames,
this._eventNames);this._reset(this);this._postCreate()},startup:function(){this._started||(this.inherited(arguments),this._deferStartup.callback())},destroy:function(){this._uninit();this.inherited(arguments)},resize:function(c){var a={};c&&(this.autoWidth&&delete c.w,this.autoHeight&&delete c.h,e.setMarginBox(this.domNode,c));this._onResizeBegin(c,a);this._onResizeEnd(c,a)},_onResizeBegin:function(){},_onResizeEnd:function(){},_compNames:["Cell","HeaderCell","Row","Header"],_eventNames:["Click",
"DblClick","MouseDown","MouseUp","MouseOver","MouseOut","MouseMove","ContextMenu","KeyDown","KeyPress","KeyUp"],_initEvents:function(c,a){var k=this;q(c,function(c){q(a,function(a){a="on"+c+a;k[a]=k[a]||o})})},_connectEvents:function(c,a,k){q(this._eventNames,function(f){this.connect(c,"on"+f.toLowerCase(),j.hitch(k,a,f))},this)},_isConnected:function(c){return this[c]!==o}});l.markupFactory=function(a,k,f){if(!a.structure&&k.nodeName.toLowerCase()=="table"){var d=a.structure=[];b("thead > tr > th",
k).forEach(function(a){var k={};q(c._markupAttrs,function(c){c[0]=="!"?(c=c.slice(1),k[c]=eval(a.getAttribute(c))):k[c]=a.getAttribute(c)});k.name=k.name||a.innerHTML;d.push(k)})}return new f(a,k)};return l})},"gridx/modules/select/_Base":function(){define(["dojo/_base/declare","dojo/_base/connect","../../core/_Module"],function(l,i,j){return l(j,{getAPIPath:function(){var g={select:{}};g.select[this._type]=this;return g},preload:function(){var g=this,e=g.grid;g.subscribe("gridClearSelection_"+e.id,
function(b){b!=g._type&&g.clear()});g.connect(e.body,"onRender","_onRender");g.arg("multiple")&&e.domNode.setAttribute("aria-multiselectable",!0);g._init()},enabled:!0,multiple:!0,holdingCtrl:!1,onSelected:function(){},onDeselected:function(){},onHighlightChange:function(){},_getMarkType:function(){},_select:function(g,e){var b=1;this.arg("enabled")&&(this.arg("multiple")&&(e||this.arg("holdingCtrl"))?b=!this.isSelected(g):this.clear(),i.publish("gridClearSelection_"+this.grid.id,[this._type]),this._markById(g,
b))}})})},"gridx/nls/Body":function(){define({root:{loadingInfo:"Loading...",emptyInfo:"No items to display",loadFailInfo:"Failed to load data!"}})},"gridx/modules/SingleSort":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/keys","../core/model/extensions/Sort","../core/_Module"],function(l,i,j,g,e){return l(e,{name:"sort",forced:["header"],modelExtensions:[g],getAPIPath:function(){return{sort:this}},preload:function(){var b=this,h=b.grid,e;b.connect(h,"onHeaderCellClick","_onClick");
b.connect(h,"onHeaderCellKeyDown","_onKeyDown");h.persist&&(e=h.persist.registerAndLoad("sort",function(){return[{colId:b._sortId,descending:b._sortDescend}]}));e=e||b.arg("preSort");i.isArrayLike(e)&&(e=e[0]);if(e&&e.colId)b._sortId=e.colId,b._sortDescend=e.descending,b.model.sort([e])},load:function(){var b=this,e,g=function(){b._sortId&&b._updateHeader(b._sortId,b._sortDescend)};b.connect(b.grid.header,"onRender",g);for(e in b.grid._columnsById)b._initHeader(e);g();b.loaded.callback()},columnMixin:{sort:function(b,
e){this.grid.sort.sort(this.id,b,e);return this},isSorted:function(){return this.grid.sort.isSorted(this.id)},clearSort:function(b){this.isSorted()&&this.grid.sort.clear(b);return this},isSortable:function(){var b=this.grid._columnsById[this.id];return b.sortable||b.sortable===void 0},setSortable:function(b){this.grid._columnsById[this.id].sortable=!!b;return this}},sort:function(b,e,g){var d=this.grid,a=d._columnsById[b];if(a&&(a.sortable||a.sortable===void 0))(this._sortId!=b||this._sortDescend==
!e)&&this._updateHeader(b,e),this.model.sort([{colId:b,descending:e}]),g||d.body.refresh()},isSorted:function(b){if(b==this._sortId)return this._sortDescend?-1:1;return 0},clear:function(b){if(this._sortId!==null)this._initHeader(this._sortId),this._sortId=this._sortDescend=null,this.model.sort(),b||this.grid.body.refresh()},getSortData:function(){return this._sortId?[{colId:this._sortId,descending:this._sortDescend}]:null},_sortId:null,_sortDescend:null,_initHeader:function(b){var e=this.grid.header.getHeaderNode(b);
e.innerHTML=["<div class='gridxSortNode'>",this.grid.column(b,1).name(),"</div>"].join("");e.removeAttribute("aria-sort")},_updateHeader:function(b,e){this._sortId&&this._sortId!=b&&this._initHeader(this._sortId);this._sortId=b;this._sortDescend=!!e;var g=this.grid,d=g.header.getHeaderNode(b);d.innerHTML=["<div class='gridxSortNode ",e?"gridxSortDown":"gridxSortUp","'><div class='gridxArrowButtonChar'>",e?"&#9662;":"&#9652;","</div><div role='presentation' class='gridxArrowButtonNode'></div><div class='gridxColCaption'>",
g.column(b,1).name(),"</div></div>"].join("");d.setAttribute("aria-sort",e?"descending":"ascending");g.vLayout.reLayout()},_onClick:function(b){this.sort(b.columnId,this._sortId!=b.columnId?0:!this._sortDescend)},_onKeyDown:function(b){b.keyCode==j.ENTER&&this._onClick(b)}})})},"gridx/modules/select/_RowCellBase":function(){define(["dojo/_base/declare","dojo/_base/lang","./_Base","../../core/model/extensions/Mark"],function(l,i,j,g){return l(j,{modelExtensions:[g],selectById:function(e,b){var h=this.model;
this.arg("enabled")&&(h.markById(e,1,this._getMarkType(b)),h.when())},deselectById:function(e,b){var h=this.model;this.arg("enabled")&&(h.markById(e,0,this._getMarkType(b)),h.when())},isSelected:function(e,b){return this.model.isMarked(e,this._getMarkType(b))},_init:function(){var e=this.model;this.batchConnect([e,"onMarked",i.hitch(this,"_onMark",1)],[e,"onMarkRemoved",i.hitch(this,"_onMark",0)])}})})},"gridx/modules/HScroller":function(){define(["dojo/_base/declare","dojo/dom-style","dojo/_base/sniff",
"dojo/_base/Deferred","dojox/html/metrics","../core/_Module"],function(l,i,j,g,e,b){return l(b,{name:"hScroller",forced:["header"],getAPIPath:function(){return this.grid.autoWidth?{}:{hScroller:this}},constructor:function(){this.grid._initEvents(["H"],["Scroll"])},preload:function(){var b=this,m=b.grid,d=m.hScrollerNode;if(!m.autoWidth&&(b.domNode=d,b.container=d.parentNode,b.stubNode=d.firstChild,m.vLayout.register(b,"container","footerNode",0),d.style.display="block",b.batchConnect([m.header,"onRender",
"refresh"],[d,"onscroll","_onScroll"],[m,"_onResizeBegin",function(a,f){f.hScroller=new g}],[m,"_onResizeEnd",function(a,f){g.when(f.header,function(){b.refresh();f.hScroller.callback()})}]),j("ie")))d.style.height=e.getScrollbar().h+"px"},scroll:function(b){var e=this.domNode;if((j("webkit")||j("ie")<8)&&!this.grid.isLeftToRight())b=e.scrollWidth-e.offsetWidth-b;e.scrollLeft=b},refresh:function(){var b=this.grid,e=b.isLeftToRight(),d=e?"marginLeft":"marginRight",e=e?"marginRight":"marginLeft",a=
b.hLayout.lead,f=b.hLayout.tail,c=(b.domNode.clientWidth||i.get(b.domNode,"width"))-a-f,k=b.header.innerNode,n=i.get(k,"paddingLeft")||0,g=this.domNode.style,k=k.firstChild.offsetWidth+n,s=g.display,j=k<=c?"none":"block";g[d]=a+n+"px";g[e]=f+"px";g.width=(c-n<0?0:c-n)+"px";this.stubNode.style.width=(k-n<0?0:k-n)+"px";g.display=j;s=="block"&&j=="none"&&b.vLayout.reLayout()},_lastLeft:0,_onScroll:function(){var b=this.domNode.scrollLeft;if((j("webkit")||j("ie")<8)&&!this.grid.isLeftToRight())b=this.domNode.scrollWidth-
this.domNode.offsetWidth-b;if(this._lastLeft!=b)this._lastLeft=b,this._doScroll()},_doScroll:function(){var b=this.grid;b.bodyNode.scrollLeft=this.domNode.scrollLeft;b.onHScroll(this._lastLeft)}})})},"gridx/core/model/cache/Sync":function(){define(["dojo/_base/declare","dojo/_base/Deferred","./_Cache"],function(l,i,j){return l(j,{keep:function(){},free:function(){},when:function(g,e){var b=new i;try{e&&e(),b.callback()}catch(h){b.errback(h)}return b},_init:function(){this._filled||(this._storeFetch({start:0}),
this.store.getChildren&&this._fetchChildren())},_fetchChildren:function(){for(var g=this._struct,e=g[""].slice(1),b;e.length;)b=e.shift(),i.when(this._loadChildren(b),function(){[].push.apply(e,g[b].slice(1))})}})})},"gridx/modules/HLayout":function(){define(["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/DeferredList","../core/_Module"],function(l,i,j,g,e,b,h){return l(h,{name:"hLayout",getAPIPath:function(){return{hLayout:this}},load:function(b,
d){var a=this;d.then(function(){a._layout();a.loaded.callback()})},lead:0,tail:0,register:function(b,d,a){var f=this._regs=this._regs||[];b||(b=new i,b.callback());f.push([b,d,a])},onUpdateWidth:function(){},_layout:function(){var h=this,d=h._regs;if(d){var a=0,f=0,c=j.map(d,function(c){return c[0]});(new b(c)).then(function(){j.forEach(d,function(c){var b=g.getMarginBox(c[1]).w||e.get(c[1],"width");c[2]?f+=b:a+=b});h.lead=a;h.tail=f;h.onUpdateWidth(a,f)})}else h.onUpdateWidth(0,0)}})})},"gridx/core/Cell":function(){define(["dojo/_base/declare"],
function(l){return l([],{constructor:function(i,j,g){this.grid=i;this.model=i.model;this.row=j;this.column=g},data:function(){return this.model.byId(this.row.id).data[this.column.id]},rawData:function(){var i=this.column.field();return i&&this.model.byId(this.row.id).rawData[i]},setRawData:function(i){var j={};j[this.column.field()]=i;return this.row.setRawData(j)}})})},"gridx/core/model/extensions/Mark":function(){define(["dojo/_base/declare","dojo/_base/array","../_Extension"],function(l,i,j){return l(j,
{name:"move",priority:5,constructor:function(g){this.clear();this._mixinAPI("isMarked","getMarkedIds","markById","markByIndex","clearMark");g.onMarked=function(){};g.onMarkRemoved=function(){};this.connect(g,"_msg","_receiveMsg");g._spTypes={}},clear:function(){this._byId={}},clearMark:function(g){this._byId[this._initMark(g)]={}},getMarkedIds:function(g){var e=[],b;if(g=this._byId[this._initMark(g)])for(b in g)e.push(b);return e},isMarked:function(g,e){return!!this._byId[this._initMark(e)][g]},markById:function(g,
e,b){this._cmd(g,e,b,1)},markByIndex:function(g,e,b){g>=0&&g<Infinity&&this._cmd(g,e,b)},_mark:function(g,e,b){var b=this._initMark(b),h=this.isMarked(g,b);e&&!h?this._addMark(g,b):!e&&h&&this._removeMark(g,b)},_cmdMark:function(){var g=this,e=arguments,b=[],h=g.model._model;i.forEach(e,function(e){e[3]||b.push({start:e[0],count:1})});return h._call("when",[{id:[],range:b},function(){i.forEach(e,function(b){b[3]||(b[0]=h._call("indexToId",[b[0]]));b[0]&&g._mark.apply(g,b)})}])},_onDelete:function(g){var e,
b=this._byId;for(e in b)delete b[this._initMark(e)][g];this.onDelete.apply(this,arguments)},_initMark:function(g){var e=this._byId,g=g||"select";e[g]=e[g]||{};return g},_addMark:function(g,e){var b=this._initMark(e);this._byId[b][g]=1;this.model.onMarked(g,b)},_removeMark:function(g,e){var b=this._initMark(e);delete this._byId[b][g];this.model.onMarkRemoved(g,b)},_cmd:function(){this.model._addCmd({name:"_cmdMark",scope:this,args:arguments,async:1})},_receiveMsg:function(g,e){if(g=="filter"){var b,
h=this.model._spTypes,i;for(b in h)if(h[b])for(i in this._byId[b])e[i]||this._removeMark(i,b)}}})})},"gridx/modules/Body":function(){define(["dojo/_base/declare","dojo/_base/query","dojo/_base/array","dojo/dom-construct","dojo/dom-class","dojo/_base/Deferred","dojo/_base/sniff","dojo/keys","../core/_Module","../util","dojo/i18n!../nls/Body"],function(l,i,j,g,e,b,h,m,d,a,f){return l(d,{name:"body",optional:["tree"],getAPIPath:function(){return{body:this}},preload:function(){var c=this.grid,a=this.domNode=
c.bodyNode;c.emptyNode.innerHTML=this.arg("loadingInfo",f.loadingInfo);c._connectEvents(a,"_onMouseEvent",this);this._initFocus()},load:function(){var c=this,a=c.model,b=c.grid;c.batchConnect([a,"onDelete","_onDelete"],[a,"onSet","_onSet"],[a,"onSizeChange","_onSizeChange"],[b,"onRowMouseOver","_onRowMouseOver"],[b,"onCellMouseOver","_onCellMouseOver"],[b,"onCellMouseOut","_onCellMouseOver"],[b.bodyNode,"onmouseleave",function(){var a=i(".gridxRowOver",c.domNode)[0];a&&e.remove(a,"gridxRowOver")}],
[b,"setColumns",function(){c.refresh()}]);a.when({},function(){var f=c.rootCount,f=c.rootCount=f?f:a.size();c.visualCount=b.tree?b.tree.getVisualSize(c.rootStart,f):f;c.loaded.callback()}).then(null,function(a){c._loadFail(a);c.loaded.callback()})},destroy:function(){this.inherited(arguments);this.domNode.innerHTML=""},rowMixin:{node:function(){return this.grid.body.getRowNode({rowId:this.id})},visualIndex:function(){var c=this.id;return this.grid.body.getRowInfo({rowId:c,rowIndex:this.index(),parentId:this.model.treePath(c).pop()}).visualIndex}},
cellMixin:{node:function(){return this.grid.body.getCellNode({rowId:this.row.id,cellId:this.column.id})}},getRowNode:function(c){return(c=this._getRowNodeQuery(c))?i(c,this.domNode)[0]||null:null},getCellNode:function(c){var a=c.colId,b=this._getRowNodeQuery(c);if(b){if(!a&&typeof c.colIndex=="number")a=this.grid._columns[c.colIndex].id;b+=" [colid='"+a+"'].gridxCell";return i(b,this.domNode)[0]||null}return null},getRowInfo:function(c){var a=this.model,b=this.grid,f=c.rowId;if(f)c.rowIndex=a.idToIndex(f),
c.parentId=a.treePath(f).pop();if(typeof c.rowIndex=="number"&&c.rowIndex>=0)c.visualIndex=b.tree?b.tree.getVisualIndexByRowInfo(parentId,rowIndex,this.rootStart):c.rowIndex-this.rootStart;else if(typeof c.visualIndex=="number"&&c.visualIndex>=0)b.tree?(b=b.tree.getRowInfoByVisualIndex(c.visualIndex,this.rootStart),c.rowIndex=b.start,c.parentId=b.parentId):c.rowIndex=this.rootStart+c.visualIndex;else return c;c.rowId=f||a.indexToId(c.rowIndex,c.parentId);return c},refresh:function(c){var a=this;delete a._err;
return a.model.when({}).then(function(){var f=a.renderStart,d=a.renderCount;if(typeof c=="number"&&c>=0){c=f>c?f:c;var e=f+d-c,f=i('[visualindex="'+c+'"]',a.domNode)[0],d=[],h=[];if(f){var j=a._buildRows(c,e,d,h);if(j){g.place(j,f,"before");for(var j=0,m=h.length;j<m;++j)a.onAfterRow.apply(a,h[j])}}for(;f;)h=f.nextSibling,g.destroy(f),f=h;b.when(a._buildUncachedRows(d),function(){a.onRender(c,e)})}else a.renderRows(f,d,0,1),a.onForcedScroll()},function(c){a._loadFail(c)})},refreshCell:function(c,
a){var f=new b,d=this,e=d.model,g=d.grid,h=g._columns[a],i=h&&d.getCellNode({visualIndex:c,colId:h.id});if(i){var j,m=d.getRowInfo({visualIndex:c}),p=m.rowIndex,t=m.parentId;e.when({start:p,count:1,parentId:t},function(){if(j=e.byIndex(p,t))m.rowId=e.indexToId(p,t),i.innerHTML=d._buildCellContent(h,m,j.data,g.tree&&j.data[h.id]===void 0),d.onAfterCell(i,m,h,j)}).then(function(){f.callback(!!j)});return f}f.callback(0);return f},rootStart:0,rootCount:0,renderStart:0,renderCount:0,visualStart:0,visualCount:0,
autoUpdate:1,autoChangeSize:1,updateRootRange:function(c,a){var b=this.grid.tree,b=this.visualCount=b?b.getVisualSize(c,a):a;this.rootStart=c;this.rootCount=a;if(this.renderStart+this.renderCount>b&&(this.renderStart=b-this.renderCount,this.renderStart<0))this.renderStart=0,this.renderCount=b;if(!this.renderCount&&b)this.onForcedScroll()},renderRows:function(c,a,d,e){var i=this,j=i.grid,m="",l=[],q=[],o=i.domNode,p=j.emptyNode,t=i.arg("emptyInfo",f.emptyInfo);if(!i._err)if(a>0){p.innerHTML=i.arg("loadingInfo",
f.loadingInfo);d!="top"&&d!="bottom"&&i.model.free();m=i._buildRows(c,a,l,q);if(d=="top")i.renderCount+=i.renderStart-c,i.renderStart=c,g.place(m,o,"first");else if(d=="bottom")i.renderCount=c+a-i.renderStart,g.place(m,o,"last");else{i.renderStart=c;i.renderCount=a;d=e?o.scrollTop:0;o.scrollTop=0;if(h("ie"))for(;o.childNodes.length;)o.removeChild(o.firstChild);o.innerHTML=m;o.scrollTop=d;o.scrollLeft=j.hScrollerNode.scrollLeft;p.innerHTML=m?"":t;i.onUnrender()}j=0;for(m=q.length;j<m;++j)i.onAfterRow.apply(i,
q[j]);b.when(i._buildUncachedRows(l),function(){i.onRender(c,a)})}else if(!{top:1,bottom:1}[d])o.scrollTop=0,o.innerHTML="",p.innerHTML=t,i.onUnrender(),i.model.free()},unrenderRows:function(c,a){if(c>0){var b=0,f,d=this.domNode;if(a=="post")for(;b<c&&d.lastChild;++b)f=d.lastChild.getAttribute("rowid"),this.model.free(f),d.removeChild(d.lastChild),this.onUnrender(f);else{for(var e=d.scrollTop;b<c&&d.firstChild;++b)f=d.firstChild.getAttribute("rowid"),this.model.free(f),e-=d.firstChild.offsetHeight,
d.removeChild(d.firstChild),this.onUnrender(f);this.renderStart+=b;d.scrollTop=e>0?e:0}this.renderCount-=b;this.model.when()}},onAfterRow:function(){},onAfterCell:function(){},onRender:function(){},onUnrender:function(){},onDelete:function(){},onSet:function(){},collectCellWrapper:function(){},onMoveToCell:function(){},onForcedScroll:function(){},_getRowNodeQuery:function(c){var a;c.rowId?a="[rowid='"+c.rowId+"']":typeof c.rowIndex=="number"&&c.rowIndex>=0?(a="[rowindex='"+c.rowIndex+"']",c.parentId&&
(a+="[parentid='"+c.parentId+"']")):typeof c.visualIndex=="number"&&c.visualIndex>=0&&(a="[visualindex='"+c.visualIndex+"']");return a&&a+".gridxRow"},_buildRows:function(c,a,b,f){for(var a=c+a,d=[],e=this.model,g=this.domNode.scrollWidth;c<a;++c){var h=this.getRowInfo({visualIndex:c}),i=e.byIndex(h.rowIndex,h.parentId);d.push('<div class="gridxRow ',c%2?"gridxRowOdd":"",'" role="row" visualindex="',c);i?(e.keep(h.rowId),d.push('" rowid="',h.rowId,'" rowindex="',h.rowIndex,'" parentid="',h.parentId,
'">',this._buildCells(i.data,h),"</div>"),f.push([h,i])):(d.push('"><div class="gridxRowDummy" style="width:',g,'px;"></div></div>'),h.start=h.rowIndex,h.count=1,b.push(h))}return d.join("")},_buildUncachedRows:function(c){var a=this;return c.length&&a.model.when(c,function(){try{for(var b=0,f=c.length;b<f;++b)a._buildRowContent(c[b])}catch(d){a._loadFail(d)}}).then(null,function(c){a._loadFail(c)})},_loadFail:function(c){console.error(c);this.grid.emptyNode.innerHTML=this.arg("loadFailInfo",f.loadFailInfo);
this.domNode.innerHTML="";this._err=1},_buildRowContent:function(c){var a=this.model,b=i('[visualindex="'+c.visualIndex+'"]',this.domNode)[0];if(b){var f=a.byIndex(c.rowIndex,c.parentId);if(f)c.rowId=a.indexToId(c.rowIndex,c.parentId),a.keep(c.rowId),b.setAttribute("rowid",c.rowId),b.setAttribute("rowindex",c.rowIndex),b.setAttribute("parentid",c.parentId||""),b.innerHTML=this._buildCells(f.data,c),this.onAfterRow(c,f);else throw Error("Row is not in cache:"+c.rowIndex);}},_buildCells:function(c,
a){for(var b,f,d=this.grid,e=d._columns,g=d.focus&&d.focus.currentArea()=="body",h=['<table class="gridxRowTable" role="presentation" border="0" cellpadding="0" cellspacing="0"><tr>'],i=0,j=e.length;i<j;++i)b=e[i],f=d.tree&&c[b.id]===void 0,h.push('<td class="gridxCell '),f&&h.push("gridxPaddingCell"),g&&this._focusCellRow===a.visualIndex&&this._focusCellCol===i&&h.push("gridxCellFocus"),h.push('" role="gridcell" tabindex="-1" colid="',b.id,'" style="width: ',b.width,'">',this._buildCellContent(b,
a,c,f),"</td>");h.push("</tr></table>");return h.join("")},_buildCellContent:function(c,a,b,f){var d="";f||(d=this._wrapCellData(c.decorator?c.decorator(b[c.id],a.rowId,a.visualIndex):b[c.id],a.rowId,c.id));return!d&&h("ie")<8?"$nbsp;":d},_wrapCellData:function(c,a,b){var f=[];this.collectCellWrapper(f,a,b);var d=f.length-1;for(d>0&&f.sort(function(c,a){return c.priority-a.priority});d>=0;--d)c=f[d].wrap(c,a,b);return c},_onMouseEvent:function(c,a){var b=this.grid,f="onCell"+c,d="onRow"+c;if(b._isConnected(f)||
b._isConnected(d))if(this._decorateEvent(a),a.rowId){if(a.columnId)b[f](a);b[d](a)}},_decorateEvent:function(c){for(var a=c.target||c.originalTarget,b=this.grid,f;a&&a!=b.bodyNode;a=a.parentNode){f=a.tagName.toLowerCase();if(f=="td"&&e.contains(a,"gridxCell")){var d=b._columnsById[a.getAttribute("colid")];c.cellNode=a;c.columnId=d.id;c.columnIndex=d.index}if(f=="div"&&e.contains(a,"gridxRow")){c.rowId=a.getAttribute("rowid");c.parentId=a.getAttribute("parentid");c.rowIndex=parseInt(a.getAttribute("rowindex"),
10);c.visualIndex=parseInt(a.getAttribute("visualindex"),10);break}}},_onSet:function(a,b,f){if(this.autoUpdate){var d=this.getRowNode({rowId:a});if(d&&f){var e=this.getRowInfo({rowId:a,rowIndex:b});d.innerHTML=this._buildCells(f.data,e);this.onAfterRow(e,f);this.onSet(a,b,f);this.onRender(b,1)}}},_onDelete:function(a){if(this.autoUpdate){var b=this.getRowNode({rowId:a});if(b){for(var f=0,d=parseInt(b.getAttribute("rowindex"),10),e=b.getAttribute("parentid"),h={id:1},i=[b],m,l=[a],b=b.nextSibling;b&&
h[b.getAttribute("parentid")];b=b.nextSibling)m=b.getAttribute("rowid"),l.push(m),i.push(b),h[m]=1;for(;b;b=b.nextSibling)b.getAttribute("parentid")==e&&b.setAttribute("rowindex",parseInt(b.getAttribute("rowindex"),10)-1),b.setAttribute("visualindex",parseInt(b.getAttribute("visualindex"),10)-1),++f;j.forEach(i,g.destroy);j.forEach(l,this.onUnrender,this);this.autoChangeSize&&this.rootStart===0&&!e&&this.updateRootRange(0,this.rootCount-1);this.onDelete(a,d);this.onRender(d,f)}}},_onSizeChange:function(a,
b){if(this.autoChangeSize&&this.rootStart===0&&(this.rootCount===b||b<0))this.updateRootRange(0,a),this.refresh()},_onRowMouseOver:function(a){var b=i("> div.gridxRowOver",this.domNode)[0],a=this.getRowNode({rowId:a.rowId});b!=a&&(b&&e.remove(b,"gridxRowOver"),e.add(a,"gridxRowOver"))},_onCellMouseOver:function(a){e.toggle(a.cellNode,"gridxCellOver",a.type=="mouseover")},_focusCellCol:0,_focusCellRow:0,_initFocus:function(){var a=this,b=a.grid,f=b.isLeftToRight(),d=b.bodyNode,e=b.focus;e&&(e.registerArea({name:"body",
priority:1,focusNode:d,scope:a,doFocus:a._doFocus,doBlur:a._blurCell,onFocus:a._onFocus,onBlur:a._blurCell}),a.connect(b.mainNode,"onkeypress",function(d){if(e.currentArea()=="body"&&(!b.tree||!d.ctrlKey)){e._noBlur=1;var h={},g=f?1:-1;h[m.LEFT_ARROW]=[0,-g,d];h[m.RIGHT_ARROW]=[0,g,d];h[m.UP_ARROW]=[-1,0,d];h[m.DOWN_ARROW]=[1,0,d];a._moveFocus.apply(a,h[d.keyCode]||[]);e._noBlur=0}}),a.connect(b,"onCellClick",function(b){a._focusCellRow=b.visualIndex;a._focusCellCol=b.columnIndex}),a.connect(a,"onRender",
function(b,f){a._focusCellRow>=b&&a._focusCellRow<b+f&&e.currentArea()=="body"&&a._focusCell()}),b.hScroller&&a.connect(d,"onscroll",function(){b.hScroller.scroll(!f&&(h("webkit")||h("ie")<8)?d.scrollWidth-d.offsetWidth-d.scrollLeft:d.scrollLeft)}))},_doFocus:function(a){return this._focusCell(a)||this._focusCell(0,-1,-1)},_focusCell:function(c,b,f){a.stopEvent(c);f=f>=0?f:this._focusCellCol;b=b>=0?b:this._focusCellRow;if(c=this.getCellNode({visualIndex:b,colId:this.grid._columns[f].id})){var d=i(".gridxCellFocus",
this.domNode)[0];if(c!=d)d&&e.remove(d,"gridxCellFocus"),e.add(c,"gridxCellFocus"),this._focusCellRow=b,this._focusCellCol=f;h("ie")<8||c.focus()}else if(!this.grid.rowCount())return this.grid.emptyNode.focus(),!0;return c},_moveFocus:function(c,b,f){if(c||b){a.stopEvent(f);var d,e,h=this,g=h.grid,i=g._columns,j=h.visualCount;d=h._focusCellRow+c;d=d<0?0:d>=j?j-1:d;e=h._focusCellCol+b;e=e<0?0:e>=i.length?i.length-1:e;g.vScroller.scrollToRow(d).then(function(){h._focusCell(0,d,e);h.onMoveToCell(d,e,
f)})}},_nextCell:function(a,f,d,e){var h=new b,g=this.grid,i=g._columns.length,j=this.visualCount;do if(f+=d,f<0||f>=i)a+=d,f=f<0?i-1:0,a<0?(a=j-1,f=i-1):a>=j&&(f=a=0);while(!e(a,f));g.vScroller.scrollToRow(a).then(function(){h.callback({r:a,c:f})});return h},_blurCell:function(){var a=i(".gridxCellFocus",this.domNode)[0];a&&e.remove(a,"gridxCellFocus");return!0},_onFocus:function(a){for(a=a.target;a&&a!=this.domNode;a=a.parentNode)if(e.contains(a,"gridxCell")){for(var b=this.grid._columnsById[a.getAttribute("colid")].index;!e.contains(a,
"gridxRow");)a=a.parentNode;return this._focusCell(0,parseInt(a.getAttribute("visualindex"),10),b)}return!1}})})},"gridx/modules/select/Row":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/sniff","dojo/dom-class","dojo/keys","./_RowCellBase","../../core/_Module"],function(l,i,j,g,e,b){return l(b,{name:"selectRow",rowMixin:{select:function(){this.grid.select.row.selectById(this.id);return this},deselect:function(){this.grid.select.row.deselectById(this.id);return this},isSelected:function(){return this.model.isMarked(this.id)}},
triggerOnCell:!1,getSelected:function(){return this.model.getMarkedIds()},clear:function(){if(this.arg("enabled")){var b=this.model;i.forEach(b.getMarkedIds(),function(e){b.markById(e,0)});b.when()}},_type:"row",_init:function(){var b=this,g=b.grid;b.inherited(arguments);b.model._spTypes.select=1;b.batchConnect([g,"onRowMouseDown",function(d){(b.arg("triggerOnCell")||!d.columnId)&&b._select(d.rowId,d.ctrlKey)}],[g,j("ff")<4?"onRowKeyUp":"onRowKeyDown",function(d){(b.arg("triggerOnCell")||!d.columnId)&&
d.keyCode==e.SPACE&&b._select(d.rowId,d.ctrlKey)}])},_onMark:function(b,e,d){if(d=="select"){var a=this;a._highlight(e,b);a.model.when({id:e},function(){a[b?"onSelected":"onDeselected"](a.grid.row(e,!0))})}},_highlight:function(b,e){var d=this.grid.body.getRowNode({rowId:b});d&&(g.toggle(d,"gridxRowSelected",e),d.setAttribute("aria-selected",!!e),this.onHighlightChange({row:parseInt(d.getAttribute("visualindex"),10)},!!e))},_markById:function(b,e){var d=this.model;d.markById(b,e);d.when()},_onRender:function(b,
e){var d=this.model,a=b+e,f,c;for(f=b;f<a;++f)c=d.indexToId(this.grid.body.getRowInfo({visualIndex:f}).rowIndex),d.isMarked(c)&&this._highlight(c,1)}})})},"gridx/core/Column":function(){define(["dojo/_base/declare"],function(l){return l([],{constructor:function(i,j){this.grid=i;this.model=i.model;this.id=j},index:function(){var i=this.grid._columnsById[this.id];return i?i.index:-1},cell:function(i,j){return this.grid.cell(i,this,j)},name:function(){return this.grid._columnsById[this.id].name||""},
setName:function(i){this.grid._columnsById[this.id].name=i;return this},field:function(){return this.grid._columnsById[this.id].field||null},getWidth:function(){return this.grid._columnsById[this.id].width}})})},"gridx/modules/ColumnWidth":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/Deferred","dojo/_base/query","dojo/_base/sniff","dojo/dom-geometry","dojo/dom-class","dojo/dom-style","dojo/keys","../core/_Module"],function(l,i,j,g,e,b,h,m,d,a){return l(a,{name:"columnWidth",
forced:["hLayout","header"],getAPIPath:function(){return{columnWidth:this}},constructor:function(){this._ready=new j},preload:function(){var a=this,b=a.grid;if(!b.hScroller)a.autoResize=!0;a.batchConnect([b,"_onResizeBegin",function(d,e){e.header=new j;if(a.arg("autoResize")){var g=b.domNode.clientWidth-b.hLayout.lead-b.hLayout.tail;b.bodyNode.style.width=(g<0?0:g)+"px"}else a._adaptWidth();e.header.callback()}],[b.hLayout,"onUpdateWidth",function(){a._adaptWidth();a._ready.callback()}],[b,"setColumns",
"_adaptWidth"])},load:function(){var a=this.loaded;this._ready.then(function(){a.callback()})},"default":60,autoResize:!1,_adaptWidth:function(){var a=this,c=a.grid,d=c.domNode,j=c.header,l=c.isLeftToRight(),s=l?"marginLeft":"marginRight",w=l?"marginRight":"marginLeft",l=c.hLayout.lead,r=c.hLayout.tail,v=j.innerNode,q=c.bodyNode.style,o=v.style,p=(d.clientWidth||m.get(d,"width"))-l-r,t=g(".gridxCell",v)[0],x=b.getMarginBox(t).w-b.getContentBox(t).w,D=!d.offsetHeight,y=m.get(t,"borderCollapse")=="collapse";
o[s]=q[s]=l+"px";o[w]=r+"px";p=p<0?0:p;D&&y&&x--;if(c.autoWidth){i.forEach(c._columns,function(b){if(!b.width)b.width=a.arg("default")+"px"});j.refresh();var s=g("th.gridxCell",v),z=y?2:0;s.forEach(function(a){var b=m.get(a,"width");if(!e("webkit")||!D)b+=x;z+=b;e("ie")&&y&&z--;a=c._columnsById[a.getAttribute("colid")];if(!a.width||/%$/.test(a.width))a.width=b+"px"});j._columnsWidth=z;q.width=z+"px";d.style.width=l+r+z+"px"}else{if(a.arg("autoResize"))q.width=p+"px",h.add(d,"gridxPercentColumnWidth"),
i.forEach(c._columns,function(a){if(!a.width||!/%$/.test(a.width))a.width="auto"});else{var A=[],B=y?2:0;q.width=p+"px";i.forEach(c._columns,function(a){if(!a.width||a.width=="auto")a.width="auto",A.push(a);else if(/%$/.test(a.width))a.width=parseInt(p*parseFloat(a.width,10)/100-x,10)+"px"});j.refresh();i.forEach(c._columns,function(a){if(a.width!="auto"){var b=m.get(j.getHeaderNode(a.id),"width");if(!a.width||/%$/.test(a.width))a.width=b+"px";if(!e("webkit")||!D)b+=x;B+=b}});if(A.length){e("webkit")&&
(x=0);var C=p>B?(p-B)/A.length-x:a.arg("default");p>B&&e("ie")&&y&&(C+=c._columns.length/A.length);C=parseInt(C,10);i.forEach(A,function(a){a.width=C+"px"})}}j.refresh()}if(e("ie")<8)o.width=p+"px";c.hScroller&&(c.hScroller.scroll(0),j._onHScroll(0))}})})},"gridx/modules/Header":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-class","dojo/dom-geometry","dojo/_base/query","dojo/_base/sniff","dojo/keys","../util","../core/_Module"],function(l,i,j,g,e,b,h,m,d){return l(d,{name:"header",
forced:["hLayout"],getAPIPath:function(){return{header:this}},constructor:function(){var a=this.domNode=i.create("div",{"class":"gridxHeaderRow",role:"presentation"}),b=this.innerNode=i.create("div",{"class":"gridxHeaderRowInner",role:"row",innerHTML:'<table border="0" cellpadding="0" cellspacing="0"><tr><th class="gridxCell"></th></tr></table>'});a.appendChild(b)},preload:function(){var a=this.grid,b=this.domNode;a.headerNode.appendChild(b);a.vLayout.register(this,"domNode","headerNode");this.batchConnect([a,
"onHScroll","_onHScroll"],[a,"onHeaderCellMouseOver","_onHeaderCellMouseOver"],[a,"onHeaderCellMouseOut","_onHeaderCellMouseOver"],a.columnResizer&&[a.columnResizer,"onResize","_onColumnResize"]);this._initFocus();a._connectEvents(b,"_onMouseEvent",this)},destroy:function(){this.inherited(arguments);i.destroy(this.domNode)},columnMixin:{headerNode:function(){return this.grid.header.getHeaderNode(this.id)}},getHeaderNode:function(a){return e("[colid='"+a+"']",this.domNode)[0]},refresh:function(){var a=
this,b=a.grid,c=b.focus,d=['<table role="presentation" border="0" cellpadding="0" cellspacing="0"><tr>'];b.columns().forEach(function(b){d.push('<th colid="',b.id,'" class="gridxCell ',c&&c.currentArea()=="header"&&b.id==a._focusHeaderId?a._focusClass:"",'" role="columnheader" aria-readonly="true" tabindex="-1" style="width: ',b.getWidth(),'"><div class="gridxSortNode">',b.name(),"</div></th>")});d.push("</tr></table>");a.innerNode.innerHTML=d.join("");a._onHScroll(a._scrollLeft);a.onRender()},onRender:function(){},
onMoveToHeaderCell:function(){},_scrollLeft:0,_onColumnResize:function(a,b,c){a=this.grid;a.autoWidth?(b=this._columnsWidth+=b-c,a.bodyNode.style.width=b+"px",a.domNode.style.width=a.hLayout.lead+a.hLayout.tail+b+"px"):this.grid.hScroller&&this.grid.hScroller._onScroll()},_onHScroll:function(a){var d=this.grid.isLeftToRight();this.innerNode.firstChild.style[d?"marginLeft":"marginRight"]=(!d&&b("ff")?a:-a)+"px";this._scrollLeft=a},_onMouseEvent:function(a,b){var c=this.grid,d="onHeaderCell"+a,e="onHeader"+
a;if(c._isConnected(d)||c._isConnected(e)){this._decorateEvent(b);if(b.columnIndex>=0)c[d](b);c[e](b)}},_decorateEvent:function(a){for(var b=a.target;b&&b!==this.domNode;b=b.parentNode)if(b.tagName.toLowerCase()=="th"){if(b=this.grid._columnsById[b.getAttribute("colid")])a.columnId=b.id,a.columnIndex=b.index;break}},_onHeaderCellMouseOver:function(a){j.toggle(this.getHeaderNode(a.columnId),"gridxHeaderCellOver",a.type=="mouseover")},_focusHeaderId:null,_focusClass:"gridxHeaderCellFocus",_initFocus:function(){var a=
this,b=a.grid;b.focus&&b.focus.registerArea({name:"header",priority:0,focusNode:a.domNode,scope:a,doFocus:a._doFocus,doBlur:a._blurNode,onBlur:a._blurNode,connects:[a.connect(a.domNode,"onkeydown","_onKeyDown"),a.connect(b,"onHeaderCellMouseDown",function(b){a._focusNode(a.getHeaderNode(b.columnId))})]})},_doFocus:function(a){var b=this._focusNode(this._focusHeaderId&&this.getHeaderNode(this._focusHeaderId)||e("th.gridxCell",this.domNode)[0]);m.stopEvent(b&&a);return b},_focusNode:function(a){if(a){var b=
this.grid;if(this._focusHeaderId=a.getAttribute("colid")){this._blurNode();if(b.hScroller){var c=g.position(a),d=g.position(this.domNode),e=c.x+c.w-d.x-d.w;e<0&&(e=c.x-d.x,e>0&&(e=0));e+=this._scrollLeft;this._onHScroll(e);b.hScroller.scroll(e)}j.add(a,this._focusClass);a.focus();return!0}}return!1},_blurNode:function(){var a=e("th."+this._focusClass,this.domNode)[0];a&&j.remove(a,this._focusClass);return!0},_onKeyDown:function(a){var b=this.grid,c;c=b.isLeftToRight()?1:-1;var d=a.keyCode==h.LEFT_ARROW?
-c:c;if(this._focusHeaderId&&(a.keyCode==h.LEFT_ARROW||a.keyCode==h.RIGHT_ARROW))if(m.stopEvent(a),c=b._columnsById[this._focusHeaderId],c=b._columns[c.index+d])this._focusNode(this.getHeaderNode(c.id)),this.onMoveToHeaderCell(c.id,a)}})})},"gridx/core/Row":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred"],function(l,i,j){return l([],{constructor:function(g,e){this.grid=g;this.model=g.model;this.id=e},index:function(){return this.model.idToIndex(this.id)},cell:function(g,
e){return this.grid.cell(this,g,e)},data:function(){return this.model.byId(this.id).data},rawData:function(){return this.model.byId(this.id).rawData},item:function(){return this.model.byId(this.id).item},setRawData:function(g){var e=this.grid.store,b=this.item(),h,l;if(e.setValue){l=new j;try{for(h in g)e.setValue(b,h,g[h]);e.save({onComplete:i.hitch(l,l.callback),onError:i.hitch(l,l.errback)})}catch(d){l.errback(d)}}return l||j.when(e.put(i.mixin(i.clone(b),g)))}})})},"url:gridx/templates/Grid.html":'<div class="gridx" role="grid" tabindex="0"\r\n\t><div class="gridxHeader" role="presentation" data-dojo-attach-point="headerNode"></div\r\n\t><div class="gridxMain" role="presentation" data-dojo-attach-point="mainNode"\r\n\t\t><div class="gridxBodyEmpty" role="alert" tabindex="-1" data-dojo-attach-point="emptyNode"></div\r\n\t\t><div class="gridxBody" role="presentation" data-dojo-attach-point="bodyNode"></div\r\n\t\t><div class="gridxVScroller" data-dojo-attach-point="vScrollerNode"\r\n\t\t\t><div style=\'width: 1px;\'></div\r\n\t\t></div\r\n\t></div\r\n\t><div class="gridxFooter" data-dojo-attach-point="footerNode"\r\n\t\t><div class="gridxHScroller"\r\n\t\t\t><div class="gridxHScrollerInner" data-dojo-attach-point="hScrollerNode"><div style="width:1px; height: 1px;"></div></div\r\n\t\t></div\r\n\t></div\r\n\t><span data-dojo-attach-point="lastFocusNode" tabindex="0"></span\r\n></div>\r\n',
"gridx/core/Core":function(){define(["require","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","dojo/DeferredList","./model/Model","./Row","./Column","./Cell","./_Module"],function(l,i,j,g,e,b,h,m,d,a,f){function c(a){a=a.moduleClass.prototype;return(a.forced||[]).concat(a.optional||[])}function k(a,b){if(b)for(var c in b){var d=a[c],e=b[c];d&&g.isObject(d)&&!r(d)?k(d,e):a[c]=e}}function n(a,b){var c=[],d=b&&b.length||0;o(a.modules,function(a,b){if(r(a)||v(a))a={moduleClass:a};
if(a){var e=a.moduleClass;if(v(e))try{e=a.moduleClass=l(e)}catch(f){console.error(f)}if(r(e)){c.push(a);return}}console.error(["The ",b+1-d,"-th declared module can NOT be found, please require it before using it"].join(""))});a.modules=c;return a}function u(a){var b,c={},d=[];o(a.modules,function(a){c[a.moduleClass.prototype.name]=a});for(b in c)d.push(c[b]);a.modules=d;return a}function s(a){var b=a.modules,d,e,f,g,h=function(a){for(var c=b.length-1;c>=0;--c)if(b[c].moduleClass.prototype.name==
a)return b[c];return null};for(d=b.length-1;e=b[d];--d){f=e.moduleClass.prototype.name;for(g=c(e);g.length;){e=g.shift();if(e==f)throw Error("Module '"+e+"' is in a dependancy circle!");(e=h(e))&&(g=g.concat(c(e)))}}return a}var w=g.delegate,r=g.isFunction,v=g.isString,q=g.hitch,o=j.forEach;return i([],{_reset:function(a){this._uninit();var b={},c;for(c in a)b[c]=a[c];a=b;this.store=a.store;a.modules=a.modules||[];a.modelExtensions=a.modelExtensions||[];this.setColumns(a.structure);a.columns=this._columnsById;
c=n(a,this.coreModules);var a=f._modules,b=c.modules,d,e,g,i,j,k,l;for(d=0;d<b.length;++d){i=b[d].moduleClass.prototype;j=(i.forced||[]).concat(i.required||[]);for(e=0;e<j.length;++e){k=j[e];for(g=b.length-1;g>=0;--g)if(b[g].moduleClass.prototype.name===k)break;g<0&&(a[k]?b.push({moduleClass:a[k]}):(l=1,console.error(["Forced/Required dependent module '",k,"' is NOT found for '",i.name,"' module."].join(""))))}}if(l)throw Error("Some forced/required dependent modules are NOT found.");l=s(u(c));c=
l.modules;for(a=c.length-1;a>=0;--a)(b=c[a].moduleClass.prototype.modelExtensions)&&[].push.apply(l.modelExtensions,b);a=l;this.model=new h(a);this._create(a)},_postCreate:function(){var a=this._deferStartup=new e;this._preload();this._load(a).then(q(this,"onModulesLoaded"))},onModulesLoaded:function(){},setStore:function(a){this.store=a;this._reset(this);this._postCreate();this._deferStartup.callback()},setColumns:function(a){this.structure=a;var a=this._columns=g.clone(a),b={},c,d,e;if(g.isArray(a)){d=
0;for(e=a.length;d<e;++d)c=a[d],c.index=d,c.id=c.id||String(d+1),b[c.id]=c}this._columnsById=b;if(this.model)this.model._cache.onSetColumns(this._columnsById)},row:function(a,b){typeof a=="number"&&!b&&(a=this.model.indexToId(a));if(this.model.idToIndex(a)>=0)return this._rowObj=this._rowObj||this._mixin(new m(this),"row"),w(this._rowObj,{id:a});return null},column:function(a,b){var p;var c,e,f={};typeof a=="number"&&!b&&(p=(c=this._columns[a])&&c.id,a=p);if(c=this._columnsById[a]){this._colObj=this._colObj||
this._mixin(new d(this),"column");for(e in c)this._colObj[e]===void 0&&(f[e]=c[e]);return w(this._colObj,f)}return null},cell:function(b,c,e){if(b=b instanceof m?b:this.row(b,e))if(c=c instanceof d?c:this.column(c,e))return this._cellObj=this._cellObj||this._mixin(new a(this),"cell"),w(this._cellObj,{row:b,column:c});return null},columnCount:function(){return this._columns.length},rowCount:function(a){return this.model.size(a)},columns:function(a,b){return this._arr(this._columns.length,"column",
a,b)},rows:function(a,b){return this._arr(this.model.size(),"row",a,b)},_uninit:function(){var a=this._modules,b;for(b in a){b=a[b].mod;if(b.getAPIPath){var c=b.getAPIPath();if(c){var d=void 0;for(d in c)delete this[d]}}b.destroy()}this.model&&this.model.destroy()},_arr:function(a,b,c,d){for(var e=c||0,c=d>=0?c+d:a,d=[];e<c&&e<a;++e)d.push(this[b](e));for(var f in j)r(j[f])&&(d[f]=g.partial(j[f],d));return d},_preload:function(){var a,b=this._modules;for(a in b)a=b[a],a.mod.preload&&a.mod.preload(a.args)},
_load:function(a){var c=[],d;for(d in this._modules)c.push(this._initMod(a,d));return new b(c,0,1)},_mixin:function(a,b){var c,d,e=this._modules;for(c in e)c=e[c].mod,d=c[b+"Mixin"],r(d)&&(d=d.apply(c)),g.mixin(a,d||{});return a},_create:function(a){var b=this,d=b._modules={};o(a.modules,function(a){var e;e=a.moduleClass.prototype.name;d[e]||(d[e]={args:a,mod:e=new a.moduleClass(b,a),deps:c(a)},e.getAPIPath&&k(b,e.getAPIPath()))})},_initMod:function(a,c){var d=this._modules,e=d[c],f=e.mod,g=f.loaded;
if(!e.done)e.done=1,(new b(j.map(j.filter(e.deps,function(a){return d[a]}),q(this,this._initMod,a)),0,1)).then(function(){f.load?f.load(e.args,a):g.fired<0&&g.callback()});return g}})})}}});define("gridx/gridx-mini",[],1);