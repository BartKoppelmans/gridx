//>>built
require({cache:{"gridx/core/model/_Extension":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/_base/array"],function(n,l,i){return n([],{constructor:function(h){var d=this.inner=h._model;this._cnnts=[];this.model=h;h._model=this;d&&(this.connect(d,"onDelete","_onDelete"),this.connect(d,"onNew","_onNew"),this.connect(d,"onSet","_onSet"))},destroy:function(){i.forEach(this._cnnts,l.disconnect)},connect:function(h,d,j,k){h=l.connect(h,d,k||this,j);this._cnnts.push(h);return h},_onNew:function(){this.onNew.apply(this,
arguments)},_onSet:function(){this.onSet.apply(this,arguments)},_onDelete:function(){this.onDelete.apply(this,arguments)},onNew:function(){},onDelete:function(){},onSet:function(){},_call:function(h,d){var j=this[h],k=this.inner;return j?j.apply(this,d||[]):k&&k._call(h,d)},_mixinAPI:function(){var h,d=this.model,j=arguments,k=function(f){return function(){return d._model._call(f,arguments)}};for(h=j.length-1;h>=0;--h)d[j[h]]=k(j[h])}})})},"dojo/text":function(){define(["./_base/kernel","require",
"./has","./_base/xhr"],function(n,l,i,h){var d;d=function(b,e,a){h("GET",{url:b,sync:!!e,load:a})};var j={},k=function(b){if(b){var b=b.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,""),e=b.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);e&&(b=e[1])}else b="";return b},f={},c={};n.cache=function(b,e,a){var g;typeof b=="string"?/\//.test(b)?(g=b,a=e):g=l.toUrl(b.replace(/\./g,"/")+(e?"/"+e:"")):(g=b+"",a=e);b=a!=void 0&&typeof a!="string"?a.value:a;a=a&&a.sanitize;return typeof b==
"string"?(j[g]=b,a?k(b):b):b===null?(delete j[g],null):(g in j||d(g,!0,function(a){j[g]=a}),a?k(j[g]):j[g])};return{dynamic:!0,normalize:function(b,e){var a=b.split("!"),g=a[0];return(/^\./.test(g)?e(g):g)+(a[1]?"!"+a[1]:"")},load:function(b,e,a){var b=b.split("!"),g=b.length>1,m=b[0],q=e.toUrl(b[0]),b=f,p=function(b){a(g?k(b):b)};m in j?b=j[m]:q in e.cache?b=e.cache[q]:q in j&&(b=j[q]);if(b===f)if(c[q])c[q].push(p);else{var t=c[q]=[p];d(q,!e.async,function(a){j[m]=j[q]=a;for(var b=0;b<t.length;)t[b++](a);
delete c[q]})}else p(b)}}})},"gridx/modules/VScroller":function(){define(["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/event","dojo/_base/sniff","dojo/_base/query","dojo/keys","dojox/html/metrics","../core/_Module"],function(n,l,i,h,d,j,k,f){return n(f,{name:"vScroller",forced:["body","vLayout","columnWidth"],optional:["pagination"],getAPIPath:function(){return{vScroller:this}},preload:function(){var c=this.grid,b=this.domNode=c.vScrollerNode;this.stubNode=b.firstChild;if(h("ie")<8)this.stubNode.style.width=
k.getScrollbar().w+"px";c.autoHeight?b.style.display="none":this.domNode.style.width=k.getScrollbar().w+"px";c.hLayout.register(null,b,1)},load:function(c,b){var e=this,a=e.grid,g=a.bodyNode;e.batchConnect([e.domNode,"onscroll","_doScroll"],[g,"onmousewheel","_onMouseWheel"],[a.mainNode,"onkeypress","_onKeyScroll"],[a.body,"onRender","_onBodyChange"],[a.body,"onForcedScroll","_onForcedScroll"],[a,"_onResizeEnd","_onBodyChange"],h("ff")&&[g,"DOMMouseScroll","_onMouseWheel"]);b.then(function(){l.when(e._init(c),
function(){e.domNode.style.width="";e.loaded.callback()})})},scrollToRow:function(c,b){var e=new l,a=this.grid.bodyNode,g=this.domNode,m=0,q=d('[visualindex="'+c+'"]',a)[0];if(q){var m=q.offsetTop,p=a.scrollTop;if(b)return g.scrollTop=m,e.callback(!0),e;else if(m<p)m-=p;else if(m+q.offsetHeight>p+a.clientHeight)m=m+q.offsetHeight-p-a.clientHeight;else return e.callback(!0),e;g.scrollTop+=m}e.callback(!!q);return e},_init:function(){this._onForcedScroll()},_doScroll:function(){this.grid.bodyNode.scrollTop=
this.domNode.scrollTop},_onMouseWheel:function(c){this.grid.autoHeight||(this.domNode.scrollTop-=typeof c.wheelDelta==="number"?c.wheelDelta/3:-40*c.detail,i.stop(c))},_onBodyChange:function(){var c=this,b=c.grid;window.setTimeout(function(){c.stubNode.style.height=b.bodyNode.scrollHeight+"px";c._doScroll();b.vScrollerNode.scrollTop=b.vScrollerNode.scrollTop||0},0)},_onForcedScroll:function(){var c=this,b=c.grid.body;return c.model.when({start:b.rootStart,count:b.rootCount},function(){b.renderRows(0,
b.rootCount||c.model.size()-b.rootStart)})},_onKeyScroll:function(c){var m;var g;var b=this.grid.body,e=this.grid.focus,a=this.domNode;if(!e||e.currentArea()=="body"){if(c.keyCode==j.HOME)b._focusCellRow=0,a.scrollTop=0;else if(c.keyCode==j.END)b._focusCellRow=b.visualCount-1,a.scrollTop=this.stubNode.clientHeight-b.domNode.offsetHeight;else if(c.keyCode==j.PAGE_UP)g=b._focusCellRow=Math.max(b.renderStart-b.renderCount,0),b=g,this.scrollToRow(b,1);else if(c.keyCode==j.PAGE_DOWN)m=b._focusCellRow=
Math.min(b.visualCount-1,b.renderStart+b.renderCount),b=m,this.scrollToRow(b,1);else return;i.stop(c)}}})})},"gridx/core/model/Model":function(){define(["require","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","dojo/DeferredList","dojo/_base/connect"],function(n,l,i,h,d,j,k){var f=h.isArrayLike,c=h.isString;return l([],{constructor:function(b){var e=b.cacheClass,e=typeof e=="string"?n(e):e;this.store=b.store;this._exts={};this._cmdQueue=[];this._model=this._cache=
new e(this,b);this._createExts(b.modelExtensions||[],b);b=this._model;this._connects=[k.connect(b,"onDelete",this,"onDelete"),k.connect(b,"onNew",this,"onNew"),k.connect(b,"onSet",this,"onSet")]},destroy:function(){i.forEach(this._connects,k.disconnect);for(var b in this._exts)this._exts[b].destroy()},when:function(){this._oldSize=this.size();this._addCmd({name:"_cmdRequest",scope:this,args:arguments,async:1});return this._exec()},scan:function(b,e){var a=new d,g=b.start||0,m=b.pageSize||this._cache.pageSize||
1,c=b.count,p=c>0?g+c:Infinity,f=b.whenScope||this,k=b.whenFunc||f.when,j=function(b){a.progress(b/(c>0?b+c:f.size()));k.call(f,{id:[],range:[{start:b,count:m}]},function(){var a,g,v=[];for(a=b;a<b+m&&a<p;++a)if(g=f.byIndex(a))v.push(g);else{p=-1;break}if(e(v,b)||a==p)p=-1}).then(function(){p==-1?a.callback():j(b+m)})};j(g);return a},onDelete:function(){},onNew:function(){},onSet:function(){},onSizeChange:function(){},_msg:function(){},_addCmd:function(b){var e=this._cmdQueue,a=e[e.length-1];a&&a.name==
b.name&&a.scope==b.scope?a.args.push(b.args||[]):(b.args=[b.args||[]],e.push(b))},_onSizeChange:function(){var b=this._oldSize,e=this._oldSize=this.size();if(b!=e)this.onSizeChange(e,b)},_execEvents:function(b,e){this._onSizeChange();e&&e.call(b)},_cmdRequest:function(){var b=this;return new j(i.map(arguments,function(e){var a=e[0],g=h.hitch(b,b._execEvents,e[2],e[1]);if(a===null||!e.length)return e=new d,g(),e.callback(),e;return b._model._call("when",[b._normArgs(a),g])}),0,1)},_exec:function(){var b=
this,e=b._cache,a=new d,g=b._cmdQueue,m=function(a,g){b._busy=0;e.skipCacheSizeCheck=0;e._checkSize&&e._checkSize();g?a.errback(g):a.callback()},c=function(){if(i.some(g,function(a){return a.name=="_cmdRequest"}))try{for(;g.length;){var b=g.shift(),e=b.scope[b.name].apply(b.scope,b.args);if(b.async){d.when(e,c,h.partial(m,a));return}}}catch(f){m(a,f);return}m(a)};if(b._busy)return b._busy;b._busy=a;e.skipCacheSizeCheck=1;c();return a},_createExts:function(b,e){b=i.filter(b,function(a){return(a=typeof a==
"string"?n(a):a)&&a.prototype});b.sort(function(a,b){return a.prototype.priority-b.prototype.priority});for(var a=0,g=b.length;a<g;++a)if(a==b.length-1||b[a]!=b[a+1]){var m=new b[a](this,e);this._exts[m.name]=m}},_normArgs:function(b){var e,a=[],g=[],m={range:a,id:g},q=function(a){return typeof a=="number"&&a>=0},p=function(b){if(b&&q(b.start))a.push(b);else if(q(b))a.push({start:b,count:1});else if(f(b))for(e=b.length-1;e>=0;--e)q(b[e])?a.push({start:b[e],count:1}):b[e]&&q(b[e].start)?a.push(b[e]):
c(b)&&g.push(b[e]);else c(b)&&g.push(b)};if(b&&(b.index||b.range||b.id))if(p(b.index),p(b.range),f(b.id))for(e=b.id.length-1;e>=0;--e)g.push(b.id[e]);else b.id&&g.push(b.id);else p(b);!a.length&&!g.length&&this.size()<0&&a.push({start:0,count:this._cache.pageSize||1});return m}})})},"gridx/core/_Module":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/_base/connect"],function(n,l,i,h,d){var j=l.isFunction,n=n([],{constructor:function(f,c){this.grid=
f;this.model=f.model;this.loaded=new h;this._cnnts=[];this._sbscs=[];l.mixin(this,c)},destroy:function(){var f=i.forEach;f(this._cnnts,d.disconnect);f(this._sbscs,d.unsubscribe)},arg:function(f,c,b){arguments.length==2&&j(c)&&(b=c,c=void 0);var e=this.grid,a=this[f];if(!this.hasOwnProperty(f)){var g=this.name+f.substring(0,1).toUpperCase()+f.substring(1);e[g]===void 0?c!==void 0&&(a=c):a=e[g]}this[f]=b&&!b(a)?c:a;return a},connect:function(f,c,b,e,a){var g=this.grid,m=e||this,f=f===g&&typeof c=="string"?
d.connect(f,c,function(){var e=arguments;g._eventFlags[c]===a&&(j(b)?b.apply(m,e):j(m[b])&&m[b].apply(m,e))}):d.connect(f,c,m,b);this._cnnts.push(f);return f},batchConnect:function(){for(var f=0,c=arguments,b=c.length;f<b;++f)l.isArrayLike(c[f])&&this.connect.apply(this,c[f])},subscribe:function(f,c,b){f=d.subscribe(f,b||this,c);this._sbscs.push(f);return f}}),k=n._modules={};n.register=function(f){var c=f.prototype;return k[c.name||c.declaredClass]=f};n._markupAttrs=["id","name","field","width",
"dataType","!formatter","!decorator","!sortable"];return n})},"gridx/modules/VLayout":function(){define(["dojo/_base/declare","dojo/dom-geometry","dojo/DeferredList","../core/_Module"],function(n,l,i,h){return n(h,{name:"vLayout",getAPIPath:function(){return{vLayout:this}},preload:function(){var d=this,j=d.grid;d.connect(j,"_onResizeEnd",function(k,f){var c,b=[];for(c in f)b.push(f[c]);(new i(b)).then(function(){d.reLayout()})});j.autoHeight?d.connect(j.body,"onRender","reLayout"):d.connect(j,"setColumns",
function(){setTimeout(function(){d.reLayout()},0)})},load:function(d,j){var k=this;j.then(function(){k._defs&&k._mods?(new i(k._defs)).then(function(){k._layout();k.loaded.callback()}):k.loaded.callback()})},register:function(d,j,k,f,c){this._defs=this._defs||[];this._mods=this._mods||{};this._mods[k]=this._mods[k]||[];this._defs.push(c||d.loaded);this._mods[k].push({p:f||0,mod:d,nodeName:j})},reLayout:function(){var d,j=0,k;for(d in this._mods)(k=this.grid[d])&&(j+=l.getMarginBox(k).h);this._updateHeight(j)},
_layout:function(){var d,j=0,k=this._mods,f,c,b,e,a;for(d in k)if(f=this.grid[d]){b=k[d];b.sort(function(a,b){return a.p-b.p});for(c=0;c<b.length;++c)e=b[c].mod,a=b[c].nodeName,e&&e[a]&&f.appendChild(e[a]);j+=l.getMarginBox(f).h}this._updateHeight(j)},_updateHeight:function(d){var j=this.grid,k=j.domNode,f=j.mainNode.style;j.autoHeight?j.vScroller.loaded.then(function(){var c=j.bodyNode.lastChild,c=c?c.offsetTop+c.offsetHeight:0;k.style.height=c+d+"px";f.height=c+"px"}):f.height=k.clientHeight-d+
"px"}})})},"gridx/util":function(){define({stopEvent:function(n){n&&n.stopPropagation&&n.preventDefault&&(n.stopPropagation(),n.preventDefault())},biSearch:function(n,l){var i=0,h=n.length,d;for(d=Math.floor((i+h)/2);i+1<h;d=Math.floor((i+h)/2))l(n[d])>0?h=d:i=d;return n.length&&l(n[i])>=0?i:h}})},"dojo/i18n":function(){define(["./_base/kernel","require","./has","./_base/array","./_base/config","./_base/lang","./_base/xhr"],function(n,l,i,h,d,j,k){var f=n.i18n={},c=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,
b=function(a,b,g,m){for(var e=[g+m],b=b.split("-"),c="",o=0;o<b.length;o++)c+=(c?"-":"")+b[o],(!a||a[c])&&e.push(g+c+"/"+m);return e},e={},a=n.getL10nName=function(a,b,g){g=g?g.toLowerCase():n.locale;a="dojo/i18n!"+a.replace(/\./g,"/");b=b.replace(/\./g,"/");return/root/i.test(g)?a+"/nls/"+b:a+"/nls/"+g+"/"+b},g=function(a,g,m,c,o,q){a([g],function(p){var f=e[g+"/"]=j.clone(p.root),d=b(!p._v1x&&p,o,m,c);a(d,function(){for(var a=1;a<d.length;a++)e[d[a]]=f=j.mixin(j.clone(f),arguments[a]);e[g+"/"+o]=
f;q&&q(j.delegate(f))})})},m=function(){},q=function(a,b,o){var a=c.exec(a),q=a[1]+"/",f=a[5]||a[4],p=q+f,k=(a=a[5]&&a[4])||n.locale,t=p+"/"+k;if(a)m(t),e[t]?o(e[t]):g(b,p,q,f,k,o);else{a=d.extraLocale||[];a=j.isArray(a)?a:[a];a.push(k);var s=a.length,i;h.forEach(a,function(a){g(b,p,q,f,a,function(b){a==k&&(i=b);--s||o(i)})})}};if(i("dojo-unit-tests"))var p=f.unitTests=[];var t={},s=new Function("bundle","__evalError","__checkForLegacyModules","__mid","var __amdResult, define = function(x){__amdResult= x;};return [(function(){try{eval(arguments[0]);}catch(e){}if(__amdResult)return 0;if((__checkForLegacyModules = __checkForLegacyModules(__mid)))return __checkForLegacyModules;try{return eval('('+arguments[0]+')');}catch(e){__evalError.e = e; return __evalError;}})(bundle),__amdResult];"),
w=function(a,b,g){if(b===t)return console.error("failed to evaluate i18n bundle; url="+a,t.e),{};return b?/nls\/[^\/]+\/[^\/]+$/.test(a)?b:{root:b,_v1x:1}:g},u=function(a,b){var g=[];h.forEach(a,function(a){var b=l.toUrl(a+".js");if(e[b])g.push(e[b]);else{var c=l.syncLoadNls(a);c?g.push(c):k.get({url:b,sync:!0,load:function(c){c=s(c,t,m,a);g.push(e[b]=w(b,c[0],c[1]))},error:function(){g.push(e[b]={})}})}});b&&b.apply(null,g)},r=f.normalizeLocale=function(a){a=a?a.toLowerCase():n.locale;a=="root"&&
(a="ROOT");return a},o=function(a,b){for(var g=a.split("-");g.length;){if(b(g.join("-")))return!0;g.pop()}return b("ROOT")},m=function(a){for(var b,g=a.split("/"),m=n.global[g[0]],c=1;m&&c<g.length-1;m=m[g[c++]]);m&&((b=m[g[c]])||(b=m[g[c].replace(/-/g,"_")]),b&&(e[a]=b));return b};f.getLocalization=function(b,g,m){var c,b=a(b,g,m).substring(10);q(b,!l.isXdUrl(l.toUrl(b+".js"))?u:l,function(a){c=a});return c};f._preloadLocalizations=function(a,b){function g(m){m=r(m);o(m,function(g){for(var m=0;m<
b.length;m++)if(b[m]==g)return g=a.replace(/\./g,"/")+"_"+g,(l.isXdUrl(l.toUrl(g+".js"))?l:u)([g]),!0;return!1})}g();for(var m=n.config.extraLocale||[],c=0;c<m.length;c++)g(m[c])};i("dojo-unit-tests")&&p.push(function(a){a.register("tests.i18n.unit",function(a){var b;b=s("{prop:1}",t);a.is({prop:1},b[0]);a.is(void 0,b[1]);b=s("({prop:1})",t);a.is({prop:1},b[0]);a.is(void 0,b[1]);b=s("{'prop-x':1}",t);a.is({"prop-x":1},b[0]);a.is(void 0,b[1]);b=s("({'prop-x':1})",t);a.is({"prop-x":1},b[0]);a.is(void 0,
b[1]);b=s("define({'prop-x':1})",t);a.is(0,b[0]);a.is({"prop-x":1},b[1]);b=s("define({'prop-x':1});",t);a.is(0,b[0]);a.is({"prop-x":1},b[1]);b=s("this is total nonsense and should throw an error",t);a.is(t,b[0]);a.is(void 0,b[1]);a.is({},w("some/url",b[0],b[1]))})});return j.mixin(f,{dynamic:!0,normalize:function(a,b){var g=c.exec(a)[1];return/^\./.test(g)?b(g)+"/"+a.substring(g.length):a},load:q,cache:function(a,b){e[a]=b}})})},"dojo/_base/query":function(){define(["./kernel","../query","./NodeList"],
function(n){return n.query})},"gridx/core/model/cache/_Cache":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","../_Extension"],function(n,l,i,h,d){var j=i.hitch,k=i.mixin,f=l.indexOf;return n(d,{constructor:function(c,b){var e=this,a=e.store=b.store,g=a.fetch;e.columns=b.columns;!g&&a.notify?e.connect(a,"notify",function(a,b){a===void 0?e._onDelete(b):b===void 0?e._onNew(a):e._onSet(a)}):(e.connect(a,g?"onSet":"put","_onSet"),e.connect(a,g?"onNew":
"add","_onNew"),e.connect(a,g?"onDelete":"remove","_onDelete"));e.clear();e._mixinAPI("byIndex","byId","indexToId","idToIndex","size","treePath","hasChildren","keep","free")},destroy:function(){this.inherited(arguments);this.clear()},clear:function(){this._filled=0;this._priority=[];this._struct={};this._cache={};this._size={};this._struct[""]=[];this._size[""]=-1},byIndex:function(c,b){this._init("byIndex",arguments);return this._cache[this.indexToId(c,b)]},byId:function(c){this._init("byId",arguments);
return this._cache[c]},indexToId:function(c,b){this._init("indexToId",arguments);var e=this._struct[b||""];return typeof c=="number"&&c>=0?e&&e[c+1]:void 0},idToIndex:function(c){this._init("idToIndex",arguments);var b=this._struct,b=f(b[b[c]&&b[c][0]]||[],c);return b>0?b-1:-1},treePath:function(c){for(var b=this._struct,e=[];c!==void 0;)e.unshift(c),c=b[c]&&b[c][0];return e[0]!==""?[]:(e.pop(),e)},hasChildren:function(c){var b=this.store,e;this._init("hasChildren",arguments);e=this.byId(c);return b.hasChildren&&
b.hasChildren(c,e&&e.item)},size:function(c){this._init("size",arguments);var b=this._size[c||""];return b>=0?b:-1},onBeforeFetch:function(){},onAfterFetch:function(){},onSetColumns:function(c){var b,e,a,g;this.columns=c;for(b in this._cache)for(a in e=this._cache[b],c)g=c[a],e.data[a]=this._formatCell(g.id,e.rawData)},_itemToObject:function(c){var b=this.store;if(b.fetch){var e={};l.forEach(b.getAttributes(c),function(a){e[a]=b.getValue(c,a)});return e}return c},_formatCell:function(c,b){var e=this.columns[c];
return e.formatter?e.formatter(b):b[e.field||c]},_formatRow:function(c){var b=this.columns,e={},a;for(a in b)e[a]=this._formatCell(a,c);return e},_addRow:function(c,b,e,a,g){var g=g||"",m=this._struct,q=this._priority,p=m[g];if(!p)throw Error("Fatal error of cache._addRow: parent item "+g+" of "+c+" is not loaded");if(p[b+1]){if(p[b+1]!==c)throw Error("Fatal error of cache._addRow: different row id "+c+" and "+p[b+1]+" for same row index "+b);}else p[b+1]=c;m[c]=m[c]||[g];g||(b=f(q,c),b>=0&&q.splice(b,
1),q.push(c));this._cache[c]={data:this._formatRow(e),rawData:e,item:a};this._filled=1},_loadChildren:function(c){var b=this,e=new h,a=b.store,g=b.byId(c),g=g&&a.getChildren&&a.getChildren(g.item)||[];h.when(g,function(g){for(var q=0,f,d=b._size[c]=g.length;q<d;++q)f=g[q],b._addRow(a.getIdentity(f),q,b._itemToObject(f),f,c);e.callback()},j(e,e.errback));return e},_onBegin:function(c){this._size[""]=parseInt(c,10)},_onComplete:function(c,b,e){try{for(var a=0,g;g=e[a];++a)this._addRow(this.store.getIdentity(g),
b+a,this._itemToObject(g),g);c.callback()}catch(m){c.errback(m)}},_storeFetch:function(c){var b=this.store,e=new h,a=k({},this.options||{},c),g=j(this,this._onBegin),c=j(this,this._onComplete,e,c.start),m=j(e,e.errback);this.onBeforeFetch();b.fetch?b.fetch(k(a,{onBegin:g,onComplete:c,onError:m})):(b=b.query(a.query,a),h.when(b.total,g),h.when(b,c,m));e.then(j(this,this.onAfterFetch));return e},_onSet:function(c){var b=this.store.getIdentity(c),e=this.idToIndex(b),a=this.treePath(b);a.length&&this._addRow(b,
e,this._itemToObject(c),c,a.pop());this.onSet(b,e,this._cache[b])},_onNew:function(c,b){var e=this.store,a=this._itemToObject(c),g=b&&b[e.fetch?"item":"parent"];g&&e.getIdentity(g);var m=this._size[""];this.clear();this.onNew(e.getIdentity(c),0,{data:this._formatRow(a),rawData:a,item:c});!g&&m>=0&&(this._size[""]=m+1,this.model._onSizeChange())},_onDelete:function(c){var b=this.store,e=this._struct,c=b.fetch?b.getIdentity(c):c,a=this.treePath(c);if(a.length){var g,m,b=[c],q=a.pop(),p=this._size,d=
p[""],k=f(e[q],c);e[q].splice(k,1);--p[q];for(g=0;g<b.length;++g)if(a=e[b[g]])for(m=a.length-1;m>0;--m)b.push(a[m]);for(g=b.length-1;g>=0;--g)m=b[g],delete this._cache[m],delete e[m],delete p[m];g=f(this._priority,c);g>=0&&this._priority.splice(g,1);this.onDelete(c,k-1);!q&&d>=0&&(p[""]=d-1,this.model._onSizeChange())}else this.onDelete(c)}})})},"gridx/Grid":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-class","dojo/dom-geometry","dojo/_base/query","dijit/_WidgetBase",
"dijit/_FocusMixin","dijit/_TemplatedMixin","dojo/text!./templates/Grid.html","./core/Core","./core/_Module","./modules/Header","./modules/Body","./modules/VLayout","./modules/HLayout","./modules/VScroller","./modules/HScroller","./modules/ColumnWidth"],function(n,l,i,h,d,j,k,f,c,b,e,a,g,m,q,p,t,s,w){var u=l.forEach,r=function(){},n=n("gridx.Grid",[k,c,f,e],{templateString:b,coreModules:[g,m,q,p,t,s,w],coreExtensions:[],postCreate:function(){this.inherited(arguments);this._eventFlags={};this.modules=
this.coreModules.concat(this.modules||[]);this.modelExtensions=this.coreExtensions.concat(this.modelExtensions||[]);h.toggle(this.domNode,"gridxRtl",!this.isLeftToRight());this.lastFocusNode.setAttribute("tabIndex",this.domNode.getAttribute("tabIndex"));this._initEvents(this._compNames,this._eventNames);this._reset(this);this._postCreate()},startup:function(){this._started||(this.inherited(arguments),this._deferStartup.callback())},destroy:function(){this._uninit();this.inherited(arguments)},resize:function(a){var b=
{};a&&(this.autoWidth&&delete a.w,this.autoHeight&&delete a.h,d.setMarginBox(this.domNode,a));this._onResizeBegin(a,b);this._onResizeEnd(a,b)},_onResizeBegin:function(){},_onResizeEnd:function(){},_compNames:["Cell","HeaderCell","Row","Header"],_eventNames:["Click","DblClick","MouseDown","MouseUp","MouseOver","MouseOut","MouseMove","ContextMenu","KeyDown","KeyPress","KeyUp"],_initEvents:function(a,b){var g=this;u(a,function(a){u(b,function(b){b="on"+a+b;g[b]=g[b]||r})})},_connectEvents:function(a,
b,g){u(this._eventNames,function(m){this.connect(a,"on"+m.toLowerCase(),i.hitch(g,b,m))},this)},_isConnected:function(a){return this[a]!==r}});n.markupFactory=function(b,g,m){if(!b.structure&&g.nodeName.toLowerCase()=="table"){var c=b.structure=[];j("thead > tr > th",g).forEach(function(b){var g={};u(a._markupAttrs,function(a){a[0]=="!"?(a=a.slice(1),g[a]=eval(b.getAttribute(a))):g[a]=b.getAttribute(a)});g.name=g.name||b.innerHTML;c.push(g)})}return new m(b,g)};return n})},"dojo/Stateful":function(){define(["./_base/kernel",
"./_base/declare","./_base/lang","./_base/array"],function(n,l,i,h){return n.declare("dojo.Stateful",null,{postscript:function(d){d&&i.mixin(this,d)},get:function(d){return this[d]},set:function(d,j){if(typeof d==="object"){for(var k in d)this.set(k,d[k]);return this}k=this[d];this[d]=j;this._watchCallbacks&&this._watchCallbacks(d,k,j);return this},watch:function(d,j){var k=this._watchCallbacks;if(!k)var f=this,k=this._watchCallbacks=function(b,c,a,g){var m=function(g){if(g)for(var g=g.slice(),m=
0,d=g.length;m<d;m++)try{g[m].call(f,b,c,a)}catch(k){console.error(k)}};m(k["_"+b]);g||m(k["*"])};!j&&typeof d==="function"?(j=d,d="*"):d="_"+d;var c=k[d];typeof c!=="object"&&(c=k[d]=[]);c.push(j);return{unwatch:function(){c.splice(h.indexOf(c,j),1)}}}})})},"dojo/touch":function(){define(["./_base/kernel","./on","./has","./mouse"],function(n,l,i,h){function d(d){return function(k,f){return l(k,d,f)}}i=i("touch");n.touch={press:d(i?"touchstart":"mousedown"),move:d(i?"touchmove":"mousemove"),release:d(i?
"touchend":"mouseup"),cancel:i?d("touchcancel"):h.leave};return n.touch})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(n,l){l.getObject("string",!0,n);n.string.rep=function(i,h){if(h<=0||!i)return"";for(var d=[];;){h&1&&d.push(i);if(!(h>>=1))break;i+=i}return d.join("")};n.string.pad=function(i,h,d,j){d||(d="0");i=String(i);h=n.string.rep(d,Math.ceil((h-i.length)/d.length));return j?i+h:h+i};n.string.substitute=function(i,h,d,j){j=j||n.global;d=d?l.hitch(j,d):function(d){return d};
return i.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(k,f,c){k=l.getObject(f,!1,h);c&&(k=l.getObject(c,!1,j).call(j,k,f));return d(k,f).toString()})};n.string.trim=String.prototype.trim?l.trim:function(i){for(var i=i.replace(/^\s+/,""),h=i.length-1;h>=0;h--)if(/\S/.test(i.charAt(h))){i=i.substring(0,h+1);break}return i};return n.string})},"dijit/registry":function(){define(["dojo/_base/array","dojo/_base/sniff","dojo/_base/unload","dojo/_base/window","."],function(n,l,i,h,d){var j={},
k={},f={length:0,add:function(c){if(k[c.id])throw Error("Tried to register widget with id=="+c.id+" but that id is already registered");k[c.id]=c;this.length++},remove:function(c){k[c]&&(delete k[c],this.length--)},byId:function(c){return typeof c=="string"?k[c]:c},byNode:function(c){return k[c.getAttribute("widgetId")]},toArray:function(){var c=[],b;for(b in k)c.push(k[b]);return c},getUniqueId:function(c){var b;do b=c+"_"+(c in j?++j[c]:j[c]=0);while(k[b]);return d._scopeName=="dijit"?b:d._scopeName+
"_"+b},findWidgets:function(c){function b(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==1){var g=a.getAttribute("widgetId");g?(g=k[g])&&e.push(g):b(a)}}var e=[];b(c);return e},_destroyAll:function(){d._curFocus=null;d._prevFocus=null;d._activeStack=[];n.forEach(f.findWidgets(h.body()),function(c){c._destroyed||(c.destroyRecursive?c.destroyRecursive():c.destroy&&c.destroy())})},getEnclosingWidget:function(c){for(;c;){var b=c.getAttribute&&c.getAttribute("widgetId");if(b)return k[b];c=c.parentNode}return null},
_hash:k};l("ie")&&i.addOnWindowUnload(function(){f._destroyAll()});return d.registry=f})},"gridx/nls/Body":function(){define({root:{loadingInfo:"Loading...",emptyInfo:"No items to display",loadFailInfo:"Failed to load data!"}})},"dijit/_base/manager":function(){define(["dojo/_base/array","dojo/_base/config","../registry",".."],function(n,l,i,h){n.forEach(["byId","getUniqueId","findWidgets","_destroyAll","byNode","getEnclosingWidget"],function(d){h[d]=i[d]});h.defaultDuration=l.defaultDuration||200;
return h})},"dojox/html/metrics":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/sniff","dojo/ready","dojo/_base/unload","dojo/_base/window","dojo/dom-geometry"],function(n,l,i,h,d,j,k){var f=l.getObject("dojox.html.metrics",!0),c=l.getObject("dojox");f.getFontMeasurements=function(){var a={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0};if(i("ie"))j.doc.documentElement.style.fontSize="100%";var b=j.doc.createElement("div"),
g=b.style;g.position="absolute";g.left="-100px";g.top="0";g.width="30px";g.height="1000em";g.borderWidth="0";g.margin="0";g.padding="0";g.outline="0";g.lineHeight="1";g.overflow="hidden";j.body().appendChild(b);for(var c in a)g.fontSize=c,a[c]=Math.round(b.offsetHeight*12/16)*16/12/1E3;j.body().removeChild(b);return a};var b=null;f.getCachedFontMeasurements=function(a){if(a||!b)b=f.getFontMeasurements();return b};var e=null,a={};f.getTextBox=function(b,g,c){var f,d;if(e)f=e;else{f=e=j.doc.createElement("div");
var h=j.doc.createElement("div");h.appendChild(f);d=h.style;d.overflow="scroll";d.position="absolute";d.left="0px";d.top="-10000px";d.width="1px";d.height="1px";d.visibility="hidden";d.borderWidth="0";d.margin="0";d.padding="0";d.outline="0";j.body().appendChild(h)}f.className="";d=f.style;d.borderWidth="0";d.margin="0";d.padding="0";d.outline="0";if(arguments.length>1&&g)for(var i in g)i in a||(d[i]=g[i]);if(arguments.length>2&&c)f.className=c;f.innerHTML=b;d=k.position(f);d.w=f.parentNode.scrollWidth;
return d};var g={w:16,h:16};f.getScrollbar=function(){return{w:g.w,h:g.h}};f._fontResizeNode=null;f.initOnFontResize=function(){var a=f._fontResizeNode=j.doc.createElement("iframe"),b=a.style;b.position="absolute";b.width="5em";b.height="10em";b.top="-10000px";i("ie")?a.onreadystatechange=function(){if(a.contentWindow.document.readyState=="complete")a.onresize=a.contentWindow.parent[c._scopeName].html.metrics._fontresize}:a.onload=function(){a.contentWindow.onresize=a.contentWindow.parent[c._scopeName].html.metrics._fontresize};
a.setAttribute("src","javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}<\/script></head><body></body></html>'");j.body().appendChild(a);f.initOnFontResize=function(){}};f.onFontResize=function(){};f._fontresize=function(){f.onFontResize()};d.addOnUnload(function(){var a=f._fontResizeNode;if(a){if(i("ie")&&a.onresize)a.onresize=null;else if(a.contentWindow&&a.contentWindow.onresize)a.contentWindow.onresize=null;f._fontResizeNode=null}});h(function(){try{var a=
j.doc.createElement("div");a.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";j.body().appendChild(a);g.w=a.offsetWidth-a.clientWidth;g.h=a.offsetHeight-a.clientHeight;j.body().removeChild(a);delete a}catch(b){}"fontSizeWatch"in n.config&&n.config.fontSizeWatch&&f.initOnFontResize()});return f})},"dijit/a11y":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-style","dojo/_base/sniff",
"./_base/manager","."],function(n,l,i,h,d,j,k,f,c){var b=c._isElementShown=function(a){var b=j.get(a);return b.visibility!="hidden"&&b.visibility!="collapsed"&&b.display!="none"&&d.get(a,"type")!="hidden"};c.hasDefaultTabStop=function(a){switch(a.nodeName.toLowerCase()){case "a":return d.has(a,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var b;try{var c=a.contentDocument;if("designMode"in c&&c.designMode=="on")return!0;b=c.body}catch(e){try{b=
a.contentWindow.document.body}catch(f){return!1}}return b&&(b.contentEditable=="true"||b.firstChild&&b.firstChild.contentEditable=="true");default:return a.contentEditable=="true"}};var e=c.isTabNavigable=function(a){return d.get(a,"disabled")?!1:d.has(a,"tabIndex")?d.get(a,"tabIndex")>=0:c.hasDefaultTabStop(a)};c._getTabNavigable=function(a){function g(a){return a&&a.tagName.toLowerCase()=="input"&&a.type&&a.type.toLowerCase()=="radio"&&a.name&&a.name.toLowerCase()}var c,f,p,j,h,i,l={},n=function(a){for(a=
a.firstChild;a;a=a.nextSibling)if(!(a.nodeType!=1||k("ie")&&a.scopeName!=="HTML"||!b(a))){if(e(a)){var v=d.get(a,"tabIndex");if(!d.has(a,"tabIndex")||v==0)c||(c=a),f=a;else if(v>0){if(!p||v<j)j=v,p=a;if(!h||v>=i)i=v,h=a}v=g(a);d.get(a,"checked")&&v&&(l[v]=a)}a.nodeName.toUpperCase()!="SELECT"&&n(a)}};b(a)&&n(a);return{first:l[g(c)]||c,last:l[g(f)]||f,lowest:l[g(p)]||p,highest:l[g(h)]||h}};c.getFirstInTabbingOrder=function(a){a=c._getTabNavigable(h.byId(a));return a.lowest?a.lowest:a.first};c.getLastInTabbingOrder=
function(a){a=c._getTabNavigable(h.byId(a));return a.last?a.last:a.highest};return{hasDefaultTabStop:c.hasDefaultTabStop,isTabNavigable:c.isTabNavigable,_getTabNavigable:c._getTabNavigable,getFirstInTabbingOrder:c.getFirstInTabbingOrder,getLastInTabbingOrder:c.getLastInTabbingOrder}})},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(n,l,i){n.DeferredList=function(h,d,j,k){var f=[];l.call(this);var c=this;h.length===0&&!d&&this.resolve([0,[]]);var b=
0;i.forEach(h,function(e,a){function g(g,e){f[a]=[g,e];b++;b===h.length&&c.resolve(f)}e.then(function(b){d?c.resolve([a,b]):g(!0,b)},function(a){j?c.reject(a):g(!1,a);if(k)return null;throw a;})})};n.DeferredList.prototype=new l;n.DeferredList.prototype.gatherResults=function(h){h=new n.DeferredList(h,!1,!0,!1);h.addCallback(function(d){var j=[];i.forEach(d,function(d){j.push(d[1])});return j});return h};return n.DeferredList})},"gridx/modules/HScroller":function(){define(["dojo/_base/declare","dojo/dom-style",
"dojo/_base/sniff","dojo/_base/Deferred","dojox/html/metrics","../core/_Module"],function(n,l,i,h,d,j){return n(j,{name:"hScroller",forced:["header"],getAPIPath:function(){return this.grid.autoWidth?{}:{hScroller:this}},constructor:function(){this.grid._initEvents(["H"],["Scroll"])},preload:function(){var k=this,f=k.grid,c=f.hScrollerNode;if(!f.autoWidth&&(k.domNode=c,k.container=c.parentNode,k.stubNode=c.firstChild,f.vLayout.register(k,"container","footerNode",0),c.style.display="block",k.batchConnect([f.header,
"onRender","refresh"],[c,"onscroll","_onScroll"],[f,"_onResizeBegin",function(b,c){c.hScroller=new h}],[f,"_onResizeEnd",function(b,c){h.when(c.header,function(){k.refresh();c.hScroller.callback()})}]),i("ie")))c.style.height=d.getScrollbar().h+"px"},scroll:function(d){var f=this.domNode;if((i("webkit")||i("ie")<8)&&!this.grid.isLeftToRight())d=f.scrollWidth-f.offsetWidth-d;f.scrollLeft=d},refresh:function(){var d=this.grid,f=d.isLeftToRight(),c=f?"marginLeft":"marginRight",f=f?"marginRight":"marginLeft",
b=d.hLayout.lead,e=d.hLayout.tail,a=(d.domNode.clientWidth||l.get(d.domNode,"width"))-b-e,g=d.header.innerNode,m=l.get(g,"paddingLeft")||0,q=this.domNode.style,g=g.firstChild.offsetWidth+m,p=q.display,j=g<=a?"none":"block";q[c]=b+m+"px";q[f]=e+"px";q.width=(a-m<0?0:a-m)+"px";this.stubNode.style.width=(g-m<0?0:g-m)+"px";q.display=j;p=="block"&&j=="none"&&d.vLayout.reLayout()},_lastLeft:0,_onScroll:function(){var d=this.domNode.scrollLeft;if((i("webkit")||i("ie")<8)&&!this.grid.isLeftToRight())d=this.domNode.scrollWidth-
this.domNode.offsetWidth-d;if(this._lastLeft!=d)this._lastLeft=d,this._doScroll()},_doScroll:function(){var d=this.grid;d.bodyNode.scrollLeft=this.domNode.scrollLeft;d.onHScroll(this._lastLeft)}})})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(n){return n.cache})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(n,l,i,h){h.extend(l,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},
_onBlur:function(){this.onBlur()}});return i("dijit._FocusMixin",null,{_focusManager:n})})},"gridx/core/model/cache/Sync":function(){define(["dojo/_base/declare","dojo/_base/Deferred","./_Cache"],function(n,l,i){return n(i,{keep:function(){},free:function(){},when:function(h,d){var j=new l;try{d&&d(),j.callback()}catch(k){j.errback(k)}return j},_init:function(){this._filled||(this._storeFetch({start:0}),this.store.getChildren&&this._fetchChildren())},_fetchChildren:function(){for(var h=this._struct,
d=h[""].slice(1),j;d.length;)j=d.shift(),l.when(this._loadChildren(j),function(){[].push.apply(d,h[j].slice(1))})}})})},"dijit/focus":function(){define(["dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/Evented","dojo/_base/lang","dojo/on","dojo/ready","dojo/_base/sniff","dojo/Stateful","dojo/_base/unload","dojo/_base/window","dojo/window","./a11y","./registry","."],function(n,l,i,h,d,j,k,f,c,b,e,a,g,m,q,p,t){var s=new (l([e,j],{curNode:null,activeStack:[],constructor:function(){var a=
k.hitch(this,function(a){i.isDescendant(this.curNode,a)&&this.set("curNode",null);i.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});n.before(d,"empty",a);n.before(d,"destroy",a)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,g){var c=this,m=function(a){c._justMouseDowned=!0;setTimeout(function(){c._justMouseDowned=!1},0);if(!b("ie")||!a||!(a.srcElement&&a.srcElement.parentNode==null))c._onTouchNode(g||a.target||a.srcElement,"mouse")},e=b("ie")?
a.document.documentElement:a.document;if(e)if(b("ie")){a.document.body.attachEvent("onmousedown",m);var d=function(a){var b=a.srcElement.tagName.toLowerCase();b=="#document"||b=="body"||(q.isTabNavigable(a.srcElement)?c._onFocusNode(g||a.srcElement):c._onTouchNode(g||a.srcElement))};e.attachEvent("onactivate",d);var f=function(a){c._onBlurNode(g||a.srcElement)};e.attachEvent("ondeactivate",f);return{remove:function(){a.document.detachEvent("onmousedown",m);e.detachEvent("onactivate",d);e.detachEvent("ondeactivate",
f);e=null}}}else{e.body.addEventListener("mousedown",m,!0);e.body.addEventListener("touchstart",m,!0);var p=function(a){c._onFocusNode(g||a.target)};e.addEventListener("focus",p,!0);var j=function(a){c._onBlurNode(g||a.target)};e.addEventListener("blur",j,!0);return{remove:function(){e.body.removeEventListener("mousedown",m,!0);e.body.removeEventListener("touchstart",m,!0);e.removeEventListener("focus",p,!0);e.removeEventListener("blur",j,!0);e=null}}}},_onBlurNode:function(){this.set("prevNode",
this.curNode);this.set("curNode",null);if(!this._justMouseDowned)this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),this._clearActiveWidgetsTimer=setTimeout(k.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([]);this.prevNode=null}),100)},_onTouchNode:function(a,b){this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);var c=[];try{for(;a;){var e=h.get(a,"dijitPopupParent");if(e)a=p.byId(e).domNode;
else if(a.tagName&&a.tagName.toLowerCase()=="body"){if(a===g.body())break;a=m.get(a.ownerDocument).frameElement}else{var d=a.getAttribute&&a.getAttribute("widgetId"),f=d&&p.byId(d);f&&!(b=="mouse"&&f.get("disabled"))&&c.unshift(d);a=a.parentNode}}}catch(q){}this._setStack(c,b)},_onFocusNode:function(a){a&&a.nodeType!=9&&(this._onTouchNode(a),a!=this.curNode&&this.set("curNode",a))},_setStack:function(a,b){var g=this.activeStack;this.set("activeStack",a);for(var c=0;c<Math.min(g.length,a.length);c++)if(g[c]!=
a[c])break;for(var e,m=g.length-1;m>=c;m--)if(e=p.byId(g[m]))e._hasBeenBlurred=!0,e.set("focused",!1),e._focusManager==this&&e._onBlur(b),this.emit("widget-blur",e,b);for(m=c;m<a.length;m++)if(e=p.byId(a[m]))e.set("focused",!0),e._focusManager==this&&e._onFocus(b),this.emit("widget-focus",e,b)},focus:function(a){if(a)try{a.focus()}catch(b){}}}));c(function(){var c=s.registerWin(g.doc.parentWindow||g.doc.defaultView);b("ie")&&a.addOnWindowUnload(function(){c.remove();c=null})});t.focus=function(a){s.focus(a)};
for(var w in s)/^_/.test(w)||(t.focus[w]=typeof s[w]=="function"?k.hitch(s,w):s[w]);s.watch(function(a,b,g){t.focus[a]=g});return s})},"gridx/modules/HLayout":function(){define(["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/DeferredList","../core/_Module"],function(n,l,i,h,d,j,k){return n(k,{name:"hLayout",getAPIPath:function(){return{hLayout:this}},load:function(d,c){var b=this;c.then(function(){b._layout();b.loaded.callback()})},lead:0,
tail:0,register:function(d,c,b){var e=this._regs=this._regs||[];d||(d=new l,d.callback());e.push([d,c,b])},onUpdateWidth:function(){},_layout:function(){var f=this,c=f._regs;if(c){var b=0,e=0,a=i.map(c,function(a){return a[0]});(new j(a)).then(function(){i.forEach(c,function(a){var c=h.getMarginBox(a[1]).w||d.get(a[1],"width");a[2]?e+=c:b+=c});f.lead=b;f.tail=e;f.onUpdateWidth(b,e)})}else f.onUpdateWidth(0,0)}})})},"gridx/core/Cell":function(){define(["dojo/_base/declare"],function(n){return n([],
{constructor:function(l,i,h){this.grid=l;this.model=l.model;this.row=i;this.column=h},data:function(){return this.model.byId(this.row.id).data[this.column.id]},rawData:function(){var l=this.column.field();return l&&this.model.byId(this.row.id).rawData[l]},setRawData:function(l){var i={};i[this.column.field()]=l;return this.row.setRawData(i)}})})},"dijit/main":function(){define(["dojo/_base/kernel"],function(n){return n.dijit})},"gridx/modules/Body":function(){define(["dojo/_base/declare","dojo/_base/query",
"dojo/_base/array","dojo/dom-construct","dojo/dom-class","dojo/_base/Deferred","dojo/_base/sniff","dojo/keys","../core/_Module","../util","dojo/i18n!../nls/Body"],function(n,l,i,h,d,j,k,f,c,b,e){return n(c,{name:"body",optional:["tree"],getAPIPath:function(){return{body:this}},preload:function(){var a=this.grid,b=this.domNode=a.bodyNode;a.emptyNode.innerHTML=this.arg("loadingInfo",e.loadingInfo);a._connectEvents(b,"_onMouseEvent",this);this._initFocus()},load:function(){var a=this,b=a.model,c=a.grid;
a.batchConnect([b,"onDelete","_onDelete"],[b,"onSet","_onSet"],[b,"onSizeChange","_onSizeChange"],[c,"onRowMouseOver","_onRowMouseOver"],[c,"onCellMouseOver","_onCellMouseOver"],[c,"onCellMouseOut","_onCellMouseOver"],[c.bodyNode,"onmouseleave",function(){var b=l(".gridxRowOver",a.domNode)[0];b&&d.remove(b,"gridxRowOver")}],[c,"setColumns",function(){a.refresh()}]);b.when({},function(){var e=a.rootCount,e=a.rootCount=e?e:b.size();a.visualCount=c.tree?c.tree.getVisualSize(a.rootStart,e):e;a.loaded.callback()}).then(null,
function(b){a._loadFail(b);a.loaded.callback()})},destroy:function(){this.inherited(arguments);this.domNode.innerHTML=""},rowMixin:{node:function(){return this.grid.body.getRowNode({rowId:this.id})},visualIndex:function(){var a=this.id;return this.grid.body.getRowInfo({rowId:a,rowIndex:this.index(),parentId:this.model.treePath(a).pop()}).visualIndex}},cellMixin:{node:function(){return this.grid.body.getCellNode({rowId:this.row.id,cellId:this.column.id})}},getRowNode:function(a){return(a=this._getRowNodeQuery(a))?
l(a,this.domNode)[0]||null:null},getCellNode:function(a){var b=a.colId,c=this._getRowNodeQuery(a);if(c){if(!b&&typeof a.colIndex=="number")b=this.grid._columns[a.colIndex].id;c+=" [colid='"+b+"'].gridxCell";return l(c,this.domNode)[0]||null}return null},getRowInfo:function(a){var b=this.model,c=this.grid,e=a.rowId;if(e)a.rowIndex=b.idToIndex(e),a.parentId=b.treePath(e).pop();if(typeof a.rowIndex=="number"&&a.rowIndex>=0)a.visualIndex=c.tree?c.tree.getVisualIndexByRowInfo(parentId,rowIndex,this.rootStart):
a.rowIndex-this.rootStart;else if(typeof a.visualIndex=="number"&&a.visualIndex>=0)c.tree?(c=c.tree.getRowInfoByVisualIndex(a.visualIndex,this.rootStart),a.rowIndex=c.start,a.parentId=c.parentId):a.rowIndex=this.rootStart+a.visualIndex;else return a;a.rowId=e||b.indexToId(a.rowIndex,a.parentId);return a},refresh:function(a){var b=this;delete b._err;return b.model.when({}).then(function(){var c=b.renderStart,e=b.renderCount;if(typeof a=="number"&&a>=0){a=c>a?c:a;var d=c+e-a,c=l('[visualindex="'+a+
'"]',b.domNode)[0],e=[],f=[];if(c){var k=b._buildRows(a,d,e,f);if(k){h.place(k,c,"before");for(var k=0,i=f.length;k<i;++k)b.onAfterRow.apply(b,f[k])}}for(;c;)f=c.nextSibling,h.destroy(c),c=f;j.when(b._buildUncachedRows(e),function(){b.onRender(a,d)})}else b.renderRows(c,e,0,1),b.onForcedScroll()},function(a){b._loadFail(a)})},refreshCell:function(a,b){var c=new j,e=this,d=e.model,f=e.grid,h=f._columns[b],k=h&&e.getCellNode({visualIndex:a,colId:h.id});if(k){var i,l=e.getRowInfo({visualIndex:a}),o=
l.rowIndex,v=l.parentId;d.when({start:o,count:1,parentId:v},function(){if(i=d.byIndex(o,v))l.rowId=d.indexToId(o,v),k.innerHTML=e._buildCellContent(h,l,i.data,f.tree&&i.data[h.id]===void 0),e.onAfterCell(k,l,h,i)}).then(function(){c.callback(!!i)});return c}c.callback(0);return c},rootStart:0,rootCount:0,renderStart:0,renderCount:0,visualStart:0,visualCount:0,autoUpdate:1,autoChangeSize:1,updateRootRange:function(a,b){var c=this.grid.tree,c=this.visualCount=c?c.getVisualSize(a,b):b;this.rootStart=
a;this.rootCount=b;if(this.renderStart+this.renderCount>c&&(this.renderStart=c-this.renderCount,this.renderStart<0))this.renderStart=0,this.renderCount=c;if(!this.renderCount&&c)this.onForcedScroll()},renderRows:function(a,b,c,d){var f=this,i=f.grid,l="",n=[],u=[],r=f.domNode,o=i.emptyNode,v=f.arg("emptyInfo",e.emptyInfo);if(!f._err)if(b>0){o.innerHTML=f.arg("loadingInfo",e.loadingInfo);c!="top"&&c!="bottom"&&f.model.free();l=f._buildRows(a,b,n,u);if(c=="top")f.renderCount+=f.renderStart-a,f.renderStart=
a,h.place(l,r,"first");else if(c=="bottom")f.renderCount=a+b-f.renderStart,h.place(l,r,"last");else{f.renderStart=a;f.renderCount=b;c=d?r.scrollTop:0;r.scrollTop=0;if(k("ie"))for(;r.childNodes.length;)r.removeChild(r.firstChild);r.innerHTML=l;r.scrollTop=c;r.scrollLeft=i.hScrollerNode.scrollLeft;o.innerHTML=l?"":v;f.onUnrender()}i=0;for(l=u.length;i<l;++i)f.onAfterRow.apply(f,u[i]);j.when(f._buildUncachedRows(n),function(){f.onRender(a,b)})}else if(!{top:1,bottom:1}[c])r.scrollTop=0,r.innerHTML="",
o.innerHTML=v,f.onUnrender(),f.model.free()},unrenderRows:function(a,b){if(a>0){var c=0,e,d=this.domNode;if(b=="post")for(;c<a&&d.lastChild;++c)e=d.lastChild.getAttribute("rowid"),this.model.free(e),d.removeChild(d.lastChild),this.onUnrender(e);else{for(var f=d.scrollTop;c<a&&d.firstChild;++c)e=d.firstChild.getAttribute("rowid"),this.model.free(e),f-=d.firstChild.offsetHeight,d.removeChild(d.firstChild),this.onUnrender(e);this.renderStart+=c;d.scrollTop=f>0?f:0}this.renderCount-=c;this.model.when()}},
onAfterRow:function(){},onAfterCell:function(){},onRender:function(){},onUnrender:function(){},onDelete:function(){},onSet:function(){},collectCellWrapper:function(){},onMoveToCell:function(){},onForcedScroll:function(){},_getRowNodeQuery:function(a){var b;a.rowId?b="[rowid='"+a.rowId+"']":typeof a.rowIndex=="number"&&a.rowIndex>=0?(b="[rowindex='"+a.rowIndex+"']",a.parentId&&(b+="[parentid='"+a.parentId+"']")):typeof a.visualIndex=="number"&&a.visualIndex>=0&&(b="[visualindex='"+a.visualIndex+"']");
return b&&b+".gridxRow"},_buildRows:function(a,b,c,e){for(var b=a+b,d=[],f=this.model,j=this.domNode.scrollWidth;a<b;++a){var h=this.getRowInfo({visualIndex:a}),i=f.byIndex(h.rowIndex,h.parentId);d.push('<div class="gridxRow ',a%2?"gridxRowOdd":"",'" role="row" visualindex="',a);i?(f.keep(h.rowId),d.push('" rowid="',h.rowId,'" rowindex="',h.rowIndex,'" parentid="',h.parentId,'">',this._buildCells(i.data,h),"</div>"),e.push([h,i])):(d.push('"><div class="gridxRowDummy" style="width:',j,'px;"></div></div>'),
h.start=h.rowIndex,h.count=1,c.push(h))}return d.join("")},_buildUncachedRows:function(a){var b=this;return a.length&&b.model.when(a,function(){try{for(var c=0,e=a.length;c<e;++c)b._buildRowContent(a[c])}catch(d){b._loadFail(d)}}).then(null,function(a){b._loadFail(a)})},_loadFail:function(a){console.error(a);this.grid.emptyNode.innerHTML=this.arg("loadFailInfo",e.loadFailInfo);this.domNode.innerHTML="";this._err=1},_buildRowContent:function(a){var b=this.model,c=l('[visualindex="'+a.visualIndex+'"]',
this.domNode)[0];if(c){var e=b.byIndex(a.rowIndex,a.parentId);if(e)a.rowId=b.indexToId(a.rowIndex,a.parentId),b.keep(a.rowId),c.setAttribute("rowid",a.rowId),c.setAttribute("rowindex",a.rowIndex),c.setAttribute("parentid",a.parentId||""),c.innerHTML=this._buildCells(e.data,a),this.onAfterRow(a,e);else throw Error("Row is not in cache:"+a.rowIndex);}},_buildCells:function(a,b){for(var c,e,d=this.grid,f=d._columns,h=d.focus&&d.focus.currentArea()=="body",j=['<table class="gridxRowTable" role="presentation" border="0" cellpadding="0" cellspacing="0"><tr>'],
i=0,k=f.length;i<k;++i)c=f[i],e=d.tree&&a[c.id]===void 0,j.push('<td class="gridxCell '),e&&j.push("gridxPaddingCell"),h&&this._focusCellRow===b.visualIndex&&this._focusCellCol===i&&j.push("gridxCellFocus"),j.push('" role="gridcell" tabindex="-1" colid="',c.id,'" style="width: ',c.width,'">',this._buildCellContent(c,b,a,e),"</td>");j.push("</tr></table>");return j.join("")},_buildCellContent:function(a,b,c,e){var d="";e||(d=this._wrapCellData(a.decorator?a.decorator(c[a.id],b.rowId,b.visualIndex):
c[a.id],b.rowId,a.id));return!d&&k("ie")<8?"$nbsp;":d},_wrapCellData:function(a,b,c){var e=[];this.collectCellWrapper(e,b,c);var d=e.length-1;for(d>0&&e.sort(function(a,b){return a.priority-b.priority});d>=0;--d)a=e[d].wrap(a,b,c);return a},_onMouseEvent:function(a,b){var c=this.grid,e="onCell"+a,d="onRow"+a;if(c._isConnected(e)||c._isConnected(d))if(this._decorateEvent(b),b.rowId){if(b.columnId)c[e](b);c[d](b)}},_decorateEvent:function(a){for(var b=a.target||a.originalTarget,c=this.grid,e;b&&b!=
c.bodyNode;b=b.parentNode){e=b.tagName.toLowerCase();if(e=="td"&&d.contains(b,"gridxCell")){var f=c._columnsById[b.getAttribute("colid")];a.cellNode=b;a.columnId=f.id;a.columnIndex=f.index}if(e=="div"&&d.contains(b,"gridxRow")){a.rowId=b.getAttribute("rowid");a.parentId=b.getAttribute("parentid");a.rowIndex=parseInt(b.getAttribute("rowindex"),10);a.visualIndex=parseInt(b.getAttribute("visualindex"),10);break}}},_onSet:function(a,b,c){if(this.autoUpdate){var e=this.getRowNode({rowId:a});if(e&&c){var d=
this.getRowInfo({rowId:a,rowIndex:b});e.innerHTML=this._buildCells(c.data,d);this.onAfterRow(d,c);this.onSet(a,b,c);this.onRender(b,1)}}},_onDelete:function(a){if(this.autoUpdate){var b=this.getRowNode({rowId:a});if(b){for(var c=0,e=parseInt(b.getAttribute("rowindex"),10),d=b.getAttribute("parentid"),f={id:1},j=[b],k,l=[a],b=b.nextSibling;b&&f[b.getAttribute("parentid")];b=b.nextSibling)k=b.getAttribute("rowid"),l.push(k),j.push(b),f[k]=1;for(;b;b=b.nextSibling)b.getAttribute("parentid")==d&&b.setAttribute("rowindex",
parseInt(b.getAttribute("rowindex"),10)-1),b.setAttribute("visualindex",parseInt(b.getAttribute("visualindex"),10)-1),++c;i.forEach(j,h.destroy);i.forEach(l,this.onUnrender,this);this.autoChangeSize&&this.rootStart===0&&!d&&this.updateRootRange(0,this.rootCount-1);this.onDelete(a,e);this.onRender(e,c)}}},_onSizeChange:function(a,b){if(this.autoChangeSize&&this.rootStart===0&&(this.rootCount===b||b<0))this.updateRootRange(0,a),this.refresh()},_onRowMouseOver:function(a){var b=l("> div.gridxRowOver",
this.domNode)[0],a=this.getRowNode({rowId:a.rowId});b!=a&&(b&&d.remove(b,"gridxRowOver"),d.add(a,"gridxRowOver"))},_onCellMouseOver:function(a){d.toggle(a.cellNode,"gridxCellOver",a.type=="mouseover")},_focusCellCol:0,_focusCellRow:0,_initFocus:function(){var a=this,b=a.grid,c=b.isLeftToRight(),e=b.bodyNode,d=b.focus;d&&(d.registerArea({name:"body",priority:1,focusNode:e,scope:a,doFocus:a._doFocus,doBlur:a._blurCell,onFocus:a._onFocus,onBlur:a._blurCell}),a.connect(b.mainNode,"onkeypress",function(e){if(d.currentArea()==
"body"&&(!b.tree||!e.ctrlKey)){d._noBlur=1;var h={},j=c?1:-1;h[f.LEFT_ARROW]=[0,-j,e];h[f.RIGHT_ARROW]=[0,j,e];h[f.UP_ARROW]=[-1,0,e];h[f.DOWN_ARROW]=[1,0,e];a._moveFocus.apply(a,h[e.keyCode]||[]);d._noBlur=0}}),a.connect(b,"onCellClick",function(b){a._focusCellRow=b.visualIndex;a._focusCellCol=b.columnIndex}),a.connect(a,"onRender",function(b,c){a._focusCellRow>=b&&a._focusCellRow<b+c&&d.currentArea()=="body"&&a._focusCell()}),b.hScroller&&a.connect(e,"onscroll",function(){b.hScroller.scroll(!c&&
(k("webkit")||k("ie")<8)?e.scrollWidth-e.offsetWidth-e.scrollLeft:e.scrollLeft)}))},_doFocus:function(a){return this._focusCell(a)||this._focusCell(0,-1,-1)},_focusCell:function(a,c,e){b.stopEvent(a);e=e>=0?e:this._focusCellCol;c=c>=0?c:this._focusCellRow;if(a=this.getCellNode({visualIndex:c,colId:this.grid._columns[e].id})){var f=l(".gridxCellFocus",this.domNode)[0];if(a!=f)f&&d.remove(f,"gridxCellFocus"),d.add(a,"gridxCellFocus"),this._focusCellRow=c,this._focusCellCol=e;k("ie")<8||a.focus()}else if(!this.grid.rowCount())return this.grid.emptyNode.focus(),
!0;return a},_moveFocus:function(a,c,e){if(a||c){b.stopEvent(e);var d,f,h=this,j=h.grid,i=j._columns,k=h.visualCount;d=h._focusCellRow+a;d=d<0?0:d>=k?k-1:d;f=h._focusCellCol+c;f=f<0?0:f>=i.length?i.length-1:f;j.vScroller.scrollToRow(d).then(function(){h._focusCell(0,d,f);h.onMoveToCell(d,f,e)})}},_nextCell:function(a,b,c,e){var d=new j,f=this.grid,h=f._columns.length,i=this.visualCount;do if(b+=c,b<0||b>=h)a+=c,b=b<0?h-1:0,a<0?(a=i-1,b=h-1):a>=i&&(b=a=0);while(!e(a,b));f.vScroller.scrollToRow(a).then(function(){d.callback({r:a,
c:b})});return d},_blurCell:function(){var a=l(".gridxCellFocus",this.domNode)[0];a&&d.remove(a,"gridxCellFocus");return!0},_onFocus:function(a){for(a=a.target;a&&a!=this.domNode;a=a.parentNode)if(d.contains(a,"gridxCell")){for(var b=this.grid._columnsById[a.getAttribute("colid")].index;!d.contains(a,"gridxRow");)a=a.parentNode;return this._focusCell(0,parseInt(a.getAttribute("visualindex"),10),b)}return!1}})})},"gridx/core/Column":function(){define(["dojo/_base/declare"],function(n){return n([],
{constructor:function(l,i){this.grid=l;this.model=l.model;this.id=i},index:function(){var l=this.grid._columnsById[this.id];return l?l.index:-1},cell:function(l,i){return this.grid.cell(l,this,i)},name:function(){return this.grid._columnsById[this.id].name||""},setName:function(l){this.grid._columnsById[this.id].name=l;return this},field:function(){return this.grid._columnsById[this.id].field||null},getWidth:function(){return this.grid._columnsById[this.id].width}})})},"gridx/modules/ColumnWidth":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/_base/Deferred","dojo/_base/query","dojo/_base/sniff","dojo/dom-geometry","dojo/dom-class","dojo/dom-style","dojo/keys","../core/_Module"],function(n,l,i,h,d,j,k,f,c,b){return n(b,{name:"columnWidth",forced:["hLayout","header"],getAPIPath:function(){return{columnWidth:this}},constructor:function(){this._ready=new i},preload:function(){var b=this,a=b.grid;if(!a.hScroller)b.autoResize=!0;b.batchConnect([a,"_onResizeBegin",function(c,d){d.header=new i;if(b.arg("autoResize")){var f=
a.domNode.clientWidth-a.hLayout.lead-a.hLayout.tail;a.bodyNode.style.width=(f<0?0:f)+"px"}else b._adaptWidth();d.header.callback()}],[a.hLayout,"onUpdateWidth",function(){b._adaptWidth();b._ready.callback()}],[a,"setColumns","_adaptWidth"])},load:function(){var b=this.loaded;this._ready.then(function(){b.callback()})},"default":60,autoResize:!1,_adaptWidth:function(){var b=this,a=b.grid,c=a.domNode,m=a.header,i=a.isLeftToRight(),n=i?"marginLeft":"marginRight",t=i?"marginRight":"marginLeft",i=a.hLayout.lead,
s=a.hLayout.tail,w=m.innerNode,u=a.bodyNode.style,r=w.style,o=(c.clientWidth||f.get(c,"width"))-i-s,v=h(".gridxCell",w)[0],x=j.getMarginBox(v).w-j.getContentBox(v).w,y=!c.offsetHeight,z=f.get(v,"borderCollapse")=="collapse";r[n]=u[n]=i+"px";r[t]=s+"px";o=o<0?0:o;y&&z&&x--;if(a.autoWidth){l.forEach(a._columns,function(a){if(!a.width)a.width=b.arg("default")+"px"});m.refresh();var n=h("th.gridxCell",w),A=z?2:0;n.forEach(function(b){var c=f.get(b,"width");if(!d("webkit")||!y)c+=x;A+=c;d("ie")&&z&&A--;
b=a._columnsById[b.getAttribute("colid")];if(!b.width||/%$/.test(b.width))b.width=c+"px"});m._columnsWidth=A;u.width=A+"px";c.style.width=i+s+A+"px"}else{if(b.arg("autoResize"))u.width=o+"px",k.add(c,"gridxPercentColumnWidth"),l.forEach(a._columns,function(a){if(!a.width||!/%$/.test(a.width))a.width="auto"});else{var B=[],C=z?2:0;u.width=o+"px";l.forEach(a._columns,function(a){if(!a.width||a.width=="auto")a.width="auto",B.push(a);else if(/%$/.test(a.width))a.width=parseInt(o*parseFloat(a.width,10)/
100-x,10)+"px"});m.refresh();l.forEach(a._columns,function(a){if(a.width!="auto"){var b=f.get(m.getHeaderNode(a.id),"width");if(!a.width||/%$/.test(a.width))a.width=b+"px";if(!d("webkit")||!y)b+=x;C+=b}});if(B.length){d("webkit")&&(x=0);var D=o>C?(o-C)/B.length-x:b.arg("default");o>C&&d("ie")&&z&&(D+=a._columns.length/B.length);D=parseInt(D,10);l.forEach(B,function(a){a.width=D+"px"})}}m.refresh()}if(d("ie")<8)r.width=o+"px";a.hScroller&&(a.hScroller.scroll(0),m._onHScroll(0))}})})},"dijit/_TemplatedMixin":function(){define(["dojo/_base/lang",
"dojo/touch","./_WidgetBase","dojo/string","dojo/cache","dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/sniff","dojo/_base/unload","dojo/_base/window"],function(n,l,i,h,d,j,k,f,c,b,e){var a=k("dijit._TemplatedMixin",null,{templateString:null,templatePath:null,_skipNodeCache:!1,_earlyTemplatedStartup:!1,constructor:function(){this._attachPoints=[];this._attachEvents=[]},_stringRepl:function(a){var b=this.declaredClass,c=this;return h.substitute(a,this,function(a,e){e.charAt(0)==
"!"&&(a=n.getObject(e.substr(1),!1,c));if(typeof a=="undefined")throw Error(b+" template:"+e);if(a==null)return"";return e.charAt(0)=="!"?a:a.toString().replace(/"/g,"&quot;")},this)},buildRendering:function(){if(!this.templateString)this.templateString=d(this.templatePath,{sanitize:!0});var b=a.getCachedTemplate(this.templateString,this._skipNodeCache),c;if(n.isString(b)){if(c=f.toDom(this._stringRepl(b)),c.nodeType!=1)throw Error("Invalid template: "+b);}else c=b.cloneNode(!0);this.domNode=c;this.inherited(arguments);
this._attachTemplateNodes(c,function(a,b){return a.getAttribute(b)});this._beforeFillContent();this._fillContent(this.srcNodeRef)},_beforeFillContent:function(){},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)},_attachTemplateNodes:function(a,b){for(var c=n.isArray(a)?a:a.all||a.getElementsByTagName("*"),e=n.isArray(a)?0:-1;e<c.length;e++){var d=e==-1?a:c[e];if(!this.widgetsInTemplate||!b(d,"dojoType")&&!b(d,"data-dojo-type")){var f=b(d,
"dojoAttachPoint")||b(d,"data-dojo-attach-point");if(f)for(var h=f.split(/\s*,\s*/);f=h.shift();)n.isArray(this[f])?this[f].push(d):this[f]=d,this._attachPoints.push(f);if(f=b(d,"dojoAttachEvent")||b(d,"data-dojo-attach-event"))for(var h=f.split(/\s*,\s*/),i=n.trim;f=h.shift();)if(f){var j=null;f.indexOf(":")!=-1?(j=f.split(":"),f=i(j[0]),j=i(j[1])):f=i(f);j||(j=f);this._attachEvents.push(this.connect(d,l[f]||f,j))}}}},destroyRendering:function(){j.forEach(this._attachPoints,function(a){delete this[a]},
this);this._attachPoints=[];j.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments)}});a._templateCache={};a.getCachedTemplate=function(b,c){var d=a._templateCache,j=b,i=d[j];if(i){try{if(!i.ownerDocument||i.ownerDocument==e.doc)return i}catch(k){}f.destroy(i)}b=h.trim(b);if(c||b.match(/\$\{([^\}]+)\}/g))return d[j]=b;else{i=f.toDom(b);if(i.nodeType!=1)throw Error("Invalid template: "+b);return d[j]=i}};c("ie")&&b.addOnWindowUnload(function(){var b=a._templateCache,
c;for(c in b){var e=b[c];typeof e=="object"&&f.destroy(e);delete b[c]}});n.extend(i,{dojoAttachEvent:"",dojoAttachPoint:""});return a})},"gridx/modules/Header":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-class","dojo/dom-geometry","dojo/_base/query","dojo/_base/sniff","dojo/keys","../util","../core/_Module"],function(n,l,i,h,d,j,k,f,c){return n(c,{name:"header",forced:["hLayout"],getAPIPath:function(){return{header:this}},constructor:function(){var b=this.domNode=l.create("div",
{"class":"gridxHeaderRow",role:"presentation"}),c=this.innerNode=l.create("div",{"class":"gridxHeaderRowInner",role:"row",innerHTML:'<table border="0" cellpadding="0" cellspacing="0"><tr><th class="gridxCell"></th></tr></table>'});b.appendChild(c)},preload:function(){var b=this.grid,c=this.domNode;b.headerNode.appendChild(c);b.vLayout.register(this,"domNode","headerNode");this.batchConnect([b,"onHScroll","_onHScroll"],[b,"onHeaderCellMouseOver","_onHeaderCellMouseOver"],[b,"onHeaderCellMouseOut",
"_onHeaderCellMouseOver"],b.columnResizer&&[b.columnResizer,"onResize","_onColumnResize"]);this._initFocus();b._connectEvents(c,"_onMouseEvent",this)},destroy:function(){this.inherited(arguments);l.destroy(this.domNode)},columnMixin:{headerNode:function(){return this.grid.header.getHeaderNode(this.id)}},getHeaderNode:function(b){return d("[colid='"+b+"']",this.domNode)[0]},refresh:function(){var b=this,c=b.grid,a=c.focus,d=['<table role="presentation" border="0" cellpadding="0" cellspacing="0"><tr>'];
c.columns().forEach(function(c){d.push('<th colid="',c.id,'" class="gridxCell ',a&&a.currentArea()=="header"&&c.id==b._focusHeaderId?b._focusClass:"",'" role="columnheader" aria-readonly="true" tabindex="-1" style="width: ',c.getWidth(),'"><div class="gridxSortNode">',c.name(),"</div></th>")});d.push("</tr></table>");b.innerNode.innerHTML=d.join("");b._onHScroll(b._scrollLeft);b.onRender()},onRender:function(){},onMoveToHeaderCell:function(){},_scrollLeft:0,_onColumnResize:function(b,c,a){b=this.grid;
b.autoWidth?(c=this._columnsWidth+=c-a,b.bodyNode.style.width=c+"px",b.domNode.style.width=b.hLayout.lead+b.hLayout.tail+c+"px"):this.grid.hScroller&&this.grid.hScroller._onScroll()},_onHScroll:function(b){var c=this.grid.isLeftToRight();this.innerNode.firstChild.style[c?"marginLeft":"marginRight"]=(!c&&j("ff")?b:-b)+"px";this._scrollLeft=b},_onMouseEvent:function(b,c){var a=this.grid,d="onHeaderCell"+b,f="onHeader"+b;if(a._isConnected(d)||a._isConnected(f)){this._decorateEvent(c);if(c.columnIndex>=
0)a[d](c);a[f](c)}},_decorateEvent:function(b){for(var c=b.target;c&&c!==this.domNode;c=c.parentNode)if(c.tagName.toLowerCase()=="th"){if(c=this.grid._columnsById[c.getAttribute("colid")])b.columnId=c.id,b.columnIndex=c.index;break}},_onHeaderCellMouseOver:function(b){i.toggle(this.getHeaderNode(b.columnId),"gridxHeaderCellOver",b.type=="mouseover")},_focusHeaderId:null,_focusClass:"gridxHeaderCellFocus",_initFocus:function(){var b=this,c=b.grid;c.focus&&c.focus.registerArea({name:"header",priority:0,
focusNode:b.domNode,scope:b,doFocus:b._doFocus,doBlur:b._blurNode,onBlur:b._blurNode,connects:[b.connect(b.domNode,"onkeydown","_onKeyDown"),b.connect(c,"onHeaderCellMouseDown",function(a){b._focusNode(b.getHeaderNode(a.columnId))})]})},_doFocus:function(b){var c=this._focusNode(this._focusHeaderId&&this.getHeaderNode(this._focusHeaderId)||d("th.gridxCell",this.domNode)[0]);f.stopEvent(c&&b);return c},_focusNode:function(b){if(b){var c=this.grid;if(this._focusHeaderId=b.getAttribute("colid")){this._blurNode();
if(c.hScroller){var a=h.position(b),d=h.position(this.domNode),f=a.x+a.w-d.x-d.w;f<0&&(f=a.x-d.x,f>0&&(f=0));f+=this._scrollLeft;this._onHScroll(f);c.hScroller.scroll(f)}i.add(b,this._focusClass);b.focus();return!0}}return!1},_blurNode:function(){var b=d("th."+this._focusClass,this.domNode)[0];b&&i.remove(b,this._focusClass);return!0},_onKeyDown:function(b){var c=this.grid,a;a=c.isLeftToRight()?1:-1;var d=b.keyCode==k.LEFT_ARROW?-a:a;if(this._focusHeaderId&&(b.keyCode==k.LEFT_ARROW||b.keyCode==k.RIGHT_ARROW))if(f.stopEvent(b),
a=c._columnsById[this._focusHeaderId],a=c._columns[a.index+d])this._focusNode(this.getHeaderNode(a.id)),this.onMoveToHeaderCell(a.id,b)}})})},"dojo/window":function(){define(["./_base/lang","./_base/sniff","./_base/window","./dom","./dom-geometry","./dom-style"],function(n,l,i,h,d,j){var k=n.getObject("dojo.window",!0);k.getBox=function(){var f=i.doc.compatMode=="BackCompat"?i.body():i.doc.documentElement,c=d.docScroll(),b;if(l("touch")){var e=i.doc.parentWindow||i.doc.defaultView;b=e.innerWidth||
f.clientWidth;f=e.innerHeight||f.clientHeight}else b=f.clientWidth,f=f.clientHeight;return{l:c.x,t:c.y,w:b,h:f}};k.get=function(d){if(l("ie")&&k!==document.parentWindow){d.parentWindow.execScript("document._parentWindow = window;","Javascript");var c=d._parentWindow;d._parentWindow=null;return c}return d.parentWindow||d.defaultView};k.scrollIntoView=function(f,c){try{var f=h.byId(f),b=f.ownerDocument||i.doc,e=b.body||i.body(),a=b.documentElement||e.parentNode,g=l("ie"),k=l("webkit");if((!l("mozilla")&&
!g&&!k&&!l("opera")||f==e||f==a)&&typeof f.scrollIntoView!="undefined")f.scrollIntoView(!1);else{var n=b.compatMode=="BackCompat",p=g>=9&&f.ownerDocument.parentWindow.frameElement?a.clientHeight>0&&a.clientWidth>0&&(e.clientHeight==0||e.clientWidth==0||e.clientHeight>a.clientHeight||e.clientWidth>a.clientWidth)?a:e:n?e:a,b=k?e:p,t=p.clientWidth,s=p.clientHeight,w=!d.isBodyLtr(),u=c||d.position(f),r=f.parentNode,p=function(a){return g<=6||g&&n?!1:j.get(a,"position").toLowerCase()=="fixed"};if(!p(f))for(;r;){r==
e&&(r=b);var o=d.position(r),v=p(r);if(r==b){o.w=t;o.h=s;b==a&&g&&w&&(o.x+=b.offsetWidth-o.w);if(o.x<0||!g)o.x=0;if(o.y<0||!g)o.y=0}else{var x=d.getPadBorderExtents(r);o.w-=x.w;o.h-=x.h;o.x+=x.l;o.y+=x.t;var y=r.clientWidth,z=o.w-y;if(y>0&&z>0)o.w=y,o.x+=w&&(g||r.clientLeft>x.l)?z:0;y=r.clientHeight;z=o.h-y;if(y>0&&z>0)o.h=y}if(v){if(o.y<0)o.h+=o.y,o.y=0;if(o.x<0)o.w+=o.x,o.x=0;if(o.y+o.h>s)o.h=s-o.y;if(o.x+o.w>t)o.w=t-o.x}var A=u.x-o.x,B=u.y-Math.max(o.y,0),C=A+u.w-o.w,D=B+u.h-o.h;if(C*A>0){var E=
Math[A<0?"max":"min"](A,C);if(w&&(g==8&&!n||g>=9))E=-E;u.x+=r.scrollLeft;r.scrollLeft+=E;u.x-=r.scrollLeft}D*B>0&&(u.y+=r.scrollTop,r.scrollTop+=Math[B<0?"max":"min"](B,D),u.y-=r.scrollTop);r=r!=b&&!v&&r.parentNode}}}catch(F){console.error("scrollIntoView: "+F),f.scrollIntoView(!1)}};return k})},"gridx/core/Row":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred"],function(n,l,i){return n([],{constructor:function(h,d){this.grid=h;this.model=h.model;this.id=d},index:function(){return this.model.idToIndex(this.id)},
cell:function(h,d){return this.grid.cell(this,h,d)},data:function(){return this.model.byId(this.id).data},rawData:function(){return this.model.byId(this.id).rawData},item:function(){return this.model.byId(this.id).item},setRawData:function(h){var d=this.grid.store,j=this.item(),k,f;if(d.setValue){f=new i;try{for(k in h)d.setValue(j,k,h[k]);d.save({onComplete:l.hitch(f,f.callback),onError:l.hitch(f,f.errback)})}catch(c){f.errback(c)}}return f||i.when(d.put(l.mixin(l.clone(j),h)))}})})},"url:gridx/templates/Grid.html":'<div class="gridx" role="grid" tabindex="0"\r\n\t><div class="gridxHeader" role="presentation" data-dojo-attach-point="headerNode"></div\r\n\t><div class="gridxMain" role="presentation" data-dojo-attach-point="mainNode"\r\n\t\t><div class="gridxBodyEmpty" role="alert" tabindex="-1" data-dojo-attach-point="emptyNode"></div\r\n\t\t><div class="gridxBody" role="presentation" data-dojo-attach-point="bodyNode"></div\r\n\t\t><div class="gridxVScroller" data-dojo-attach-point="vScrollerNode"\r\n\t\t\t><div style=\'width: 1px;\'></div\r\n\t\t></div\r\n\t></div\r\n\t><div class="gridxFooter" data-dojo-attach-point="footerNode"\r\n\t\t><div class="gridxHScroller"\r\n\t\t\t><div class="gridxHScrollerInner" data-dojo-attach-point="hScrollerNode"><div style="width:1px; height: 1px;"></div></div\r\n\t\t></div\r\n\t></div\r\n\t><span data-dojo-attach-point="lastFocusNode" tabindex="0"></span\r\n></div>\r\n',
"gridx/core/Core":function(){define(["require","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","dojo/DeferredList","./model/Model","./Row","./Column","./Cell","./_Module"],function(n,l,i,h,d,j,k,f,c,b,e){function a(a){a=a.moduleClass.prototype;return(a.forced||[]).concat(a.optional||[])}function g(a,b){if(b)for(var c in b){var d=a[c],e=b[c];d&&h.isObject(d)&&!s(d)?g(d,e):a[c]=e}}function m(a,b){var c=[],d=b&&b.length||0;r(a.modules,function(a,b){if(s(a)||w(a))a={moduleClass:a};
if(a){var e=a.moduleClass;if(w(e))try{e=a.moduleClass=n(e)}catch(f){console.error(f)}if(s(e)){c.push(a);return}}console.error(["The ",b+1-d,"-th declared module can NOT be found, please require it before using it"].join(""))});a.modules=c;return a}function q(a){var b,c={},d=[];r(a.modules,function(a){c[a.moduleClass.prototype.name]=a});for(b in c)d.push(c[b]);a.modules=d;return a}function p(b){var c=b.modules,d,e,f,g,h=function(a){for(var b=c.length-1;b>=0;--b)if(c[b].moduleClass.prototype.name==
a)return c[b];return null};for(d=c.length-1;e=c[d];--d){f=e.moduleClass.prototype.name;for(g=a(e);g.length;){e=g.shift();if(e==f)throw Error("Module '"+e+"' is in a dependancy circle!");(e=h(e))&&(g=g.concat(a(e)))}}return b}var t=h.delegate,s=h.isFunction,w=h.isString,u=h.hitch,r=i.forEach;return l([],{_reset:function(a){this._uninit();var b={},c;for(c in a)b[c]=a[c];a=b;this.store=a.store;a.modules=a.modules||[];a.modelExtensions=a.modelExtensions||[];this.setColumns(a.structure);a.columns=this._columnsById;
c=m(a,this.coreModules);var a=e._modules,b=c.modules,d,f,g,h,i,j,l;for(d=0;d<b.length;++d){h=b[d].moduleClass.prototype;i=(h.forced||[]).concat(h.required||[]);for(f=0;f<i.length;++f){j=i[f];for(g=b.length-1;g>=0;--g)if(b[g].moduleClass.prototype.name===j)break;g<0&&(a[j]?b.push({moduleClass:a[j]}):(l=1,console.error(["Forced/Required dependent module '",j,"' is NOT found for '",h.name,"' module."].join(""))))}}if(l)throw Error("Some forced/required dependent modules are NOT found.");l=p(q(c));c=
l.modules;for(a=c.length-1;a>=0;--a)(b=c[a].moduleClass.prototype.modelExtensions)&&[].push.apply(l.modelExtensions,b);a=l;this.model=new k(a);this._create(a)},_postCreate:function(){var a=this._deferStartup=new d;this._preload();this._load(a).then(u(this,"onModulesLoaded"))},onModulesLoaded:function(){},setStore:function(a){this.store=a;this._reset(this);this._postCreate();this._deferStartup.callback()},setColumns:function(a){this.structure=a;var a=this._columns=h.clone(a),b={},c,d,e;if(h.isArray(a)){d=
0;for(e=a.length;d<e;++d)c=a[d],c.index=d,c.id=c.id||String(d+1),b[c.id]=c}this._columnsById=b;if(this.model)this.model._cache.onSetColumns(this._columnsById)},row:function(a,b){typeof a=="number"&&!b&&(a=this.model.indexToId(a));if(this.model.idToIndex(a)>=0)return this._rowObj=this._rowObj||this._mixin(new f(this),"row"),t(this._rowObj,{id:a});return null},column:function(a,b){var o;var d,e,f={};typeof a=="number"&&!b&&(o=(d=this._columns[a])&&d.id,a=o);if(d=this._columnsById[a]){this._colObj=this._colObj||
this._mixin(new c(this),"column");for(e in d)this._colObj[e]===void 0&&(f[e]=d[e]);return t(this._colObj,f)}return null},cell:function(a,d,e){if(a=a instanceof f?a:this.row(a,e))if(d=d instanceof c?d:this.column(d,e))return this._cellObj=this._cellObj||this._mixin(new b(this),"cell"),t(this._cellObj,{row:a,column:d});return null},columnCount:function(){return this._columns.length},rowCount:function(a){return this.model.size(a)},columns:function(a,b){return this._arr(this._columns.length,"column",
a,b)},rows:function(a,b){return this._arr(this.model.size(),"row",a,b)},_uninit:function(){var a=this._modules,b;for(b in a){b=a[b].mod;if(b.getAPIPath){var c=b.getAPIPath();if(c){var d=void 0;for(d in c)delete this[d]}}b.destroy()}this.model&&this.model.destroy()},_arr:function(a,b,c,d){for(var e=c||0,c=d>=0?c+d:a,d=[];e<c&&e<a;++e)d.push(this[b](e));for(var f in i)s(i[f])&&(d[f]=h.partial(i[f],d));return d},_preload:function(){var a,b=this._modules;for(a in b)a=b[a],a.mod.preload&&a.mod.preload(a.args)},
_load:function(a){var b=[],c;for(c in this._modules)b.push(this._initMod(a,c));return new j(b,0,1)},_mixin:function(a,b){var c,d,e=this._modules;for(c in e)c=e[c].mod,d=c[b+"Mixin"],s(d)&&(d=d.apply(c)),h.mixin(a,d||{});return a},_create:function(b){var c=this,d=c._modules={};r(b.modules,function(b){var e;e=b.moduleClass.prototype.name;d[e]||(d[e]={args:b,mod:e=new b.moduleClass(c,b),deps:a(b)},e.getAPIPath&&g(c,e.getAPIPath()))})},_initMod:function(a,b){var c=this._modules,d=c[b],e=d.mod,f=e.loaded;
if(!d.done)d.done=1,(new j(i.map(i.filter(d.deps,function(a){return c[a]}),u(this,this._initMod,a)),0,1)).then(function(){e.load?e.load(d.args,a):f.fired<0&&f.callback()});return f}})})},"dijit/_WidgetBase":function(){define(["require","dojo/_base/array","dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/ready","dojo/Stateful",
"dojo/topic","dojo/_base/window","./registry"],function(n,l,i,h,d,j,k,f,c,b,e,a,g,m,q,p,t,s,w,u){function r(a){return function(b){f[b?"set":"remove"](this.domNode,a,b);this._set(a,b)}}g.isAsync||p(0,function(){n(["dijit/_base/manager"])});var o={};return j("dijit._WidgetBase",t,{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:r("lang"),dir:"",_setDirAttr:r("dir"),textDir:"","class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,
containerNode:null,attributeMap:{},_blankGif:h.blankGif||n.toUrl("dojo/resources/blank.gif"),postscript:function(a,b){this.create(a,b)},create:function(a,b){this.srcNodeRef=k.byId(b);this._connects=[];this._supportingWidgets=[];if(this.srcNodeRef&&typeof this.srcNodeRef.id=="string")this.id=this.srcNodeRef.id;if(a)this.params=a,m.mixin(this,a);this.postMixInProperties();if(!this.id)this.id=u.getUniqueId(this.declaredClass.replace(/\./g,"_"));u.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();
var c=this.srcNodeRef;c&&c.parentNode&&this.domNode!==c&&c.parentNode.replaceChild(this.domNode,c)}this.domNode&&this.domNode.setAttribute("widgetId",this.id);this.postCreate();this.srcNodeRef&&!this.srcNodeRef.parentNode&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a=this.constructor,b=a._setterAttrs;if(!b){var b=a._setterAttrs=[],c;for(c in this.attributeMap)b.push(c);var a=a.prototype,d;for(d in a)d in this.attributeMap||"_set"+d.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-
1).toUpperCase()})+"Attr"in a&&b.push(d)}l.forEach(b,function(a){this.params&&a in this.params||this[a]&&this.set(a,this[a])},this);for(var e in this.params)this.set(e,this[e])},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode)this.domNode=this.srcNodeRef||b.create("div");if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(l.map(a,function(a){return a+"Rtl"})));c.add(this.domNode,a)}},postCreate:function(){},startup:function(){if(!this._started)this._started=
!0,l.forEach(this.getChildren(),function(a){if(!a._started&&!a._destroyed&&m.isFunction(a.startup))a.startup(),a._started=!0})},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){this._beingDestroyed=!0;this.uninitialize();for(var b;b=this._connects.pop();)b.remove();for(;b=this._supportingWidgets.pop();)b.destroyRecursive?b.destroyRecursive():b.destroy&&b.destroy();this.destroyRendering(a);u.remove(this.id);this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&
(this.bgIframe.destroy(a),delete this.bgIframe);this.domNode&&(a?f.remove(this.domNode,"widgetId"):b.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(a||b.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){l.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(b){var c=this.domNode;m.isObject(b)?a.set(c,b):c.style.cssText?c.style.cssText+="; "+b:c.style.cssText=b;this._set("style",
b)},_attrToDom:function(a,b,d){d=arguments.length>=3?d:this.attributeMap[a];l.forEach(m.isArray(d)?d:[d],function(d){var e=this[d.node||d||"domNode"];switch(d.type||"attribute"){case "attribute":m.isFunction(b)&&(b=m.hitch(this,b));d=d.attribute?d.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;f.set(e,d,b);break;case "innerText":e.innerHTML="";e.appendChild(w.doc.createTextNode(b));break;case "innerHTML":e.innerHTML=b;break;case "class":c.replace(e,b,this[a])}},this)},get:function(a){var b=
this._getAttrNames(a);return this[b.g]?this[b.g]():this[a]},set:function(a,b){if(typeof a==="object"){for(var c in a)this.set(c,a[c]);return this}c=this._getAttrNames(a);var d=this[c.s];if(m.isFunction(d))var e=d.apply(this,Array.prototype.slice.call(arguments,1));else{var d=this.focusNode&&!m.isFunction(this.focusNode)?"focusNode":"domNode",f=this[d].tagName,g;if(!(g=o[f])){g=this[d];var h={},i;for(i in g)h[i.toLowerCase()]=!0;g=o[f]=h}i=a in this.attributeMap?this.attributeMap[a]:c.s in this?this[c.s]:
c.l in g&&typeof b!="function"||/^aria-|^data-|^role$/.test(a)?d:null;i!=null&&this._attrToDom(a,b,i);this._set(a,b)}return e||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var c=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+c+"Attr",g:"_get"+c+"Attr",l:c.toLowerCase()}},_set:function(a,b){var c=this[a];this[a]=b;this._watchCallbacks&&this._created&&b!==c&&this._watchCallbacks(a,
c,b)},on:function(a,b){return i.after(this,this._onMap(a),b,!0)},_onMap:function(a){var b=this.constructor,c=b._onMap;if(!c){var c=b._onMap={},d;for(d in b.prototype)/^on/.test(d)&&(c[d.replace(/^on/,"").toLowerCase()]=d)}return c[a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?u.findWidgets(this.containerNode):[]},getParent:function(){return u.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,
b,c){a=d.connect(a,b,this,c);this._connects.push(a);return a},disconnect:function(a){var b=l.indexOf(this._connects,a);b!=-1&&(a.remove(),this._connects.splice(b,1))},subscribe:function(a,b){var c=s.subscribe(a,m.hitch(this,b));this._connects.push(c);return c},unsubscribe:function(a){this.disconnect(a)},isLeftToRight:function(){return this.dir?this.dir=="ltr":e.isBodyLtr()},isFocusable:function(){return this.focus&&a.get(this.domNode,"display")!="none"},placeAt:function(a,c){a.declaredClass&&a.addChild?
a.addChild(this,c):b.place(this.domNode,a,c);return this},getTextDir:function(a,b){return b},applyTextDir:function(){},defer:function(a,b){var c=setTimeout(m.hitch(this,function(){c=null;this._destroyed||m.hitch(this,a)()}),b||0);return{remove:function(){c&&(clearTimeout(c),c=null);return null}}}})})}}});define("gridx/gridx-core2",[],1);