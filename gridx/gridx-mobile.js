//>>built
require({cache:{"gridx/core/model/_Extension":function(){define(["dojo/_base/declare","dojo/_base/connect"],function(i,g){return i([],{constructor:function(c){this._cnnts=[];this.model=c;var e=this.inner=c._model;c._model=this;e&&(this.connect(e,"onDelete","_onDelete"),this.connect(e,"onNew","_onNew"),this.connect(e,"onSet","_onSet"),this.connect(e,"onSizeChange","_onSizeChange"))},destroy:function(){for(var c=this._cnnts.length-1;c>=0;--c)g.disconnect(this._cnnts[c])},connect:function(c,e,n,b){c=
g.connect(c,e,b||this,n);this._cnnts.push(c);return c},_onNew:function(){this.onNew.apply(this,arguments)},_onSet:function(){this.onSet.apply(this,arguments)},_onDelete:function(){this.onDelete.apply(this,arguments)},_onSizeChange:function(){this.onSizeChange.apply(this,arguments)},onNew:function(){},onDelete:function(){},onSet:function(){},onSizeChange:function(){},_call:function(c,e){return this[c]?this[c].apply(this,e||[]):this.inner&&this.inner._call(c,e)},_mixinAPI:function(){var c,e=this.model,
g=function(b){return function(){return e._model._call(b,arguments)}};for(c=arguments.length-1;c>=0;--c)e[arguments[c]]=g(arguments[c])}})})},"gridx/core/model/extensions/Sort":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/_base/Deferred","../_Extension"],function(i,g,c,e,n){return i(n,{name:"sort",priority:20,constructor:function(b,a){this.clear();this._mixinAPI("sort");if(a.baseSort&&a.baseSort.length)this._baseSort=a.baseSort,this._sort()},clear:function(){},
sort:function(){this.model._addCmd({name:"_cmdSort",scope:this,args:arguments})},_cmdSort:function(){this._sort.apply(this,arguments[arguments.length-1])},_sort:function(b){var a=this.model._cache,f;if(g.isArrayLike(b)){for(f=0;f<b.length;++f){var h=b[f];h.colId!==void 0?h.attribute=a.columns?a.columns[h.colId].field||h.colId:h.colId:h.colId=h.attribute}this._baseSort&&(b=b.concat(this._baseSort))}else b=this._baseSort;a.options=a.options||{};f=!1;a.options.sort&&a.options.sort.length?c.toJson(a.options.sort)!==
c.toJson(b)&&(f=!0):b&&b.length&&(f=!0);a.options.sort=g.clone(b);f&&a.clear();this.model._sendMsg("storeChange")}})})},"gridx/modules/VScroller":function(){define(["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/event","dojo/_base/sniff","dojo/_base/query","dojo/keys","dojox/html/metrics","../core/_Module"],function(i,g,c,e,n,b,a,f){return f.register(i(f,{name:"vscroller",required:["hLayout"],forced:["body","vLayout","columnWidth"],optional:["pagination"],getAPIPath:function(){return{vScroller:this}},
preload:function(){var a=this.grid;this.domNode=a.vScrollerNode;this.stubNode=this.domNode.firstChild;if(a.autoHeight)this.domNode.style.display="none";a.hLayout.register(null,this.domNode,!0)},load:function(a,b){var d=this.grid,m=this;this.batchConnect([this.domNode,"onscroll","_doScroll"],[d.bodyNode,"onmousewheel","_onMouseWheel"],[d.mainNode,"onkeypress","_onKeyScroll"],[d.body,"onRender","_onBodyChange"],[d.body,"onVisualCountChange","_onRowCountChange"],[d.body,"onRootRangeChange","_onRootRangeChange"],
e("ff")&&[d.bodyNode,"DOMMouseScroll","_onMouseWheel"]);b.then(function(){g.when(m._init(a),function(){m.loaded.callback()})})},scrollToPercentage:function(a){this.domNode.scrollTop=this.stubNode.style.clientHeight*a/100},scrollToRow:function(a,b){var d=new g,m=this.grid.bodyNode,k=0,f=n('[visualindex="'+a+'"]',this.grid.bodyNode)[0];if(f){if(b)return this.domNode.scrollTop=f.offsetTop,d.callback(!0),d;else if(f.offsetTop<m.scrollTop)k=f.offsetTop-m.scrollTop;else if(f.offsetTop+f.offsetHeight>m.scrollTop+
m.clientHeight)k=f.offsetTop+f.offsetHeight-m.scrollTop-m.clientHeight;else return d.callback(!0),d;this.domNode.scrollTop+=k}d.callback(!!f);return d},_init:function(){return this._onRootRangeChange(this.grid.body.rootStart,this.grid.body.rootCount)},_doScroll:function(){this.grid.bodyNode.scrollTop=this.domNode.scrollTop},_onMouseWheel:function(a){this.grid.autoHeight||(this.domNode.scrollTop-=typeof a.wheelDelta==="number"?a.wheelDelta/3:-40*a.detail,c.stop(a))},_onBodyChange:function(){this.stubNode.style.height=
this.grid.bodyNode.scrollHeight+"px";this._doScroll()},_onRowCountChange:function(){},_onRootRangeChange:function(a,b){return this.model.when({start:a,count:b},function(){b=b||this.model.size()-a;this.grid.body.renderRows(0,b)},this)},_onKeyScroll:function(a){var j;var h;var f=this.grid.body,d=this.domNode;if(a.keyCode==b.HOME)f._focusCellRow=0,d.scrollTop=0;else if(a.keyCode==b.END)f._focusCellRow=f.visualCount-1,d.scrollTop=this.stubNode.clientHeight-f.domNode.offsetHeight;else if(a.keyCode==b.PAGE_UP)h=
f._focusCellRow=Math.max(f.renderStart-f.renderCount,0),f=h,this.scrollToRow(f,!0);else if(a.keyCode==b.PAGE_DOWN)j=f._focusCellRow=Math.min(f.visualCount-1,f.renderStart+f.renderCount),f=j,this.scrollToRow(f,!0);else return;c.stop(a)}}))})},"gridx/core/model/Model":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","dojo/DeferredList","dojo/_base/connect"],function(i,g,c,e,n,b){return i(null,{constructor:function(a){this.store=a.store;this._exts={};
this._cmdQueue=[];this._model=this._cache=new a.cacheClass(this,a);this._createExtensions(a.modelExtensions||[],a);a=this._model;this._connects=[b.connect(a,"onDelete",this,"onDelete"),b.connect(a,"onNew",this,"onNew"),b.connect(a,"onSet",this,"onSet"),b.connect(a,"onSizeChange",this,"onSizeChange")]},destroy:function(){g.forEach(this._connects,b.disconnect);for(var a in this._exts)this._exts[a].destroy()},clearCache:function(){this._cache.clear()},when:function(){this._addCmd({name:"_cmdRequest",
scope:this,args:arguments,async:1});return this._exec()},scan:function(a,b){var h=new e,c=a.start||0,d=a.pageSize||this._cache.pageSize||1,m=a.count>0?c+a.count:Infinity,k=a.whenScope||this,p=a.whenFunc||k.when,j=function(a){p.call(k,{id:[],range:[{start:a,count:d}]},function(){var j,h,p=[];for(j=a;j<a+d&&j<m;++j)if(h=k.byIndex(j))p.push(h);else{m=-1;break}if(b(p,a)||j===m)m=-1}).then(function(){m===-1?h.callback():j(a+d)})};j(c);return h},onDelete:function(){},onNew:function(){},onSet:function(){},
onSizeChange:function(){},_sendMsg:function(){},_addCmd:function(a){var b=this._cmdQueue,h=b[b.length-1];h&&h.name===a.name&&h.scope===a.scope?h.args.push(a.args||[]):(a.args=[a.args||[]],b.push(a))},_cmdRequest:function(){var a=this,b=g.map(arguments,function(b){var f=b[0],d=b[1],m=b[2];return f===null||!b.length?(d&&d.apply(m||window),b=new e,b.callback(),b):(f=a._normalizeArgs(f),a._model._call("when",[f,function(){d&&d.apply(m||window)}]))});return new n(b,0,1)},_exec:function(){if(this._busy)return this._busy;
this._cache.skipCacheSizeCheck=1;var a=this,b=a._busy=new e,h=a._cmdQueue,o=function(d,b){delete a._busy;delete a._cache.skipCacheSizeCheck;a._cache._checkSize&&a._cache._checkSize();b?d.errback(b):d.callback()},d=function(){if(g.some(h,function(d){return d.name==="_cmdRequest"}))try{for(;h.length;){var a=h.shift(),k=a.scope[a.name].apply(a.scope,a.args);if(a.async){e.when(k,d,c.partial(o,b));return}}o(b)}catch(p){o(b,p)}else o(b)};d();return b},_createExtensions:function(a,b){a=g.filter(a,function(d){return d&&
d.prototype});a.sort(function(d,a){return d.prototype.priority-a.prototype.priority});for(var h=0,c=a.length;h<c;++h)if(h==a.length-1||a[h]!=a[h+1]){var d=new a[h](this,b);this._exts[d.name]=d}},_normalizeArgs:function(a){var b,h={range:[],id:[]},e=function(d){return d&&typeof d.start==="number"&&d.start>=0},d=function(d){if(e(d))h.range.push(d);else if(typeof d==="number"&&d>=0)h.range.push({start:d,count:1});else if(c.isArrayLike(d))for(b=d.length-1;b>=0;--b)typeof d[b]==="number"&&d[b]>=0?h.range.push({start:d[b],
count:1}):e(d[b])?h.range.push(d[b]):c.isString(d)&&h.id.push(d[b]);else c.isString(d)&&h.id.push(d)};if(a&&(a.index||a.range||a.id))if(d(a.index),d(a.range),c.isArrayLike(a.id))for(b=a.id.length-1;b>=0;--b)h.id.push(a.id[b]);else a.id!==void 0&&h.id.push(a.id);else d(a);!h.range.length&&!h.id.length&&this.size()<0&&h.range.push({start:0,count:this._cache.pageSize||1});return h}})})},"gridx/core/_Module":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect"],
function(i,g,c,e){var n=i(null,{constructor:function(b,a){this.grid=b;this.model=b.model;this._cnnts=[];this._sbscs=[];g.mixin(this,a)},destroy:function(){c.forEach(this._cnnts,e.disconnect);c.forEach(this._sbscs,e.unsubscribe)},arg:function(b,a,f){arguments.length==2&&g.isFunction(a)&&(f=a,a=void 0);var h=this[b];if(!this.hasOwnProperty(b)){var c=this.name+b.substring(0,1).toUpperCase()+b.substring(1);this.grid[c]===void 0?a!==void 0&&(h=a):h=this.grid[c]}this[b]=f&&!f(h)?a:h;return h},connect:function(b,
a,f,h,c){var h=h||this,d=this.grid,b=b===d&&typeof a=="string"?e.connect(b,a,function(){d._eventFlags[a]===c&&(g.isFunction(f)?f.apply(h,arguments):g.isFunction(h[f])&&h[f].apply(h,arguments))}):e.connect(b,a,h,f);this._cnnts.push(b);return b},batchConnect:function(){for(var b=0,a=arguments.length;b<a;++b)g.isArrayLike(arguments[b])&&this.connect.apply(this,arguments[b])},disconnect:function(b){var a=c.indexOf(this._cnnts,b);a>=0&&(this._cnnts.splice(a,1),e.disconnect(b))},subscribe:function(b,a,
f){b=e.subscribe(b,f||this,a);this._sbscs.push(b);return b},unsubscribe:function(b){var a=c.indexOf(this._sbscs,b);a>=0&&(this._sbscs.splice(a,1),e.unsubscribe(b))}});n._modules={};n.register=function(b){var a=b.prototype;return n._modules[a.name||a.declaredClass]=b};n._markupAttrs=["id","name","field","width","dataType","!formatter","!decorator","!sortable"];return n})},"gridx/modules/VLayout":function(){define(["dojo/_base/declare","dojo/dom-geometry","dojo/DeferredList","../core/_Module"],function(i,
g,c,e){return e.register(i(e,{name:"vLayout",getAPIPath:function(){return{vLayout:this}},preload:function(){var e=this,b=this.grid;this.connect(b,"_onResizeEnd",function(a,b){var h,g=[];for(h in b)g.push(b[h]);(new c(g)).then(function(){e.reLayout()})});b.autoHeight?this.connect(b.body,"onRender","reLayout"):this.connect(b,"setColumns",function(){setTimeout(function(){e.reLayout()},0)})},load:function(e,b){var a=this;b.then(function(){a._defs&&a._mods?(new c(a._defs)).then(function(){a._layout();
a.loaded.callback()}):a.loaded.callback()})},register:function(c,b,a,f,h){this._defs=this._defs||[];this._mods=this._mods||{};this._mods[a]=this._mods[a]||[];this._defs.push(h||c.loaded);this._mods[a].push({p:f||0,mod:c,nodeName:b})},reLayout:function(){var c,b=0,a,f=this.grid;for(c in this._mods)(a=f[c])&&(b+=g.getMarginBox(a).h);this._updateHeight(b)},_layout:function(){var c,b=0,a,f,h,e,d=this.grid;for(c in this._mods)if(a=d[c]){this._mods[c].sort(function(d,a){return d.p-a.p});for(f=0;f<this._mods[c].length;++f)h=
this._mods[c][f].mod,e=this._mods[c][f].nodeName,h&&h[e]&&a.appendChild(h[e]);b+=g.getMarginBox(a).h}this._updateHeight(b)},_updateHeight:function(c){var b=this.grid;b.autoHeight?b.vScroller.loaded.then(function(){var a=b.bodyNode.lastChild,a=a?a.offsetTop+a.offsetHeight:0;b.domNode.style.height=a+c+"px";b.mainNode.style.height=a+"px"}):b.mainNode.style.height=b.domNode.clientHeight-c+"px"}}))})},"gridx/util":function(){define([],function(){return{stopEvent:function(i){i&&i.stopPropagation&&i.preventDefault&&
(i.stopPropagation(),i.preventDefault())},biSearch:function(i,g){var c=0,e=i.length,n;for(n=Math.floor((c+e)/2);c+1<e;n=Math.floor((c+e)/2))g(i[n])>0?e=n:c=n;return i.length&&g(i[c])>=0?c:e}}})},"gridx/core/model/cache/_Cache":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","../_Extension"],function(i,g,c,e,n){return i(n,{constructor:function(b,a){a=a||{};this.columns=a.columns;var f=this.store=a.store,c=f.fetch;!c&&f.notify?this.connect(f,"notify",
function(a,d){a===void 0?this._onDelete(d):d===void 0?this._onNew(a):this._onSet(a)}):(this.connect(f,c?"onSet":"put","_onSet"),this.connect(f,c?"onNew":"add","_onNew"),this.connect(f,c?"onDelete":"remove","_onDelete"));this.clear();this._mixinAPI("byIndex","byId","indexToId","idToIndex","size","treePath","hasChildren","keep","free","item")},destroy:function(){this.inherited(arguments);this.clear()},clear:function(){this._priority=[];this._struct={};this._cache={};this._size={};this._struct[""]=[];
this._size[""]=-1},byIndex:function(b,a){this.prepare("byIndex",arguments);return this._cache[this.indexToId(b,a)]},byId:function(b){this.prepare("byId",arguments);return this._cache[b]},indexToId:function(b,a){this.prepare("indexToId",arguments);var f=this._struct[a||""];return f&&f[b+1]},idToIndex:function(b){this.prepare("idToIndex",arguments);var a=this._struct[b],a=this._struct[a&&a[0]],a=g.indexOf(a||[],b);return a>0?a-1:-1},treePath:function(b){var d;for(var a=[];b!==void 0;)a.unshift(b),d=
(b=this._struct[b])&&b[0],b=d;return a[0]!==""?[]:(a.pop(),a)},hasChildren:function(b){this.prepare("hasChildren",arguments);var a=this.byId(b),f=this.store;return f.hasChildren&&f.hasChildren(b,a&&a.item)},size:function(b){this.prepare("size",arguments);var a=this._size[b||""];return a>=0?a:-1},onBeforeFetch:function(){},onAfterFetch:function(){},onSetColumns:function(b){this.columns=b;var a,f,c;for(a in this._cache)for(f in b=this._cache[a],this.columns)c=this.columns[f],b.data[f]=this._formatCell(c.id,
b.rawData)},_itemToObject:function(b){var a=this.store;if(a.fetch){var f,c,e={},d=a.getAttributes(b);f=0;for(c=d.length;f<c;++f)e[d[f]]=a.getValue(b,d[f]);return e}return b},_formatCell:function(b,a){var f=this.columns[b];return f.formatter?f.formatter(a):a[f.field||b]},_formatRow:function(b){if(!this.columns)return b;var a={},f;for(f in this.columns)a[f]=this._formatCell(f,b);return a},_addRow:function(b,a,f,c,e){var e=e||"",d=this._struct[e];if(!d)throw Error("Fatal error of cache._addRow: parent item not loaded");
if(d[a+1]){if(d[a+1]!==b)throw Error("Fatal error of cache._addRow: different row id for same row index");}else d[a+1]=b;this._struct[b]=this._struct[b]||[e];e||(a=g.indexOf(this._priority,b),a>=0&&this._priority.splice(a,1),this._priority.push(b));this._cache[b]={data:this._formatRow(f),rawData:f,item:c}},_loadChildren:function(b){var a=new e,f=this.store,h=this,g=[],d=this.byId(b);d&&(g=f.getChildren&&f.getChildren(d.item)||[]);e.when(g,function(d){h._size[b]=d.length;for(var k=0,c=d.length;k<c;++k){var j=
d[k],q=f.getIdentity(j);h._addRow(q,k,h._itemToObject(j),j,b)}a.callback()},c.hitch(a,a.errback));return a},_onFetchBegin:function(b){var a=this._size[""],b=this._size[""]=parseInt(b,10);if(a!==b)this.onSizeChange(b,a)},_onFetchComplete:function(b,a,f){try{for(var c=[],e=this.store,d=0,m=f.length;d<m;++d)c.push(e.getIdentity(f[d])),this._addRow(c[d],a+d,this._itemToObject(f[d]),f[d]);b.callback(c)}catch(k){b.errback(k)}},_storeFetch:function(b){console.debug("\tFETCH start: ",b.start,", count: ",
b.count,", end: ",b.count&&b.start+b.count-1,", options:",this.options);this.onBeforeFetch();var a=this.store,f=this,h=new e,g=c.mixin({},this.options||{},b),d=c.hitch(this,this._onFetchBegin),b=c.hitch(this,this._onFetchComplete,h,b.start),m=c.hitch(h,h.errback);a.fetch?a.fetch(c.mixin(g,{onBegin:d,onComplete:b,onError:m})):(a=a.query(g.query,g),e.when(a.total,d),e.when(a,b,m));h.then(function(){f.onAfterFetch()},function(d){console.error(d)});return h},_onSet:function(b){var a=this.store.getIdentity(b),
c=this.idToIndex(a),e=this.treePath(a);e.length&&this._addRow(a,c,this._itemToObject(b),b,e.pop());this.onSet(a,c,this._cache[a])},_onNew:function(b,a){var c=this.store.getIdentity(b),e=this._itemToObject(b),e={data:this._formatRow(e),rawData:e,item:b},g=a&&a[this.store.fetch?"item":"parent"];g&&this.store.getIdentity(g);var d=this._size[""];this.clear();this.onNew(c,0,e);!g&&d>=0&&(this._size[""]=d+1,this.onSizeChange(d+1,d,"onNew"))},_onDelete:function(b){var b=this.store.fetch?this.store.getIdentity(b):
b,a=this.treePath(b),c;if(a.length){var e,i,d,m=[b],a=a.pop();c=g.indexOf(this._struct[a],b);this._struct[a].splice(c,1);--this._size[a];for(i=0;i<m.length;++i)if(e=this._struct[m[i]])for(d=e.length-1;d>0;--d)m.push(e[d]);for(i=m.length-1;i>=0;--i)d=m[i],delete this._cache[d],delete this._struct[d],delete this._size[d];i=g.indexOf(this._priority,b);i>=0&&this._priority.splice(i,1);this.onDelete(b,c);c=this._size[""];if(!a&&c>=0)this.onSizeChange(c,c+1,"onDelete")}else this.onDelete(b,c)}})})},"gridx/Grid":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/_base/lang","dojo/dom-class","dojo/dom-geometry","dojo/_base/Deferred","dojo/_base/query","dijit/_WidgetBase","dijit/_TemplatedMixin","dojo/text!./templates/Grid.html","./core/Core","./core/_Module","./modules/Header","./modules/Body","./modules/VLayout","./modules/HLayout","./modules/VScroller","./modules/HScroller","./modules/ColumnWidth"],function(i,g,c,e,n,b,a,f,h,o,d,m,k,p,j,q,l,r,t){i=i("gridx.Grid",[f,h,d],{templateString:o,coreModules:[k,p,j,q,l,r,t],coreExtensions:[],
postMixInProperties:function(){this._eventFlags={};this.modules=this.coreModules.concat(this.modules||[]);this.modelExtensions=this.coreExtensions.concat(this.modelExtensions||[]);this._initEvents(this._compNames,this._eventNames);this.reset(this)},buildRendering:function(){this.inherited(arguments);this.cssMode&&c.isString(this.cssMode)&&e.toggle(this.domNode,"compact",this.cssMode.indexOf("compact")>-1);e.toggle(this.domNode,"dojoxGridxRtl",!this.isLeftToRight())},postCreate:function(){this.inherited(arguments);
this._postCreate()},startup:function(){this._started||(this.inherited(arguments),this._deferStartup.callback())},destroy:function(){this._uninit();this.inherited(arguments)},resize:function(d){d&&(this.autoWidth&&delete d.w,this.autoHeight&&delete d.h,n.setMarginBox(this.domNode,d));var a={};this._onResizeBegin(d,a);this._onResizeEnd(d,a)},_onResizeBegin:function(){},_onResizeEnd:function(){},_dummyFunc:function(){},_compNames:["Cell","HeaderCell","Row","Header"],_eventNames:["Click","DblClick","MouseDown",
"MouseUp","MouseOver","MouseOut","MouseMove","ContextMenu","KeyDown","KeyPress","KeyUp"],_initEvents:function(d,a){g.forEach(d,function(d){g.forEach(a,function(a){a="on"+d+a;if(!this[a])this[a]=this._dummyFunc},this)},this)},_connectEvents:function(d,a,b){g.forEach(this._eventNames,function(j){this.connect(d,"on"+j.toLowerCase(),c.hitch(b,a,j))},this)},_isConnected:function(d){return this[d]!==this._dummyFunc}});i.markupFactory=function(d,b,j){if(!d.structure&&b.nodeName.toLowerCase()=="table")d.structure=
[],a("thead > tr > th",b).forEach(function(a){for(var b={},j=m._markupAttrs,k=0,c=j.length;k<c;++k){var f=j[k];f[0]=="!"?(f=f.slice(1),b[f]=eval(a.getAttribute(f))):b[f]=a.getAttribute(f)}b.name=b.name||a.innerHTML;d.structure.push(b)});return new j(d,b)};return i})},"gridx/nls/Body":function(){define({root:{emptyInfo:"No items to display"}})},"gridx/modules/SingleSort":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/keys","../core/model/extensions/Sort","../core/_Module"],function(i,
g,c,e,n){return n.register(i(n,{name:"sort",forced:["header"],required:["vLayout"],modelExtensions:[e],getAPIPath:function(){return{sort:this}},preload:function(){var b=this.grid,a;this.connect(b,"onHeaderCellClick","_onClick");this.connect(b,"onHeaderCellKeyDown","_onKeyDown");if(b.persist){var c=this;a=b.persist.registerAndLoad("sort",function(){return[{colId:c._sortId,descending:c._sortDescend}]})}a=a||this.arg("preSort");g.isArrayLike(a)&&(a=a[0]);if(a&&a.colId)this._sortId=a.colId,this._sortDescend=
a.descending,this.model.sort([a])},load:function(){for(var b in this.grid._columnsById)this._initHeader(b);this._sortId&&this._updateHeader(this._sortId,this._sortDescend);this.loaded.callback()},columnMixin:{sort:function(b,a){this.grid.sort.sort(this.id,b,a);return this},isSorted:function(){return this.grid.sort.isSorted(this.id)},clearSort:function(b){this.isSorted()&&this.grid.sort.clear(b);return this},isSortable:function(){var b=this.grid._columnsById[this.id];return b.sortable||b.sortable===
void 0},setSortable:function(b){this.grid._columnsById[this.id].sortable=!!b;return this}},sort:function(b,a,c){var e=this.grid,g=e._columnsById[b];if(g&&(g.sortable||g.sortable===void 0))(this._sortId!==b||this._sortDescend===!a)&&this._updateHeader(b,a),this.model.sort([{colId:b,descending:a}]),c||e.body.refresh()},isSorted:function(b){if(b===this._sortId)return this._sortDescend?-1:1;return 0},clear:function(b){if(this._sortId!==null)this._initHeader(this._sortId),this._sortId=this._sortDescend=
null,this.model.sort(),b||this.grid.body.refresh()},getSortData:function(){return this._sortId?[{colId:this._sortId,descending:this._sortDescend}]:null},_sortId:null,_sortDescend:null,_initHeader:function(b){var a=this.grid.header.getHeaderNode(b);a.innerHTML=["<div class='dojoxGridxSortNode'>",this.grid.column(b,1).name(),"</div>"].join("");a.removeAttribute("aria-sort")},_updateHeader:function(b,a){this._sortId&&this._sortId!==b&&this._initHeader(this._sortId);this._sortId=b;this._sortDescend=!!a;
var c=this.grid,e=c.header.getHeaderNode(b);str=["<div class='dojoxGridxSortNode ",a?"dojoxGridxSortDown":"dojoxGridxSortUp","'><div class='dojoxGridxArrowButtonChar'>",a?"&#9662;":"&#9652;","</div><div role='presentation' class='dojoxGridxArrowButtonNode'></div><div class='dojoxGridxColCaption'>",c.column(b,1).name(),"</div></div>"].join("");e.innerHTML=str;e.setAttribute("aria-sort",a?"descending":"ascending");c.vLayout.reLayout()},_onClick:function(b){this.sort(b.columnId,this._sortId!==b.columnId?
0:!this._sortDescend)},_onKeyDown:function(b){b.keyCode==c.ENTER&&this._onClick(b)}}))})},"gridx/modules/HScroller":function(){define(["dojo/_base/declare","dojo/dom-style","dojo/_base/sniff","dojo/_base/Deferred","dojox/html/metrics","../core/_Module"],function(i,g,c,e,n,b){return b.register(i(b,{name:"hscroller",required:["vLayout","hLayout"],forced:["header"],getAPIPath:function(){return this.grid.autoWidth?{}:{hScroller:this}},constructor:function(){this.grid._initEvents(["H"],["Scroll"])},preload:function(){var a=
this.grid;this.container=a.hScrollerNode.parentNode;if(!a.autoWidth){var b=this.domNode=a.hScrollerNode;a.vLayout.register(this,"container","footerNode",0);this.stubNode=b.firstChild;b.style.display="block";this.batchConnect([a.header,"onRender","refresh"],[b,"onscroll","_onScroll"],[a,"_onResizeBegin",function(a,b){b.hScroller=new e}],[a,"_onResizeEnd",function(a,b){var d=this;e.when(b.header,function(){d.refresh();b.hScroller.callback()})}]);if(c("ie")<7)b.style.height=n.getScrollbar().h+"px"}},
scroll:function(a){this.domNode.scrollLeft=a},refresh:function(){var a=this.grid,b=a.isLeftToRight(),c=b?"marginLeft":"marginRight",b=b?"marginRight":"marginLeft",e=a.hLayout.lead,d=a.hLayout.tail,m=a.domNode.clientWidth-e-d,k=a.header.innerNode,p=g.get(k,"paddingLeft")||0,j=this.domNode.style,k=k.firstChild.offsetWidth,q=j.display,l=k<=m?"none":"block";j[c]=e+p+"px";j[b]=d+"px";j.width=m-p+"px";this.stubNode.style.width=k-p+"px";j.display=l;q=="block"&&l=="none"&&a.vLayout.reLayout()},_onScroll:function(){if(this._lastLeft!=
this.domNode.scrollLeft)this._lastLeft=this.domNode.scrollLeft,this._doScroll()},_doScroll:function(){var a=this.domNode.scrollLeft;this.grid.bodyNode.scrollLeft=a;this.grid.onHScroll(a)}}))})},"gridx/core/model/cache/Sync":function(){define(["dojo/_base/declare","dojo/_base/Deferred","./_Cache"],function(i,g,c){return i(c,{keep:function(){},free:function(){},when:function(c,i){var b=new g;try{i&&i(),b.callback()}catch(a){b.errback(a)}return b},prepare:function(){this._size[""]<0&&(this._storeFetch({start:0}),
this.store.getChildren&&this._fetchChildren())},_fetchChildren:function(){for(var c=this._strut[""].slice(1);c.length;){var g=c.shift();this._loadChildren(g).then(function(){var b=_struct[g].slice(1);[].push.apply(c,b)})}}})})},"gridx/modules/HLayout":function(){define(["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/array","dojo/dom-geometry","dojo/DeferredList","../core/_Module"],function(i,g,c,e,n,b){return b.register(i(b,{name:"hLayout",getAPIPath:function(){return{hLayout:this}},load:function(a,
b){var c=this;b.then(function(){c._layout();c.loaded.callback()})},lead:0,tail:0,register:function(a,b,c){this._regs=this._regs||[];a||(a=new g,a.callback());this._regs.push([a,b,c])},onUpdateWidth:function(){},_layout:function(){if(this._regs){var a=this,b=0,g=0,i=c.map(this._regs,function(d){return d[0]});(new n(i)).then(function(){c.forEach(a._regs,function(d){var a=e.getMarginBox(d[1]).w;d[2]?g+=a:b+=a});a.lead=b;a.tail=g;a.onUpdateWidth(b,g)})}else this.onUpdateWidth(0,0)}}))})},"gridx/core/Cell":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/_base/Deferred"],function(i,g,c){return i(null,{constructor:function(c,g,b){this.grid=c;this.model=c.model;this.row=g;this.column=b},data:function(){return this.model.byId(this.row.id).data[this.column.id]},rawData:function(){var c=this.column.field();return c&&this.model.byId(this.row.id).rawData[c]},setRawData:function(e){var i=this.column.field(),b=this.grid.store,a=new c,f=g.hitch(a,a.callback),h=g.hitch(a,a.errback);if(i){var o=this.model.byId(this.row.id).item;b.setValue?
(b.setValue(o,i,e),b.save({onComplete:f,onError:h})):b.put&&(o=g.clone(o),o[i]=e,c.when(b.put(o),f,h))}else f();return a}})})},"gridx/modules/Body":function(){define(["dojo/_base/declare","dojo/_base/query","dojo/dom-construct","dojo/dom-class","dojo/_base/event","dojo/_base/Deferred","dojo/keys","../core/_Module","../util","dojo/i18n!../nls/Body"],function(i,g,c,e,n,b,a,f,h,o){return f.register(i(f,{name:"body",optional:["tree"],getAPIPath:function(){return{body:this}},preload:function(){this.domNode=
this.grid.bodyNode;this.grid._connectEvents(this.domNode,"_onMouseEvent",this);this._initFocus()},load:function(){var d=this.model,a=this.grid;this.batchConnect([d,"onDelete","_onDelete"],[d,"onNew","_onNew"],[d,"onSet","_onSet"],[d,"onSizeChange","_onSizeChange"],[a,"onRowMouseOver","_onRowMouseOver"],[a,"onRowMouseOut","_onRowMouseOver"],[a,"onCellMouseOver","_onCellMouseOver"],[a,"onCellMouseOut","_onCellMouseOver"],[a,"setColumns",function(){this.refresh()}]);d.when({},function(){if(!this.rootCount)this.rootCount=
d.size();this.visualCount=a.tree?a.tree.getVisualSize(this.rootStart,this.rootCount):this.rootCount;this.loaded.callback()},this)},destroy:function(){this.inherited(arguments);this.domNode.innerHTML=""},rowMixin:{node:function(){return this.grid.body.getRowNode({rowId:this.id})},visualIndex:function(){return this.grid.body.getRowInfo({rowId:this.id,rowIndex:this.index(),parentId:this.model.treePath(this.id).pop()}).visualIndex}},cellMixin:{node:function(){return this.grid.body.getCellNode({rowId:this.row.id,
cellId:this.column.id})}},rootStart:0,rootCount:0,renderStart:0,renderCount:0,visualStart:0,visualCount:0,autoUpdate:!0,autoChangeSize:!0,getRowNode:function(d){return(d=this._getRowNodeQuery(d))?g(d,this.domNode)[0]||null:null},getRowInfo:function(d){var a=this.model,b=this.grid;if(d.rowId)d.rowIndex=a.idToIndex(d.rowId),d.parentId=a.treePath(d.rowId).pop();if(typeof d.rowIndex=="number"&&d.rowIndex>=0)d.visualIndex=b.tree?b.tree.getVisualIndexByRowInfo(parentId,rowIndex,this.rootStart):d.rowIndex-
this.rootStart;else if(typeof d.visualIndex=="number"&&d.visualIndex>=0)b.tree?(b=b.tree.getRowInfoByVisualIndex(d.visualIndex,this.rootStart),d.rowIndex=b.start,d.parentId=b.parentId):d.rowIndex=this.rootStart+d.visualIndex;else return d;d.rowId=d.rowId||a.indexToId(d.rowIndex,d.parentId);return d},getCellNode:function(d){var a=this._getRowNodeQuery(d),b=d.colId;if(a){if(!b&&typeof d.colIndex=="number")b=this.grid._columns[d.colIndex].id;a+=" [colid='"+b+"'].dojoxGridxCell";return g(a,this.domNode)[0]||
null}else return null},refreshVisual:function(d,a){var k=this;return this.model.when({}).then(function(){if(typeof d=="number"&&d>=0){var f=!1;a>0||(f=!0,a=k.visualCount-d);var j=d+a,e=k.renderStart+k.renderCount;e<j&&(j=e);if(k.renderStart>d)d=k.renderStart;a=j-d;var l=g('[visualindex="'+d+'"]',k.domNode)[0],e=[],r=[];if(l){var h=k._buildRows(d,a,e,r);if(h){c.place(h,l,"before");for(var h=0,i=r.length;h<i;++h)k.onAfterRow.apply(k,r[h])}}b.when(k._buildUncachedRows(e),function(){for(var b=d;(f||b<
j)&&l;++b){var e=l.nextSibling;c.destroy(l);l=e}k.onRender(d,a)})}else k.renderRows(k.renderStart,k.renderCount)})},refresh:function(d,a,b){if(arguments.length)d=this.getRowInfo({rowIndex:d,parentId:b}).visualIndex;return this.refreshVisual(d,a)},refreshCell:function(d,a){var c=new b,f=this.model,j=this.grid,e=j._columns[a];j.focus&&j.focus.currentArea();if(e){var l=this.getCellNode({visualIndex:d,colId:e.id});if(l){var g,h=this.getRowInfo({visualIndex:d});f.when({start:h.rowIndex,count:1,parentId:h.parentId},
function(){if(g=f.byIndex(h.rowIndex,h.parentId))h.rowId=f.indexToId(h.rowIndex,h.parentId),this.onBeforeCell(l,h,e,g),l.innerHTML=this._buildCellContent(e,h,g.data,j.tree&&g.data[e.id]===void 0),this.onAfterCell(l,h,e,g)},this).then(function(){c.callback(!!g)});return c}}c.callback(0);return c},updateRootRange:function(d,a,b){var e=this.rootStart!==d||this.rootCount!==a;this.rootStart=d;this.rootCount=a;var j=this.visualCount;this.visualCount=this.grid.tree?this.grid.tree.getVisualSize(d,a):a;if(e){if(!b)this.domNode.innerHTML=
"",this.renderStart=this.renderCount=0,this.onRootRangeChange(d,a)}else if(j!==this.visualCount){for(d=this.getRowNode({visualIndex:this.visualCount});d;)a=d.nextSibling,c.destroy(d),d=a;if(this.renderStart>=this.visualCount)this.renderStart=this.renderCount=0;else if(this.renderStart+this.renderCount>this.visualCount)this.renderCount=this.visualCount-this.renderStart;this.onVisualCountChange(this.visualCount,j)}},renderRows:function(d,a,k){var e,j=this.grid,f=this,l="";e=[];var g=[],h=this.domNode;
if(a>0){j.emptyNode.innerHTML="";l=this._buildRows(d,a,e,g);k==="top"?(this.renderCount+=this.renderStart-d,this.renderStart=d,c.place(l,this.domNode,"first")):k==="bottom"?(this.renderCount=d+a-this.renderStart,c.place(l,this.domNode,"last")):(this.renderStart=d,this.renderCount=a,this.onUnrender(),h.scrollTop=0,h.innerHTML=l,j.emptyNode.innerHTML=l?"":o.emptyInfo,this.model.free());k=0;for(j=g.length;k<j;++k)this.onAfterRow.apply(this,g[k]);e=this._buildUncachedRows(e);b.when(e,function(){f.onRender(d,
a)})}else if(!{top:1,bottom:1}[k])h.scrollTop=0,h.innerHTML="",j.emptyNode.innerHTML=o.emptyInfo},unrenderRows:function(a,b){if(a>0){var c=0,e,j=this.domNode;if(b==="post")for(;c<a&&j.lastChild;++c)e=j.lastChild.getAttribute("rowid"),this.model.free(e),j.removeChild(j.lastChild),this.onUnrender(e);else{for(var f=j.scrollTop;c<a&&j.firstChild;++c)e=j.firstChild.getAttribute("rowid"),this.model.free(e),f-=j.firstChild.offsetHeight,j.removeChild(j.firstChild),this.onUnrender(e);this.renderStart+=c;j.scrollTop=
f>0?f:0}this.renderCount-=c}},onAfterRow:function(){},onBeforeCell:function(){},onAfterCell:function(){},onRootRangeChange:function(){},onVisualCountChange:function(){},onRender:function(){},onUnrender:function(){},onNew:function(){},onDelete:function(){},onSet:function(){},collectCellWrapper:function(){},onMoveToCell:function(){},_getRowNodeQuery:function(a){var b;a.rowId?b="[rowid='"+a.rowId+"']":typeof a.rowIndex=="number"&&a.rowIndex>=0?(b="[rowindex='"+a.rowIndex+"']",a.parentId&&(b+="[parentid='"+
a.parentId+"']")):typeof a.visualIndex=="number"&&a.visualIndex>=0&&(b="[visualindex='"+a.visualIndex+"']");return b},_buildRows:function(a,b,c,e){for(var b=a+b,j=[],f=this.model;a<b;++a){var l=this.getRowInfo({visualIndex:a}),g=f.byIndex(l.rowIndex,l.parentId);j.push('<div class="dojoxGridxRow ',a%2?"dojoxGridxRowOdd":"",'" role="row" visualindex="',a);g?(f.keep(l.rowId),j.push('" rowid="',l.rowId,'" rowindex="',l.rowIndex,'" parentid="',l.parentId,'">',this._buildCells(g.data,l),"</div>"),e.push([l,
g])):(j.push('"><div class="dojoxGridxRowDummy"></div></div>'),l.start=l.rowIndex,l.count=1,c.push(l))}return j.join("")},_buildUncachedRows:function(a){return a.length&&this.model.when(a,function(){for(var b=0,c=a.length;b<c;++b)this._buildRowContent(a[b])},this)},_buildRowContent:function(a){var b=this.model,c=g('[visualindex="'+a.visualIndex+'"]',this.domNode)[0];if(c){var e=b.byIndex(a.rowIndex,a.parentId);e?(a.rowId=b.indexToId(a.rowIndex,a.parentId),b.keep(a.rowId),c.setAttribute("rowid",a.rowId),
c.setAttribute("rowindex",a.rowIndex),c.setAttribute("parentid",a.parentId||""),b=this._buildCells(e.data,a),c.innerHTML=b,this.onAfterRow(a,e)):console.error("Row is not in cache:",a.rowIndex)}},_buildCells:function(a,b){var c,e,j,f,l=this.grid,g=l._columns,h=l.focus&&l.focus.currentArea()==="body",i=['<table class="dojoxGridxRowTable" role="presentation" border="0" cellpadding="0" cellspacing="0"><tr>'];c=0;for(j=g.length;c<j;++c)e=g[c],f=l.tree&&a[e.id]===void 0,i.push('<td class="dojoxGridxCell '),
f&&i.push("dojoxGridxPaddingCell"),h&&this._focusCellRow===b.visualIndex&&this._focusCellCol===c&&i.push("dojoxGridxCellFocus"),i.push('" role="gridcell" tabindex="-1" colid="',e.id,'" style="width: ',e.width,'">',this._buildCellContent(e,b,a,f),"</td>");i.push("</tr></table>");return i.join("")},_buildCellContent:function(a,b,c,e){if(!e)return this._wrapCellData(a.decorator?a.decorator(c[a.id],b.rowId,b.visualIndex):c[a.id],b.rowId,a.id);return""},_wrapCellData:function(a,b,c){var e=[];this.collectCellWrapper(e,
b,c);var j=e.length-1;for(j>0&&e.sort(function(a,b){return a.priority-b.priority});j>=0;--j)a=e[j].wrap(a,b,c);return a},_onMouseEvent:function(a,b){var c=this.grid,e="onCell"+a,j="onRow"+a;if(c._isConnected(e)||c._isConnected(j))if(this._decorateEvent(b),b.rowIndex>=0){if(b.columnIndex>=0)c[e](b);c[j](b)}},_decorateEvent:function(a){for(var b=a.target||a.originalTarget,c=this.grid;b&&b!==c.bodyNode;){if(b.tagName.toLowerCase()==="td"&&e.contains(b,"dojoxGridxCell")){var f=c._columnsById[b.getAttribute("colid")];
a.cellNode=b;a.columnId=f.id;a.columnIndex=f.index}if(b.tagName.toLowerCase()==="div"&&e.contains(b,"dojoxGridxRow")){a.rowId=b.getAttribute("rowid");a.parentId=b.getAttribute("parentid");a.rowIndex=parseInt(b.getAttribute("rowindex"),10);a.visualIndex=parseInt(b.getAttribute("visualindex"),10);break}b=b.parentNode}},_onSet:function(a,b,c){if(this.autoUpdate){var e=this.getRowNode({rowId:a});if(e&&c){var j=this.getRowInfo({rowId:a,rowIndex:b});e.innerHTML=this._buildCells(c.data,j);this.onAfterRow(j,
c);this.onSet(a,b,c);this.onRender(b,1)}}},_onNew:function(){},_onDelete:function(a){if(this.autoUpdate){var b=this.getRowNode({rowId:a});if(b){var e,f,j,g=0;for(e=b;e;e=e.nextSibling)f=parseInt(e.getAttribute("rowindex"),10),e.setAttribute("rowindex",f-1),j=parseInt(e.getAttribute("visualindex"),10),e.setAttribute("visualindex",j-1),++g;c.destroy(b);if(this.autoChangeSize&&this.rootStart===0)this._deleted=1,this.updateRootRange(0,this.rootCount-1,1);this.onDelete(a,f);this.onRender(f,g)}}},_onSizeChange:function(a,
b){if(this.autoChangeSize&&this.rootStart===0&&(this.rootCount===b||b<0))this._deleted||this.updateRootRange(0,a);this._deleted=0},_onRowMouseOver:function(a){var b=this.getRowNode({rowId:a.rowId});e.toggle(b,"dojoxGridxRowOver",a.type!="mouseout")},_onCellMouseOver:function(a){e.toggle(a.cellNode,"dojoxGridxCellOver",a.type!="mouseout")},_focusCellCol:0,_focusCellRow:0,_initFocus:function(){var b=this.grid,c=b.focus;c&&(c.registerArea({name:"body",priority:1,focusNode:b.bodyNode,scope:this,doFocus:this._doFocus,
doBlur:this._blurCell,onFocus:this._onFocus,onBlur:this._blurCell}),this.connect(b.mainNode,"onkeypress",function(e){if(c.currentArea()=="body"&&(!b.tree||!e.ctrlKey)){var f={},j=b.isLeftToRight()?1:-1;f[a.LEFT_ARROW]=[0,-j,e];f[a.RIGHT_ARROW]=[0,j,e];f[a.UP_ARROW]=[-1,0,e];f[a.DOWN_ARROW]=[1,0,e];this._moveFocus.apply(this,f[e.keyCode]||[])}}),this.connect(b,"onCellClick",function(a){this._focusCellRow=a.visualIndex;this._focusCellCol=a.columnIndex}),this.connect(this,"onRender",function(a,b){this._focusCellRow>=
a&&this._focusCellRow<a+b&&c.currentArea()==="body"&&this._focusCell()}),b.hScroller&&this.connect(b.bodyNode,"onscroll",function(){b.hScroller.scroll(b.bodyNode.scrollLeft)}))},_doFocus:function(a){return this._focusCell(a)||this._focusCell(null,0,0)},_focusCell:function(a,b,c){h.stopEvent(a);c=c>=0?c:this._focusCellCol;b=b>=0?b:this._focusCellRow;if(a=this.getCellNode({visualIndex:b,colId:this.grid._columns[c].id})){var f=g(".dojoxGridxCellFocus",this.domNode)[0];if(a!==f)f&&e.remove(f,"dojoxGridxCellFocus"),
e.add(a,"dojoxGridxCellFocus"),this._focusCellRow=b,this._focusCellCol=c;a.focus()}return a},_moveFocus:function(a,b,c){if(a||b){n.stop(c);var e,j,f=this;e=this._focusCellRow+a;e=e<0?0:e>=this.visualCount?this.visualCount-1:e;j=this._focusCellCol+b;j=j<0?0:j>=this.grid._columns.length?this.grid._columns.length-1:j;this.grid.vScroller.scrollToRow(e).then(function(){f._focusCell(null,e,j);f.onMoveToCell(e,j,c)})}},_nextCell:function(a,c,e,f){var j=new b,g=this.grid._columns.length,l=this.visualCount;
do if(c+=e,c<0||c>=g)a+=e,c=c<0?g-1:0,a<0?(a=l-1,c=g-1):a>=l&&(c=a=0);while(!f(a,c));this.grid.vScroller.scrollToRow(a).then(function(){j.callback({r:a,c:c})});return j},_blurCell:function(){var a=g(".dojoxGridxCellFocus",this.domNode)[0];a&&e.remove(a,"dojoxGridxCellFocus");return!0},_onFocus:function(a){for(a=a.target;a&&a!==this.domNode&&!e.contains(a,"dojoxGridxCell");)a=a.parentNode;if(a&&a!==this.domNode){for(var b=this.grid._columnsById[a.getAttribute("colid")].index;a&&!e.contains(a,"dojoxGridxRow");)a=
a.parentNode;return this._focusCell(null,parseInt(a.getAttribute("visualindex"),10),b)}return!1}}))})},"gridx/core/Column":function(){define(["dojo/_base/declare"],function(i){return i(null,{constructor:function(g,c){this.grid=g;this.model=g.model;this.id=c},index:function(){var g=this.grid._columnsById[this.id];return g?g.index:-1},cell:function(g,c){return this.grid.cell(g,this,c)},name:function(){return this.grid._columnsById[this.id].name||""},setName:function(g){this.grid._columnsById[this.id].name=
g;return this},field:function(){return this.grid._columnsById[this.id].field||null},getWidth:function(){return this.grid._columnsById[this.id].width}})})},"gridx/modules/ColumnWidth":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/html","dojo/_base/Deferred","dojo/_base/query","dojo/_base/sniff","dojo/_base/event","dojo/keys","dojox/html/metrics","../core/_Module"],function(i,g,c,e,n,b,a,f,h,o){return o.register(i(o,{name:"columnWidth",forced:["hLayout","header"],getAPIPath:function(){return{columnWidth:this}},
constructor:function(){this._ready=new e},preload:function(){var a=this.grid;if(!a.hScroller)this.percentage=!0;this.batchConnect([a,"_onResizeBegin",function(b,c){c.header=new e;this.arg("percentage")?a.bodyNode.style.width=a.domNode.clientWidth-a.hLayout.lead-a.hLayout.tail+"px":this._adaptWidth();c.header.callback()}],[a.hLayout,"onUpdateWidth",function(){this._adaptWidth();this._ready.callback()}],[a,"setColumns","_adaptWidth"])},load:function(){var a=this.loaded;this._ready.then(function(){a.callback()})},
"default":60,percentage:!1,_adaptWidth:function(){var a=this.grid,e=a.header,f=a.isLeftToRight(),h=f?"marginLeft":"marginRight",f=f?"marginRight":"marginLeft",j=a.hLayout.lead,q=a.hLayout.tail,l=e.innerNode,i=0;if(!b("webkit"))var t=n(".dojoxGridxCell",l)[0],i=c.getMarginBox(t).w-c.getContentBox(t).w;l.style[h]=j+"px";l.style[f]=q+"px";a.bodyNode.style[h]=j+"px";var s=a.domNode.clientWidth-j-q;if(a.autoWidth){g.forEach(a._columns,function(a){if(!a.width)a.width=this.arg("default")+"px"},this);e.refresh();
var o=0;n("th.dojoxGridxCell",l).forEach(function(b){var c=b.offsetWidth;o+=c;a._columnsById[b.getAttribute("colid")].width=c-i+"px"});e._columnsWidth=o;a.bodyNode.style.width=o+"px";a.domNode.style.width=j+q+o+"px"}else{if(this.arg("percentage"))a.bodyNode.style.width=s+"px",c.addClass(a.domNode,"dojoxGridxPercentColumnWidth"),g.forEach(a._columns,function(a){if(!a.width||!/%$/.test(a.width))a.width="auto"});else{var u=[],v=0;a.bodyNode.style.width=s+"px";g.forEach(a._columns,function(a){if(!a.width||
a.width=="auto")a.width="auto",u.push(a);else if(/%$/.test(a.width))a.width=s*parseFloat(a.width,10)/100-i+"px"});e.refresh();g.forEach(a._columns,function(a){if(a.width!="auto"){var b=e.getHeaderNode(a.id).offsetWidth;a.width=b-i+"px";v+=b}});var w=(s>v?(s-v)/u.length-i:this.arg("default"))+"px";g.forEach(u,function(a){a.width=w})}e.refresh()}}}))})},"gridx/modules/Rotater":function(){define(["dojo/_base/kernel","../core/_Module","dojo/_base/declare","dojo/_base/html"],function(i,g){return g.register(i.declare(g,
{name:"rotater",required:["body","header"],getAPIPath:function(){return{rotater:this}},load:function(){this.connect(this.grid,"resize",this.resize)},resize:function(c){var e=this.grid;c?i.marginBox(e.domNode,c):c=i.marginBox(e.domNode);c.w&&i.marginBox(e.bodyNode,{w:c.w});c=c.w&&c.h&&c.w>c.h;if(e.landscapeStructure&&this._landscape!=c)this._landscape=c,e.setColumns(c?e.landscapeStructure:e.structure),e.header.refresh(),e.body.refresh()}}))})},"gridx/modules/Header":function(){define(["dojo/_base/declare",
"dojo/dom-construct","dojo/dom-class","dojo/dom-geometry","dojo/_base/Deferred","dojo/_base/query","dojo/_base/sniff","dojo/_base/event","dojo/keys","dojox/html/metrics","../util","../core/_Module"],function(i,g,c,e,n,b,a,f,h,o,d,m){return m.register(i(m,{name:"header",required:["vLayout"],forced:["hLayout"],getAPIPath:function(){return{header:this}},constructor:function(){this.domNode=g.create("div",{"class":"dojoxGridxHeaderRow",role:"presentation"});this.innerNode=g.create("div",{"class":"dojoxGridxHeaderRowInner",
role:"row",innerHTML:'<table border="0" cellpadding="0" cellspacing="0"><tr><th class="dojoxGridxCell"></th></tr></table>'});this.domNode.appendChild(this.innerNode)},preload:function(){var a=this.grid;a.headerNode.appendChild(this.domNode);a.vLayout.register(this,"domNode","headerNode");this.batchConnect([a,"onHScroll","_onHScroll"],[a,"onHeaderCellMouseOver","_onHeaderCellMouseOver"],[a,"onHeaderCellMouseOut","_onHeaderCellMouseOver"],a.autoWidth&&a.columnResizer&&[a.columnResizer,"onResize","_onColumnResize"]);
this._initFocus();a._connectEvents(this.domNode,"_onMouseEvent",this)},destroy:function(){this.inherited(arguments);g.destroy(this.domNode)},columnMixin:{headerNode:function(){return this.grid.header.getHeaderNode(this.id)}},getHeaderNode:function(a){return b("[colid='"+a+"']",this.domNode)[0]},refresh:function(){var a=['<table role="presentation" border="0" cellpadding="0" cellspacing="0"><tr>'],b=this.grid,c=b.focus,d=this;b.columns().forEach(function(b){a.push('<th colid="',b.id,'" class="dojoxGridxCell ',
c&&c.currentArea()=="header"&&b.id==d._focusHeaderId?d._focusClass:"",'" role="columnheader" aria-readonly="true" tabindex="-1" style="width: ',b.getWidth(),'"><div class="dojoxGridxSortNode">',b.name(),"</div></th>")});a.push("</tr></table>");this.innerNode.innerHTML=a.join("");this._onHScroll(this._scrollLeft);this.onRender()},onRender:function(){},onMoveToHeaderCell:function(){},_scrollLeft:0,_onColumnResize:function(a,b,c){this._columnsWidth+=b-c;a=this.grid;a.bodyNode.style.width=this._columnsWidth+
"px";a.domNode.style.width=a.hLayout.lead+a.hLayout.tail+this._columnsWidth+"px"},_onHScroll:function(a){this.innerNode.firstChild.style.marginLeft=-a+"px";this._scrollLeft=a},_onMouseEvent:function(a,b){var c=this.grid,d="onHeaderCell"+a,e="onHeader"+a;if(c._isConnected(d)||c._isConnected(e)){this._decorateEvent(b);if(b.columnIndex>=0)this.grid[d](b);this.grid[e](b)}},_decorateEvent:function(a){for(var b=a.target;b&&b!==this.domNode;){if(b.tagName.toLowerCase()==="th"){if(b=this.grid._columnsById[b.getAttribute("colid")])a.columnId=
b.id,a.columnIndex=b.index;break}b=b.parentNode}},_onHeaderCellMouseOver:function(a){var b=this.getHeaderNode(a.columnId);c.toggle(b,"dojoxGridxHeaderCellOver",a.type=="mouseover")},_focusHeaderId:null,_focusClass:"dojoxGridxHeaderCellFocus",_initFocus:function(){var a=this.grid;a.focus&&a.focus.registerArea({name:"header",priority:0,focusNode:this.domNode,scope:this,doFocus:this._doFocus,doBlur:this._blurNode,onBlur:this._blurNode,connects:[this.connect(this.domNode,"onkeydown","_onKeyDown"),this.connect(a,
"onHeaderCellMouseDown",function(a){this._focusNode(this.getHeaderNode(a.columnId))})]})},_doFocus:function(a){var c;this._focusHeaderId&&(c=this.getHeaderNode(this._focusHeaderId));(c=this._focusNode(c||b("th.dojoxGridxCell",this.domNode)[0]))&&d.stopEvent(a);return c},_focusNode:function(a){if(a&&(this._focusHeaderId=a.getAttribute("colid"))){this._blurNode();if(this.grid.hScroller){var b=e.position(a),d=e.position(this.domNode),f=b.x+b.w-d.x-d.w;f<0&&(f=b.x-d.x-1,f>0&&(f=0));this._onHScroll(this._scrollLeft+
f);this.grid.hScroller.scroll(this._scrollLeft)}c.add(a,this._focusClass);a.focus();return!0}return!1},_blurNode:function(){var a=b("th."+this._focusClass,this.domNode)[0];a&&c.remove(a,this._focusClass);return!0},_onKeyDown:function(a){if(this._focusHeaderId){var b,c=this.grid;b=c.isLeftToRight()?1:-1;var d=a.keyCode==h.LEFT_ARROW?-b:b;if(a.keyCode==h.LEFT_ARROW||a.keyCode==h.RIGHT_ARROW)if(f.stop(a),a.stopPropogation(),a.preventDefault(),b=c._columnsById[this._focusHeaderId],b=c._columns[b.index+
d])this._focusNode(this.getHeaderNode(b.id)),this.onMoveToHeaderCell(b.id,a)}}}))})},"gridx/core/Row":function(){define(["dojo/_base/declare"],function(i){return i(null,{constructor:function(g,c){this.grid=g;this.model=g.model;this.id=c},index:function(){return this.model.idToIndex(this.id)},cell:function(g,c){return this.grid.cell(this,g,c)},data:function(){return this.model.byId(this.id).data},rawData:function(){return this.model.byId(this.id).rawData},item:function(){return this.model.byId(this.id).item}})})},
"gridx/modules/TouchScroller":function(){define(["dojo/_base/declare","dojo/dom-style","../core/_Module","./VScroller","dojox/mobile/_ScrollableMixin"],function(i,g,c,e){return c.register(i(e,{name:"touchScroller",getAPIPath:function(){return{touchScroller:this}},load:function(c,b){this.inherited(arguments);var a=this;b.then(function(){g.set(a.domNode,"display","none");var b=a.grid;g.set(b.mainNode,"overflow","hidden");g.set(b.bodyNode,"height","auto");g.set(b.headerNode.firstChild.firstChild,"margin-right",
"0px");(new dojox.mobile.scrollable(dojo,dojox)).init({domNode:b.mainNode,containerNode:b.bodyNode,noResize:!0})})}}))})},"url:gridx/templates/Grid.html":'<div class="dojoxGridx" role="grid" tabindex="0">\r\n\t<div class="dojoxGridxHeader" role="presentation" dojoAttachPoint="headerNode"></div>\r\n\t<div class="dojoxGridxMain" role="presentation" dojoAttachPoint="mainNode">\r\n\t\t<div class="dojoxGridxBodyEmpty" dojoAttachPoint="emptyNode"></div>\r\n\t\t<div class="dojoxGridxBody" role="presentation" dojoAttachPoint="bodyNode"></div>\r\n\t\t<div class="dojoxGridxVScroller" dojoAttachPoint="vScrollerNode"><div style="width:1px; height: 1px;"></div></div>\r\n\t\t<div class="clear"></div>\r\n\t</div>\r\n\t<div class="dojoxGridxFooter" dojoAttachPoint="footerNode">\r\n\t\t<div class="gridxHScroller">\r\n\t\t\t<div class="dojoxGridxHScroller" dojoAttachPoint="hScrollerNode"><div style="width:1px;height: 1px"></div></div>\r\n\t\t</div>\r\n\t</div>\r\n\t<span dojoAttachPoint="lastFocusNode" tabindex="0"></span>\r\n</div>\r\n',
"gridx/core/Core":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","dojo/DeferredList","./model/Model","./Row","./Column","./Cell","./_Module"],function(i,g,c,e,n,b,a,f,h,o){function d(a){a=a.moduleClass.prototype;return(a.forced||[]).concat(a.optional||[])}function m(a){for(var b in g)c.isFunction(g[b])&&(a[b]=c.partial(g[b],a));return a}function k(a,b){if(b)for(var d in b)a[d]&&c.isObject(a[d])&&!c.isFunction(a[d])?k(a[d],b[d]):a[d]=b[d]}function p(a){var b=
a.modules,c,e,f,g,h=function(a){for(var c=b.length-1;c>=0;--c)if(b[c].moduleClass.prototype.name===a)return b[c];return null};for(c=b.length-1;e=b[c];--c){f=e.moduleClass.prototype.name;for(g=d(e);g.length;){e=g.shift();if(e==f)throw Error("Module '"+e+"' is in a dependancy circle!");(e=h(e))&&(g=g.concat(d(e)))}}return a}return i(null,{reset:function(a){this._uninit();var d={},e;for(e in a)d[e]=a[e];a=d;this.store=a.store;a.modules=a.modules||[];a.modelExtensions=a.modelExtensions||[];this.setColumns(a.structure);
a.columns=this._columnsById;e=a;var f=this.coreModules,g,h,a=e.modules,d=[],i=f&&f.length||0,f=0;for(g=a.length;f<g;++f)h=a[f],c.isFunction(h)?d.push({moduleClass:h}):h?c.isFunction(h.moduleClass)?d.push(h):console.error(["The ",f+1-i,"-th declared module has NO moduleClass, please provide it"].join("")):console.error(["The ",f+1-i,"-th declared module can NOT be found, please require it before using it"].join(""));e.modules=d;for(var a=o._modules,d=e.modules,k,m,f=0;f<d.length;++f){i=d[f].moduleClass.prototype;
k=(i.forced||[]).concat(i.required||[]);for(g=0;g<k.length;++g){m=k[g];for(h=d.length-1;h>=0;--h)if(d[h].moduleClass.prototype.name===m)break;if(h<0)if(a[m])d.push({moduleClass:a[m]});else throw Error(["Forced/Required Dependent Module '",m,"' is NOT Found for '",i.name,"'"].join(""));}}a=e.modules;g={};for(d=0;f=a[d];++d)g[f.moduleClass.prototype.name]=f;a=[];for(d in g)a.push(g[d]);e.modules=a;e=p(e);a=e.modules;d=e.modelExtensions;h=[].push;for(f=a.length-1;f>=0;--f)(g=a[f].moduleClass.prototype.modelExtensions)&&
h.apply(d,g);a=e;this.model=new b(a);this._createModules(a)},_postCreate:function(){this._preloadModules();this._deferStartup=new e;this._loadModules(this._deferStartup).then(c.hitch(this,this.onModulesLoaded))},onModulesLoaded:function(){},setStore:function(a){this.store=a;this.reset(this);this._postCreate();this._deferStartup.callback()},setColumns:function(a){this.structure=a;var a=this._columns=c.clone(a),b={},d,e,f;if(c.isArray(a)){e=0;for(f=a.length;e<f;++e)d=a[e],d.index=e,d.id=d.id||String(e+
1),b[d.id]=d}this._columnsById=b;if(this.model)this.model._cache.onSetColumns(this._columnsById)},row:function(b,d){var e=b;typeof e==="number"&&!d&&(e=this.model.indexToId(e));if(this.model.idToIndex(e)>=0)return this._rowObj=this._rowObj||this._mixinComponent(new a(this),"row"),c.delegate(this._rowObj,{id:e});return null},column:function(a,b){var j;var d=a;typeof d==="number"&&!b&&(j=(d=this._columns[d])&&d.id,d=j);if(d=this._columnsById[d]){this._colObj=this._colObj||this._mixinComponent(new f(this),
"column");var e,g={};for(e in d)this._colObj[e]===void 0&&(g[e]=d[e]);return c.delegate(this._colObj,g)}return null},cell:function(b,d,e){if(b=b instanceof a?b:this.row(b,e))if(d=d instanceof f?d:this.column(d,e))return this._cellObj=this._cellObj||this._mixinComponent(new h(this),"cell"),c.delegate(this._cellObj,{row:b,column:d});return null},columnCount:function(){return this._columns.length},rowCount:function(a){return this.model.size(a)},columns:function(a,b){for(var a=a||0,c=this._columns.length,
d=b>=0?a+b:c,e=[];a<d&&a<c;++a)e.push(this.column(a));return m(e)},rows:function(a,b){for(var a=a||0,c=this.model.size(),d=b>=0?a+b:c,e=[];a<d&&a<c;++a)e.push(this.row(a));return m(e)},_uninit:function(){for(var a in this._modules){var b=this._modules[a].mod;if(b.getAPIPath){var c=b.getAPIPath();if(c){var d=void 0;for(d in c)delete this[d]}}b.destroy()}this.model&&this.model.destroy()},_preloadModules:function(){for(var a in this._modules)a=this._modules[a],a.mod.preload&&a.mod.preload(a.args)},_loadModules:function(a){var b=
[],c;for(c in this._modules)b.push(this._initializeModule(a,c));return new n(b)},_mixinComponent:function(a,b){for(var d in this._modules){var e=this._modules[d],f=e.mod[b+"Mixin"];c.isFunction(f)&&(f=f.apply(e.mod));c.mixin(a,f||{})}return a},_createModules:function(a){var j;var a=a.modules,b,c,d;this._modules={};for(b=0;b<a.length;++b)if(c=a[b],d=c.moduleClass.prototype.name,!this._modules[d])d=this._modules[d]={args:c},j=d.mod=new c.moduleClass(this,c),c=j,c.forced=c.forced||[],c.optional=c.optional||
[],c.loaded=new e,d.deps=c.forced.concat(c.optional),c.getAPIPath&&k(this,c.getAPIPath())},_initializeModule:function(a,b){var d=this._modules,e=d[b];if(!e.deferred)e.deferred=e.mod.loaded,(new n(g.map(g.filter(e.deps,function(a){return d[a]}),c.hitch(this,this._initializeModule,a)))).then(function(){e.mod.load?e.mod.load(e.args,a):e.deferred.fired<0&&e.deferred.callback()});return e.deferred}})})}}});define("gridx/gridx-mobile",[],1);