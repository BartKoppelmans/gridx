//>>built
require({cache:{"gridx/core/model/_Extension":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/_base/array"],function(l,i,k){return l([],{constructor:function(g){var d=this.inner=g._model;this._cnnts=[];this.model=g;g._model=this;d&&(this.connect(d,"onDelete","_onDelete"),this.connect(d,"onNew","_onNew"),this.connect(d,"onSet","_onSet"),this.connect(d,"onSizeChange","_onSizeChange"))},destroy:function(){k.forEach(this._cnnts,i.disconnect)},connect:function(g,d,e,h){g=i.connect(g,
d,h||this,e);this._cnnts.push(g);return g},_onNew:function(){this.onNew.apply(this,arguments)},_onSet:function(){this.onSet.apply(this,arguments)},_onDelete:function(){this.onDelete.apply(this,arguments)},_onSizeChange:function(){this.onSizeChange.apply(this,arguments)},onNew:function(){},onDelete:function(){},onSet:function(){},onSizeChange:function(){},_call:function(g,d){var e=this[g],h=this.inner;return e?e.apply(this,d||[]):h&&h._call(g,d)},_mixinAPI:function(){var g,d=this.model,e=arguments,
h=function(h){return function(){return d._model._call(h,arguments)}};for(g=e.length-1;g>=0;--g)d[e[g]]=h(e[g])}})})},"gridx/core/model/extensions/Sort":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","../_Extension"],function(l,i,k,g){return l(g,{name:"sort",priority:20,constructor:function(d,e){var h=e.baseSort;this.clear();this._mixinAPI("sort");if(h&&h.length)this._baseSort=h,this._sort()},clear:function(){},sort:function(){this.model._addCmd({name:"_cmdSort",scope:this,
args:arguments})},_cmdSort:function(){var d=arguments;this._sort.apply(this,d[d.length-1])},_sort:function(d){var e=this.model,h=this._baseSort,p=e._cache,a=p.options=p.options||{},b,c,f;if(i.isArrayLike(d)){for(b=0;b<d.length;++b)c=d[b],c.colId!==void 0?c.attribute=p.columns?p.columns[c.colId].field||c.colId:c.colId:c.colId=c.attribute;h&&(d=d.concat(h))}else d=h;a.sort&&a.sort.length?k.toJson(a.sort)!==k.toJson(d)&&(f=1):d&&d.length&&(f=1);a.sort=i.clone(d);f&&p.clear();e._msg("storeChange")}})})},
"gridx/modules/VScroller":function(){define(["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/event","dojo/_base/sniff","dojo/_base/query","dojo/keys","dojox/html/metrics","../core/_Module"],function(l,i,k,g,d,e,h,p){return p.register(l(p,{name:"vScroller",forced:["body","vLayout","columnWidth"],optional:["pagination"],getAPIPath:function(){return{vScroller:this}},preload:function(){var a=this.grid,b=this.domNode=a.vScrollerNode;this.stubNode=b.firstChild;if(g("ie")<8)this.stubNode.style.width=
h.getScrollbar().w+"px";a.autoHeight?b.style.display="none":this.domNode.style.width=h.getScrollbar().w+"px";a.hLayout.register(null,b,1)},load:function(a,b){var c=this,f=c.grid,j=f.bodyNode;c.batchConnect([c.domNode,"onscroll","_doScroll"],[j,"onmousewheel","_onMouseWheel"],[f.mainNode,"onkeypress","_onKeyScroll"],[f.body,"onRender","_onBodyChange"],[f.body,"onForcedScroll","_onForcedScroll"],[f,"_onResizeEnd","_onBodyChange"],g("ff")&&[j,"DOMMouseScroll","_onMouseWheel"]);b.then(function(){i.when(c._init(a),
function(){c.domNode.style.width="";c.loaded.callback()})})},scrollToPercentage:function(a){this.domNode.scrollTop=this.stubNode.style.clientHeight*a/100},scrollToRow:function(a,b){var c=new i,f=this.grid.bodyNode,j=this.domNode,m=0,r=d('[visualindex="'+a+'"]',f)[0];if(r){var m=r.offsetTop,o=f.scrollTop;if(b)return j.scrollTop=m,c.callback(!0),c;else if(m<o)m-=o;else if(m+r.offsetHeight>o+f.clientHeight)m=m+r.offsetHeight-o-f.clientHeight;else return c.callback(!0),c;j.scrollTop+=m}c.callback(!!r);
return c},_init:function(){this._onForcedScroll()},_doScroll:function(){this.grid.bodyNode.scrollTop=this.domNode.scrollTop},_onMouseWheel:function(a){this.grid.autoHeight||(this.domNode.scrollTop-=typeof a.wheelDelta==="number"?a.wheelDelta/3:-40*a.detail,k.stop(a))},_onBodyChange:function(){var a=this,b=a.grid;window.setTimeout(function(){a.stubNode.style.height=b.bodyNode.scrollHeight+"px";a._doScroll();b.vScrollerNode.scrollTop=b.vScrollerNode.scrollTop||0},0)},_onForcedScroll:function(){var a=
this,b=a.grid.body;return a.model.when({start:b.rootStart,count:b.rootCount},function(){b.renderRows(0,b.rootCount||a.model.size()-start)})},_onKeyScroll:function(a){var j;var f;var b=this.grid.body,c=this.domNode;if(a.keyCode==e.HOME)b._focusCellRow=0,c.scrollTop=0;else if(a.keyCode==e.END)b._focusCellRow=b.visualCount-1,c.scrollTop=this.stubNode.clientHeight-b.domNode.offsetHeight;else if(a.keyCode==e.PAGE_UP)f=b._focusCellRow=Math.max(b.renderStart-b.renderCount,0),b=f,this.scrollToRow(b,1);else if(a.keyCode==
e.PAGE_DOWN)j=b._focusCellRow=Math.min(b.visualCount-1,b.renderStart+b.renderCount),b=j,this.scrollToRow(b,1);else return;k.stop(a)}}))})},"gridx/core/model/Model":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","dojo/DeferredList","dojo/_base/connect"],function(l,i,k,g,d,e){var h=k.isArrayLike,p=k.isString;return l(null,{constructor:function(a){this.store=a.store;this._exts={};this._cmdQueue=[];this._model=this._cache=new a.cacheClass(this,a);this._createExts(a.modelExtensions||
[],a);a=this._model;this._connects=[e.connect(a,"onDelete",this,"onDelete"),e.connect(a,"onNew",this,"onNew"),e.connect(a,"onSet",this,"onSet"),e.connect(a,"onSizeChange",this,"onSizeChange")]},destroy:function(){i.forEach(this._connects,e.disconnect);for(var a in this._exts)this._exts[a].destroy()},clearCache:function(){this._cache.clear()},when:function(){this._addCmd({name:"_cmdRequest",scope:this,args:arguments,async:1});return this._exec()},scan:function(a,b){var c=new g,f=a.start||0,j=a.pageSize||
this._cache.pageSize||1,m=a.count>0?f+a.count:Infinity,r=a.whenScope||this,o=a.whenFunc||r.when,n=function(f){o.call(r,{id:[],range:[{start:f,count:j}]},function(){var a,c,n=[];for(a=f;a<f+j&&a<m;++a)if(c=r.byIndex(a))n.push(c);else{m=-1;break}if(b(n,f)||a==m)m=-1}).then(function(){m==-1?c.callback():n(f+j)})};n(f);return c},onDelete:function(){},onNew:function(){},onSet:function(){},onSizeChange:function(){},_msg:function(){},_addCmd:function(a){var b=this._cmdQueue,c=b[b.length-1];c&&c.name===a.name&&
c.scope===a.scope?c.args.push(a.args||[]):(a.args=[a.args||[]],b.push(a))},_cmdRequest:function(){return new d(i.map(arguments,function(a){var b=a[0],c=k.hitch(a[2]||window,a[1]||function(){});if(b===null||!a.length)return c(),a=new g,a.callback(),a;return this._model._call("when",[this._normArgs(b),c])},this),0,1)},_exec:function(){var a=this,b=a._cache,c=new g,f=a._cmdQueue,j=function(f,j){a._busy=0;b.skipCacheSizeCheck=0;b._checkSize&&b._checkSize();j?f.errback(j):f.callback()},m=function(){if(i.some(f,
function(f){return f.name==="_cmdRequest"}))try{for(;f.length;){var a=f.shift(),b=a.scope[a.name].apply(a.scope,a.args);if(a.async){g.when(b,m,k.partial(j,c));return}}}catch(n){j(c,n);return}j(c)};if(a._busy)return a._busy;a._busy=c;b.skipCacheSizeCheck=1;m();return c},_createExts:function(a,b){a=i.filter(a,function(f){return f&&f.prototype});a.sort(function(f,a){return f.prototype.priority-a.prototype.priority});for(var c=0,f=a.length;c<f;++c)if(c==a.length-1||a[c]!=a[c+1]){var j=new a[c](this,b);
this._exts[j.name]=j}},_normArgs:function(a){var b,c=[],f=[],j={range:c,id:f},m=function(f){return typeof f=="number"&&f>=0},r=function(a){if(a&&m(a.start))c.push(a);else if(m(a))c.push({start:a,count:1});else if(h(a))for(b=a.length-1;b>=0;--b)m(a[b])?c.push({start:a[b],count:1}):a[b]&&m(a[b].start)?c.push(a[b]):p(a)&&f.push(a[b]);else p(a)&&f.push(a)};if(a&&(a.index||a.range||a.id))if(r(a.index),r(a.range),h(a.id))for(b=a.id.length-1;b>=0;--b)f.push(a.id[b]);else a.id&&f.push(a.id);else r(a);!c.length&&
!f.length&&this.size()<0&&c.push({start:0,count:this._cache.pageSize||1});return j}})})},"gridx/core/_Module":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect"],function(l,i,k,g){var d=i.isFunction,l=l([],{constructor:function(h,e){this.grid=h;this.model=h.model;this._cnnts=[];this._sbscs=[];i.mixin(this,e)},destroy:function(){var h=k.forEach;h(this._cnnts,g.disconnect);h(this._sbscs,g.unsubscribe)},arg:function(h,e,a){arguments.length==2&&d(e)&&(a=
e,e=void 0);var b=this.grid,c=this[h];if(!this.hasOwnProperty(h)){var f=this.name+h.substring(0,1).toUpperCase()+h.substring(1);b[f]===void 0?e!==void 0&&(c=e):c=b[f]}this[h]=a&&!a(c)?e:c;return c},connect:function(h,e,a,b,c){var f=this.grid,j=b||this,h=h===f&&typeof e=="string"?g.connect(h,e,function(){var b=arguments;f._eventFlags[e]===c&&(d(a)?a.apply(j,b):d(j[a])&&j[a].apply(j,b))}):g.connect(h,e,j,a);this._cnnts.push(h);return h},batchConnect:function(){for(var e=0,d=arguments,a=d.length;e<a;++e)i.isArrayLike(d[e])&&
this.connect.apply(this,d[e])},subscribe:function(e,d,a){e=g.subscribe(e,a||this,d);this._sbscs.push(e);return e}}),e=l._modules={};l.register=function(h){var d=h.prototype;return e[d.name||d.declaredClass]=h};l._markupAttrs=["id","name","field","width","dataType","!formatter","!decorator","!sortable"];return l})},"gridx/modules/VLayout":function(){define(["dojo/_base/declare","dojo/dom-geometry","dojo/DeferredList","../core/_Module"],function(l,i,k,g){return g.register(l(g,{name:"vLayout",getAPIPath:function(){return{vLayout:this}},
preload:function(){var d=this,e=d.grid;d.connect(e,"_onResizeEnd",function(e,g){var a,b=[];for(a in g)b.push(g[a]);(new k(b)).then(function(){d.reLayout()})});e.autoHeight?d.connect(e.body,"onRender","reLayout"):d.connect(e,"setColumns",function(){setTimeout(function(){d.reLayout()},0)})},load:function(d,e){var h=this;e.then(function(){h._defs&&h._mods?(new k(h._defs)).then(function(){h._layout();h.loaded.callback()}):h.loaded.callback()})},register:function(d,e,h,g,a){this._defs=this._defs||[];this._mods=
this._mods||{};this._mods[h]=this._mods[h]||[];this._defs.push(a||d.loaded);this._mods[h].push({p:g||0,mod:d,nodeName:e})},reLayout:function(){var d,e=0,h;for(d in this._mods)(h=this.grid[d])&&(e+=i.getMarginBox(h).h);this._updateHeight(e)},_layout:function(){var d,e=0,h=this._mods,g,a,b,c,f;for(d in h)if(g=this.grid[d]){b=h[d];b.sort(function(f,a){return f.p-a.p});for(a=0;a<b.length;++a)c=b[a].mod,f=b[a].nodeName,c&&c[f]&&g.appendChild(c[f]);e+=i.getMarginBox(g).h}this._updateHeight(e)},_updateHeight:function(d){var e=
this.grid,h=e.domNode,g=e.mainNode.style;e.autoHeight?e.vScroller.loaded.then(function(){var a=e.bodyNode.lastChild,a=a?a.offsetTop+a.offsetHeight:0;h.style.height=a+d+"px";g.height=a+"px"}):g.height=h.clientHeight-d+"px"}}))})},"gridx/util":function(){define([],function(){return{stopEvent:function(l){l&&l.stopPropagation&&l.preventDefault&&(l.stopPropagation(),l.preventDefault())},biSearch:function(l,i){var k=0,g=l.length,d;for(d=Math.floor((k+g)/2);k+1<g;d=Math.floor((k+g)/2))i(l[d])>0?g=d:k=d;
return l.length&&i(l[k])>=0?k:g}}})},"gridx/core/model/cache/_Cache":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","../_Extension"],function(l,i,k,g,d){var e=k.hitch,h=k.mixin,p=i.indexOf;return l(d,{constructor:function(a,b){var b=b||{},c=this,f=c.store=b.store,j=f.fetch;c.columns=b.columns;!j&&f.notify?c.connect(f,"notify",function(f,a){f===void 0?c._onDelete(a):a===void 0?c._onNew(f):c._onSet(f)}):(c.connect(f,j?"onSet":"put","_onSet"),c.connect(f,
j?"onNew":"add","_onNew"),c.connect(f,j?"onDelete":"remove","_onDelete"));c.clear();c._mixinAPI("byIndex","byId","indexToId","idToIndex","size","treePath","hasChildren","keep","free","item")},destroy:function(){this.inherited(arguments);this.clear()},clear:function(){this._priority=[];this._struct={};this._cache={};this._size={};this._struct[""]=[];this._size[""]=-1},byIndex:function(a,b){this.prepare("byIndex",arguments);return this._cache[this.indexToId(a,b)]},byId:function(a){this.prepare("byId",
arguments);return this._cache[a]},indexToId:function(a,b){this.prepare("indexToId",arguments);var c=this._struct[b||""];return c&&c[a+1]},idToIndex:function(a){this.prepare("idToIndex",arguments);var b=this._struct,b=p(b[b[a]&&b[a][0]]||[],a);return b>0?b-1:-1},treePath:function(a){for(var b=this._struct,c=[];a!==void 0;)c.unshift(a),a=b[a]&&b[a][0];return c[0]!==""?[]:(c.pop(),c)},hasChildren:function(a){var b=this.store;this.prepare("hasChildren",arguments);var c=this.byId(a);return b.hasChildren&&
b.hasChildren(a,c&&c.item)},size:function(a){this.prepare("size",arguments);var b=this._size[a||""];return b>=0?b:-1},onBeforeFetch:function(){},onAfterFetch:function(){},onSetColumns:function(a){var b,c,f,j;this.columns=a;for(b in this._cache)for(f in c=this._cache[b],a)j=a[f],c.data[f]=this._formatCell(j.id,c.rawData)},_itemToObject:function(a){var b=this.store;if(b.fetch){var c,f,j={},m=b.getAttributes(a);c=0;for(f=m.length;c<f;++c)j[m[c]]=b.getValue(a,m[c]);return j}return a},_formatCell:function(a,
b){var c=this.columns[a];return c.formatter?c.formatter(b):b[c.field||a]},_formatRow:function(a){var b=this.columns,c={},f;if(!b)return a;for(f in b)c[f]=this._formatCell(f,a);return c},_addRow:function(a,b,c,f,j){var j=j||"",m=this._struct,e=this._priority,h=m[j];if(!h)throw Error("Fatal error of cache._addRow: parent item "+j+" of "+a+" is not loaded");if(h[b+1]){if(h[b+1]!==a)throw Error("Fatal error of cache._addRow: different row id "+a+" and "+h[b+1]+" for same row index "+b);}else h[b+1]=a;
m[a]=m[a]||[j];j||(b=p(e,a),b>=0&&e.splice(b,1),e.push(a));this._cache[a]={data:this._formatRow(c),rawData:c,item:f}},_loadChildren:function(a){var b=new g,c=this,f=c.store,j=[],m=c.byId(a);m&&(j=f.getChildren&&f.getChildren(m.item)||[]);g.when(j,function(j){c._size[a]=j.length;for(var m=0,e=j.length;m<e;++m){var h=j[m];c._addRow(f.getIdentity(h),m,c._itemToObject(h),h,a)}b.callback()},e(b,b.errback));return b},_onFetchBegin:function(a){var b=this._size[""],a=this._size[""]=parseInt(a,10);if(b!==
a)this.onSizeChange(a,b)},_onFetchComplete:function(a,b,c){try{for(var f=[],j=this.store,m=0,e=c.length;m<e;++m)f.push(j.getIdentity(c[m])),this._addRow(f[m],b+m,this._itemToObject(c[m]),c[m]);a.callback(f)}catch(h){a.errback(h)}},_storeFetch:function(a){var b=this,c=b.store,f=new g,j=h({},b.options||{},a),m=e(b,b._onFetchBegin),a=e(b,b._onFetchComplete,f,a.start),d=e(f,f.errback);b.onBeforeFetch();c.fetch?c.fetch(h(j,{onBegin:m,onComplete:a,onError:d})):(c=c.query(j.query,j),g.when(c.total,m),g.when(c,
a,d));f.then(function(){b.onAfterFetch()});return f},_onSet:function(a){var b=this.store.getIdentity(a),c=this.idToIndex(b),f=this.treePath(b);f.length&&this._addRow(b,c,this._itemToObject(a),a,f.pop());this.onSet(b,c,this._cache[b])},_onNew:function(a,b){var c=this.store,f=c.getIdentity(a),j=this._itemToObject(a),j={data:this._formatRow(j),rawData:j,item:a},m=b&&b[c.fetch?"item":"parent"];m&&c.getIdentity(m);c=this._size[""];this.clear();this.onNew(f,0,j);!m&&c>=0&&(this._size[""]=c+1,this.onSizeChange(c+
1,c,"new"))},_onDelete:function(a){var b=this.store,c=this._struct,a=b.fetch?b.getIdentity(a):a,f=this.treePath(a);if(f.length){var j,m,b=[a],e=f.pop(),h=this._size,n=h[""],d=p(c[e],a);c[e].splice(d,1);--h[e];for(j=0;j<b.length;++j)if(f=c[b[j]])for(m=f.length-1;m>0;--m)b.push(f[m]);for(j=b.length-1;j>=0;--j)m=b[j],delete this._cache[m],delete c[m],delete h[m];j=p(this._priority,a);j>=0&&this._priority.splice(j,1);this.onDelete(a,d-1);!e&&n>=0&&(h[""]=n-1,this.onSizeChange(n-1,n,"delete"))}else this.onDelete(a)}})})},
"gridx/Grid":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-class","dojo/dom-geometry","dojo/_base/query","dijit/_WidgetBase","dijit/_TemplatedMixin","dojo/text!./templates/Grid.html","./core/Core","./core/_Module","./modules/Header","./modules/Body","./modules/VLayout","./modules/HLayout","./modules/VScroller","./modules/HScroller","./modules/ColumnWidth"],function(l,i,k,g,d,e,h,p,a,b,c,f,j,m,r,o,n,s){var t=i.forEach,q=function(){},l=l("gridx.Grid",[h,p,b],
{templateString:a,coreModules:[f,j,m,r,o,n,s],coreExtensions:[],postMixInProperties:function(){this._eventFlags={};this.modules=this.coreModules.concat(this.modules||[]);this.modelExtensions=this.coreExtensions.concat(this.modelExtensions||[]);this._initEvents(this._compNames,this._eventNames);this.reset(this)},buildRendering:function(){this.inherited(arguments);g.toggle(this.domNode,"gridxRtl",!this.isLeftToRight())},postCreate:function(){this.inherited(arguments);this._postCreate()},startup:function(){this._started||
(this.inherited(arguments),this._deferStartup.callback())},destroy:function(){this._uninit();this.inherited(arguments)},resize:function(f){var a={};f&&(this.autoWidth&&delete f.w,this.autoHeight&&delete f.h,d.setMarginBox(this.domNode,f));this._onResizeBegin(f,a);this._onResizeEnd(f,a)},_onResizeBegin:function(){},_onResizeEnd:function(){},_compNames:["Cell","HeaderCell","Row","Header"],_eventNames:["Click","DblClick","MouseDown","MouseUp","MouseOver","MouseOut","MouseMove","ContextMenu","KeyDown",
"KeyPress","KeyUp"],_initEvents:function(f,a){var j=this;t(f,function(f){t(a,function(a){a="on"+f+a;j[a]=j[a]||q})})},_connectEvents:function(f,a,j){t(this._eventNames,function(b){this.connect(f,"on"+b.toLowerCase(),k.hitch(j,a,b))},this)},_isConnected:function(f){return this[f]!==q}});l.markupFactory=function(f,a,j){if(!f.structure&&a.nodeName.toLowerCase()=="table"){var b=f.structure=[];e("thead > tr > th",a).forEach(function(f){var a={};t(c._markupAttrs,function(j){j[0]=="!"?(j=j.slice(1),a[j]=
eval(f.getAttribute(j))):a[j]=f.getAttribute(j)});a.name=a.name||f.innerHTML;b.push(a)})}return new j(f,a)};return l})},"gridx/nls/Body":function(){define({root:{emptyInfo:"No items to display"}})},"gridx/modules/SingleSort":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/keys","../core/model/extensions/Sort","../core/_Module"],function(l,i,k,g,d){return d.register(l(d,{name:"sort",forced:["header"],modelExtensions:[g],getAPIPath:function(){return{sort:this}},preload:function(){var e=
this,h=e.grid,d;e.connect(h,"onHeaderCellClick","_onClick");e.connect(h,"onHeaderCellKeyDown","_onKeyDown");h.persist&&(d=h.persist.registerAndLoad("sort",function(){return[{colId:e._sortId,descending:e._sortDescend}]}));d=d||e.arg("preSort");i.isArrayLike(d)&&(d=d[0]);if(d&&d.colId)e._sortId=d.colId,e._sortDescend=d.descending,e.model.sort([d])},load:function(){var e=this,h,d=function(){e._sortId&&e._updateHeader(e._sortId,e._sortDescend)};e.connect(e.grid.header,"onRender",d);for(h in e.grid._columnsById)e._initHeader(h);
d();e.loaded.callback()},columnMixin:{sort:function(e,h){this.grid.sort.sort(this.id,e,h);return this},isSorted:function(){return this.grid.sort.isSorted(this.id)},clearSort:function(e){this.isSorted()&&this.grid.sort.clear(e);return this},isSortable:function(){var e=this.grid._columnsById[this.id];return e.sortable||e.sortable===void 0},setSortable:function(e){this.grid._columnsById[this.id].sortable=!!e;return this}},sort:function(e,h,d){var a=this.grid,b=a._columnsById[e];if(b&&(b.sortable||b.sortable===
void 0))(this._sortId!=e||this._sortDescend==!h)&&this._updateHeader(e,h),this.model.sort([{colId:e,descending:h}]),d||a.body.refresh()},isSorted:function(e){if(e==this._sortId)return this._sortDescend?-1:1;return 0},clear:function(e){if(this._sortId!==null)this._initHeader(this._sortId),this._sortId=this._sortDescend=null,this.model.sort(),e||this.grid.body.refresh()},getSortData:function(){return this._sortId?[{colId:this._sortId,descending:this._sortDescend}]:null},_sortId:null,_sortDescend:null,
_initHeader:function(e){var d=this.grid.header.getHeaderNode(e);d.innerHTML=["<div class='gridxSortNode'>",this.grid.column(e,1).name(),"</div>"].join("");d.removeAttribute("aria-sort")},_updateHeader:function(e,d){this._sortId&&this._sortId!=e&&this._initHeader(this._sortId);this._sortId=e;this._sortDescend=!!d;var g=this.grid,a=g.header.getHeaderNode(e);a.innerHTML=["<div class='gridxSortNode ",d?"gridxSortDown":"gridxSortUp","'><div class='gridxArrowButtonChar'>",d?"&#9662;":"&#9652;","</div><div role='presentation' class='gridxArrowButtonNode'></div><div class='gridxColCaption'>",
g.column(e,1).name(),"</div></div>"].join("");a.setAttribute("aria-sort",d?"descending":"ascending");g.vLayout.reLayout()},_onClick:function(e){this.sort(e.columnId,this._sortId!=e.columnId?0:!this._sortDescend)},_onKeyDown:function(e){e.keyCode==k.ENTER&&this._onClick(e)}}))})},"gridx/modules/HScroller":function(){define(["dojo/_base/declare","dojo/dom-style","dojo/_base/sniff","dojo/_base/Deferred","dojox/html/metrics","../core/_Module"],function(l,i,k,g,d,e){return e.register(l(e,{name:"hScroller",
forced:["header"],getAPIPath:function(){return this.grid.autoWidth?{}:{hScroller:this}},constructor:function(){this.grid._initEvents(["H"],["Scroll"])},preload:function(){var e=this,i=e.grid,a=i.hScrollerNode;if(!i.autoWidth&&(e.domNode=a,e.container=a.parentNode,e.stubNode=a.firstChild,i.vLayout.register(e,"container","footerNode",0),a.style.display="block",e.batchConnect([i.header,"onRender","refresh"],[a,"onscroll","_onScroll"],[i,"_onResizeBegin",function(a,c){c.hScroller=new g}],[i,"_onResizeEnd",
function(a,c){g.when(c.header,function(){e.refresh();c.hScroller.callback()})}]),k("ie")))a.style.height=d.getScrollbar().h+"px"},scroll:function(e){this.domNode.scrollLeft=e},refresh:function(){var e=this.grid,d=e.isLeftToRight(),a=d?"marginLeft":"marginRight",d=d?"marginRight":"marginLeft",b=e.hLayout.lead,c=e.hLayout.tail,f=(e.domNode.clientWidth||i.get(e.domNode,"width"))-b-c,j=e.header.innerNode,m=i.get(j,"paddingLeft")||0,r=this.domNode.style,j=j.firstChild.offsetWidth+m,g=r.display,n=j<=f?
"none":"block";r[a]=b+m+"px";r[d]=c+"px";r.width=(f-m<0?0:f-m)+"px";this.stubNode.style.width=(j-m<0?0:j-m)+"px";r.display=n;g=="block"&&n=="none"&&e.vLayout.reLayout()},_lastLeft:0,_onScroll:function(){var e=this.domNode.scrollLeft;if(this._lastLeft!=e)this._lastLeft=e,this._doScroll()},_doScroll:function(){var e=this.grid;e.onHScroll(e.bodyNode.scrollLeft=this.domNode.scrollLeft)}}))})},"gridx/core/model/cache/Sync":function(){define(["dojo/_base/declare","dojo/_base/Deferred","./_Cache"],function(l,
i,k){return l(k,{keep:function(){},free:function(){},when:function(g,d){var e=new i;try{d&&d(),e.callback()}catch(h){e.errback(h)}return e},prepare:function(){this._size[""]<0&&(this._storeFetch({start:0}),this.store.getChildren&&this._fetchChildren())},_fetchChildren:function(){for(var g=this._struct,d=g[""].slice(1),e;d.length;)e=d.shift(),this._loadChildren(e).then(function(){[].push.apply(d,g[e].slice(1))})}})})},"gridx/modules/HLayout":function(){define(["dojo/_base/declare","dojo/_base/Deferred",
"dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/DeferredList","../core/_Module"],function(l,i,k,g,d,e,h){return h.register(l(h,{name:"hLayout",getAPIPath:function(){return{hLayout:this}},load:function(e,a){var b=this;a.then(function(){b._layout();b.loaded.callback()})},lead:0,tail:0,register:function(e,a,b){var c=this._regs=this._regs||[];e||(e=new i,e.callback());c.push([e,a,b])},onUpdateWidth:function(){},_layout:function(){var h=this,a=h._regs;if(a){var b=0,c=0,f=k.map(a,function(f){return f[0]});
(new e(f)).then(function(){k.forEach(a,function(f){var a=g.getMarginBox(f[1]).w||d.get(f[1],"width");f[2]?c+=a:b+=a});h.lead=b;h.tail=c;h.onUpdateWidth(b,c)})}else h.onUpdateWidth(0,0)}}))})},"gridx/core/Cell":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred"],function(l,i,k){return l([],{constructor:function(g,d,e){this.grid=g;this.model=g.model;this.row=d;this.column=e},data:function(){return this.model.byId(this.row.id).data[this.column.id]},rawData:function(){var g=
this.column.field();return g&&this.model.byId(this.row.id).rawData[g]},setRawData:function(g){var d=new k,e=this.column.field(),h=this.grid.store,l=i.hitch,a=l(d,d.callback),l=l(d,d.errback);if(e){var b=this.model.byId(this.row.id).item;h.setValue?(h.setValue(b,e,g),h.save({onComplete:a,onError:l})):h.put&&(b=i.clone(b),b[e]=g,k.when(h.put(b),a,l))}else a();return d}})})},"gridx/modules/Body":function(){define(["dojo/_base/declare","dojo/_base/query","dojo/_base/array","dojo/dom-construct","dojo/dom-class",
"dojo/_base/Deferred","dojo/_base/sniff","dojo/keys","../core/_Module","../util","dojo/i18n!../nls/Body"],function(l,i,k,g,d,e,h,p,a,b,c){return a.register(l(a,{name:"body",optional:["tree"],getAPIPath:function(){return{body:this}},preload:function(){var f=this.grid,a=this.domNode=f.bodyNode;f._connectEvents(a,"_onMouseEvent",this);this._initFocus()},load:function(){var f=this,a=f.model,b=f.grid;f.batchConnect([a,"onDelete","_onDelete"],[a,"onSet","_onSet"],[a,"onSizeChange","_onSizeChange"],[b,"onRowMouseOver",
"_onRowMouseOver"],[b,"onCellMouseOver","_onCellMouseOver"],[b,"onCellMouseOut","_onCellMouseOver"],[b.bodyNode,"onmouseleave",function(){var a=i(".gridxRowOver",f.domNode)[0];a&&d.remove(a,"gridxRowOver")}],[b,"setColumns",function(){f.refresh()}]);a.when({},function(){var c=f.rootCount,c=f.rootCount=c?c:a.size();f.visualCount=b.tree?b.tree.getVisualSize(f.rootStart,c):c;f.loaded.callback()})},destroy:function(){this.inherited(arguments);this.domNode.innerHTML=""},rowMixin:{node:function(){return this.grid.body.getRowNode({rowId:this.id})},
visualIndex:function(){var f=this.id;return this.grid.body.getRowInfo({rowId:f,rowIndex:this.index(),parentId:this.model.treePath(f).pop()}).visualIndex}},cellMixin:{node:function(){return this.grid.body.getCellNode({rowId:this.row.id,cellId:this.column.id})}},getRowNode:function(f){return(f=this._getRowNodeQuery(f))?i(f,this.domNode)[0]||null:null},getCellNode:function(f){var a=f.colId,b=this._getRowNodeQuery(f);if(b){if(!a&&typeof f.colIndex=="number")a=this.grid._columns[f.colIndex].id;b+=" [colid='"+
a+"'].gridxCell";return i(b,this.domNode)[0]||null}return null},getRowInfo:function(a){var b=this.model,c=this.grid,e=a.rowId;if(e)a.rowIndex=b.idToIndex(e),a.parentId=b.treePath(e).pop();if(typeof a.rowIndex=="number"&&a.rowIndex>=0)a.visualIndex=c.tree?c.tree.getVisualIndexByRowInfo(parentId,rowIndex,this.rootStart):a.rowIndex-this.rootStart;else if(typeof a.visualIndex=="number"&&a.visualIndex>=0)c.tree?(c=c.tree.getRowInfoByVisualIndex(a.visualIndex,this.rootStart),a.rowIndex=c.start,a.parentId=
c.parentId):a.rowIndex=this.rootStart+a.visualIndex;else return a;a.rowId=e||b.indexToId(a.rowIndex,a.parentId);return a},refresh:function(a){var b=this;return b.model.when({}).then(function(){var c=b.renderStart,d=b.renderCount;if(typeof a=="number"&&a>=0){a=c>a?c:a;var h=c+d-a,c=i('[visualindex="'+a+'"]',b.domNode)[0],d=[],n=[];if(c){var s=b._buildRows(a,h,d,n);if(s){g.place(s,c,"before");for(var s=0,t=n.length;s<t;++s)b.onAfterRow.apply(b,n[s])}}for(;c;)n=c.nextSibling,g.destroy(c),c=n;e.when(b._buildUncachedRows(d),
function(){b.onRender(a,h)})}else b.renderRows(c,d,0,1)})},refreshCell:function(a,b){var c=new e,d=this,h=d.model,n=d.grid,g=n._columns[b],t=g&&d.getCellNode({visualIndex:a,colId:g.id});if(t){var q,i=d.getRowInfo({visualIndex:a}),k=i.rowIndex,l=i.parentId;h.when({start:k,count:1,parentId:l},function(){if(q=h.byIndex(k,l))i.rowId=h.indexToId(k,l),t.innerHTML=d._buildCellContent(g,i,q.data,n.tree&&q.data[g.id]===void 0),d.onAfterCell(t,i,g,q)}).then(function(){c.callback(!!q)});return c}c.callback(0);
return c},rootStart:0,rootCount:0,renderStart:0,renderCount:0,visualStart:0,visualCount:0,autoUpdate:1,autoChangeSize:1,updateRootRange:function(a,b){var c=this.grid.tree,c=this.visualCount=c?c.getVisualSize(a,b):b;this.rootStart=a;this.rootCount=b;if(this.renderStart+this.renderCount>c&&(this.renderStart=c-this.renderCount,this.renderStart<0))this.renderStart=0,this.renderCount=c;if(!this.renderCount&&c)this.onForcedScroll()},renderRows:function(a,b,d,i){var o=this,n=o.grid,s="",t=[],q=[],k=o.domNode,
l=n.emptyNode;if(b>0){l.innerHTML="";d!="top"&&d!="bottom"&&o.model.free();s=o._buildRows(a,b,t,q);if(d=="top")o.renderCount+=o.renderStart-a,o.renderStart=a,g.place(s,k,"first");else if(d=="bottom")o.renderCount=a+b-o.renderStart,g.place(s,k,"last");else{o.renderStart=a;o.renderCount=b;d=i?k.scrollTop:0;k.scrollTop=0;if(h("ie"))for(;k.childNodes.length;)k.removeChild(k.firstChild);k.innerHTML=s;k.scrollTop=d;k.scrollLeft=n.hScrollerNode.scrollLeft;l.innerHTML=s?"":c.emptyInfo;o.onUnrender()}n=0;
for(s=q.length;n<s;++n)o.onAfterRow.apply(o,q[n]);e.when(o._buildUncachedRows(t),function(){o.onRender(a,b)})}else if(!{top:1,bottom:1}[d])k.scrollTop=0,k.innerHTML="",l.innerHTML=c.emptyInfo,o.onUnrender(),o.model.free()},unrenderRows:function(a,b){if(a>0){var c=0,e,d=this.domNode;if(b=="post")for(;c<a&&d.lastChild;++c)e=d.lastChild.getAttribute("rowid"),this.model.free(e),d.removeChild(d.lastChild),this.onUnrender(e);else{for(var n=d.scrollTop;c<a&&d.firstChild;++c)e=d.firstChild.getAttribute("rowid"),
this.model.free(e),n-=d.firstChild.offsetHeight,d.removeChild(d.firstChild),this.onUnrender(e);this.renderStart+=c;d.scrollTop=n>0?n:0}this.renderCount-=c;this.model.when()}},onAfterRow:function(){},onAfterCell:function(){},onRender:function(){},onUnrender:function(){},onDelete:function(){},onSet:function(){},collectCellWrapper:function(){},onMoveToCell:function(){},onForcedScroll:function(){},_getRowNodeQuery:function(a){var b;a.rowId?b="[rowid='"+a.rowId+"']":typeof a.rowIndex=="number"&&a.rowIndex>=
0?(b="[rowindex='"+a.rowIndex+"']",a.parentId&&(b+="[parentid='"+a.parentId+"']")):typeof a.visualIndex=="number"&&a.visualIndex>=0&&(b="[visualindex='"+a.visualIndex+"']");return b&&b+".gridxRow"},_buildRows:function(a,b,c,e){for(var b=a+b,d=[],n=this.model,h=this.domNode.scrollWidth;a<b;++a){var g=this.getRowInfo({visualIndex:a}),q=n.byIndex(g.rowIndex,g.parentId);d.push('<div class="gridxRow ',a%2?"gridxRowOdd":"",'" role="row" visualindex="',a);q?(n.keep(g.rowId),d.push('" rowid="',g.rowId,'" rowindex="',
g.rowIndex,'" parentid="',g.parentId,'">',this._buildCells(q.data,g),"</div>"),e.push([g,q])):(d.push('"><div class="gridxRowDummy" style="width:',h,'px;"></div></div>'),g.start=g.rowIndex,g.count=1,c.push(g))}return d.join("")},_buildUncachedRows:function(a){return a.length&&this.model.when(a,function(){for(var b=0,c=a.length;b<c;++b)this._buildRowContent(a[b])},this)},_buildRowContent:function(a){var b=this.model,c=i('[visualindex="'+a.visualIndex+'"]',this.domNode)[0];if(c){var e=b.byIndex(a.rowIndex,
a.parentId);e?(a.rowId=b.indexToId(a.rowIndex,a.parentId),b.keep(a.rowId),c.setAttribute("rowid",a.rowId),c.setAttribute("rowindex",a.rowIndex),c.setAttribute("parentid",a.parentId||""),c.innerHTML=this._buildCells(e.data,a),this.onAfterRow(a,e)):console.error("Row is not in cache:",a.rowIndex)}},_buildCells:function(a,b){for(var c,e,d=this.grid,n=d._columns,h=d.focus&&d.focus.currentArea()=="body",g=['<table class="gridxRowTable" role="presentation" border="0" cellpadding="0" cellspacing="0"><tr>'],
q=0,i=n.length;q<i;++q)c=n[q],e=d.tree&&a[c.id]===void 0,g.push('<td class="gridxCell '),e&&g.push("gridxPaddingCell"),h&&this._focusCellRow===b.visualIndex&&this._focusCellCol===q&&g.push("gridxCellFocus"),g.push('" role="gridcell" tabindex="-1" colid="',c.id,'" style="width: ',c.width,'">',this._buildCellContent(c,b,a,e),"</td>");g.push("</tr></table>");return g.join("")},_buildCellContent:function(a,b,c,e){var d="";e||(d=this._wrapCellData(a.decorator?a.decorator(c[a.id],b.rowId,b.visualIndex):
c[a.id],b.rowId,a.id));return!d&&h("ie")<8?"$nbsp;":d},_wrapCellData:function(a,b,c){var e=[];this.collectCellWrapper(e,b,c);var d=e.length-1;for(d>0&&e.sort(function(a,b){return a.priority-b.priority});d>=0;--d)a=e[d].wrap(a,b,c);return a},_onMouseEvent:function(a,b){var c=this.grid,e="onCell"+a,d="onRow"+a;if(c._isConnected(e)||c._isConnected(d))if(this._decorateEvent(b),b.rowId){if(b.columnId)c[e](b);c[d](b)}},_decorateEvent:function(a){for(var b=a.target||a.originalTarget,c=this.grid,e;b&&b!=
c.bodyNode;b=b.parentNode){e=b.tagName.toLowerCase();if(e=="td"&&d.contains(b,"gridxCell")){var g=c._columnsById[b.getAttribute("colid")];a.cellNode=b;a.columnId=g.id;a.columnIndex=g.index}if(e=="div"&&d.contains(b,"gridxRow")){a.rowId=b.getAttribute("rowid");a.parentId=b.getAttribute("parentid");a.rowIndex=parseInt(b.getAttribute("rowindex"),10);a.visualIndex=parseInt(b.getAttribute("visualindex"),10);break}}},_onSet:function(a,b,c){if(this.autoUpdate){var e=this.getRowNode({rowId:a});if(e&&c){var d=
this.getRowInfo({rowId:a,rowIndex:b});e.innerHTML=this._buildCells(c.data,d);this.onAfterRow(d,c);this.onSet(a,b,c);this.onRender(b,1)}}},_onDelete:function(a){if(this.autoUpdate){var b=this.getRowNode({rowId:a});if(b){for(var c=0,e=parseInt(b.getAttribute("rowindex"),10),d=b.getAttribute("parentid"),n={id:1},h=[b],i,q=[a],b=b.nextSibling;b&&n[b.getAttribute("parentid")];b=b.nextSibling)i=b.getAttribute("rowid"),q.push(i),h.push(b),n[i]=1;for(;b;b=b.nextSibling)b.getAttribute("parentid")==d&&b.setAttribute("rowindex",
parseInt(b.getAttribute("rowindex"),10)-1),b.setAttribute("visualindex",parseInt(b.getAttribute("visualindex"),10)-1),++c;k.forEach(h,g.destroy);k.forEach(q,this.onUnrender,this);this.autoChangeSize&&this.rootStart===0&&!d&&this.updateRootRange(0,this.rootCount-1);this.onDelete(a,e);this.onRender(e,c)}}},_onSizeChange:function(a,b){if(this.autoChangeSize&&this.rootStart===0&&(this.rootCount===b||b<0))this.updateRootRange(0,a),this._started&&this.refresh(),this._started=1},_onRowMouseOver:function(a){var b=
i("> div.gridxRowOver",this.domNode)[0],a=this.getRowNode({rowId:a.rowId});b!=a&&(b&&d.remove(b,"gridxRowOver"),d.add(a,"gridxRowOver"))},_onCellMouseOver:function(a){d.toggle(a.cellNode,"gridxCellOver",a.type=="mouseover")},_focusCellCol:0,_focusCellRow:0,_initFocus:function(){var a=this,b=a.grid,c=b.bodyNode,e=b.focus;e&&(e.registerArea({name:"body",priority:1,focusNode:c,scope:a,doFocus:a._doFocus,doBlur:a._blurCell,onFocus:a._onFocus,onBlur:a._blurCell}),a.connect(b.mainNode,"onkeypress",function(c){if(e.currentArea()==
"body"&&(!b.tree||!c.ctrlKey)){var d={},g=b.isLeftToRight()?1:-1;d[p.LEFT_ARROW]=[0,-g,c];d[p.RIGHT_ARROW]=[0,g,c];d[p.UP_ARROW]=[-1,0,c];d[p.DOWN_ARROW]=[1,0,c];a._moveFocus.apply(a,d[c.keyCode]||[])}}),a.connect(b,"onCellClick",function(b){a._focusCellRow=b.visualIndex;a._focusCellCol=b.columnIndex}),a.connect(a,"onRender",function(b,c){a._focusCellRow>=b&&a._focusCellRow<b+c&&e.currentArea()=="body"&&a._focusCell()}),b.hScroller&&a.connect(c,"onscroll",function(){b.hScroller.scroll(c.scrollLeft)}))},
_doFocus:function(a){return this._focusCell(a)||this._focusCell(0,0,0)},_focusCell:function(a,c,e){b.stopEvent(a);e=e>=0?e:this._focusCellCol;c=c>=0?c:this._focusCellRow;if(a=this.getCellNode({visualIndex:c,colId:this.grid._columns[e].id})){var g=i(".gridxCellFocus",this.domNode)[0];if(a!=g)g&&d.remove(g,"gridxCellFocus"),d.add(a,"gridxCellFocus"),this._focusCellRow=c,this._focusCellCol=e;h("ie")<8||a.focus()}return a},_moveFocus:function(a,c,e){if(a||c){b.stopEvent(e);var d,g,n=this,h=n.grid,i=h._columns,
q=n.visualCount;d=n._focusCellRow+a;d=d<0?0:d>=q?q-1:d;g=n._focusCellCol+c;g=g<0?0:g>=i.length?i.length-1:g;h.vScroller.scrollToRow(d).then(function(){n._focusCell(0,d,g);n.onMoveToCell(d,g,e)})}},_nextCell:function(a,b,c,d){var g=new e,n=this.grid,h=n._columns.length,i=this.visualCount;do if(b+=c,b<0||b>=h)a+=c,b=b<0?h-1:0,a<0?(a=i-1,b=h-1):a>=i&&(b=a=0);while(!d(a,b));n.vScroller.scrollToRow(a).then(function(){g.callback({r:a,c:b})});return g},_blurCell:function(){var a=i(".gridxCellFocus",this.domNode)[0];
a&&d.remove(a,"gridxCellFocus");return!0},_onFocus:function(a){for(a=a.target;a&&a!=this.domNode;a=a.parentNode)if(d.contains(a,"gridxCell")){for(var b=this.grid._columnsById[a.getAttribute("colid")].index;!d.contains(a,"gridxRow");)a=a.parentNode;return this._focusCell(0,parseInt(a.getAttribute("visualindex"),10),b)}return!1}}))})},"gridx/core/Column":function(){define(["dojo/_base/declare"],function(l){return l([],{constructor:function(i,k){this.grid=i;this.model=i.model;this.id=k},index:function(){var i=
this.grid._columnsById[this.id];return i?i.index:-1},cell:function(i,k){return this.grid.cell(i,this,k)},name:function(){return this.grid._columnsById[this.id].name||""},setName:function(i){this.grid._columnsById[this.id].name=i;return this},field:function(){return this.grid._columnsById[this.id].field||null},getWidth:function(){return this.grid._columnsById[this.id].width}})})},"gridx/modules/ColumnWidth":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/Deferred","dojo/_base/query",
"dojo/_base/sniff","dojo/dom-geometry","dojo/dom-class","dojo/dom-style","dojo/keys","../core/_Module"],function(l,i,k,g,d,e,h,p,a,b){return b.register(l(b,{name:"columnWidth",forced:["hLayout","header"],getAPIPath:function(){return{columnWidth:this}},constructor:function(){this._ready=new k},preload:function(){var a=this,b=a.grid;if(!b.hScroller)a.autoResize=!0;a.batchConnect([b,"_onResizeBegin",function(e,d){d.header=new k;if(a.arg("autoResize")){var g=b.domNode.clientWidth-b.hLayout.lead-b.hLayout.tail;
b.bodyNode.style.width=(g<0?0:g)+"px"}else a._adaptWidth();d.header.callback()}],[b.hLayout,"onUpdateWidth",function(){a._adaptWidth();a._ready.callback()}],[b,"setColumns","_adaptWidth"])},load:function(){var a=this.loaded;this._ready.then(function(){a.callback()})},"default":60,autoResize:!1,_adaptWidth:function(){var a=this,b=a.grid,j=b.domNode,k=b.header,l=b.isLeftToRight(),o=l?"marginLeft":"marginRight",n=l?"marginRight":"marginLeft",l=b.hLayout.lead,s=b.hLayout.tail,t=k.innerNode,q=b.bodyNode.style,
z=t.style,u=(j.clientWidth||p.get(j,"width"))-l-s,v=g(".gridxCell",t)[0],w=e.getMarginBox(v).w-e.getContentBox(v).w,A=!j.offsetHeight,v=p.get(v,"borderCollapse")=="collapse";z[o]=q[o]=l+"px";z[n]=s+"px";u=u<0?0:u;A&&v&&w--;if(b.autoWidth){i.forEach(b._columns,function(b){if(!b.width)b.width=a.arg("default")+"px"});k.refresh();var o=g("th.gridxCell",t),x=v?2:0;o.forEach(function(a){var c=p.get(a,"width");if(!d("webkit")||!A)c+=w;x+=c;a=b._columnsById[a.getAttribute("colid")];if(!a.width||/%$/.test(a.width))a.width=
c+"px"});k._columnsWidth=x;q.width=x+"px";j.style.width=l+s+x+"px"}else{if(a.arg("autoResize"))q.width=u+"px",h.add(j,"gridxPercentColumnWidth"),i.forEach(b._columns,function(a){if(!a.width||!/%$/.test(a.width))a.width="auto"});else{var y=[],B=v?2:0;q.width=u+"px";i.forEach(b._columns,function(a){if(!a.width||a.width=="auto")a.width="auto",y.push(a);else if(/%$/.test(a.width))a.width=parseInt(u*parseFloat(a.width,10)/100-w,10)+"px"});try{k.refresh()}catch(D){alert(D)}i.forEach(b._columns,function(a){if(a.width!=
"auto"){var b=p.get(k.getHeaderNode(a.id),"width");if(!a.width||/%$/.test(a.width))a.width=b+"px";if(!d("webkit")||!A)b+=w;B+=b}});if(y.length){d("webkit")&&(w=0);var C=u>B?(u-B)/y.length-w:a.arg("default"),C=parseInt(C,10)+"px";i.forEach(y,function(a){a.width=C})}}k.refresh()}if(d("ie")<8)z.width=u+"px";b.hScroller&&(b.hScroller.scroll(0),k._onHScroll(0))}}))})},"gridx/modules/Rotater":function(){define(["dojo/_base/declare","dojo/dom-geometry","../core/_Module"],function(l,i,k){return k.register(l(k,
{name:"rotater",getAPIPath:function(){return{rotater:this}},constructor:function(){this.connect(this.grid,"resize",this.resize)},resize:function(g){var d=this.grid;g?i.setMarginBox(d.domNode,g):g=i.getMarginBox(d.domNode);g.w&&i.setMarginBox(d.bodyNode,{w:g.w});g=g.w&&g.h&&g.w>g.h;if(d.landscapeStructure&&this._landscape!=g)this._landscape=g,d.setColumns(g?d.landscapeStructure:d.structure),d.header.refresh(),d.body.refresh()}}))})},"gridx/modules/TouchVScroller":function(){define(["dojo/_base/declare",
"dojo/dom-style","../core/_Module","./VScroller","dojox/mobile/_ScrollableMixin"],function(l,i,k,g){return k.register(l(g,{_init:function(){var d=this.grid,e=d.mainNode,g=d.bodyNode,k=new dojox.mobile.scrollable(dojo,dojox);i.set(this.domNode,"display","none");i.set(e,"overflow","hidden");i.set(g,"height","auto");i.set(d.headerNode.firstChild.firstChild,"margin-right","0px");k.init({domNode:e,containerNode:g,noResize:!0})}}))})},"gridx/modules/Header":function(){define(["dojo/_base/declare","dojo/dom-construct",
"dojo/dom-class","dojo/dom-geometry","dojo/_base/query","dojo/keys","../util","../core/_Module"],function(l,i,k,g,d,e,h,p){return p.register(l(p,{name:"header",required:["vLayout"],forced:["hLayout"],getAPIPath:function(){return{header:this}},constructor:function(){var a=this.domNode=i.create("div",{"class":"gridxHeaderRow",role:"presentation"}),b=this.innerNode=i.create("div",{"class":"gridxHeaderRowInner",role:"row",innerHTML:'<table border="0" cellpadding="0" cellspacing="0"><tr><th class="gridxCell"></th></tr></table>'});
a.appendChild(b)},preload:function(){var a=this.grid,b=this.domNode;a.headerNode.appendChild(b);a.vLayout.register(this,"domNode","headerNode");this.batchConnect([a,"onHScroll","_onHScroll"],[a,"onHeaderCellMouseOver","_onHeaderCellMouseOver"],[a,"onHeaderCellMouseOut","_onHeaderCellMouseOver"],a.columnResizer&&[a.columnResizer,"onResize","_onColumnResize"]);this._initFocus();a._connectEvents(b,"_onMouseEvent",this)},destroy:function(){this.inherited(arguments);i.destroy(this.domNode)},columnMixin:{headerNode:function(){return this.grid.header.getHeaderNode(this.id)}},
getHeaderNode:function(a){return d("[colid='"+a+"']",this.domNode)[0]},refresh:function(){var a=this,b=a.grid,c=b.focus,e=['<table role="presentation" border="0" cellpadding="0" cellspacing="0"><tr>'];b.columns().forEach(function(b){e.push('<th colid="',b.id,'" class="gridxCell ',c&&c.currentArea()=="header"&&b.id==a._focusHeaderId?a._focusClass:"",'" role="columnheader" aria-readonly="true" tabindex="-1" style="width: ',b.getWidth(),'"><div class="gridxSortNode">',b.name(),"</div></th>")});e.push("</tr></table>");
a.innerNode.innerHTML=e.join("");a._onHScroll(a._scrollLeft);a.onRender()},onRender:function(){},onMoveToHeaderCell:function(){},_scrollLeft:0,_onColumnResize:function(a,b,c){a=this.grid;a.autoWidth?(b=this._columnsWidth+=b-c,a.bodyNode.style.width=b+"px",a.domNode.style.width=a.hLayout.lead+a.hLayout.tail+b+"px"):this._onHScroll(a.hScrollerNode.scrollLeft)},_onHScroll:function(a){var b=this.grid.isLeftToRight();this.innerNode.firstChild.style[b?"marginLeft":"marginRight"]=(b?-a:a)+"px";this._scrollLeft=
a},_onMouseEvent:function(a,b){var c=this.grid,e="onHeaderCell"+a,d="onHeader"+a;if(c._isConnected(e)||c._isConnected(d)){this._decorateEvent(b);if(b.columnIndex>=0)c[e](b);c[d](b)}},_decorateEvent:function(a){for(var b=a.target;b&&b!==this.domNode;b=b.parentNode)if(b.tagName.toLowerCase()=="th"){if(b=this.grid._columnsById[b.getAttribute("colid")])a.columnId=b.id,a.columnIndex=b.index;break}},_onHeaderCellMouseOver:function(a){k.toggle(this.getHeaderNode(a.columnId),"gridxHeaderCellOver",a.type==
"mouseover")},_focusHeaderId:null,_focusClass:"gridxHeaderCellFocus",_initFocus:function(){var a=this,b=a.grid;b.focus&&b.focus.registerArea({name:"header",priority:0,focusNode:a.domNode,scope:a,doFocus:a._doFocus,doBlur:a._blurNode,onBlur:a._blurNode,connects:[a.connect(a.domNode,"onkeydown","_onKeyDown"),a.connect(b,"onHeaderCellMouseDown",function(b){a._focusNode(a.getHeaderNode(b.columnId))})]})},_doFocus:function(a){var b=this._focusNode(this._focusHeaderId&&this.getHeaderNode(this._focusHeaderId)||
d("th.gridxCell",this.domNode)[0]);h.stopEvent(b&&a);return b},_focusNode:function(a){if(a){var b=this.grid;if(this._focusHeaderId=a.getAttribute("colid")){this._blurNode();if(b.hScroller){var c=g.position(a),e=g.position(this.domNode),d=c.x+c.w-e.x-e.w;d<0&&(d=c.x-e.x,d>0&&(d=0));d+=this._scrollLeft;this._onHScroll(d);b.hScroller.scroll(d)}k.add(a,this._focusClass);a.focus();return!0}}return!1},_blurNode:function(){var a=d("th."+this._focusClass,this.domNode)[0];a&&k.remove(a,this._focusClass);return!0},
_onKeyDown:function(a){var b=this.grid,c;c=b.isLeftToRight()?1:-1;var d=a.keyCode==e.LEFT_ARROW?-c:c;if(this._focusHeaderId&&(a.keyCode==e.LEFT_ARROW||a.keyCode==e.RIGHT_ARROW))if(h.stopEvent(a),c=b._columnsById[this._focusHeaderId],c=b._columns[c.index+d])this._focusNode(this.getHeaderNode(c.id)),this.onMoveToHeaderCell(c.id,a)}}))})},"gridx/core/Row":function(){define(["dojo/_base/declare"],function(l){return l([],{constructor:function(i,k){this.grid=i;this.model=i.model;this.id=k},index:function(){return this.model.idToIndex(this.id)},
cell:function(i,k){return this.grid.cell(this,i,k)},data:function(){return this.model.byId(this.id).data},rawData:function(){return this.model.byId(this.id).rawData},item:function(){return this.model.byId(this.id).item}})})},"url:gridx/templates/Grid.html":'<div class="gridx" role="grid" tabindex="0"\r\n\t><div class="gridxHeader" role="presentation" data-dojo-attach-point="headerNode"></div\r\n\t><div class="gridxMain" role="presentation" data-dojo-attach-point="mainNode"\r\n\t\t><div class="gridxBodyEmpty" data-dojo-attach-point="emptyNode"></div\r\n\t\t><div class="gridxBody" role="presentation" data-dojo-attach-point="bodyNode"></div\r\n\t\t><div class="gridxVScroller" data-dojo-attach-point="vScrollerNode"\r\n\t\t\t><div style=\'width: 1px;\'></div\r\n\t\t></div\r\n\t></div\r\n\t><div class="gridxFooter" data-dojo-attach-point="footerNode"\r\n\t\t><div class="gridxHScroller"\r\n\t\t\t><div class="gridxHScrollerInner" data-dojo-attach-point="hScrollerNode"><div style="width:1px; height: 1px;"></div></div\r\n\t\t></div\r\n\t></div\r\n\t><span data-dojo-attach-point="lastFocusNode" tabindex="0"></span\r\n></div>\r\n',
"gridx/core/Core":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","dojo/DeferredList","./model/Model","./Row","./Column","./Cell","./_Module"],function(l,i,k,g,d,e,h,p,a,b){function c(a){a=a.moduleClass.prototype;return(a.forced||[]).concat(a.optional||[])}function f(a,b){if(b)for(var c in b){var e=a[c],d=b[c];e&&k.isObject(e)&&!r(e)?f(e,d):a[c]=d}}function j(a){var b=a.modules,e,d,f,g,h=function(a){for(var c=b.length-1;c>=0;--c)if(b[c].moduleClass.prototype.name===
a)return b[c];return null};for(e=b.length-1;d=b[e];--e){f=d.moduleClass.prototype.name;for(g=c(d);g.length;){d=g.shift();if(d==f)throw Error("Module '"+d+"' is in a dependancy circle!");(d=h(d))&&(g=g.concat(c(d)))}}return a}var m=k.delegate,r=k.isFunction,o=k.hitch;return l([],{reset:function(a){this._uninit();var c={},d;for(d in a)c[d]=a[d];a=c;this.store=a.store;a.modules=a.modules||[];a.modelExtensions=a.modelExtensions||[];this.setColumns(a.structure);a.columns=this._columnsById;d=a;var f=this.coreModules,
g,h,a=d.modules,c=[],i=f&&f.length||0,f=0;for(g=a.length;f<g;++f)h=a[f],r(h)?c.push({moduleClass:h}):h?r(h.moduleClass)?c.push(h):console.error(["The ",f+1-i,"-th declared module has NO moduleClass, please provide it"].join("")):console.error(["The ",f+1-i,"-th declared module can NOT be found, please require it before using it"].join(""));d.modules=c;for(var a=b._modules,c=d.modules,k,l,f=0;f<c.length;++f){i=c[f].moduleClass.prototype;k=(i.forced||[]).concat(i.required||[]);for(g=0;g<k.length;++g){l=
k[g];for(h=c.length-1;h>=0;--h)if(c[h].moduleClass.prototype.name===l)break;if(h<0)if(a[l])c.push({moduleClass:a[l]});else throw Error(["Forced/Required Dependent Module '",l,"' is NOT Found for '",i.name,"'"].join(""));}}a=d.modules;g={};for(c=0;f=a[c];++c)g[f.moduleClass.prototype.name]=f;a=[];for(c in g)a.push(g[c]);d.modules=a;d=j(d);a=d.modules;c=d.modelExtensions;h=[].push;for(f=a.length-1;f>=0;--f)(g=a[f].moduleClass.prototype.modelExtensions)&&h.apply(c,g);a=d;this.model=new e(a);this._createModules(a)},
_postCreate:function(){var a=this._deferStartup=new g;this._preloadModules();this._loadModules(a).then(o(this,this.onModulesLoaded))},onModulesLoaded:function(){},setStore:function(a){this.store=a;this.reset(this);this._postCreate();this._deferStartup.callback()},setColumns:function(a){this.structure=a;var a=this._columns=k.clone(a),b={},c,d,e;if(k.isArray(a)){d=0;for(e=a.length;d<e;++d)c=a[d],c.index=d,c.id=c.id||String(d+1),b[c.id]=c}this._columnsById=b;if(this.model)this.model._cache.onSetColumns(this._columnsById)},
row:function(a,b){var c=a;typeof c=="number"&&!b&&(c=this.model.indexToId(c));if(this.model.idToIndex(c)>=0)return this._rowObj=this._rowObj||this._mixinComponent(new h(this),"row"),m(this._rowObj,{id:c});return null},column:function(a,b){var n;var c=a,d,e={};typeof c=="number"&&!b&&(n=(c=this._columns[c])&&c.id,c=n);if(c=this._columnsById[c]){this._colObj=this._colObj||this._mixinComponent(new p(this),"column");for(d in c)this._colObj[d]===void 0&&(e[d]=c[d]);return m(this._colObj,e)}return null},
cell:function(b,c,d){if(b=b instanceof h?b:this.row(b,d))if(c=c instanceof p?c:this.column(c,d))return this._cellObj=this._cellObj||this._mixinComponent(new a(this),"cell"),m(this._cellObj,{row:b,column:c});return null},columnCount:function(){return this._columns.length},rowCount:function(a){return this.model.size(a)},columns:function(a,b){return this._arr(this._columns.length,"column",a,b)},rows:function(a,b){return this._arr(this.model.size(),"row",a,b)},_uninit:function(){var a=this._modules,b;
for(b in a){b=a[b].mod;if(b.getAPIPath){var c=b.getAPIPath();if(c){var d=void 0;for(d in c)delete this[d]}}b.destroy()}this.model&&this.model.destroy()},_arr:function(a,b,c,d){for(var e=c||0,c=d>=0?c+d:a,d=[];e<c&&e<a;++e)d.push(this[b](e));for(var f in i)r(i[f])&&(d[f]=k.partial(i[f],d));return d},_preloadModules:function(){var a,b=this._modules;for(a in b)a=b[a],a.mod.preload&&a.mod.preload(a.args)},_loadModules:function(a){var b=[],c;for(c in this._modules)b.push(this._initializeModule(a,c));return new d(b)},
_mixinComponent:function(a,b){var c,d,e=this._modules;for(c in e)c=e[c].mod,d=c[b+"Mixin"],r(d)&&(d=d.apply(c)),k.mixin(a,d||{});return a},_createModules:function(a){var n;var a=a.modules,b=this._modules={},c,d,e;for(c=0;c<a.length;++c)if(d=a[c],e=d.moduleClass.prototype.name,!b[e])e=b[e]={args:d},n=e.mod=new d.moduleClass(this,d),d=n,d.forced=d.forced||[],d.optional=d.optional||[],d.loaded=new g,e.deps=d.forced.concat(d.optional),d.getAPIPath&&f(this,d.getAPIPath())},_initializeModule:function(a,
b){var c=this._modules,e=c[b],f=e.mod,g=e.deferred,h=e.deferred=g||f.loaded;g||(new d(i.map(i.filter(e.deps,function(a){return c[a]}),o(this,this._initializeModule,a)))).then(function(){f.load?f.load(e.args,a):h.fired<0&&h.callback()});return h}})})}}});define("gridx/gridx-mobile",[],1);