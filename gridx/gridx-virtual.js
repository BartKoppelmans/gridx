//>>built
require({cache:{"gridx/core/model/_Extension":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/_base/array"],function(l,j,k){return l([],{constructor:function(g){var e=this.inner=g._model;this._cnnts=[];this.model=g;g._model=this;e&&(this.connect(e,"onDelete","_onDelete"),this.connect(e,"onNew","_onNew"),this.connect(e,"onSet","_onSet"))},destroy:function(){k.forEach(this._cnnts,j.disconnect)},connect:function(g,e,b,n){g=j.connect(g,e,n||this,b);this._cnnts.push(g);return g},_onNew:function(){this.onNew.apply(this,
arguments)},_onSet:function(){this.onSet.apply(this,arguments)},_onDelete:function(){this.onDelete.apply(this,arguments)},onNew:function(){},onDelete:function(){},onSet:function(){},_call:function(g,e){var b=this[g],n=this.inner;return b?b.apply(this,e||[]):n&&n._call(g,e)},_mixinAPI:function(){var g,e=this.model,b=arguments,n=function(b){return function(){return e._model._call(b,arguments)}};for(g=b.length-1;g>=0;--g)e[b[g]]=n(b[g])}})})},"gridx/modules/VirtualVScroller":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/_base/array","dojo/_base/sniff","dojo/_base/event","dojo/_base/Deferred","dojo/query","./VScroller","../core/_Module"],function(l,j,k,g,e,b,n,h){return l(h,{constructor:function(d,a){d.autoHeight?j.mixin(this,new h(d,a)):this._scrolls=[]},buffSize:5,lazy:!1,lazyTimeout:50,scrollToRow:function(d,a){var f=new b,c=this,i=c._scrolls,m=function(){c._subScrollToRow(d,f,a)};i.push(f);i.length>1?i[i.length-2].then(m):m();return f},_subScrollToRow:function(d,a,f){var c=this,i=0,m=c._avgRowHeight,
o=c.grid.bodyNode,b=c.domNode,i=o.scrollTop,h=b.scrollTop,e=n('[visualindex="'+d+'"]',o)[0],g=function(i){c._scrolls.splice(k.indexOf(c._scrolls,a),1);a.callback(i)};if(e)if(m=e.offsetTop,m+e.offsetHeight>i+o.clientHeight)i=m-i,f||(i+=e.offsetHeight-o.clientHeight);else if(m<i||f&&m>i)i=m-i;else{g(!0);return}else if(o.childNodes.length){for(e=o.firstChild;e&&e.offsetTop<i;)e=e.nextSibling;var j=e&&e.getAttribute("visualindex");if(e&&d<j)i=(d-j)*m;else{for(e=o.lastChild;e&&e.offsetTop+e.offsetHeight>
i+o.clientHeight;)e=e.previousSibling;j=e&&e.getAttribute("visualindex");if(e&&d>j)i=(d-j)*m;else{g(!1);return}}}else{g(!1);return}m=h===0&&i<0;h=h>=b.scrollHeight-b.offsetHeight&&i>0;m||h?c._doVirtualScroll(1):b.scrollTop+=i/c._ratio;m&&o.firstChild.getAttribute("visualindex")==0||h&&o.lastChild.getAttribute("visualindex")==c.grid.body.visualCount-1?g(!1):setTimeout(function(){c._subScrollToRow(d,a,f)},5)},_init:function(){var d=this;d._rowHeight={};d._syncHeight();d.connect(d.grid,"_onResizeEnd",
function(){d._doScroll(0,1)});d._doScroll(0,1)},_doVirtualScroll:function(d){var a=this.domNode,f=a.scrollTop,c=this._ratio*(f-(this._lastScrollTop||0));if(d||c){this._lastScrollTop=f;var i=this.arg("buffSize"),d=a.scrollHeight-a.offsetHeight,m=this.grid.body,o=m.visualStart,e=o+m.visualCount,b=this.grid.bodyNode,h=b.firstChild,g=h&&h.offsetTop-c,j=b.lastChild,k=j&&j.offsetTop-c+j.offsetHeight,p=b.scrollTop,u=p+b.clientHeight,v=this._avgRowHeight,a=Math.ceil(a.offsetHeight/v)+2*i,r,s,l;if(h&&g>p&&
g<u)s=m.renderStart,l=Math.ceil((g-p)/v)+i,r=f===0?o:Math.max(s-l,o),l="top";else if(j&&k>p&&k<u)r=m.renderStart+m.renderCount,l=Math.ceil((u-k)/v)+i,s=f===d&&f?e:Math.min(r+l,e),l="bottom";else if(!h||g>u||!j||k<p)f<=d/2?(r=f===0?o:o+Math.max(Math.floor(f/v)-i,0),s=Math.min(r+a,e)):(s=f===d?e:e+Math.min(a-Math.floor((d-f)/v),0),r=Math.max(s-a,o)),l="clear";else if(h)f===0?(e=m.renderStart,e>o&&(r=o,s=e,l="top")):f===d&&(o=m.renderStart+m.renderCount-1,o<e-1&&(r=o+1,s=e,l="bottom"));typeof r=="number"&&
typeof s=="number"&&(m.renderRows(r,s-r,l),f&&r<s&&(r=n('[visualindex="'+s+'"]',b)[0])&&(c+=r.offsetTop));f===0?b.scrollTop=0:f>=d?b.scrollTop=b.scrollHeight:l!="clear"&&(b.scrollTop+=c)}},_doScroll:function(d,a){this.arg("lazy")?(this._lazyScrollHandle&&clearTimeout(this._lazyScrollHandle),this._lazyScrollHandle=setTimeout(j.hitch(this,this._doVirtualScroll,a),this.arg("lazyTimeout"))):this._doVirtualScroll(a)},_onMouseWheel:function(d){this.domNode.scrollTop-=(typeof d.wheelDelta==="number"?d.wheelDelta/
3:-40*d.detail)/this._ratio;e.stop(d)},_onBodyChange:function(){this._doScroll(0,1);this._doVirtual()},_onForcedScroll:function(){this._rowHeight={};this._onBodyChange()},_avgRowHeight:24,_rowHeight:null,_ratio:1,_syncHeight:function(){var d=this._avgRowHeight*this.grid.body.visualCount,a=1342177;g("ff")?a=17895697:g("webkit")&&(a=134217726);if(d>a)this._ratio=d/a,d=a;this.stubNode.style.height=d+"px"},_doVirtual:function(){var d=this;clearTimeout(d._pVirtual);d._pVirtual=setTimeout(function(){d._update()},
100)},_update:function(){var d=0,a=0,f=this.grid,c=f.body,f=f.bodyNode,i=this.buffSize*this._avgRowHeight,m=f.scrollTop,o=m-i,e=m+f.clientHeight+i,b=this._rowHeight;k.forEach(f.childNodes,function(c){b[c.getAttribute("rowid")]=c.offsetHeight;c.offsetTop>e?++a:c.offsetTop+c.offsetHeight<o&&++d});c.unrenderRows(d);c.unrenderRows(a,"post");var h,f=c=0;for(h in b)c+=b[h],++f;if(f)this._avgRowHeight=c/f,this._syncHeight()}})})},"gridx/core/model/extensions/Sort":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/_base/json","../_Extension"],function(l,j,k,g){return l(g,{name:"sort",priority:30,constructor:function(e,b){var g=b.baseSort;this.clear();this._mixinAPI("sort");if(g&&g.length)this._baseSort=g,this._sort()},clear:function(){},sort:function(){this.model._addCmd({name:"_cmdSort",scope:this,args:arguments})},_cmdSort:function(){var e=arguments;this._sort.apply(this,e[e.length-1])},_sort:function(e){var b=this.model,g=this._baseSort,h=b._cache,d=h.options=h.options||{},a,f,c;
if(j.isArrayLike(e)){for(a=0;a<e.length;++a)f=e[a],f.colId?f.attribute=h.columns?h.columns[f.colId].field||f.colId:f.colId:f.colId=f.attribute;g&&(e=e.concat(g))}else e=g;d.sort&&d.sort.length?k.toJson(d.sort)!==k.toJson(e)&&(c=1):e&&e.length&&(c=1);d.sort=j.clone(e);c&&h.clear();b._msg("storeChange")}})})},"gridx/modules/VScroller":function(){define(["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/event","dojo/_base/sniff","dojo/_base/query","dojo/keys","dojox/html/metrics","../core/_Module"],
function(l,j,k,g,e,b,n,h){return l(h,{name:"vScroller",forced:["body","vLayout","columnWidth"],optional:["pagination"],getAPIPath:function(){return{vScroller:this}},preload:function(){var d=this.grid,a=this.domNode=d.vScrollerNode;this.stubNode=a.firstChild;if(g("ie")<8)this.stubNode.style.width=n.getScrollbar().w+"px";d.autoHeight?a.style.display="none":this.domNode.style.width=n.getScrollbar().w+"px";d.hLayout.register(null,a,1)},load:function(d,a){var f=this,c=f.grid,i=c.bodyNode;f.batchConnect([f.domNode,
"onscroll","_doScroll"],[i,"onmousewheel","_onMouseWheel"],[c.mainNode,"onkeypress","_onKeyScroll"],[c.body,"onRender","_onBodyChange"],[c.body,"onForcedScroll","_onForcedScroll"],[c,"_onResizeEnd","_onBodyChange"],g("ff")&&[i,"DOMMouseScroll","_onMouseWheel"]);a.then(function(){j.when(f._init(d),function(){f.domNode.style.width="";f.loaded.callback()})})},scrollToRow:function(d,a){var f=new j,c=this.grid.bodyNode,i=this.domNode,m=0,o=e('[visualindex="'+d+'"]',c)[0];if(o){var m=o.offsetTop,b=c.scrollTop;
if(a)return i.scrollTop=m,f.callback(!0),f;else if(m<b)m-=b;else if(m+o.offsetHeight>b+c.clientHeight)m=m+o.offsetHeight-b-c.clientHeight;else return f.callback(!0),f;i.scrollTop+=m}f.callback(!!o);return f},_init:function(){this._onForcedScroll()},_doScroll:function(){this.grid.bodyNode.scrollTop=this.domNode.scrollTop},_onMouseWheel:function(d){this.grid.autoHeight||(this.domNode.scrollTop-=typeof d.wheelDelta==="number"?d.wheelDelta/3:-40*d.detail,k.stop(d))},_onBodyChange:function(){var d=this,
a=d.grid;window.setTimeout(function(){d.stubNode.style.height=a.bodyNode.scrollHeight+"px";d._doScroll();a.vScrollerNode.scrollTop=a.vScrollerNode.scrollTop||0},0)},_onForcedScroll:function(){var d=this,a=d.grid.body;return d.model.when({start:a.rootStart,count:a.rootCount},function(){a.renderRows(0,a.rootCount||d.model.size()-a.rootStart)})},_onKeyScroll:function(d){var m;var i;var a=this.grid.body,f=this.grid.focus,c=this.domNode;if(!f||f.currentArea()=="body"){if(d.keyCode==b.HOME)a._focusCellRow=
0,c.scrollTop=0;else if(d.keyCode==b.END)a._focusCellRow=a.visualCount-1,c.scrollTop=this.stubNode.clientHeight-a.domNode.offsetHeight;else if(d.keyCode==b.PAGE_UP)i=a._focusCellRow=Math.max(a.renderStart-a.renderCount,0),a=i,this.scrollToRow(a,1);else if(d.keyCode==b.PAGE_DOWN)m=a._focusCellRow=Math.min(a.visualCount-1,a.renderStart+a.renderCount),a=m,this.scrollToRow(a,1);else return;k.stop(d)}}})})},"gridx/core/model/Model":function(){define(["require","dojo/_base/declare","dojo/_base/array","dojo/_base/lang",
"dojo/_base/Deferred","dojo/DeferredList","dojo/_base/connect"],function(l,j,k,g,e,b,n){var h=g.isArrayLike,d=g.isString;return j([],{constructor:function(a){var f=a.cacheClass,f=typeof f=="string"?l(f):f;this.store=a.store;this._exts={};this._cmdQueue=[];this._model=this._cache=new f(this,a);this._createExts(a.modelExtensions||[],a);a=this._model;this._connects=[n.connect(a,"onDelete",this,"onDelete"),n.connect(a,"onNew",this,"onNew"),n.connect(a,"onSet",this,"onSet")]},destroy:function(){k.forEach(this._connects,
n.disconnect);for(var a in this._exts)this._exts[a].destroy()},when:function(){this._oldSize=this.size();this._addCmd({name:"_cmdRequest",scope:this,args:arguments,async:1});return this._exec()},scan:function(a,f){var c=new e,i=a.start||0,m=a.pageSize||this._cache.pageSize||1,d=a.count,b=d>0?i+d:Infinity,h=a.whenScope||this,g=a.whenFunc||h.when,n=function(i){c.progress(i/(d>0?i+d:h.size()));g.call(h,{id:[],range:[{start:i,count:m}]},function(){var c,a,d=[];for(c=i;c<i+m&&c<b;++c)if(a=h.byIndex(c))d.push(a);
else{b=-1;break}if(f(d,i)||c==b)b=-1}).then(function(){b==-1?c.callback():n(i+m)})};n(i);return c},onDelete:function(){},onNew:function(){},onSet:function(){},onSizeChange:function(){},_msg:function(){},_addCmd:function(a){var f=this._cmdQueue,c=f[f.length-1];c&&c.name==a.name&&c.scope==a.scope?c.args.push(a.args||[]):(a.args=[a.args||[]],f.push(a))},_onSizeChange:function(){var a=this._oldSize,f=this._oldSize=this.size();if(a!=f)this.onSizeChange(f,a)},_execEvents:function(a,f){this._onSizeChange();
f&&f.call(a)},_cmdRequest:function(){var a=this;return new b(k.map(arguments,function(f){var c=f[0],i=g.hitch(a,a._execEvents,f[2],f[1]);if(c===null||!f.length)return f=new e,i(),f.callback(),f;return a._model._call("when",[a._normArgs(c),i])}),0,1)},_exec:function(){var a=this,f=a._cache,c=new e,i=a._cmdQueue,m=function(c,i){a._busy=0;f.skipCacheSizeCheck=0;f._checkSize&&f._checkSize();i?c.errback(i):c.callback()},d=function(){if(k.some(i,function(c){return c.name=="_cmdRequest"}))try{for(;i.length;){var a=
i.shift(),f=a.scope[a.name].apply(a.scope,a.args);if(a.async){e.when(f,d,g.partial(m,c));return}}}catch(b){m(c,b);return}m(c)};if(a._busy)return a._busy;a._busy=c;f.skipCacheSizeCheck=1;d();return c},_createExts:function(a,f){a=k.filter(a,function(c){return(c=typeof c=="string"?l(c):c)&&c.prototype});a.sort(function(c,i){return c.prototype.priority-i.prototype.priority});for(var c=0,i=a.length;c<i;++c)if(c==a.length-1||a[c]!=a[c+1]){var m=new a[c](this,f);this._exts[m.name]=m}},_normArgs:function(a){var f,
c=[],i=[],m={range:c,id:i},b=function(c){return typeof c=="number"&&c>=0},e=function(a){if(a&&b(a.start))c.push(a);else if(b(a))c.push({start:a,count:1});else if(h(a))for(f=a.length-1;f>=0;--f)b(a[f])?c.push({start:a[f],count:1}):a[f]&&b(a[f].start)?c.push(a[f]):d(a)&&i.push(a[f]);else d(a)&&i.push(a)};if(a&&(a.index||a.range||a.id))if(e(a.index),e(a.range),h(a.id))for(f=a.id.length-1;f>=0;--f)i.push(a.id[f]);else a.id&&i.push(a.id);else e(a);!c.length&&!i.length&&this.size()<0&&c.push({start:0,count:this._cache.pageSize||
1});return m}})})},"gridx/core/_Module":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/_base/connect"],function(l,j,k,g,e){var b=j.isFunction,l=l([],{constructor:function(b,d){this.grid=b;this.model=b.model;this.loaded=new g;this._cnnts=[];this._sbscs=[];j.mixin(this,d)},destroy:function(){var b=k.forEach;b(this._cnnts,e.disconnect);b(this._sbscs,e.unsubscribe)},arg:function(e,d,a){arguments.length==2&&b(d)&&(a=d,d=void 0);var f=this.grid,
c=this[e];if(!this.hasOwnProperty(e)){var i=this.name+e.substring(0,1).toUpperCase()+e.substring(1);f[i]===void 0?d!==void 0&&(c=d):c=f[i]}this[e]=a&&!a(c)?d:c;return c},connect:function(h,d,a,f,c){var i=this.grid,m=f||this,h=h===i&&typeof d=="string"?e.connect(h,d,function(){var f=arguments;i._eventFlags[d]===c&&(b(a)?a.apply(m,f):b(m[a])&&m[a].apply(m,f))}):e.connect(h,d,m,a);this._cnnts.push(h);return h},batchConnect:function(){for(var b=0,d=arguments,a=d.length;b<a;++b)j.isArrayLike(d[b])&&this.connect.apply(this,
d[b])},subscribe:function(b,d,a){b=e.subscribe(b,a||this,d);this._sbscs.push(b);return b}}),n=l._modules={};l.register=function(b){var d=b.prototype;return n[d.name||d.declaredClass]=b};l._markupAttrs=["id","name","field","width","dataType","!formatter","!decorator","!sortable"];return l})},"gridx/modules/ColumnResizer":function(){define(["dojo/_base/declare","dojo/_base/sniff","dojo/_base/window","dojo/dom","dojo/dom-style","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/query","../core/_Module"],
function(l,j,k,g,e,b,n,h,d,a){function f(c){var a=c.target;if(a){if(/table/i.test(a.tagName)){for(var c=c.offsetX||c.layerX||0,f=0,a=a.rows[0].cells;c>0;)c-=a[f].offsetWidth,f++;return a[f]||null}for(;a&&a.tagName;){if(a.tagName.toLowerCase()=="th")return a;a=a.parentNode}}return null}var c=b.remove;return l(a,{name:"columnResizer",minWidth:20,detectWidth:5,load:function(){var c=this.grid;this.batchConnect([c.header.innerNode,"mousemove","_mousemove"],[c,"onHeaderMouseOut","_mouseout"],[c,"onHeaderMouseDown",
"_mousedown",this,this.name],[k.doc,"mousemove","_docMousemove"],[k.doc,"onmouseup","_mouseup"]);this.loaded.callback()},getAPIPath:function(){return{columnResizer:this}},columnMixin:{setWidth:function(c){this.grid.columnResizer.setWidth(this.id,c)}},setWidth:function(c,a){var f=this.grid,b=this.arg("minWidth"),g,a=parseInt(a,10);a<b&&(a=b);f._columnsById[c].width=a+"px";d('[colid="'+c+'"]',f.domNode).forEach(function(c){g||(g=j("webkit")?c.offsetWidth:e.get(c,"width"));c.style.width=a+"px"});f.header.onRender();
f.body.onRender();f.vLayout.reLayout();this.onResize(c,a,g)},onResize:function(){},_mousemove:function(a){var d=f(a),e=this.grid._eventFlags;if(d&&(this._resizing&&c(d,"gridxHeaderCellOver"),!this._resizing&&d&&!this._ismousedown))a=this._readyToResize=this._isInResizeRange(a),e.onHeaderMouseDown=e.onHeaderCellMouseDown=a?this.name:void 0,b.toggle(k.body(),"gridxColumnResizing",a),a&&c(d,"gridxHeaderCellOver")},_docMousemove:function(c){this._resizing&&this._updateResizerPosition(c)},_mouseout:function(){if(!this._resizing)this._readyToResize=
0,c(k.body(),"gridxColumnResizing")},_updateResizerPosition:function(c){var a=c.pageX-this._startX,f=this._targetCell,d=this.grid,b=d.hScroller,g=0,c=c.pageX-this._gridX,g=this.arg("minWidth");f.offsetWidth+a<g&&(c=this._startX-this._gridX-f.offsetWidth+g);a=b&&b.container.offsetHeight?b.container:d.bodyNode;g=a.parentNode.offsetTop+a.offsetHeight-d.header.domNode.offsetTop;e.set(this._resizer,{top:d.header.domNode.offsetTop+"px",left:c+"px",height:g+"px"})},_showResizer:function(c){if(!this._resizer)this._resizer=
n.create("div",{className:"gridxColumnResizer"},this.grid.domNode,"last"),this.connect(this._resizer,"mouseup","_mouseup");this._resizer.style.display="block";this._updateResizerPosition(c)},_hideResizer:function(){this._resizer.style.display="none"},_mousedown:function(c){var a=this.grid.bodyNode;this._readyToResize?(g.setSelectable(this.grid.domNode,!1),k.doc.onselectstart=function(){return!1},this._resizing=1,this._startX=c.pageX,this._gridX=h.position(a).x-a.offsetLeft,this._showResizer(c)):this._ismousedown=
1},_mouseup:function(a){this._ismousedown=0;if(this._resizing){this._readyToResize=this._resizing=0;c(k.body(),"gridxColumnResizing");g.setSelectable(this.grid.domNode,!0);k.doc.onselectstart=null;var f=this._targetCell,a=a.pageX-this._startX,a=(j("webkit")?f.offsetWidth:e.get(f,"width"))+a,d=this.arg("minWidth");a<d&&(a=d);this.setWidth(f.getAttribute("colid"),a);this._hideResizer()}},_isInResizeRange:function(c){var a=f(c),d;var b=c.target,e=f(c);if(e)if(/table/i.test(b.tagName))d=0;else{d=c.offsetX;
if(d==void 0)d=c.layerX;/th/i.test(b.tagName)||(d+=b.offsetLeft);j("ff")&&/th/i.test(b.tagName)&&(c=d-parseInt(e.parentNode.parentNode.parentNode.style.marginLeft,10)-e.offsetLeft-e.offsetParent.offsetLeft,c>=0&&(d=c))}else d=1E5;c=this.arg("detectWidth");if(d<c)return!!(this._targetCell=a.previousSibling);else if(d>a.offsetWidth-c&&d<=a.offsetWidth)return this._targetCell=a,1;return 0}})})},"gridx/modules/VLayout":function(){define(["dojo/_base/declare","dojo/dom-geometry","dojo/DeferredList","../core/_Module"],
function(l,j,k,g){return l(g,{name:"vLayout",getAPIPath:function(){return{vLayout:this}},preload:function(){var e=this,b=e.grid;e.connect(b,"_onResizeEnd",function(b,g){var d,a=[];for(d in g)a.push(g[d]);(new k(a)).then(function(){e.reLayout()})});b.autoHeight?e.connect(b.body,"onRender","reLayout"):e.connect(b,"setColumns",function(){setTimeout(function(){e.reLayout()},0)})},load:function(e,b){var g=this;b.then(function(){g._defs&&g._mods?(new k(g._defs)).then(function(){g._layout();g.loaded.callback()}):
g.loaded.callback()})},register:function(e,b,g,h,d){this._defs=this._defs||[];this._mods=this._mods||{};this._mods[g]=this._mods[g]||[];this._defs.push(d||e.loaded);this._mods[g].push({p:h||0,mod:e,nodeName:b})},reLayout:function(){var e,b=0,g;for(e in this._mods)(g=this.grid[e])&&(b+=j.getMarginBox(g).h);this._updateHeight(b)},_layout:function(){var e,b=0,g=this._mods,h,d,a,f,c;for(e in g)if(h=this.grid[e]){a=g[e];a.sort(function(c,a){return c.p-a.p});for(d=0;d<a.length;++d)f=a[d].mod,c=a[d].nodeName,
f&&f[c]&&h.appendChild(f[c]);b+=j.getMarginBox(h).h}this._updateHeight(b)},_updateHeight:function(e){var b=this.grid,g=b.domNode,h=b.mainNode.style;b.autoHeight?b.vScroller.loaded.then(function(){var d=b.bodyNode.lastChild,d=d?d.offsetTop+d.offsetHeight:0;g.style.height=d+e+"px";h.height=d+"px"}):h.height=g.clientHeight-e+"px"}})})},"gridx/util":function(){define({stopEvent:function(l){l&&l.stopPropagation&&l.preventDefault&&(l.stopPropagation(),l.preventDefault())},biSearch:function(l,j){var k=0,
g=l.length,e;for(e=Math.floor((k+g)/2);k+1<g;e=Math.floor((k+g)/2))j(l[e])>0?g=e:k=e;return l.length&&j(l[k])>=0?k:g}})},"gridx/core/model/cache/_Cache":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","../_Extension"],function(l,j,k,g,e){var b=k.hitch,n=k.mixin,h=j.indexOf;return l(e,{constructor:function(d,a){var f=this,c=f.store=a.store,i=c.fetch;f.columns=a.columns;!i&&c.notify?f.connect(c,"notify",function(c,a){c===void 0?f._onDelete(a):a===void 0?
f._onNew(c):f._onSet(c)}):(f.connect(c,i?"onSet":"put","_onSet"),f.connect(c,i?"onNew":"add","_onNew"),f.connect(c,i?"onDelete":"remove","_onDelete"));f.clear();f._mixinAPI("byIndex","byId","indexToId","idToIndex","size","treePath","hasChildren","keep","free")},destroy:function(){this.inherited(arguments);this.clear()},clear:function(){this._filled=0;this._priority=[];this._struct={};this._cache={};this._size={};this._struct[""]=[];this._size[""]=-1},byIndex:function(d,a){this._init("byIndex",arguments);
return this._cache[this.indexToId(d,a)]},byId:function(d){this._init("byId",arguments);return this._cache[d]},indexToId:function(d,a){this._init("indexToId",arguments);var f=this._struct[a||""];return typeof d=="number"&&d>=0?f&&f[d+1]:void 0},idToIndex:function(d){this._init("idToIndex",arguments);var a=this._struct,a=h(a[a[d]&&a[d][0]]||[],d);return a>0?a-1:-1},treePath:function(d){for(var a=this._struct,f=[];d!==void 0;)f.unshift(d),d=a[d]&&a[d][0];return f[0]!==""?[]:(f.pop(),f)},hasChildren:function(d){var a=
this.store,f;this._init("hasChildren",arguments);f=this.byId(d);return a.hasChildren&&a.hasChildren(d,f&&f.item)},size:function(d){this._init("size",arguments);var a=this._size[d||""];return a>=0?a:-1},onBeforeFetch:function(){},onAfterFetch:function(){},onSetColumns:function(d){var a,f,c,i;this.columns=d;for(a in this._cache)for(c in f=this._cache[a],d)i=d[c],f.data[c]=this._formatCell(i.id,f.rawData)},_itemToObject:function(d){var a=this.store;if(a.fetch){var f={};j.forEach(a.getAttributes(d),function(c){f[c]=
a.getValue(d,c)});return f}return d},_formatCell:function(d,a){var f=this.columns[d];return f.formatter?f.formatter(a):a[f.field||d]},_formatRow:function(d){var a=this.columns,f={},c;for(c in a)f[c]=this._formatCell(c,d);return f},_addRow:function(d,a,f,c,i){var i=i||"",b=this._struct,e=this._priority,g=b[i];if(!g)throw Error("Fatal error of cache._addRow: parent item "+i+" of "+d+" is not loaded");if(g[a+1]){if(g[a+1]!==d)throw Error("Fatal error of cache._addRow: different row id "+d+" and "+g[a+
1]+" for same row index "+a);}else g[a+1]=d;b[d]=b[d]||[i];i||(a=h(e,d),a>=0&&e.splice(a,1),e.push(d));this._cache[d]={data:this._formatRow(f),rawData:f,item:c};this._filled=1},_loadChildren:function(d){var a=this,f=new g,c=a.store,i=a.byId(d),i=i&&c.getChildren&&c.getChildren(i.item)||[];g.when(i,function(i){for(var b=0,e,g=a._size[d]=i.length;b<g;++b)e=i[b],a._addRow(c.getIdentity(e),b,a._itemToObject(e),e,d);f.callback()},b(f,f.errback));return f},_onBegin:function(d){this._size[""]=parseInt(d,
10)},_onComplete:function(d,a,f){try{for(var c=0,i;i=f[c];++c)this._addRow(this.store.getIdentity(i),a+c,this._itemToObject(i),i);d.callback()}catch(b){d.errback(b)}},_storeFetch:function(d){var a=this.store,f=new g,c=n({},this.options||{},d),i=b(this,this._onBegin),d=b(this,this._onComplete,f,d.start),e=b(f,f.errback);this.onBeforeFetch();a.fetch?a.fetch(n(c,{onBegin:i,onComplete:d,onError:e})):(a=a.query(c.query,c),g.when(a.total,i),g.when(a,d,e));f.then(b(this,this.onAfterFetch));return f},_onSet:function(d){var a=
this.store.getIdentity(d),f=this.idToIndex(a),c=this.treePath(a);c.length&&this._addRow(a,f,this._itemToObject(d),d,c.pop());this.onSet(a,f,this._cache[a])},_onNew:function(d,a){var f=this.store,c=this._itemToObject(d),i=a&&a[f.fetch?"item":"parent"];i&&f.getIdentity(i);var b=this._size[""];this.clear();this.onNew(f.getIdentity(d),0,{data:this._formatRow(c),rawData:c,item:d});!i&&b>=0&&(this._size[""]=b+1,this.model._onSizeChange())},_onDelete:function(d){var a=this.store,f=this._struct,d=a.fetch?
a.getIdentity(d):d,c=this.treePath(d);if(c.length){var i,b,a=[d],e=c.pop(),g=this._size,n=g[""],j=h(f[e],d);f[e].splice(j,1);--g[e];for(i=0;i<a.length;++i)if(c=f[a[i]])for(b=c.length-1;b>0;--b)a.push(c[b]);for(i=a.length-1;i>=0;--i)b=a[i],delete this._cache[b],delete f[b],delete g[b];i=h(this._priority,d);i>=0&&this._priority.splice(i,1);this.onDelete(d,j-1);!e&&n>=0&&(g[""]=n-1,this.model._onSizeChange())}else this.onDelete(d)}})})},"gridx/Grid":function(){define(["dojo/_base/declare","dojo/_base/array",
"dojo/_base/lang","dojo/dom-class","dojo/dom-geometry","dojo/_base/query","dijit/_WidgetBase","dijit/_FocusMixin","dijit/_TemplatedMixin","dojo/text!./templates/Grid.html","./core/Core","./core/_Module","./modules/Header","./modules/Body","./modules/VLayout","./modules/HLayout","./modules/VScroller","./modules/HScroller","./modules/ColumnWidth"],function(l,j,k,g,e,b,n,h,d,a,f,c,i,m,o,x,z,w,y){var t=j.forEach,q=function(){},l=l("gridx.Grid",[n,d,h,f],{templateString:a,coreModules:[i,m,o,x,z,w,y],coreExtensions:[],
postCreate:function(){this.inherited(arguments);this._eventFlags={};this.modules=this.coreModules.concat(this.modules||[]);this.modelExtensions=this.coreExtensions.concat(this.modelExtensions||[]);g.toggle(this.domNode,"gridxRtl",!this.isLeftToRight());this._initEvents(this._compNames,this._eventNames);this._reset(this);this._postCreate()},startup:function(){this._started||(this.inherited(arguments),this._deferStartup.callback())},destroy:function(){this._uninit();this.inherited(arguments)},resize:function(c){var a=
{};c&&(this.autoWidth&&delete c.w,this.autoHeight&&delete c.h,e.setMarginBox(this.domNode,c));this._onResizeBegin(c,a);this._onResizeEnd(c,a)},_onResizeBegin:function(){},_onResizeEnd:function(){},_compNames:["Cell","HeaderCell","Row","Header"],_eventNames:["Click","DblClick","MouseDown","MouseUp","MouseOver","MouseOut","MouseMove","ContextMenu","KeyDown","KeyPress","KeyUp"],_initEvents:function(c,a){var i=this;t(c,function(c){t(a,function(a){a="on"+c+a;i[a]=i[a]||q})})},_connectEvents:function(c,
a,i){t(this._eventNames,function(f){this.connect(c,"on"+f.toLowerCase(),k.hitch(i,a,f))},this)},_isConnected:function(c){return this[c]!==q}});l.markupFactory=function(a,i,f){if(!a.structure&&i.nodeName.toLowerCase()=="table"){var d=a.structure=[];b("thead > tr > th",i).forEach(function(a){var i={};t(c._markupAttrs,function(c){c[0]=="!"?(c=c.slice(1),i[c]=eval(a.getAttribute(c))):i[c]=a.getAttribute(c)});i.name=i.name||a.innerHTML;d.push(i)})}return new f(a,i)};return l})},"gridx/modules/select/_Base":function(){define(["dojo/_base/declare",
"dojo/_base/connect","../../core/_Module"],function(l,j,k){return l(k,{getAPIPath:function(){var g={select:{}};g.select[this._type]=this;return g},preload:function(){var g=this,e=g.grid;g.subscribe("gridClearSelection_"+e.id,function(b){b!=g._type&&g.clear()});g.connect(e.body,"onRender","_onRender");g.arg("multiple")&&e.domNode.setAttribute("aria-multiselectable",!0);g._init()},enabled:!0,multiple:!0,holdingCtrl:!1,onSelected:function(){},onDeselected:function(){},onHighlightChange:function(){},
_getMarkType:function(){},_select:function(g,e){var b=1;this.arg("enabled")&&(this.arg("multiple")&&(e||this.arg("holdingCtrl"))?b=!this.isSelected(g):this.clear(),j.publish("gridClearSelection_"+this.grid.id,[this._type]),this._markById(g,b))}})})},"gridx/nls/Body":function(){define({root:{loadingInfo:"Loading...",emptyInfo:"No items to display"}})},"gridx/modules/SingleSort":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/keys","../core/model/extensions/Sort","../core/_Module"],
function(l,j,k,g,e){return l(e,{name:"sort",forced:["header"],modelExtensions:[g],getAPIPath:function(){return{sort:this}},preload:function(){var b=this,e=b.grid,g;b.connect(e,"onHeaderCellClick","_onClick");b.connect(e,"onHeaderCellKeyDown","_onKeyDown");e.persist&&(g=e.persist.registerAndLoad("sort",function(){return[{colId:b._sortId,descending:b._sortDescend}]}));g=g||b.arg("preSort");j.isArrayLike(g)&&(g=g[0]);if(g&&g.colId)b._sortId=g.colId,b._sortDescend=g.descending,b.model.sort([g])},load:function(){var b=
this,e,g=function(){b._sortId&&b._updateHeader(b._sortId,b._sortDescend)};b.connect(b.grid.header,"onRender",g);for(e in b.grid._columnsById)b._initHeader(e);g();b.loaded.callback()},columnMixin:{sort:function(b,e){this.grid.sort.sort(this.id,b,e);return this},isSorted:function(){return this.grid.sort.isSorted(this.id)},clearSort:function(b){this.isSorted()&&this.grid.sort.clear(b);return this},isSortable:function(){var b=this.grid._columnsById[this.id];return b.sortable||b.sortable===void 0},setSortable:function(b){this.grid._columnsById[this.id].sortable=
!!b;return this}},sort:function(b,e,g){var d=this.grid,a=d._columnsById[b];if(a&&(a.sortable||a.sortable===void 0))(this._sortId!=b||this._sortDescend==!e)&&this._updateHeader(b,e),this.model.sort([{colId:b,descending:e}]),g||d.body.refresh()},isSorted:function(b){if(b==this._sortId)return this._sortDescend?-1:1;return 0},clear:function(b){if(this._sortId!==null)this._initHeader(this._sortId),this._sortId=this._sortDescend=null,this.model.sort(),b||this.grid.body.refresh()},getSortData:function(){return this._sortId?
[{colId:this._sortId,descending:this._sortDescend}]:null},_sortId:null,_sortDescend:null,_initHeader:function(b){var e=this.grid.header.getHeaderNode(b);e.innerHTML=["<div class='gridxSortNode'>",this.grid.column(b,1).name(),"</div>"].join("");e.removeAttribute("aria-sort")},_updateHeader:function(b,e){this._sortId&&this._sortId!=b&&this._initHeader(this._sortId);this._sortId=b;this._sortDescend=!!e;var g=this.grid,d=g.header.getHeaderNode(b);d.innerHTML=["<div class='gridxSortNode ",e?"gridxSortDown":
"gridxSortUp","'><div class='gridxArrowButtonChar'>",e?"&#9662;":"&#9652;","</div><div role='presentation' class='gridxArrowButtonNode'></div><div class='gridxColCaption'>",g.column(b,1).name(),"</div></div>"].join("");d.setAttribute("aria-sort",e?"descending":"ascending");g.vLayout.reLayout()},_onClick:function(b){this.sort(b.columnId,this._sortId!=b.columnId?0:!this._sortDescend)},_onKeyDown:function(b){b.keyCode==k.ENTER&&this._onClick(b)}})})},"gridx/modules/select/_RowCellBase":function(){define(["dojo/_base/declare",
"dojo/_base/lang","./_Base","../../core/model/extensions/Mark"],function(l,j,k,g){return l(k,{modelExtensions:[g],selectById:function(e,b){var g=this.model;this.arg("enabled")&&(g.markById(e,1,this._getMarkType(b)),g.when())},deselectById:function(e,b){var g=this.model;this.arg("enabled")&&(g.markById(e,0,this._getMarkType(b)),g.when())},isSelected:function(e,b){return this.model.isMarked(e,this._getMarkType(b))},_init:function(){var e=this.model;this.batchConnect([e,"onMarked",j.hitch(this,"_onMark",
1)],[e,"onMarkRemoved",j.hitch(this,"_onMark",0)])}})})},"gridx/modules/HScroller":function(){define(["dojo/_base/declare","dojo/dom-style","dojo/_base/sniff","dojo/_base/Deferred","dojox/html/metrics","../core/_Module"],function(l,j,k,g,e,b){return l(b,{name:"hScroller",forced:["header"],getAPIPath:function(){return this.grid.autoWidth?{}:{hScroller:this}},constructor:function(){this.grid._initEvents(["H"],["Scroll"])},preload:function(){var b=this,h=b.grid,d=h.hScrollerNode;if(!h.autoWidth&&(b.domNode=
d,b.container=d.parentNode,b.stubNode=d.firstChild,h.vLayout.register(b,"container","footerNode",0),d.style.display="block",b.batchConnect([h.header,"onRender","refresh"],[d,"onscroll","_onScroll"],[h,"_onResizeBegin",function(a,f){f.hScroller=new g}],[h,"_onResizeEnd",function(a,f){g.when(f.header,function(){b.refresh();f.hScroller.callback()})}]),k("ie")))d.style.height=e.getScrollbar().h+"px"},scroll:function(b){var e=this.domNode;if((k("webkit")||k("ie")<8)&&!this.grid.isLeftToRight())b=e.scrollWidth-
e.offsetWidth-b;e.scrollLeft=b},refresh:function(){var b=this.grid,e=b.isLeftToRight(),d=e?"marginLeft":"marginRight",e=e?"marginRight":"marginLeft",a=b.hLayout.lead,f=b.hLayout.tail,c=(b.domNode.clientWidth||j.get(b.domNode,"width"))-a-f,i=b.header.innerNode,g=j.get(i,"paddingLeft")||0,o=this.domNode.style,i=i.firstChild.offsetWidth+g,x=o.display,k=i<=c?"none":"block";o[d]=a+g+"px";o[e]=f+"px";o.width=(c-g<0?0:c-g)+"px";this.stubNode.style.width=(i-g<0?0:i-g)+"px";o.display=k;x=="block"&&k=="none"&&
b.vLayout.reLayout()},_lastLeft:0,_onScroll:function(){var b=this.domNode.scrollLeft;if((k("webkit")||k("ie")<8)&&!this.grid.isLeftToRight())b=this.domNode.scrollWidth-this.domNode.offsetWidth-b;if(this._lastLeft!=b)this._lastLeft=b,this._doScroll()},_doScroll:function(){var b=this.grid;b.bodyNode.scrollLeft=this.domNode.scrollLeft;b.onHScroll(this._lastLeft)}})})},"gridx/core/model/cache/Sync":function(){define(["dojo/_base/declare","dojo/_base/Deferred","./_Cache"],function(l,j,k){return l(k,{keep:function(){},
free:function(){},when:function(g,e){var b=new j;try{e&&e(),b.callback()}catch(k){b.errback(k)}return b},_init:function(){this._filled||(this._storeFetch({start:0}),this.store.getChildren&&this._fetchChildren())},_fetchChildren:function(){for(var g=this._struct,e=g[""].slice(1),b;e.length;)b=e.shift(),j.when(this._loadChildren(b),function(){[].push.apply(e,g[b].slice(1))})}})})},"gridx/modules/HLayout":function(){define(["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/array","dojo/dom-geometry",
"dojo/dom-style","dojo/DeferredList","../core/_Module"],function(l,j,k,g,e,b,n){return l(n,{name:"hLayout",getAPIPath:function(){return{hLayout:this}},load:function(b,d){var a=this;d.then(function(){a._layout();a.loaded.callback()})},lead:0,tail:0,register:function(b,d,a){var f=this._regs=this._regs||[];b||(b=new j,b.callback());f.push([b,d,a])},onUpdateWidth:function(){},_layout:function(){var h=this,d=h._regs;if(d){var a=0,f=0,c=k.map(d,function(c){return c[0]});(new b(c)).then(function(){k.forEach(d,
function(c){var b=g.getMarginBox(c[1]).w||e.get(c[1],"width");c[2]?f+=b:a+=b});h.lead=a;h.tail=f;h.onUpdateWidth(a,f)})}else h.onUpdateWidth(0,0)}})})},"gridx/core/Cell":function(){define(["dojo/_base/declare"],function(l){return l([],{constructor:function(j,k,g){this.grid=j;this.model=j.model;this.row=k;this.column=g},data:function(){return this.model.byId(this.row.id).data[this.column.id]},rawData:function(){var j=this.column.field();return j&&this.model.byId(this.row.id).rawData[j]},setRawData:function(j){var k=
{};k[this.column.field()]=j;return this.row.setRawData(k)}})})},"gridx/core/model/extensions/Mark":function(){define(["dojo/_base/declare","dojo/_base/array","../_Extension"],function(l,j,k){return l(k,{name:"move",priority:5,constructor:function(g){this.clear();this._mixinAPI("isMarked","getMarkedIds","markById","markByIndex","clearMark");g.onMarked=function(){};g.onMarkRemoved=function(){};this.connect(g,"_msg","_receiveMsg");g._spTypes={}},clear:function(){this._byId={}},clearMark:function(g){this._byId[this._initMark(g)]=
{}},getMarkedIds:function(g){var e=[],b;if(g=this._byId[this._initMark(g)])for(b in g)e.push(b);return e},isMarked:function(g,e){return!!this._byId[this._initMark(e)][g]},markById:function(g,e,b){this._cmd(g,e,b,1)},markByIndex:function(g,e,b){g>=0&&g<Infinity&&this._cmd(g,e,b)},_mark:function(g,e,b){var b=this._initMark(b),j=this.isMarked(g,b);e&&!j?this._addMark(g,b):!e&&j&&this._removeMark(g,b)},_cmdMark:function(){var g=this,e=arguments,b=[],k=g.model._model;j.forEach(e,function(e){e[3]||b.push({start:e[0],
count:1})});return k._call("when",[{id:[],range:b},function(){j.forEach(e,function(b){b[3]||(b[0]=k._call("indexToId",[b[0]]));b[0]&&g._mark.apply(g,b)})}])},_onDelete:function(g){var e,b=this._byId;for(e in b)delete b[this._initMark(e)][g];this.onDelete.apply(this,arguments)},_initMark:function(g){var e=this._byId,g=g||"select";e[g]=e[g]||{};return g},_addMark:function(g,e){var b=this._initMark(e);this._byId[b][g]=1;this.model.onMarked(g,b)},_removeMark:function(g,e){var b=this._initMark(e);delete this._byId[b][g];
this.model.onMarkRemoved(g,b)},_cmd:function(){this.model._addCmd({name:"_cmdMark",scope:this,args:arguments,async:1})},_receiveMsg:function(g,e){if(g=="filter"){var b,j=this.model._spTypes,h;for(b in j)if(j[b])for(h in this._byId[b])e[h]||this._removeMark(h,b)}}})})},"gridx/modules/Body":function(){define(["dojo/_base/declare","dojo/_base/query","dojo/_base/array","dojo/dom-construct","dojo/dom-class","dojo/_base/Deferred","dojo/_base/sniff","dojo/keys","../core/_Module","../util","dojo/i18n!../nls/Body"],
function(l,j,k,g,e,b,n,h,d,a,f){return l(d,{name:"body",optional:["tree"],getAPIPath:function(){return{body:this}},preload:function(){var c=this.grid,a=this.domNode=c.bodyNode;c.emptyNode.innerHTML=f.loadingInfo;c._connectEvents(a,"_onMouseEvent",this);this._initFocus()},load:function(){var c=this,a=c.model,b=c.grid;c.batchConnect([a,"onDelete","_onDelete"],[a,"onSet","_onSet"],[a,"onSizeChange","_onSizeChange"],[b,"onRowMouseOver","_onRowMouseOver"],[b,"onCellMouseOver","_onCellMouseOver"],[b,"onCellMouseOut",
"_onCellMouseOver"],[b.bodyNode,"onmouseleave",function(){var a=j(".gridxRowOver",c.domNode)[0];a&&e.remove(a,"gridxRowOver")}],[b,"setColumns",function(){c.refresh()}]);a.when({},function(){var f=c.rootCount,f=c.rootCount=f?f:a.size();c.visualCount=b.tree?b.tree.getVisualSize(c.rootStart,f):f;c.loaded.callback()})},destroy:function(){this.inherited(arguments);this.domNode.innerHTML=""},rowMixin:{node:function(){return this.grid.body.getRowNode({rowId:this.id})},visualIndex:function(){var c=this.id;
return this.grid.body.getRowInfo({rowId:c,rowIndex:this.index(),parentId:this.model.treePath(c).pop()}).visualIndex}},cellMixin:{node:function(){return this.grid.body.getCellNode({rowId:this.row.id,cellId:this.column.id})}},getRowNode:function(c){return(c=this._getRowNodeQuery(c))?j(c,this.domNode)[0]||null:null},getCellNode:function(c){var a=c.colId,b=this._getRowNodeQuery(c);if(b){if(!a&&typeof c.colIndex=="number")a=this.grid._columns[c.colIndex].id;b+=" [colid='"+a+"'].gridxCell";return j(b,this.domNode)[0]||
null}return null},getRowInfo:function(c){var a=this.model,b=this.grid,f=c.rowId;if(f)c.rowIndex=a.idToIndex(f),c.parentId=a.treePath(f).pop();if(typeof c.rowIndex=="number"&&c.rowIndex>=0)c.visualIndex=b.tree?b.tree.getVisualIndexByRowInfo(parentId,rowIndex,this.rootStart):c.rowIndex-this.rootStart;else if(typeof c.visualIndex=="number"&&c.visualIndex>=0)b.tree?(b=b.tree.getRowInfoByVisualIndex(c.visualIndex,this.rootStart),c.rowIndex=b.start,c.parentId=b.parentId):c.rowIndex=this.rootStart+c.visualIndex;
else return c;c.rowId=f||a.indexToId(c.rowIndex,c.parentId);return c},refresh:function(c){var a=this;return a.model.when({}).then(function(){var f=a.renderStart,d=a.renderCount;if(typeof c=="number"&&c>=0){c=f>c?f:c;var e=f+d-c,f=j('[visualindex="'+c+'"]',a.domNode)[0],d=[],h=[];if(f){var k=a._buildRows(c,e,d,h);if(k){g.place(k,f,"before");for(var k=0,l=h.length;k<l;++k)a.onAfterRow.apply(a,h[k])}}for(;f;)h=f.nextSibling,g.destroy(f),f=h;b.when(a._buildUncachedRows(d),function(){a.onRender(c,e)})}else a.renderRows(f,
d,0,1),a.onForcedScroll()})},refreshCell:function(c,a){var f=new b,d=this,e=d.model,g=d.grid,h=g._columns[a],j=h&&d.getCellNode({visualIndex:c,colId:h.id});if(j){var k,l=d.getRowInfo({visualIndex:c}),p=l.rowIndex,u=l.parentId;e.when({start:p,count:1,parentId:u},function(){if(k=e.byIndex(p,u))l.rowId=e.indexToId(p,u),j.innerHTML=d._buildCellContent(h,l,k.data,g.tree&&k.data[h.id]===void 0),d.onAfterCell(j,l,h,k)}).then(function(){f.callback(!!k)});return f}f.callback(0);return f},rootStart:0,rootCount:0,
renderStart:0,renderCount:0,visualStart:0,visualCount:0,autoUpdate:1,autoChangeSize:1,updateRootRange:function(c,a){var b=this.grid.tree,b=this.visualCount=b?b.getVisualSize(c,a):a;this.rootStart=c;this.rootCount=a;if(this.renderStart+this.renderCount>b&&(this.renderStart=b-this.renderCount,this.renderStart<0))this.renderStart=0,this.renderCount=b;if(!this.renderCount&&b)this.onForcedScroll()},renderRows:function(c,a,d,e){var h=this,j=h.grid,k="",l=[],t=[],q=h.domNode,p=j.emptyNode;if(a>0){p.innerHTML=
f.loadingInfo;d!="top"&&d!="bottom"&&h.model.free();k=h._buildRows(c,a,l,t);if(d=="top")h.renderCount+=h.renderStart-c,h.renderStart=c,g.place(k,q,"first");else if(d=="bottom")h.renderCount=c+a-h.renderStart,g.place(k,q,"last");else{h.renderStart=c;h.renderCount=a;d=e?q.scrollTop:0;q.scrollTop=0;if(n("ie"))for(;q.childNodes.length;)q.removeChild(q.firstChild);q.innerHTML=k;q.scrollTop=d;q.scrollLeft=j.hScrollerNode.scrollLeft;p.innerHTML=k?"":f.emptyInfo;h.onUnrender()}j=0;for(k=t.length;j<k;++j)h.onAfterRow.apply(h,
t[j]);b.when(h._buildUncachedRows(l),function(){h.onRender(c,a)})}else if(!{top:1,bottom:1}[d])q.scrollTop=0,q.innerHTML="",p.innerHTML=f.emptyInfo,h.onUnrender(),h.model.free()},unrenderRows:function(c,a){if(c>0){var b=0,f,d=this.domNode;if(a=="post")for(;b<c&&d.lastChild;++b)f=d.lastChild.getAttribute("rowid"),this.model.free(f),d.removeChild(d.lastChild),this.onUnrender(f);else{for(var e=d.scrollTop;b<c&&d.firstChild;++b)f=d.firstChild.getAttribute("rowid"),this.model.free(f),e-=d.firstChild.offsetHeight,
d.removeChild(d.firstChild),this.onUnrender(f);this.renderStart+=b;d.scrollTop=e>0?e:0}this.renderCount-=b;this.model.when()}},onAfterRow:function(){},onAfterCell:function(){},onRender:function(){},onUnrender:function(){},onDelete:function(){},onSet:function(){},collectCellWrapper:function(){},onMoveToCell:function(){},onForcedScroll:function(){},_getRowNodeQuery:function(c){var a;c.rowId?a="[rowid='"+c.rowId+"']":typeof c.rowIndex=="number"&&c.rowIndex>=0?(a="[rowindex='"+c.rowIndex+"']",c.parentId&&
(a+="[parentid='"+c.parentId+"']")):typeof c.visualIndex=="number"&&c.visualIndex>=0&&(a="[visualindex='"+c.visualIndex+"']");return a&&a+".gridxRow"},_buildRows:function(c,a,b,f){for(var a=c+a,d=[],e=this.model,g=this.domNode.scrollWidth;c<a;++c){var h=this.getRowInfo({visualIndex:c}),j=e.byIndex(h.rowIndex,h.parentId);d.push('<div class="gridxRow ',c%2?"gridxRowOdd":"",'" role="row" visualindex="',c);j?(e.keep(h.rowId),d.push('" rowid="',h.rowId,'" rowindex="',h.rowIndex,'" parentid="',h.parentId,
'">',this._buildCells(j.data,h),"</div>"),f.push([h,j])):(d.push('"><div class="gridxRowDummy" style="width:',g,'px;"></div></div>'),h.start=h.rowIndex,h.count=1,b.push(h))}return d.join("")},_buildUncachedRows:function(c){return c.length&&this.model.when(c,function(){for(var a=0,b=c.length;a<b;++a)this._buildRowContent(c[a])},this)},_buildRowContent:function(c){var a=this.model,b=j('[visualindex="'+c.visualIndex+'"]',this.domNode)[0];if(b){var f=a.byIndex(c.rowIndex,c.parentId);f?(c.rowId=a.indexToId(c.rowIndex,
c.parentId),a.keep(c.rowId),b.setAttribute("rowid",c.rowId),b.setAttribute("rowindex",c.rowIndex),b.setAttribute("parentid",c.parentId||""),b.innerHTML=this._buildCells(f.data,c),this.onAfterRow(c,f)):console.error("Row is not in cache:",c.rowIndex)}},_buildCells:function(c,a){for(var b,f,d=this.grid,e=d._columns,g=d.focus&&d.focus.currentArea()=="body",h=['<table class="gridxRowTable" role="presentation" border="0" cellpadding="0" cellspacing="0"><tr>'],j=0,k=e.length;j<k;++j)b=e[j],f=d.tree&&c[b.id]===
void 0,h.push('<td class="gridxCell '),f&&h.push("gridxPaddingCell"),g&&this._focusCellRow===a.visualIndex&&this._focusCellCol===j&&h.push("gridxCellFocus"),h.push('" role="gridcell" tabindex="-1" colid="',b.id,'" style="width: ',b.width,'">',this._buildCellContent(b,a,c,f),"</td>");h.push("</tr></table>");return h.join("")},_buildCellContent:function(c,a,b,f){var d="";f||(d=this._wrapCellData(c.decorator?c.decorator(b[c.id],a.rowId,a.visualIndex):b[c.id],a.rowId,c.id));return!d&&n("ie")<8?"$nbsp;":
d},_wrapCellData:function(c,a,b){var f=[];this.collectCellWrapper(f,a,b);var d=f.length-1;for(d>0&&f.sort(function(c,a){return c.priority-a.priority});d>=0;--d)c=f[d].wrap(c,a,b);return c},_onMouseEvent:function(c,a){var b=this.grid,f="onCell"+c,d="onRow"+c;if(b._isConnected(f)||b._isConnected(d))if(this._decorateEvent(a),a.rowId){if(a.columnId)b[f](a);b[d](a)}},_decorateEvent:function(c){for(var a=c.target||c.originalTarget,b=this.grid,f;a&&a!=b.bodyNode;a=a.parentNode){f=a.tagName.toLowerCase();
if(f=="td"&&e.contains(a,"gridxCell")){var d=b._columnsById[a.getAttribute("colid")];c.cellNode=a;c.columnId=d.id;c.columnIndex=d.index}if(f=="div"&&e.contains(a,"gridxRow")){c.rowId=a.getAttribute("rowid");c.parentId=a.getAttribute("parentid");c.rowIndex=parseInt(a.getAttribute("rowindex"),10);c.visualIndex=parseInt(a.getAttribute("visualindex"),10);break}}},_onSet:function(a,b,f){if(this.autoUpdate){var d=this.getRowNode({rowId:a});if(d&&f){var e=this.getRowInfo({rowId:a,rowIndex:b});d.innerHTML=
this._buildCells(f.data,e);this.onAfterRow(e,f);this.onSet(a,b,f);this.onRender(b,1)}}},_onDelete:function(a){if(this.autoUpdate){var b=this.getRowNode({rowId:a});if(b){for(var f=0,d=parseInt(b.getAttribute("rowindex"),10),e=b.getAttribute("parentid"),h={id:1},j=[b],l,n=[a],b=b.nextSibling;b&&h[b.getAttribute("parentid")];b=b.nextSibling)l=b.getAttribute("rowid"),n.push(l),j.push(b),h[l]=1;for(;b;b=b.nextSibling)b.getAttribute("parentid")==e&&b.setAttribute("rowindex",parseInt(b.getAttribute("rowindex"),
10)-1),b.setAttribute("visualindex",parseInt(b.getAttribute("visualindex"),10)-1),++f;k.forEach(j,g.destroy);k.forEach(n,this.onUnrender,this);this.autoChangeSize&&this.rootStart===0&&!e&&this.updateRootRange(0,this.rootCount-1);this.onDelete(a,d);this.onRender(d,f)}}},_onSizeChange:function(a,b){if(this.autoChangeSize&&this.rootStart===0&&(this.rootCount===b||b<0))this.updateRootRange(0,a),this.refresh()},_onRowMouseOver:function(a){var b=j("> div.gridxRowOver",this.domNode)[0],a=this.getRowNode({rowId:a.rowId});
b!=a&&(b&&e.remove(b,"gridxRowOver"),e.add(a,"gridxRowOver"))},_onCellMouseOver:function(a){e.toggle(a.cellNode,"gridxCellOver",a.type=="mouseover")},_focusCellCol:0,_focusCellRow:0,_initFocus:function(){var a=this,b=a.grid,f=b.isLeftToRight(),d=b.bodyNode,e=b.focus;e&&(e.registerArea({name:"body",priority:1,focusNode:d,scope:a,doFocus:a._doFocus,doBlur:a._blurCell,onFocus:a._onFocus,onBlur:a._blurCell}),a.connect(b.mainNode,"onkeypress",function(d){if(e.currentArea()=="body"&&(!b.tree||!d.ctrlKey)){e._noBlur=
1;var g={},j=f?1:-1;g[h.LEFT_ARROW]=[0,-j,d];g[h.RIGHT_ARROW]=[0,j,d];g[h.UP_ARROW]=[-1,0,d];g[h.DOWN_ARROW]=[1,0,d];a._moveFocus.apply(a,g[d.keyCode]||[]);e._noBlur=0}}),a.connect(b,"onCellClick",function(b){a._focusCellRow=b.visualIndex;a._focusCellCol=b.columnIndex}),a.connect(a,"onRender",function(b,d){a._focusCellRow>=b&&a._focusCellRow<b+d&&e.currentArea()=="body"&&a._focusCell()}),b.hScroller&&a.connect(d,"onscroll",function(){b.hScroller.scroll(!f&&(n("webkit")||n("ie")<8)?d.scrollWidth-d.offsetWidth-
d.scrollLeft:d.scrollLeft)}))},_doFocus:function(a){return this._focusCell(a)||this._focusCell(0,-1,-1)},_focusCell:function(c,b,d){a.stopEvent(c);d=d>=0?d:this._focusCellCol;b=b>=0?b:this._focusCellRow;if(c=this.getCellNode({visualIndex:b,colId:this.grid._columns[d].id})){var f=j(".gridxCellFocus",this.domNode)[0];if(c!=f)f&&e.remove(f,"gridxCellFocus"),e.add(c,"gridxCellFocus"),this._focusCellRow=b,this._focusCellCol=d;n("ie")<8||c.focus()}else if(!this.grid.rowCount())return this.grid.emptyNode.focus(),
!0;return c},_moveFocus:function(c,b,d){if(c||b){a.stopEvent(d);var f,e,g=this,h=g.grid,j=h._columns,k=g.visualCount;f=g._focusCellRow+c;f=f<0?0:f>=k?k-1:f;e=g._focusCellCol+b;e=e<0?0:e>=j.length?j.length-1:e;h.vScroller.scrollToRow(f).then(function(){g._focusCell(0,f,e);g.onMoveToCell(f,e,d)})}},_nextCell:function(a,d,f,e){var g=new b,h=this.grid,j=h._columns.length,k=this.visualCount;do if(d+=f,d<0||d>=j)a+=f,d=d<0?j-1:0,a<0?(a=k-1,d=j-1):a>=k&&(d=a=0);while(!e(a,d));h.vScroller.scrollToRow(a).then(function(){g.callback({r:a,
c:d})});return g},_blurCell:function(){var a=j(".gridxCellFocus",this.domNode)[0];a&&e.remove(a,"gridxCellFocus");return!0},_onFocus:function(a){for(a=a.target;a&&a!=this.domNode;a=a.parentNode)if(e.contains(a,"gridxCell")){for(var b=this.grid._columnsById[a.getAttribute("colid")].index;!e.contains(a,"gridxRow");)a=a.parentNode;return this._focusCell(0,parseInt(a.getAttribute("visualindex"),10),b)}return!1}})})},"gridx/modules/select/Row":function(){define(["dojo/_base/declare","dojo/_base/array",
"dojo/_base/sniff","dojo/dom-class","dojo/keys","./_RowCellBase","../../core/_Module"],function(l,j,k,g,e,b){return l(b,{name:"selectRow",rowMixin:{select:function(){this.grid.select.row.selectById(this.id);return this},deselect:function(){this.grid.select.row.deselectById(this.id);return this},isSelected:function(){return this.model.isMarked(this.id)}},triggerOnCell:!1,getSelected:function(){return this.model.getMarkedIds()},clear:function(){if(this.arg("enabled")){var b=this.model;j.forEach(b.getMarkedIds(),
function(e){b.markById(e,0)});b.when()}},_type:"row",_init:function(){var b=this,g=b.grid;b.inherited(arguments);b.model._spTypes.select=1;b.batchConnect([g,"onRowMouseDown",function(d){(b.arg("triggerOnCell")||!d.columnId)&&b._select(d.rowId,d.ctrlKey)}],[g,k("ff")<4?"onRowKeyUp":"onRowKeyDown",function(d){(b.arg("triggerOnCell")||!d.columnId)&&d.keyCode==e.SPACE&&b._select(d.rowId,d.ctrlKey)}])},_onMark:function(b,e,d){if(d=="select"){var a=this;a._highlight(e,b);a.model.when({id:e},function(){a[b?
"onSelected":"onDeselected"](a.grid.row(e,!0))})}},_highlight:function(b,e){var d=this.grid.body.getRowNode({rowId:b});d&&(g.toggle(d,"gridxRowSelected",e),d.setAttribute("aria-selected",!!e),this.onHighlightChange({row:parseInt(d.getAttribute("visualindex"),10)},!!e))},_markById:function(b,e){var d=this.model;d.markById(b,e);d.when()},_onRender:function(b,e){var d=this.model,a=b+e,f,c;for(f=b;f<a;++f)c=d.indexToId(this.grid.body.getRowInfo({visualIndex:f}).rowIndex),d.isMarked(c)&&this._highlight(c,
1)}})})},"gridx/core/Column":function(){define(["dojo/_base/declare"],function(l){return l([],{constructor:function(j,k){this.grid=j;this.model=j.model;this.id=k},index:function(){var j=this.grid._columnsById[this.id];return j?j.index:-1},cell:function(j,k){return this.grid.cell(j,this,k)},name:function(){return this.grid._columnsById[this.id].name||""},setName:function(j){this.grid._columnsById[this.id].name=j;return this},field:function(){return this.grid._columnsById[this.id].field||null},getWidth:function(){return this.grid._columnsById[this.id].width}})})},
"gridx/modules/ColumnWidth":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/Deferred","dojo/_base/query","dojo/_base/sniff","dojo/dom-geometry","dojo/dom-class","dojo/dom-style","dojo/keys","../core/_Module"],function(l,j,k,g,e,b,n,h,d,a){return l(a,{name:"columnWidth",forced:["hLayout","header"],getAPIPath:function(){return{columnWidth:this}},constructor:function(){this._ready=new k},preload:function(){var a=this,b=a.grid;if(!b.hScroller)a.autoResize=!0;a.batchConnect([b,"_onResizeBegin",
function(d,e){e.header=new k;if(a.arg("autoResize")){var g=b.domNode.clientWidth-b.hLayout.lead-b.hLayout.tail;b.bodyNode.style.width=(g<0?0:g)+"px"}else a._adaptWidth();e.header.callback()}],[b.hLayout,"onUpdateWidth",function(){a._adaptWidth();a._ready.callback()}],[b,"setColumns","_adaptWidth"])},load:function(){var a=this.loaded;this._ready.then(function(){a.callback()})},"default":60,autoResize:!1,_adaptWidth:function(){var a=this,c=a.grid,d=c.domNode,k=c.header,l=c.isLeftToRight(),x=l?"marginLeft":
"marginRight",z=l?"marginRight":"marginLeft",l=c.hLayout.lead,w=c.hLayout.tail,y=k.innerNode,t=c.bodyNode.style,q=y.style,p=(d.clientWidth||h.get(d,"width"))-l-w,u=g(".gridxCell",y)[0],v=b.getMarginBox(u).w-b.getContentBox(u).w,r=!d.offsetHeight,s=h.get(u,"borderCollapse")=="collapse";q[x]=t[x]=l+"px";q[z]=w+"px";p=p<0?0:p;r&&s&&v--;if(c.autoWidth){j.forEach(c._columns,function(b){if(!b.width)b.width=a.arg("default")+"px"});k.refresh();var x=g("th.gridxCell",y),A=s?2:0;x.forEach(function(a){var b=
h.get(a,"width");if(!e("webkit")||!r)b+=v;A+=b;e("ie")&&s&&A--;a=c._columnsById[a.getAttribute("colid")];if(!a.width||/%$/.test(a.width))a.width=b+"px"});k._columnsWidth=A;t.width=A+"px";d.style.width=l+w+A+"px"}else{if(a.arg("autoResize"))t.width=p+"px",n.add(d,"gridxPercentColumnWidth"),j.forEach(c._columns,function(a){if(!a.width||!/%$/.test(a.width))a.width="auto"});else{var B=[],C=s?2:0;t.width=p+"px";j.forEach(c._columns,function(a){if(!a.width||a.width=="auto")a.width="auto",B.push(a);else if(/%$/.test(a.width))a.width=
parseInt(p*parseFloat(a.width,10)/100-v,10)+"px"});k.refresh();j.forEach(c._columns,function(a){if(a.width!="auto"){var b=h.get(k.getHeaderNode(a.id),"width");if(!a.width||/%$/.test(a.width))a.width=b+"px";if(!e("webkit")||!r)b+=v;C+=b}});if(B.length){e("webkit")&&(v=0);var D=p>C?(p-C)/B.length-v:a.arg("default");p>C&&e("ie")&&s&&(D+=c._columns.length/B.length);D=parseInt(D,10);j.forEach(B,function(a){a.width=D+"px"})}}k.refresh()}if(e("ie")<8)q.width=p+"px";c.hScroller&&(c.hScroller.scroll(0),k._onHScroll(0))}})})},
"gridx/modules/Header":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-class","dojo/dom-geometry","dojo/_base/query","dojo/_base/sniff","dojo/keys","../util","../core/_Module"],function(l,j,k,g,e,b,n,h,d){return l(d,{name:"header",forced:["hLayout"],getAPIPath:function(){return{header:this}},constructor:function(){var a=this.domNode=j.create("div",{"class":"gridxHeaderRow",role:"presentation"}),b=this.innerNode=j.create("div",{"class":"gridxHeaderRowInner",role:"row",innerHTML:'<table border="0" cellpadding="0" cellspacing="0"><tr><th class="gridxCell"></th></tr></table>'});
a.appendChild(b)},preload:function(){var a=this.grid,b=this.domNode;a.headerNode.appendChild(b);a.vLayout.register(this,"domNode","headerNode");this.batchConnect([a,"onHScroll","_onHScroll"],[a,"onHeaderCellMouseOver","_onHeaderCellMouseOver"],[a,"onHeaderCellMouseOut","_onHeaderCellMouseOver"],a.columnResizer&&[a.columnResizer,"onResize","_onColumnResize"]);this._initFocus();a._connectEvents(b,"_onMouseEvent",this)},destroy:function(){this.inherited(arguments);j.destroy(this.domNode)},columnMixin:{headerNode:function(){return this.grid.header.getHeaderNode(this.id)}},
getHeaderNode:function(a){return e("[colid='"+a+"']",this.domNode)[0]},refresh:function(){var a=this,b=a.grid,c=b.focus,d=['<table role="presentation" border="0" cellpadding="0" cellspacing="0"><tr>'];b.columns().forEach(function(b){d.push('<th colid="',b.id,'" class="gridxCell ',c&&c.currentArea()=="header"&&b.id==a._focusHeaderId?a._focusClass:"",'" role="columnheader" aria-readonly="true" tabindex="-1" style="width: ',b.getWidth(),'"><div class="gridxSortNode">',b.name(),"</div></th>")});d.push("</tr></table>");
a.innerNode.innerHTML=d.join("");a._onHScroll(a._scrollLeft);a.onRender()},onRender:function(){},onMoveToHeaderCell:function(){},_scrollLeft:0,_onColumnResize:function(a,b,c){a=this.grid;a.autoWidth?(b=this._columnsWidth+=b-c,a.bodyNode.style.width=b+"px",a.domNode.style.width=a.hLayout.lead+a.hLayout.tail+b+"px"):this._onHScroll(a.hScrollerNode.scrollLeft)},_onHScroll:function(a){var d=this.grid.isLeftToRight();this.innerNode.firstChild.style[d?"marginLeft":"marginRight"]=(!d&&b("ff")?a:-a)+"px";
this._scrollLeft=a},_onMouseEvent:function(a,b){var c=this.grid,d="onHeaderCell"+a,e="onHeader"+a;if(c._isConnected(d)||c._isConnected(e)){this._decorateEvent(b);if(b.columnIndex>=0)c[d](b);c[e](b)}},_decorateEvent:function(a){for(var b=a.target;b&&b!==this.domNode;b=b.parentNode)if(b.tagName.toLowerCase()=="th"){if(b=this.grid._columnsById[b.getAttribute("colid")])a.columnId=b.id,a.columnIndex=b.index;break}},_onHeaderCellMouseOver:function(a){k.toggle(this.getHeaderNode(a.columnId),"gridxHeaderCellOver",
a.type=="mouseover")},_focusHeaderId:null,_focusClass:"gridxHeaderCellFocus",_initFocus:function(){var a=this,b=a.grid;b.focus&&b.focus.registerArea({name:"header",priority:0,focusNode:a.domNode,scope:a,doFocus:a._doFocus,doBlur:a._blurNode,onBlur:a._blurNode,connects:[a.connect(a.domNode,"onkeydown","_onKeyDown"),a.connect(b,"onHeaderCellMouseDown",function(b){a._focusNode(a.getHeaderNode(b.columnId))})]})},_doFocus:function(a){var b=this._focusNode(this._focusHeaderId&&this.getHeaderNode(this._focusHeaderId)||
e("th.gridxCell",this.domNode)[0]);h.stopEvent(b&&a);return b},_focusNode:function(a){if(a){var b=this.grid;if(this._focusHeaderId=a.getAttribute("colid")){this._blurNode();if(b.hScroller){var c=g.position(a),d=g.position(this.domNode),e=c.x+c.w-d.x-d.w;e<0&&(e=c.x-d.x,e>0&&(e=0));e+=this._scrollLeft;this._onHScroll(e);b.hScroller.scroll(e)}k.add(a,this._focusClass);a.focus();return!0}}return!1},_blurNode:function(){var a=e("th."+this._focusClass,this.domNode)[0];a&&k.remove(a,this._focusClass);return!0},
_onKeyDown:function(a){var b=this.grid,c;c=b.isLeftToRight()?1:-1;var d=a.keyCode==n.LEFT_ARROW?-c:c;if(this._focusHeaderId&&(a.keyCode==n.LEFT_ARROW||a.keyCode==n.RIGHT_ARROW))if(h.stopEvent(a),c=b._columnsById[this._focusHeaderId],c=b._columns[c.index+d])this._focusNode(this.getHeaderNode(c.id)),this.onMoveToHeaderCell(c.id,a)}})})},"gridx/core/Row":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred"],function(l,j,k){return l([],{constructor:function(g,e){this.grid=g;
this.model=g.model;this.id=e},index:function(){return this.model.idToIndex(this.id)},cell:function(g,e){return this.grid.cell(this,g,e)},data:function(){return this.model.byId(this.id).data},rawData:function(){return this.model.byId(this.id).rawData},item:function(){return this.model.byId(this.id).item},setRawData:function(g){var e=this.grid.store,b=this.item(),l,h;if(e.setValue){h=new k;try{for(l in g)e.setValue(b,l,g[l]);e.save({onComplete:j.hitch(h,h.callback),onError:j.hitch(h,h.errback)})}catch(d){h.errback(d)}}return h||
k.when(e.put(j.mixin(j.clone(b),g)))}})})},"url:gridx/templates/Grid.html":'<div class="gridx" role="grid"\r\n\t><span data-dojo-attach-point="firstFocusNode" tabindex="0"></span\r\n\t><div class="gridxHeader" role="presentation" data-dojo-attach-point="headerNode"></div\r\n\t><div class="gridxMain" role="presentation" data-dojo-attach-point="mainNode"\r\n\t\t><div class="gridxBodyEmpty" role="alert" tabindex="-1" data-dojo-attach-point="emptyNode"></div\r\n\t\t><div class="gridxBody" role="presentation" data-dojo-attach-point="bodyNode"></div\r\n\t\t><div class="gridxVScroller" data-dojo-attach-point="vScrollerNode"\r\n\t\t\t><div style=\'width: 1px;\'></div\r\n\t\t></div\r\n\t></div\r\n\t><div class="gridxFooter" data-dojo-attach-point="footerNode"\r\n\t\t><div class="gridxHScroller"\r\n\t\t\t><div class="gridxHScrollerInner" data-dojo-attach-point="hScrollerNode"><div style="width:1px; height: 1px;"></div></div\r\n\t\t></div\r\n\t></div\r\n\t><span data-dojo-attach-point="lastFocusNode" tabindex="0"></span\r\n></div>\r\n',
"gridx/core/Core":function(){define(["require","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","dojo/DeferredList","./model/Model","./Row","./Column","./Cell","./_Module"],function(l,j,k,g,e,b,n,h,d,a,f){function c(a){a=a.moduleClass.prototype;return(a.forced||[]).concat(a.optional||[])}function i(a,b){if(b)for(var c in b){var d=a[c],e=b[c];d&&g.isObject(d)&&!w(d)?i(d,e):a[c]=e}}function m(a,b){var c=[],d=b&&b.length||0;q(a.modules,function(a,b){if(w(a)||y(a))a={moduleClass:a};
if(a){var e=a.moduleClass;if(y(e))try{e=a.moduleClass=l(e)}catch(f){console.error(f)}if(w(e)){c.push(a);return}}console.error(["The ",b+1-d,"-th declared module can NOT be found, please require it before using it"].join(""))});a.modules=c;return a}function o(a){var b,c={},d=[];q(a.modules,function(a){c[a.moduleClass.prototype.name]=a});for(b in c)d.push(c[b]);a.modules=d;return a}function x(a){var b=a.modules,d,e,f,g,h=function(a){for(var c=b.length-1;c>=0;--c)if(b[c].moduleClass.prototype.name==
a)return b[c];return null};for(d=b.length-1;e=b[d];--d){f=e.moduleClass.prototype.name;for(g=c(e);g.length;){e=g.shift();if(e==f)throw Error("Module '"+e+"' is in a dependancy circle!");(e=h(e))&&(g=g.concat(c(e)))}}return a}var z=g.delegate,w=g.isFunction,y=g.isString,t=g.hitch,q=k.forEach;return j([],{_reset:function(a){this._uninit();var b={},c;for(c in a)b[c]=a[c];a=b;this.store=a.store;a.modules=a.modules||[];a.modelExtensions=a.modelExtensions||[];this.setColumns(a.structure);a.columns=this._columnsById;
c=m(a,this.coreModules);var a=f._modules,b=c.modules,d,e,g,h,j,i,k;for(d=0;d<b.length;++d){h=b[d].moduleClass.prototype;j=(h.forced||[]).concat(h.required||[]);for(e=0;e<j.length;++e){i=j[e];for(g=b.length-1;g>=0;--g)if(b[g].moduleClass.prototype.name===i)break;g<0&&(a[i]?b.push({moduleClass:a[i]}):(k=1,console.error(["Forced/Required dependent module '",i,"' is NOT found for '",h.name,"' module."].join(""))))}}if(k)throw Error("Some forced/required dependent modules are NOT found.");k=x(o(c));c=
k.modules;for(a=c.length-1;a>=0;--a)(b=c[a].moduleClass.prototype.modelExtensions)&&[].push.apply(k.modelExtensions,b);a=k;this.model=new n(a);this._create(a)},_postCreate:function(){var a=this._deferStartup=new e;this._preload();this._load(a).then(t(this,"onModulesLoaded"))},onModulesLoaded:function(){},setStore:function(a){this.store=a;this._reset(this);this._postCreate();this._deferStartup.callback()},setColumns:function(a){this.structure=a;var a=this._columns=g.clone(a),b={},c,d,e;if(g.isArray(a)){d=
0;for(e=a.length;d<e;++d)c=a[d],c.index=d,c.id=c.id||String(d+1),b[c.id]=c}this._columnsById=b;if(this.model)this.model._cache.onSetColumns(this._columnsById)},row:function(a,b){typeof a=="number"&&!b&&(a=this.model.indexToId(a));if(this.model.idToIndex(a)>=0)return this._rowObj=this._rowObj||this._mixin(new h(this),"row"),z(this._rowObj,{id:a});return null},column:function(a,b){var p;var c,e,f={};typeof a=="number"&&!b&&(p=(c=this._columns[a])&&c.id,a=p);if(c=this._columnsById[a]){this._colObj=this._colObj||
this._mixin(new d(this),"column");for(e in c)this._colObj[e]===void 0&&(f[e]=c[e]);return z(this._colObj,f)}return null},cell:function(b,c,e){if(b=b instanceof h?b:this.row(b,e))if(c=c instanceof d?c:this.column(c,e))return this._cellObj=this._cellObj||this._mixin(new a(this),"cell"),z(this._cellObj,{row:b,column:c});return null},columnCount:function(){return this._columns.length},rowCount:function(a){return this.model.size(a)},columns:function(a,b){return this._arr(this._columns.length,"column",
a,b)},rows:function(a,b){return this._arr(this.model.size(),"row",a,b)},_uninit:function(){var a=this._modules,b;for(b in a){b=a[b].mod;if(b.getAPIPath){var c=b.getAPIPath();if(c){var d=void 0;for(d in c)delete this[d]}}b.destroy()}this.model&&this.model.destroy()},_arr:function(a,b,c,d){for(var e=c||0,c=d>=0?c+d:a,d=[];e<c&&e<a;++e)d.push(this[b](e));for(var f in k)w(k[f])&&(d[f]=g.partial(k[f],d));return d},_preload:function(){var a,b=this._modules;for(a in b)a=b[a],a.mod.preload&&a.mod.preload(a.args)},
_load:function(a){var c=[],d;for(d in this._modules)c.push(this._initMod(a,d));return new b(c,0,1)},_mixin:function(a,b){var c,d,e=this._modules;for(c in e)c=e[c].mod,d=c[b+"Mixin"],w(d)&&(d=d.apply(c)),g.mixin(a,d||{});return a},_create:function(a){var b=this,d=b._modules={};q(a.modules,function(a){var e;e=a.moduleClass.prototype.name;d[e]||(d[e]={args:a,mod:e=new a.moduleClass(b,a),deps:c(a)},e.getAPIPath&&i(b,e.getAPIPath()))})},_initMod:function(a,c){var d=this._modules,e=d[c],f=e.mod,g=f.loaded;
if(!e.done)e.done=1,(new b(k.map(k.filter(e.deps,function(a){return d[a]}),t(this,this._initMod,a)),0,1)).then(function(){f.load?f.load(e.args,a):g.fired<0&&g.callback()});return g}})})}}});define("gridx/gridx-virtual",[],1);