//>>built
require({cache:{"gridx/modules/extendedSelect/_Base":function(){define(["dojo/_base/declare","dojo/_base/query","dojo/_base/connect","dojo/_base/Deferred","dojo/_base/sniff","dojo/_base/window","dojo/dom","dojo/keys","../../core/_Module","../AutoScroll"],function(n,m,o,f,l,e,k,g,d){return n(d,{required:["autoScroll"],getAPIPath:function(){var b={select:{}};b.select[this._type]=this;return b},load:function(){var b=this,c=b.grid,a=e.doc;c.domNode.setAttribute("aria-multiselectable",!0);b._refSelectedIds=
[];b.subscribe("gridClearSelection_"+c.id,function(i){i!=b._type&&b.clear()});b.batchConnect([c.body,"onRender","_onRender"],[a,"onmouseup","_end"],[a,"onkeydown",function(i){i.keyCode==g.SHIFT&&k.setSelectable(c.domNode,!1)}],[a,"onkeyup",function(i){i.keyCode==g.SHIFT&&k.setSelectable(c.domNode,!0)}]);b._init();b.loaded.callback()},enabled:!0,holdingCtrl:!1,holdingShift:!1,selectById:function(){return this._subMark("_markById",arguments,!0)},deselectById:function(){return this._subMark("_markById",
arguments,!1)},selectByIndex:function(){return this._subMark("_markByIndex",arguments,!0)},deselectByIndex:function(){return this._subMark("_markByIndex",arguments,!1)},onSelectionChange:function(){},_subMark:function(b,c,a){var i=this;if(i.arg("enabled"))return a&&o.publish("gridClearSelection_"+i.grid.id,[i._type]),i._lastSelectedIds=i.getSelected(),i._refSelectedIds=[],f.when(i[b](c,a),function(){i._onSelectionChange()})},_start:function(b,c,a){if(!this._selecting&&!this._marking&&this.arg("enabled")){k.setSelectable(this.grid.domNode,
!1);this._fixFF(1);var i=this._isSelected(b);(a=a||this.arg("holdingShift"))&&this._lastStartItem?(this._isRange=1,this._toSelect=this._lastToSelect,this._startItem=this._lastStartItem,this._currentItem=this._lastEndItem):(this._startItem=b,this._currentItem=null,c||this.arg("holdingCtrl")?this._toSelect=!i:(this._toSelect=1,this.clear(1)));o.publish("gridClearSelection_"+this.grid.id,[this._type]);this._beginAutoScroll();this.grid.autoScroll.enabled=!0;this._lastSelectedIds=this.getSelected();this._selecting=
1;this._highlight(b)}},_highlight:function(b){var c=this;if(c._selecting){var a=c._type,i=c._startItem,r=c._currentItem,h=function(i,h,b){for(var i=i[a],h=h[a],r=i<h?1:-1;i!=h;i+=r){var d={};d[a]=i;c._highlightSingle(d,b)}};r===null?c._highlightSingle(b,1):c._inRange(b[a],i[a],r[a])?h(r,b,0):(c._inRange(i[a],b[a],r[a])&&(h(r,i,0),r=i),h(b,r,1));c._currentItem=b;c._focus(b)}},_end:function(){var b=this,c=b.grid;if(b._selecting){b._fixFF();b._endAutoScroll();b._selecting=0;b._marking=1;c.autoScroll.enabled=
!1;var a=b._addToSelected(b._startItem,b._currentItem,b._toSelect);b._lastToSelect=b._toSelect;b._lastStartItem=b._startItem;b._lastEndItem=b._currentItem;b._startItem=b._currentItem=b._isRange=null;f.when(a,function(){k.setSelectable(c.domNode,!0);b._marking=0;b._onSelectionChange()})}},_highlightSingle:function(b,c){c=c?this._toSelect:this._isSelected(b);this._doHighlight(b,c)},_onSelectionChange:function(){var b=this.getSelected();this.onSelectionChange(b,this._lastSelectedIds);this._lastSelectedIds=
b},_inRange:function(b,c,a,i){return(b>=c&&b<=a||b>=a&&b<=c)&&(i||b!=a)},_fixFF:function(b){l("ff")&&m(".gridxSortNode",this.grid.headerNode).forEach(function(c){c.style.overflow=b?"visible":""})}})})},"gridx/Grid":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-class","dojo/dom-geometry","dojo/_base/query","dijit/_WidgetBase","dijit/_FocusMixin","dijit/_TemplatedMixin","dojo/text!./templates/Grid.html","./core/Core","./core/_Module","./modules/Header","./modules/Body",
"./modules/VLayout","./modules/HLayout","./modules/VScroller","./modules/HScroller","./modules/ColumnWidth"],function(n,m,o,f,l,e,k,g,d,b,c,a,i,r,h,s,t,A,y){var v=m.forEach,u=function(){},n=n("gridx.Grid",[k,d,g,c],{templateString:b,coreModules:[i,r,h,s,t,A,y],coreExtensions:[],postCreate:function(){this.inherited(arguments);this._eventFlags={};this.modules=this.coreModules.concat(this.modules||[]);this.modelExtensions=this.coreExtensions.concat(this.modelExtensions||[]);f.toggle(this.domNode,"gridxRtl",
!this.isLeftToRight());this._initEvents(this._compNames,this._eventNames);this._reset(this);this._postCreate()},startup:function(){this._started||(this.inherited(arguments),this._deferStartup.callback())},destroy:function(){this._uninit();this.inherited(arguments)},resize:function(i){var a={};i&&(this.autoWidth&&delete i.w,this.autoHeight&&delete i.h,l.setMarginBox(this.domNode,i));this._onResizeBegin(i,a);this._onResizeEnd(i,a)},_onResizeBegin:function(){},_onResizeEnd:function(){},_compNames:["Cell",
"HeaderCell","Row","Header"],_eventNames:["Click","DblClick","MouseDown","MouseUp","MouseOver","MouseOut","MouseMove","ContextMenu","KeyDown","KeyPress","KeyUp"],_initEvents:function(i,a){var h=this;v(i,function(i){v(a,function(a){a="on"+i+a;h[a]=h[a]||u})})},_connectEvents:function(i,a,h){v(this._eventNames,function(b){this.connect(i,"on"+b.toLowerCase(),o.hitch(h,a,b))},this)},_isConnected:function(i){return this[i]!==u}});n.markupFactory=function(i,h,b){if(!i.structure&&h.nodeName.toLowerCase()==
"table"){var r=i.structure=[];e("thead > tr > th",h).forEach(function(i){var h={};v(a._markupAttrs,function(a){a[0]=="!"?(a=a.slice(1),h[a]=eval(i.getAttribute(a))):h[a]=i.getAttribute(a)});h.name=h.name||i.innerHTML;r.push(h)})}return new b(i,h)};return n})},"gridx/modules/extendedSelect/Cell":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/query","dojo/_base/lang","dojo/_base/Deferred","dojo/_base/sniff","dojo/dom-class","dojo/mouse","dojo/keys","../../core/_Module","./_RowCellBase"],
function(n,m,o,f,l,e,k,g,d,b,c){var a=f.isArrayLike;return n(c,{name:"selectCell",cellMixin:{select:function(){this.grid.select.cell.selectByIndex(this.row.index(),this.column.index());return this},deselect:function(){this.grid.select.cell.deselectByIndex(this.row.index(),this.column.index());return this},isSelected:function(){return this.grid.select.cell.isSelected(this.row.id,this.column.id)}},getSelected:function(){var i=this,a=[];m.forEach(i.grid._columns,function(h){var b=i.model.getMarkedIds(i._getMarkType(h.id));
a.push.apply(a,m.map(b,function(i){return[i,h.id]}))});return a},clear:function(i){var a=this;o(".gridxCellSelected",a.grid.bodyNode).forEach(function(i){k.remove(i,"gridxCellSelected")});m.forEach(a.grid._columns,function(i){a.model.clearMark(a._getMarkType(i.id))});i||a._onSelectionChange()},isSelected:function(i,a){return this.model.isMarked(i,this._getMarkType(a))},_type:"cell",_markTypePrefix:"select_",_getMarkType:function(i){i=this._markTypePrefix+i;this.model._spTypes[i]=1;return i},_markById:function(i,
b){a(i[0])||(i=[i]);var h=this,c=h.grid._columnsById,d=h.model;m.forEach(i,function(i){var a=i[0],i=i[1];a&&c[i]&&d.markById(a,b,h._getMarkType(i))});d.when()},_markByIndex:function(i,b){a(i[0])||(i=[i]);var i=m.filter(i,function(i){if(a(i)&&i.length>=2&&i[0]>=0&&i[0]<Infinity&&i[1]>=0&&i[1]<Infinity){if(i.length>=4&&i[2]>=0&&i[2]<Infinity&&i[3]>=0&&i[3]<Infinity)i._range=1;return!0}}),h=this,c=h.model,d=h.grid,g=d._columns,e=d.body,k,f,l,n;m.forEach(i,function(i){if(i._range){var a=Math.min(i[0],
i[2]),d=Math.max(i[0],i[2])-a+1,t=Math.max(i[1],i[3]);for(k=Math.min(i[1],i[3]);k<=t;++k)if(l=g[k]){a=e.getRowInfo({visualIndex:a}).rowIndex;n=h._getMarkType(l.id);for(f=0;f<d;++f)c.markByIndex(f,b,n)}}else if(l=g[i[1]])k=e.getRowInfo({visualIndex:i[0]}).rowIndex,c.markByIndex(k,b,h._getMarkType(l.id))});return c.when()},_init:function(){var i=this,a=i.grid;i.inherited(arguments);i.batchConnect([a,"onCellMouseDown",function(a){g.isLeft(a)&&i._start({rid:a.rowId,r:a.visualIndex,cid:a.columnId,c:a.columnIndex},
a.ctrlKey,a.shiftKey)}],[a,"onCellMouseOver",function(a){i._highlight({rid:a.rowId,r:a.visualIndex,cid:a.columnId,c:a.columnIndex})}],[a,e("ff")<4?"onCellKeyUp":"onCellKeyDown",function(a){a.keyCode===d.SPACE&&(i._start({rid:a.rowId,r:a.visualIndex,cid:a.columnId,c:a.columnIndex},a.ctrlKey,a.shiftKey),i._end())}])},_onRender:function(i,a){var h,b=this.model,c=this.grid,d=c._columns,g=i+a;for(h=0;h<d.length;++h){var e=d[h].id,f=this._getMarkType(e);if(b.getMarkedIds(f).length)for(j=i;j<g;++j){var l=
this._getRowId(j);(b.isMarked(l,f)||this._selecting&&this._toSelect&&this._inRange(h,this._startItem.c,this._currentItem.c,1)&&this._inRange(j,this._startItem.r,this._currentItem.r,1))&&k.add(o('[visualindex="'+j+'"] [colid="'+e+'"]',c.bodyNode)[0],"gridxCellSelected")}}},_onMark:function(i,a,h){if(!this._marking&&h.indexOf(this._markTypePrefix)===0&&(a=o('[rowid="'+a+'"]',this.grid.bodyNode)[0]))h=h.substr(this._markTypePrefix.length),(h=o('[colid="'+h+'"]',a)[0])&&k.toggle(h,"gridxCellSelected",
i)},_onMoveToCell:function(a,b,h){h.shiftKey&&(this._start({rid:this._getRowId(a),r:a,cid:this.grid._columns[b].id,c:b},h.ctrlKey,1),this._end())},_isSelected:function(a){if(!a.rid)a.rid=this._getRowId(a.r);if(this._isRange){var b=this._refSelectedIds[a.cid];return b&&m.indexOf(b,a.rid)>=0}else return this.model.isMarked(a.rid,this._getMarkType(a.cid))},_highlight:function(a){var b=this,h=b._currentItem;if(b._selecting){if(h===null)b._highlightSingle(a,1);else{var c=b._startItem,d=function(a,i,h){var c=
i.c>a.c?1:-1,s=i.r>a.r?1:-1,d,t,g={};if(!h){t=a.r;for(p=i.r+s;t!=p;t+=s)g[t]=b.model.indexToId(t)}d=a.c;for(q=i.c+c;d!=q;d+=c){var e=b.grid._columns[d].id;t=a.r;for(p=i.r+s;t!=p;t+=s)b._highlightSingle({rid:g[t],r:t,cid:e,c:d},h)}};(b._inRange(a.r,c.r,h.r)||b._inRange(a.c,c.c,h.c)||b._inRange(c.r,a.r,h.r)||b._inRange(c.c,a.c,h.c))&&d(c,h,0);d(c,a,1);b._focus(a)}b._currentItem=a}},_doHighlight:function(a,b){var h,c=this.grid.bodyNode.childNodes;for(h=c.length-1;h>=0;--h)if(c[h].getAttribute("visualindex")==
a.r){c=c[h].getElementsByTagName("td");for(h=c.length-1;h>=0;--h)if(c[h].getAttribute("colid")==a.cid){k.toggle(c[h],"gridxCellSelected",b);c[h].setAttribute("aria-selected",!!b);break}break}},_focus:function(a){this.grid.focus&&this.grid.body._focusCell(null,a.r,a.c)},_getSelectedIds:function(){var a=this,b={};m.forEach(a.grid._columns,function(h){var c=a.model.getMarkedIds(a._getMarkType(h.id));c.length&&(b[h.id]=c)});return b},_beginAutoScroll:function(){},_endAutoScroll:function(){},_addToSelected:function(a,
b,h){var c=this,d=c.model,g=new l,e=c._lastEndItem,k,f,m,n=[],o=function(){d.when().then(function(){g.callback()})};if(!c._isRange)c._refSelectedIds=c._getSelectedIds();c._isRange&&(c._inRange(b.r,a.r,e.r)&&(k=Math.min(b.r,e.r),f=Math.max(b.r,e.r),n.push({start:k+1,count:f-k,columnStart:a.c,columnEnd:e.c})),c._inRange(b.c,a.c,e.c)&&(m=b.c<e.c?1:-1,k=Math.min(a.r,b.r),f=Math.max(a.r,b.r),n.push({start:k,count:f-k+1,columnStart:b.c+m,columnEnd:e.c})));m=a.c<b.c?1:-1;for(e=a.c;e!=b.c+m;e+=m){var z=c._getMarkType(c.grid._columns[e].id);
k=Math.min(a.r,b.r);for(f=Math.max(a.r,b.r);k<=f;++k)d.markByIndex(k,h,z)}n.length?d.when(n,function(){var a,i,b,h;for(a=0;a<n.length;++a){h=n[a];var r=h.columnStart<h.columnEnd?1:-1;for(i=h.columnStart;i!=h.columnEnd+r;i+=r){b=c.grid._columns[i].id;var g=c._getMarkType(b),e=c._refSelectedIds[b];for(b=h.start;b<h.start+h.count;++b){var k=d.indexToId(b);d.markById(k,e&&e[k],g)}}}}).then(o):o();return g}})})},"gridx/modules/dnd/Avatar":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/dom-construct",
"dojo/_base/window","dojo/dnd/Avatar"],function(n,m,o,f,l){return n(l,{construct:function(){this.isA11y=m.contains(f.body(),"dijit_a11y");this.node=o.toDom(["<table border='0' cellspacing='0' class='gridxDndAvatar' style='position: absolute; z-index: 1999; margin: 0'><tbody><tr style='opacity: 0.9;'><td class='gridxDnDIcon'>",this.isA11y?"<span id='a11yIcon'>"+(this.manager.copy?"+":"<")+"</span>":"","</td><td class='gridxDnDItemIcon ",this._getIconClass(),"'></td><td><span class='gridxDnDItemCount'>",
this._generateText(),"</span></td></tr></tbody></table>"].join(""))},_getIconClass:function(){var e=this.manager._dndInfo;return["gridxDnDIcon",e.cssName,e.count===1?"Single":"Multi"].join("")},_generateText:function(){return"("+this.manager._dndInfo.count+")"}})})},"gridx/modules/Dod":function(){define(["dojo/_base/kernel","../core/_Module","dojo/_base/declare","dojo/_base/html","dojo/fx","dojo/query"],function(n,m,o,f,l){return o(m,{name:"dod",required:["body"],useAnimation:!0,duration:750,defaultShow:!1,
showExpando:!0,autoClose:!1,load:function(){n.experimental("gridx/modules/Dod");this._rowMap={};this.connect(this.grid.body,"onAfterRow","_onAfterRow");this.connect(this.grid.bodyNode,"onclick","_onBodyClick");this.grid.columnResizer&&this.connect(this.grid.columnResizer,"onResize","_onColumnResize");this.loaded.callback()},getAPIPath:function(){return{dod:this}},rowMixin:{showDetail:function(){this.grid.dod.show(this)},hideDetail:function(){this.grid.dod.hide(this)},toggleDetail:function(){this.grid.dod.toggle(this)},
refreshDetail:function(){this.grid.dod.refreshDetail(this)},isDetailShown:function(){return this.grid.dod.isShown(this)}},show:function(e){var k=this._row(e);if(!k.dodShown&&!k.inAnim){k.dodShown=!0;var g=e.node(),d=g.scrollWidth;if(!k.dodLoadingNode)k.dodLoadingNode=n.create("div",{className:"gridxDodLoadNode",innerHTML:"Loading..."});if(!k.dodNode)k.dodNode=n.create("div",{className:"gridxDodNode"});f.place(k.dodLoadingNode,g,"last");f.place(k.dodNode,g,"last");f.style(k.dodLoadingNode,"width",
d+"px");f.style(k.dodNode,"width",d+"px");f.addClass(g,"gridxDodShown");f.style(k.dodNode,"display","none");k.dodLoaded?this._detailLoadComplete(e):(f.style(k.dodLoadingNode,"display","block"),g=new n.Deferred,this.detailProvider(this.grid,e.id,k.dodNode,g),g.then(n.hitch(this,"_detailLoadComplete",e),n.hitch(this,"_detailLoadError",e)))}},hide:function(e){var k=this._row(e),g=this.grid;if(k.dodShown&&!k.inAnim)f.removeClass(e.node(),"gridxDodShown"),f.style(k.dodLoadingNode,"display","none"),k.inAnim=
!0,l.wipeOut({node:k.dodNode,duration:this.arg("duration"),onEnd:function(){k.dodShown=!1;k.inAnim=!1;g.body.onRender()}}).play(),k.defaultShow=!1},toggle:function(e){this.isShown(e)?this.hide(e):this.show(e)},refresh:function(e){this._row(e).dodLoaded=!1;this.show(e)},isShown:function(e){return!!this._row(e).dodShown},onShow:function(){},onHide:function(){},_rowMap:null,_lastOpen:null,_row:function(e){e=e.id||e;return this._rowMap[e]||(this._rowMap[e]={})},_onBodyClick:function(e){if(f.hasClass(e.target,
"gridxDodExpando")){for(e=e.target;e&&!f.hasClass(e,"gridxRow");)e=e.parentNode;e=f.attr(e,"rowindex");this.toggle(this.grid.row(parseInt(e)))}},_onAfterRow:function(e){var k=this.grid.row(e.rowIndex),g=this._row(k);if(this.isShown(k)||this.arg("defaultShow")&&g.dodShown===void 0)g.dodShown=!1,g.defaultShow=!0,this.show(k);this.arg("showExpando")&&(e=n.query('[rowid="'+e.rowId+'"]',this.grid.bodyNode)[0],e=n.query("table",e)[0].rows[0].cells[0],n.create("span",{className:"gridxDodExpando"},e,"first"))},
_onColumnResize:function(){n.query(".gridxDodNode",this.grid.bodyNode).forEach(function(e){f.style(e,"width",e.parentNode.firstChild.offsetWidth+"px")})},_detailLoadComplete:function(e){var k=this._row(e),g=this.grid;if(this.isShown(e))k.dodLoaded=!0,k.defaultShow?(f.style(k.dodNode,"display","block"),g.body.onRender()):(n.style(k.dodLoadingNode,"display")=="block"&&(f.marginBox(k.dodNode,{h:f.marginBox(k.dodLoadingNode).h}),f.style(k.dodNode,"display","block")),k.inAnim=!0,l.wipeIn({node:k.dodNode,
duration:this.arg("duration"),onEnd:function(){k.inAnim=!1;g.body.onRender()}}).play()),f.style(k.dodLoadingNode,"display","none")},_detailLoadError:function(e){var k=this._row(e);k.dodLoaded=!1;if(this.isShown(e))k.dodLoadingNode.innerHTML="Error: failed to load detail."},_showLoading:function(e){this._row(e).dodLoadingNode.innerHTML="Loading..."},_hideLoading:function(){},endFunc:function(){}})})},"url:gridx/templates/PaginationBarDD.html":'<div class=\'gridxPager\'\r\n\t><table class=\'gridxPagerInner\' cellpadding="0" cellspacing="0" role="presentation"\r\n\t\t><tr\r\n\t\t\t><td class="gridxPagerDescriptionTD"\r\n\t\t\t\t><div class="gridxPagerDescription"\r\n\t\t\t\t\tdata-dojo-attach-point="_descContainer"\r\n\t\t\t\t></div\r\n\t\t\t></td\r\n\t\t\t><td class="gridxPagerStepperTD"\r\n\t\t\t\t><div class="gridxPagerStepper"\r\n\t\t\t\t\tdata-dojo-attach-point="_pageStepperContainer"\r\n\t\t\t\t\t><label class=\'gridxPagerLabel\'>${pageLabel}</label\r\n\t\t\t\t></div\r\n\t\t\t></td\r\n\t\t\t><td class="gridxPagerSizeSwitchTD"\r\n\t\t\t\t><div class="gridxPagerSizeSwitch"\r\n\t\t\t\t\tdata-dojo-attach-point=\'_sizeSwitchContainer\'\r\n\t\t\t\t\t><label class=\'gridxPagerLabel\'>${pageSizeLabel}</label\r\n\t\t\t\t></div\r\n\t\t\t></td\r\n\t\t></tr\r\n\t></table\r\n></div>\r\n',
"gridx/modules/exporter/CSV":function(){define(["dojo/_base/declare","dojo/_base/lang","../../core/_Module","./Exporter"],function(n,m,o){return n(o,{name:"exportCsv",forced:["exporter"],getAPIPath:function(){return{exporter:{toCSV:m.hitch(this,this.toCSV)}}},toCSV:function(f){return this.grid.exporter._export(this,f||{})},initialize:function(f){this._s=f.separator||",";this._n=f.newLine||"\r\n";this._lines=[]},beforeHeader:function(){this._cells=[]},handleHeaderCell:function(f){this._cells.push(f.column.name())},
afterHeader:function(){this._lines.push(this._cells.join(this._s))},beforeRow:function(){this._cells=[]},handleCell:function(f){f=String(f.data).replace(/"/g,'""');if(f.indexOf(this._s)>=0||f.search(/[" \t\r\n]/)>=0)f='"'+f+'"';this._cells.push(f)},afterRow:function(){this._lines.push(this._cells.join(this._s))},getResult:function(){return this._lines.join(this._n)}})})},"url:gridx/templates/FilterDialog.html":'<label>Match </label>\r\n<select data-dojo-type="dijit.form.Select">\r\n\t<option value="all">All rules</option>\r\n\t<option value="any">Any rules</option>\r\n</select>\r\n\r\n<div class="gridxFilterAccordionWrapper">\r\n\t<div data-dojo-type="dijit.layout.AccordionContainer"></div>\r\n</div>\r\n\r\n<div class="gridxFilterDialogButtons">\r\n\t<input type="button" class="gridxFilterDialogBtnAdd" data-dojo-type="dijit.form.Button" showLabel="false" iconClass="gridxFilterBtnAddRule"/>\r\n\t<input type="button" data-dojo-type="dijit.form.Button" label="Filter"/>\r\n\t<input type="button" data-dojo-type="dijit.form.Button" label="Clear"/>\r\n\t<input type="button" data-dojo-type="dijit.form.Button" label="Cancel"/>\r\n</div>\r\n',
"gridx/util":function(){define({stopEvent:function(n){n&&n.stopPropagation&&n.preventDefault&&(n.stopPropagation(),n.preventDefault())},biSearch:function(n,m){var o=0,f=n.length,l;for(l=Math.floor((o+f)/2);o+1<f;l=Math.floor((o+f)/2))m(n[l])>0?f=l:o=l;return n.length&&m(n[o])>=0?o:f}})},"gridx/modules/filter/DistinctComboBoxMenu":function(){define(["dojo/_base/declare","dijit/form/_ComboBoxMenu"],function(n,m){return n(m,{createOptions:function(m,f,l){var e={};arguments[0]=m.filter(function(k){k=
l(k).label;return e[k]?!1:e[k]=!0});this.inherited(arguments)}})})},"gridx/core/Row":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred"],function(n,m,o){return n([],{constructor:function(f,l){this.grid=f;this.model=f.model;this.id=l},index:function(){return this.model.idToIndex(this.id)},cell:function(f,l){return this.grid.cell(this,f,l)},data:function(){return this.model.byId(this.id).data},rawData:function(){return this.model.byId(this.id).rawData},item:function(){return this.model.byId(this.id).item},
setRawData:function(f){var l=this.grid.store,e=this.item(),k,g;if(l.setValue){g=new o;try{for(k in f)l.setValue(e,k,f[k]);l.save({onComplete:m.hitch(g,g.callback),onError:m.hitch(g,g.errback)})}catch(d){g.errback(d)}}return g||o.when(l.put(m.mixin(m.clone(e),f)))}})})},"gridx/modules/pagination/_PagerBase":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/query","dojo/string","dijit/_WidgetBase","dijit/_TemplatedMixin","dojo/i18n!../../nls/PaginationBar"],function(n,m,o,f,l,e,
k){return n([l,e],{pagination:null,module:null,position:"bottom",focusPriority:0,constructor:function(){this._nls=k;m.mixin(this,k)},postCreate:function(){var g=this.pagination,d=this.module.model;this.connect(g,"onSwitchPage","_onSwitchPage");this.connect(g,"onChangePageSize","_onChangePageSize");this.connect(d,"onSizeChange","_onSizeChange");this.connect(d,"onMarked","_createDescription");this.connect(d,"onMarkRemoved","_createDescription");this._initFocus();this.refresh()},_toggleNode:function(g,
d){o("."+g,this.domNode)[0].style.display=d?"":"none";return d},_createDescription:function(){var g=this.module;if(this._toggleNode("gridxPagerDescription",g._exist(this.position,"description"))){var d=g.grid,b=d.select&&d.select.row,c=b?b.getSelected().length:0,g=b?g.arg("descriptionSelectionTemplate",k.summaryWithSelection):g.arg("descriptionTemplate",k.summary);this._descContainer.innerHTML=f.substitute(g,[d.model.size(),c])}}})})},"gridx/modules/Tree":function(){define(["dojo/_base/kernel","dojo/_base/declare",
"dojo/dom-class","dojo/dom-geometry","dojo/_base/lang","dojo/_base/Deferred","dojo/DeferredList","dojo/query","dojo/keys","../util","../core/_Module"],function(n,m,o,f,l,e,k,g,d,b,c){function a(a){return(a=a.firstChild)&&a.className&&o.contains(a,"gridxTreeExpandoCell")&&!o.contains(a,"gridxTreeExpandoLoading")}return m(c,{name:"tree",constructor:function(){var a=[];this._openInfo={"":{id:"",parentId:null,index:-1,count:0,openned:a}};this._parentOpenInfo={"":a}},getAPIPath:function(){return{tree:this}},
preload:function(){var a=this.grid;a.domNode.setAttribute("role","treegrid");this.batchConnect([a.body,"collectCellWrapper","_createCellWrapper"],[a,"onCellClick","_onCellClick"]);this._initFocus();if(a.persist){var b;if(a=a.persist.registerAndLoad("tree",l.hitch(this,this._persist))){var h=this._openInfo=a.openInfo;parentOpenInfo=this._parentOpenInfo=a.parentOpenInfo;for(b in h)h[b].openned=parentOpenInfo[b];this._persisted=1}}},load:function(){n.experimental("gridx/modules/Tree");var a=this;a._persisted?
a.loaded.callback():a.model.when({},function(){a._openInfo[""].count=a.model.size()}).then(function(){a.loaded.callback()})},nested:!1,expandoPadding:18,onExpand:function(){},onCollapse:function(){},isExpanded:function(a){return!!this._openInfo[a]},expand:function(a,b){var h=new e,c=this;a&&!c.isExpanded(a)?c.model.when({parentId:a,start:0},function(){c._logicExpand(a)}).then(function(){e.when(b||c._updateBody(a),function(){h.callback();c.onExpand(a)})}):h.callback();return h},collapse:function(a,
b){var h=new e,c=this;a&&c.isExpanded(a)?(c._logicCollapse(a),e.when(b||c._updateBody(a),function(){h.callback();c.onCollapse(a)})):h.callback();return h},expandRecursive:function(a,b){var h=this,c=h.model,d=new e;h.expand(a,1).then(function(){var g,f=[],l=c.size(a);c.when({start:0,parentId:a},function(){for(g=0;g<l;++g){var b=c.indexToId(g,a);f.push(h.expandRecursive(b,1))}}).then(function(){(new k(f)).then(function(){e.when(b||h._updateBody(a),function(){d.callback()})})})});return d},collapseRecursive:function(a,
b){var h=new e,c=l.hitch(h,h.callback),d=l.hitch(h,h.errback),g=this,f=g._openInfo[a||""],v,m=[];if(f){for(v=f.openned.length-1;v>=0;--v)m.push(g.collapseRecursive(f.openned[v],1));(new k(m)).then(function(){a?g.collapse(a,b).then(c,d):b||g._updateBody().then(c,d)})}else c();return h},getRowInfoByVisualIndex:function(a,b){var h=this._openInfo[""].openned,c,d;for(d=0;d<h.length;++d)if(c=this._openInfo[h[d]],c.index<b)a+=c.count+1;else break;for(h={parentId:"",preCount:0};!h.found;)h=this._getChild(a,
h);return h},getVisualIndexByRowInfo:function(a,b,h){a=this._getAbsoluteVisualIndex(a,b);return a>=0?a-this._getAbsoluteVisualIndex("",h):null},getVisualSize:function(a,b,h){if(h=this._openInfo[h||""]){var c,d=h.openned.length,g,e=b;for(c=0;c<d;++c)g=this._openInfo[h.openned[c]],g.index>=a&&g.index<a+b&&(e+=g.count);return e}return 0},_createCellWrapper:function(a,b,h){h=this.grid._columnsById[h];if(h.expandLevel){var c=this.model.treePath(b).length;if(!this.arg("nested")||h.expandLevel==c){var d=
this.model.hasChildren(b),g=this.isExpanded(b),e=0,k=this.arg("expandoPadding"),f=this.grid.isLeftToRight();this.arg("nested")||(e=(c-1)*k);a.push({priority:0,wrap:function(a){return["<div class='gridxTreeExpandoCell ",g?"gridxTreeExpandoCellOpen":"","' style='padding-",f?"left":"right",": ",e+k,"px;'><span class='gridxTreeExpandoIcon ",d?"":"gridxTreeExpandoIconNoChildren","' style='margin-",f?"left":"right",": ",e,"px;'><span class='gridxTreeExpandoInner'>",g?"-":"+","</span></span><span class='gridxTreeExpandoContent'>",
a,"</span></span>"].join("")}})}}},_onCellClick:function(i){if(a(i.cellNode)){var b=f.position(g(".gridxTreeExpandoIcon",i.cellNode)[0]);i.clientX>=b.x&&i.clientX<=b.x+b.w&&i.clientY>=b.y&&i.clientY<=b.y+b.h&&(this.isExpanded(i.rowId)?this.collapse(i.rowId):this.expand(i.rowId))}},_updateBody:function(a){var b=this.grid.body;if(b){b.updateRootRange(b.rootStart,b.rootCount);var h=b.getRowNode({rowId:a}),c,d,e=this.isExpanded(a);if(h&&(c=g(".gridxTreeExpandoCell",h)[0]))d=g(".gridxTreeExpandoIcon",
c)[0],d.firstChild.innerHTML="o",o.add(c,"gridxTreeExpandoLoading");a=a?this.getVisualIndexByRowInfo(this.model.treePath(a).pop(),this.model.idToIndex(a),b.rootStart):-1;return b.refresh(a+1).then(function(){if(c)d.firstChild.innerHTML=e?"-":"+",o.remove(c,"gridxTreeExpandoLoading"),o.toggle(c,"gridxTreeExpandoCellOpen",e)})}return null},_getAbsoluteVisualIndex:function(a,b){var h=this._openInfo[a||""];if(h){for(var c=0,d=this._openInfo,g=function(a){c+=b;var i,h;for(h=0;h<a.openned.length;++h)if(i=
d[a.openned[h]],i.index<b)c+=i.count;else break;b=a.index;a.id&&c++;return d[a.parentId]};h;)h=g(h);return c}return-1},_logicExpand:function(a){var c=this.model;if(c.hasChildren(a)){var h=c.treePath(a).pop(),d=this._openInfo,t=this._parentOpenInfo,g=t[h]=t[h]||[];t[a]=t[a]||[];if(!d[a]){var e=c.idToIndex(a),c=c.size(a),k=b.biSearch(g,function(a){return d[a].index-e});g[k]!==a&&g.splice(k,0,a);for(k=t[a].length-1;k>=0;--k)c+=d[t[a][k]].count;d[a]={id:a,parentId:h,index:e,count:c,openned:t[a]};for(a=
d[h];a;)a.count+=c,a=d[a.parentId]}}},_logicCollapse:function(a){var c=this._openInfo[a];if(c){var h=this._openInfo,d=this.model.treePath(a).pop(),t=this._parentOpenInfo[d],g=b.biSearch(t,function(a){return h[a].index-c.index}),e=c.count;t.splice(g,1);for(c=h[d];c;)c.count-=e,c=h[c.parentId];delete h[a]}},_getChild:function(a,b){var h=this._openInfo[b.parentId],c,d,g=b.preCount+h.index+1,e={found:!0,visualIndex:a,count:1};c=0;for(d=h.openned.length;c<d;++c){var k=h.openned[c],f=this._openInfo[k],
m=f.index+g;if(m===a)return l.mixin({parentId:h.id,start:f.index},e);else if(m>a)break;else if(m+f.count>=a)return{parentId:k,preCount:g};g+=f.count}return l.mixin({parentId:h.id,start:a-g},e)},_initFocus:function(){this.connect(this.grid,"onCellKeyPress","_onKey")},_onKey:function(b){if(b.keyCode==d.ESCAPE){var c=this,h=c.model,s=h.treePath(b.rowId),t=s.pop(),b=s.length,g=c.grid;if(t){var e,k,f;for(e=g._columns.length-1;e>=0;--e)if(k=g._columns[e],k.expandLevel&&(!c.arg("nested")||k.expandLevel==
b))break;h.when({id:t},function(){f=g.body.getVisualIndex({parentId:s.pop(),rowIndex:h.idToIndex(t)}).visualIndex}).then(function(){g.vScroller.scrollToRow(f).then(function(){g.body._focusCell(null,f,k.index)})})}}else b.ctrlKey&&a(b.cellNode)&&(e=g.isLeftToRight(),b.keyCode==(e?d.LEFT_ARROW:d.RIGHT_ARROW)&&c._openInfo[b.rowId]?c.collapse(b.rowId):b.keyCode==(e?d.RIGHT_ARROW:d.LEFT_ARROW)&&!c._openInfo[b.rowId]&&c.expand(b.rowId))},_persist:function(){return{openInfo:this._openInfo,parentOpenInfo:this._parentOpenInfo}}})})},
"gridx/modules/SummaryBar":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/string","../core/_Module","dojo/i18n!../nls/SummaryBar"],function(n,m,o,f,l){return n(f,{name:"summaryBar",getAPIPath:function(){return{summaryBar:this}},preload:function(){var e=this.model;this.domNode=m.create("div",{"class":"gridxSummaryBar"});this.grid.vLayout.register(this,"domNode","footerNode",5);this.connect(e,"onSizeChange","_update");this.connect(e,"onMarked","_update");this.connect(e,"onMarkRemoved",
"_update");this._update()},_update:function(){var e=this.grid,e=e.select&&e.select.row,k=this.model.size(),g=e?e.getSelected().length:0;this.domNode.innerHTML=o.substitute(e?l.summaryWithSelection:l.summary,[k,g])}})})},"gridx/modules/move/Row":function(){define(["dojo/_base/declare","../../core/_Module","../../core/model/extensions/Move"],function(n,m,o){return n(m,{name:"moveRow",modelExtensions:[o],constructor:function(){this.connect(this.model,"onMoved","_onMoved")},getAPIPath:function(){return{move:{row:this}}},
rowMixin:{moveTo:function(f,l){this.grid.move.row.move([this.index()],f,l);return this}},move:function(f,l,e){var k=this.model;k.moveIndexes(f,l);e||k.when()},moveRange:function(f,l,e,k){var g=this.model;g.move(f,l,e);k||g.when()},onMoved:function(){},_onMoved:function(){this.grid.body.refresh();this.onMoved()}})})},"gridx/modules/pagination/LinkPager":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/sniff","dojo/_base/query","dojo/dom-class","dojo/string",
"dojo/keys","../../util","./_PagerBase","dojo/text!../../templates/PaginationBar.html"],function(n,m,o,f,l,e,k,g,d,b,c){function a(a,b,i){for(a=a.target;!r(a,b);){if(r(a,i))return null;a=a.parentNode}return a}function i(a,b,i,h,c){var d=h?-1:1,b=b?m.indexOf(a,b)+(i?d:0):h?a.length-1:0,i=function(b,i){for(;a[b]&&!c(a[b]);)b+=i;return a[b]};(b=i(b,d)||i(b-d,-d))&&b.focus();return b}var r=e.contains,h=e.toggle,s=k.substitute;return n(b,{templateString:c,_tabIndex:-1,postMixInProperties:function(){if(f("ie")){var a=
this.module.grid.domNode.getAttribute("tabindex");this._tabIndex=a>0?a:0}},refresh:function(){this._createDescription();this._createPageStepper();this._createPageSizeSwitch();this._createGotoButton()},_onSwitchPage:function(){this._createPageStepper();this.module.grid.vLayout.reLayout()},_onSizeChange:function(){this._createDescription();this._onSwitchPage()},_focusArea:function(){var a=this.module.grid.focus;return a&&a.currentArea()},_onChangePageSize:function(a,b){var i=l('[pagesize="'+a+'"]',
this._sizeSwitchContainer)[0];i&&e.add(i,"gridxPagerSizeSwitchBtnActive");(i=l('[pagesize="'+b+'"]',this._sizeSwitchContainer)[0])&&e.remove(i,"gridxPagerSizeSwitchBtnActive");this._focusArea()==this.position+"PageSizeSwitch"&&this._findNextPageSizeSwitch();this._createPageStepper();this.module.grid.vLayout.reLayout()},_createPageStepper:function(){var a=this.module;if(this._toggleNode("gridxPagerStepper",a._exist(this.position,"stepper"))){var b=this.pagination,i=b.pageCount(),c=b.currentPage(),
d=a.arg("visibleSteppers"),b=[],r=this._tabIndex,g=!1,e=!1,k=[a.arg("pageIndexTitleTemplate",this.pageIndexTitle),a.arg("pageIndexWaiTemplate",this.pageIndexWai),a.arg("pageIndexTemplate",this.pageIndex)],a=function(a){return['<span class="gridxPagerStepperBtn gridxPagerPage ',c==a?"gridxPagerStepperBtnActive":"",'" pageindex="',a,'" title="',s(k[0],[a+1]),'" aria-label="',s(k[1],[a+1]),'" tabindex="',r,'">',s(k[2],[a+1]),"</span>"].join("")};if(i){var f=c-Math.floor((d-1)/2),l=f+d-1;f<1?(f=1,l=d-
1):i>d&&f>=i-d&&(f=i-d);l>=i-1&&(l=i-2);b.push(a(0));if(i>2){f>1&&b.push('<span class="gridxPagerStepperEllipsis">&hellip;</span>');for(d=f;d<=l;++d)b.push(a(d));l<i-2&&b.push('<span class="gridxPagerStepperEllipsis">&hellip;</span>')}i>1&&b.push(a(i-1))}this._pageBtnContainer.innerHTML=b.join("");if(!c||c===i-1)e=!c||i<=1,g=c||i<=1;h(this._nextPageBtn,"gridxPagerStepperBtnDisable gridxPagerNextPageDisable",g);h(this._prevPageBtn,"gridxPagerStepperBtnDisable gridxPagerPrevPageDisable",e);this._focusArea()==
this.position+"PageStepper"&&this._findNextPageStepperBtn()}},_gotoPrevPage:function(){this._focusPageIndex="Prev";var a=this.pagination;a.gotoPage(a.currentPage()-1)},_gotoNextPage:function(){this._focusPageIndex="Next";var a=this.pagination;a.gotoPage(a.currentPage()+1)},_gotoPage:function(b){var t;if(b=a(b,"gridxPagerStepperBtn","gridxPagerPages"))t=this._focusPageIndex=b.getAttribute("pageindex"),b=t,this.pagination.gotoPage(parseInt(b,10))},_onHoverPageBtn:function(b){var i=a(b,"gridxPagerStepperBtn",
"gridxPagerPages");i&&h(i,"gridxPagerStepperBtnHover",b.type=="mouseover")},_onHoverSizeBtn:function(b){var i=a(b,"gridxPagerSizeSwitchBtn","gridxPagerSizeSwitch");i&&h(i,"gridxPagerSizeSwitchBtnHover",b.type=="mouseover")},_createPageSizeSwitch:function(){var a=this.module;if(this._toggleNode("gridxPagerSizeSwitch",a._exist(this.position,"sizeSwitch"))){var b=[],i=this._tabIndex,h=a.arg("sizeSeparator"),c=this.pagination.pageSize(),d=[a.arg("pageSizeTitleTemplate",this.pageSizeTitle),a.arg("pageSizeWaiTemplate",
this.pageSizeWai),a.arg("pageSizeTemplate",this.pageSize),a.arg("pageSizeAllTitleText",this.pageSizeAllTitle),a.arg("pageSizeAllWaiText",this.pageSizeAllWai),a.arg("pageSizeAllText",this.pageSizeAll)];m.forEach(a.arg("sizes"),function(a){var r=!1;a>0||(a=0,r=!0);b.push('<span class="gridxPagerSizeSwitchBtn ',c===a?"gridxPagerSizeSwitchBtnActive":"",'" pagesize="',a,'" title="',r?d[3]:s(d[0],[a]),'" aria-label="',r?d[4]:s(d[1],[a]),'" tabindex="',i,'">',r?d[5]:s(d[2],[a]),"</span>",'<span class="gridxPagerSizeSwitchSeparator">'+
h+"</span>")});b.pop();this._sizeSwitchContainer.innerHTML=b.join("")}},_switchPageSize:function(b){var t;if(b=a(b,"gridxPagerSizeSwitchBtn","gridxPagerSizeSwitch"))t=this._focusPageSize=b.getAttribute("pagesize"),b=t,this.pagination.setPageSize(parseInt(b,10))},_createGotoButton:function(){this._toggleNode("gridxPagerGoto",this.module._exist(this.position,"gotoButton"))},_showGotoDialog:function(){var a=this.module;if(!this._gotoDialog){var b=a.arg("dialogClass"),i=a.arg("gotoPagePane"),a=o.mixin({title:this.gotoDialogTitle,
content:new i({pager:this})},a.arg("dialogProps")||{});this._gotoDialog=new b(a)}b=this.pagination.pageCount();a=this._gotoDialog.content;a.pageCountMsgNode.innerHTML=s(this.gotoDialogPageCount,[b]);a.pageInputBox.constraints={fractional:!1,min:1,max:b};this._gotoDialog.show()},_initFocus:function(){var a=this,b=a.module.grid,i=b.focus;if(i){var h=b.pagination,c=a.position,s=a.focusPriority,e=b.isLeftToRight()?g.LEFT_ARROW:g.RIGHT_ARROW;i.registerArea({name:c+"PageStepper",priority:s,focusNode:a._pageStepperContainer,
doFocus:o.hitch(a,a._findNextPageStepperBtn,!1,!1)});a.connect(a._pageStepperContainer,"onkeypress",function(b){if(b.keyCode==g.LEFT_ARROW||b.keyCode==g.RIGHT_ARROW)a._findNextPageStepperBtn(!0,b.keyCode==e);else if(b.keyCode==g.ENTER&&r(b.target,"gridxPagerStepperBtn")&&!r(b.target,"gridxPagerStepperBtnActive")&&!r(b.target,"gridxPagerStepperBtnDisable"))if(isNaN(parseInt(a._focusPageIndex,10)))a["_goto"+a._focusPageIndex+"Page"]();else h.gotoPage(parseInt(a._focusPageIndex,10))});i.registerArea({name:c+
"PageSizeSwitch",priority:s+0.001,focusNode:a._sizeSwitchContainer,doFocus:o.hitch(a,a._findNextPageSizeSwitch,!1,!1)});a.connect(a._sizeSwitchContainer,"onkeypress",function(b){b.keyCode==g.LEFT_ARROW||b.keyCode==g.RIGHT_ARROW?a._findNextPageSizeSwitch(!0,b.keyCode==e):b.keyCode==g.ENTER&&r(b.target,"gridxPagerSizeSwitchBtn")&&!r(b.target,"gridxPagerSizeSwitchBtnActive")&&h.setPageSize(parseInt(a._focusPageSize,10))});i.registerArea({name:c+"GotoPage",priority:s+0.002,focusNode:a._gotoBtn,doFocus:function(b){d.stopEvent(b);
a._gotoBtn.focus();return!0}});a.connect(a._gotoBtn,"onkeypress",function(b){b.keyCode==g.ENTER&&a._showGotoDialog()})}},_findNextPageSizeSwitch:function(a,b,h){d.stopEvent(h);var h=this._sizeSwitchContainer,c=l('[pagesize="'+this._focusPageSize+'"]',h)[0];if(c=i(l(".gridxPagerSizeSwitchBtn",h),c,a,b,function(a){return!r(a,"gridxPagerSizeSwitchBtnActive")}))this._focusPageSize=c.getAttribute("pagesize");return c},_findNextPageStepperBtn:function(a,b,h){d.stopEvent(h);var h=this._pageStepperContainer,
c=l('[pageindex="'+this._focusPageIndex+'"]',h)[0];if(c=i(l(".gridxPagerStepperBtn",h),c,a,b,function(a){return!r(a,"gridxPagerStepperBtnActive")&&!r(a,"gridxPagerStepperBtnDisable")}))this._focusPageIndex=c.getAttribute("pageindex");return c}})})},"gridx/modules/pagination/Pagination":function(){define(["dojo/_base/declare","dojo/_base/array","../../core/_Module"],function(n,m,o){return n(o,{name:"pagination",forced:["body"],getAPIPath:function(){return{pagination:this}},rowMixin:{getPage:function(){return this.grid.pagination.pageOfIndex(this.index())},
indexInPage:function(){return this.grid.pagination.indexInPage(this.index())}},preload:function(){this.grid.body.autoChangeSize=!1},load:function(){var f=this;f._pageSize=f.arg("initialPageSize")||f._pageSize;f._page=f.arg("initialPage",f._page,function(f){return f>=0});f.model.when({},function(){f._updateBody(1);f.connect(f.model,"onSizeChange","_onSizeChange");f.loaded.callback()})},pageSize:function(){var f=this._pageSize;return f>0?f:this.model.size()},isAll:function(){return this._pageSize===
0},pageCount:function(){return this.isAll()?1:Math.ceil(this.model.size()/this.pageSize())},currentPage:function(){return this._page},firstIndexInPage:function(f){if(!f&&f!==0)f=this._page;else if(!(f>=0))return-1;f*=this.pageSize();return f<this.model.size()?f:-1},lastIndexInPage:function(f){f=this.firstIndexInPage(f);if(f>=0){var f=f+this.pageSize()-1,l=this.model.size();return f<l?f:l-1}return-1},pageOfIndex:function(f){return this.isAll()?0:Math.floor(f/this.pageSize())},indexInPage:function(f){return this.isAll()?
f:f%this.pageSize()},filterIndexesInPage:function(f,l){var e=this.firstIndexInPage(l),k=this.lastIndexInPage(l);return e<0?[]:m.filter(f,function(g){return g>=e&&g<=k})},gotoPage:function(f){var l=this._page;if(f!=l&&this.firstIndexInPage(f)>=0)this._page=f,this._updateBody(),this.onSwitchPage(f,l)},setPageSize:function(f){var l=this._pageSize;if(f!=l&&f>=0){var e=this.firstIndexInPage(),k=-1;this._pageSize=f;if(this._page>=this.pageCount())k=this._page,this._page=this.pageOfIndex(e);this._updateBody();
this.onChangePageSize(f,l);if(k>=0)this.onSwitchPage(this._page,k)}},onSwitchPage:function(){},onChangePageSize:function(){},_page:0,_pageSize:10,_updateBody:function(f){var l=this.grid.body,e=this.model.size(),k=this.pageSize(),g=this.firstIndexInPage();e===0||g<0?k=g=0:e-g<k&&(k=e-g);l.updateRootRange(g,k);f||l.refresh()},_onSizeChange:function(f){if(f===0)this._page=0,this.grid.body.updateRootRange(0,0);else{if(this.firstIndexInPage()<0&&this._page!==0)f=this._page,this._page=0,this.onSwitchPage(0,
f);this._updateBody()}}})})},"gridx/nls/PaginationBar":function(){define({root:{pageIndex:"${0}",pageIndexTitle:"Page ${0}",pageIndexWai:"Page ${0}",firstPageTitle:"First page",firstPageWai:"First page",prevPageTitle:"Previous page",prevPageWai:"Previous page",nextPageTitle:"Next page",nextPageWai:"Next page",lastPageTitle:"Last page",lastPageWai:"Last page",pageSize:"${0}",pageSizeTitle:"${0} items per page",pageSizeWai:"${0} items per page",pageSizeAll:"All",pageSizeAllTitle:"All items",pageSizeAllWai:"All items",
description:"${0} - ${1} of ${2} items.",descriptionEmpty:"Grid is empty.",summary:"Total: ${0}",summaryWithSelection:"Total: ${0} Selected: ${1}",gotoBtnTitle:"Go to a specific page",gotoBtnWai:"Go to a specific page",gotoDialogTitle:"Go to Page",gotoDialogMainMsg:"Specify the page number:",gotoDialogPageCount:"(${0} pages)",gotoDialogOKBtn:"Go",gotoDialogCancelBtn:"Cancel",pageLabel:"Page",pageSizeLabel:"Rows"}})},"gridx/core/model/extensions/Move":function(){define(["dojo/_base/declare","dojo/_base/lang",
"dojo/_base/Deferred","dojo/DeferredList","../_Extension"],function(n,m,o,f,l){function e(d,b){var c,a,i=[],r=[],h,s=1,g=1,e=b,k=b,f;c=0;for(a=d.length;c<a;++c)i[d[c]]=1;c=0;for(a=i.length;c<a;++c)i[c]?c<b?s?(s=0,h=[c,1],f=r.length,r.unshift(h)):i[c-1]&&++h[1]:g?(g=0,h=[c,1,k],r.push(h),++k):i[c-1]&&(++h[1],++k):s=g=1;for(c=0;c<=f;++c)h=r[c],h[2]=e,e-=h[1];return r}function k(d,b,c,a){var i={},r,h,s={};if(c>d+b){for(h=0;h<b;++h)i[d+h]=c+h-b;for(h=0;h<c-d-b;++h)i[d+b+h]=d+h}else if(c<d){for(h=0;h<
b;++h)i[d+h]=c+h;for(h=0;h<d-c;++h)i[c+h]=c+h+b}else return;for(r in a)s[a[r]]=parseInt(r,10);for(r in i)d=i[r],s.hasOwnProperty(r)&&(r=s[r]),r==d?delete a[r]:a[r]=d}var g=m.hitch;return n(l,{name:"move",priority:10,constructor:function(d,b){var c=d._cache.options=d._cache.options||{};this._mixinAPI("move","moveIndexes","insert");d.onMoved=function(){};if(b.updateStore)this.updateStore=b.updateStore;c.sort=b.moveSortInfo?b.moveSortInfo:[{attribute:this.moveField=b.moveField||"order",descending:this.moveFieldDescending=
b.moveFieldDescending||!1}]},clear:function(){},move:function(d,b,c){d>=0&&d<Infinity&&b>0&&b<Infinity&&c>=0&&c<Infinity&&(c<d||c>d+b)&&this.model._addCmd({name:"_cmdMove",scope:this,args:[d,b,c],async:1})},moveIndexes:function(d,b){this.model._addCmd({name:"_cmdMove",scope:this,args:[d,b],async:1})},insert:function(d,b,c){for(var a=new o,i=g(a,a.callback),r=g(a,a.errback),h=this.moveField,s=this.model.store,e,k=[],b=b?s.fetch?s.getValue(b,h):b[h]:null,l=c?s.fetch?s.getValue(c,h):c[h]:null,c=0;e=
d[c];++c)if(b===null&&l===null?b=Math.random():b===null?b=l-1:l===null?b+=1:b=(b+l)/2,e[h]=b,s.fetch)s.newItem(e);else{var m=new o;o.when(s.add(e),g(m,m.callback),g(m,m.errback));k.push(m)}s.fetch?s.save({onComplete:i,onError:r}):(new f(k)).then(i,r);return a},updateStore:function(d,b,c){console.log(b,c);var a=[],i=[],r=[],b=[],h,s,e={},k,l={},n,u=0,x=this.inner,C=this.model.store,w=this.moveField,z=[],D=function(b){for(;b<a.length;++b){var h=a[b];if(!i[h])return h===void 0?b:h}return b},B=function(a){return(a=
x._call("byIndex",[a]))&&a.item},E=function(a){return C.fetch?C.getValue(a,w):a[w]},F=function(a,b){var h=i[a];return h?h.value:a<0?E(B(0))-1:a<b?E(B(a)):E(B(b-1))+1},G=function(){C.fetch?C.save({onComplete:function(){d.callback()},onError:function(a){d.errback(a)}}):(new f(z)).then(function(){d.callback()},function(a){d.errback(a)})},H=Infinity;for(h in c)h=parseInt(h,10),s=c[h],e[h]=s,s<H&&(H=s),a[s]=h;for(c=H;c<a.length;++c)a[c]===void 0&&(a[c]=c,e[c]=c);for(h in e)h=parseInt(h,10),s=e[h],k=s-
h,l[k]===void 0?l[k]=1:++l[k];for(k in l)l[k]>u&&(u=l[k],n=k);for(s=0;s<a.length;++s)h=a[s],h!==void 0&&s-h!=n&&(i[h]={},r.push(h));for(c=0;c<r.length;++c)h=r[c],s=e[h],k=i[h].before=s>0?a[s-1]===void 0?s-1:a[s-1]:-1,s=i[h].after=D(s),b.push({start:h,count:1},{start:s,count:1}),k>=0&&b.push({start:k,count:1});x._call("when",[{id:[],range:b},function(){for(var a=x._call("size"),b=0;b<r.length;++b){h=r[b];var c=B(h),d=i[h],s=F(d.before,a),e=F(d.after,a),s=(s+e)/2,d=d.value=s;C.fetch?C.setValue(c,w,
d):(c=m.clone(c),c[w]=d,d=new o,o.when(C.put(c,{overwrite:!0}),g(d,d.callback)),z.push(d))}G()}])},_cmdMove:function(){var d=new o,b=this.model,c,a,i={},r,h=[];this.inner._call("size");for(c=0;a=arguments[c];++c)b._msg("beforeMove",a),a.length==2?h=h.concat(e(a[0],a[1])):h.push(a);for(c=0;a=h[c];++c)k(a[0],a[1],a[2],i);for(c in i){r=1;break}r?this.updateStore(d,h,i):d.callback();d.then(function(){b._cache.clear();b._msg("moved",i);b.onMoved(h,i)});return d}})})},"gridx/modules/filter/FilterTooltip":function(){define(["dojo",
"dijit","dojo/_base/declare","./Filter","./FilterDialog","dijit/TooltipDialog","dijit/popup","dijit/Tooltip","dojo/i18n!../../nls/FilterBar","dojo/_base/array","dojo/_base/event","dojo/_base/html"],function(n,m,o){return o(m.TooltipDialog,{grid:null,filterBar:null,postCreate:function(){this.inherited(arguments);this.filterBar=this.grid.filterBar;this.connect(this,"onClick","_onClick");this.connect(this,"onMouseEnter","_onMouseEnter");this.connect(this,"onMouseLeave","_onMouseLeave");n.addClass(this.domNode,
"gridxFilterTooltip")},show:function(f){this.inherited(arguments);m.popup.open({popup:this,x:f.pageX,y:f.pageY,padding:{x:-6,y:-3}})},hide:function(){this.inherited(arguments);m.popup.close(this)},buildContent:function(){var f=this.filterBar,l=f._nls,e=f.filterData;if(e&&e.conditions.length){var k=['<div class="gridxFilterTooltipTitle"><b>Filter:</b> ',e.type==="all"?l.statusTipHeaderAll:l.statusTipHeaderAny,"</div><table><tr><th>Column</th><th>Rule</th></tr>"];n.forEach(e.conditions,function(g,d){k.push("<tr",
d%2?' class="gridxFilterTooltipOddRow"':"","><td>",g.colId?this.grid.column(g.colId).name():"Any column",'</td><td class="gridxFilterTooltipValueCell">',"<div>",f._getRuleString(g.condition,g.value,g.type),'<img src="'+this.grid._blankGif+'" action="remove-rule" title="'+l.removeRuleButton+'" class="gridxFilterTooltipRemoveBtn"/></div></td></tr>')},this);k.push("</table>");this.set("content",k.join(""));n.toggleClass(this.domNode,"gridxFilterTooltipSingleRule",e.conditions.length===1)}},_onMouseEnter:function(){this.isMouseOn=
!0},_onMouseLeave:function(){this.isMouseOn=!1;this.hide()},_onClick:function(f){var l=this._getTr(f),e=this.filterBar;l&&/^img$/i.test(f.target.tagName)?(e.filterData.conditions.splice(l.rowIndex-1,1),l.parentNode.removeChild(l),e.applyFilter(e.filterData),n.stopEvent(f)):(this.filterBar.showFilterDialog(),this.hide())},_getTr:function(f){for(f=f.target;f&&!/^tr$/i.test(f.tagName)&&f!==this.domNode;)f=f.parentNode;return f&&/^tr$/i.test(f.tagName)?f:null}})})},"gridx/modules/filter/FilterConfirmDialog":function(){define(["dojo/_base/kernel",
"dijit","dojo/_base/declare","dojo/text!../../templates/FilterConfirmDialog.html","dijit/Dialog","dijit/layout/AccordionContainer","dojo/data/ItemFileReadStore","./FilterPane","./Filter"],function(n,m,o,f){return o(m.Dialog,{title:"Clear Filter",cssClass:"gridxFilterConfirmDialog",autofocus:!1,postCreate:function(){this.inherited(arguments);this.set("content",f);var l=m.findWidgets(this.domNode);this.btnClear=l[0];this.btnCancel=l[1];this.connect(this.btnCancel,"onClick","hide");this.connect(this.btnClear,
"onClick","onExecute")},onExecute:function(){this.execute()},execute:function(){}})})},"gridx/modules/HLayout":function(){define(["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/DeferredList","../core/_Module"],function(n,m,o,f,l,e,k){return n(k,{name:"hLayout",getAPIPath:function(){return{hLayout:this}},load:function(g,d){var b=this;d.then(function(){b._layout();b.loaded.callback()})},lead:0,tail:0,register:function(g,d,b){var c=this._regs=
this._regs||[];g||(g=new m,g.callback());c.push([g,d,b])},onUpdateWidth:function(){},_layout:function(){var g=this,d=g._regs;if(d){var b=0,c=0,a=o.map(d,function(a){return a[0]});(new e(a)).then(function(){o.forEach(d,function(a){var d=f.getMarginBox(a[1]).w||l.get(a[1],"width");a[2]?c+=d:b+=d});g.lead=b;g.tail=c;g.onUpdateWidth(b,c)})}else g.onUpdateWidth(0,0)}})})},"gridx/modules/pagination/GotoPagePane":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/keys","dijit/_WidgetBase","dijit/_TemplatedMixin",
"dijit/_WidgetsInTemplateMixin","dojo/text!../../templates/GotoPagePane.html"],function(n,m,o,f,l,e,k){return n([f,l,e],{templateString:k,pager:null,postMixInProperties:function(){var g=this.pager,d=g.module;m.mixin(this,g._nls);this.numberTextBoxClass=d.arg("numberTextBoxClass").prototype.declaredClass;this.buttonClass=d.arg("buttonClass").prototype.declaredClass;this.connect(this.domNode,"onkeydown","_onKeyDown")},postCreate:function(){this._updateStatus()},_updateStatus:function(){var g=this.pageInputBox;
this.okBtn.set("disabled",!g.isValid()||g.get("displayedValue")==="")},_onOK:function(){var g=this.pager;g.pagination.gotoPage(this.pageInputBox.get("value")-1);g._gotoDialog.hide()},_onCancel:function(){this.pager._gotoDialog.hide()},_onKeyDown:function(g){!this.okBtn.get("disabled")&&o.ENTER==g.keyCode&&this._onOK()}})})},"gridx/modules/filter/FilterBar":function(){define(["dojo/_base/kernel","dijit","dojo/_base/declare","dojo/dom-construct","../../core/_Module","dojo/text!../../templates/FilterBar.html",
"dojo/i18n!../../nls/FilterBar","./Filter","./FilterDialog","./FilterConfirmDialog","./FilterTooltip","dijit/TooltipDialog","dijit/popup","dijit/Tooltip","dojo/date/locale","dojo/_base/array","dojo/_base/html","dojo/query","dojo/parser","dojo/string"],function(n,m,o,f,l,e,k,g,d,b,c){return o(l,{name:"filterBar",forced:["filter"],getAPIPath:function(){return{filterBar:this}},closeFilterBarButton:!0,defineFilterButton:!0,tooltipDelay:300,maxRuleCount:0,ruleCountToConfirmClearFilter:2,conditions:{string:["equal",
"contain","startWith","endWith","notEqual","notContain","notStartWith","notEndWith","isEmpty"],number:["equal","greater","less","greaterEqual","lessEqual","notEqual","isEmpty"],date:["equal","before","after","range","isEmpty"],time:["equal","before","after","range","isEmpty"],"boolean":["equal","isEmpty"]},load:function(){g.before=g.lessEqual;g.after=g.greaterEqual;this.closeFilterBarButton=this.arg("closeFilterBarButton")||this.closeFilterBarButton;this.defineFilterButton=this.arg("defineFilterButton")||
this.defineFilterButton;this.tooltipDelay=this.arg("tooltipDelay")||this.tooltipDelay;this.maxRuleCount=this.arg("maxRuleCount")||this.maxRuleCount;this.ruleCountToConfirmClearFilter=this.arg("ruleCountToConfirmClearFilter")||this.ruleCountToConfirmClearFilter;this.domNode=n.create("div",{innerHTML:e,"class":"gridxFilterBar"});n.parser.parse(this.domNode);n.toggleClass(this.domNode,"gridxFilterBarHideCloseBtn",!this.closeFilterBarButton);this.grid.vLayout.register(this,"domNode","headerNode",-1);
this._nls=k;this._initWidgets();this.refresh();this.connect(this.domNode,"onclick","onDomClick");this.connect(this.domNode,"onmouseover","onDomMouseOver");this.connect(this.domNode,"onmousemove","onDomMouseMove");this.connect(this.domNode,"onmouseout","onDomMouseOut");this.loaded.callback()},onDomClick:function(a){a.target&&a.target.tagName&&(n.attr(a.target,"action")==="clear"?this.clearFilter():n.hasClass(a.target,"gridxFilterBarCloseBtn")?this.hide():this.showFilterDialog())},onDomMouseMove:function(a){(!a||
!a.target||!(n.attr(a.target,"action")==="clear"||this.btnFilter===m.getEnclosingWidget(a.target)))&&this._showTooltip(a)},onDomMouseOver:function(){},onDomMouseOut:function(){window.setTimeout(n.hitch(this,"_hideTooltip"),10)},applyFilter:function(a){var b=[];this.filterData=a;n.forEach(a.conditions,function(a){var c="string";if(a.colId)c=this.grid.column(a.colId).dataType(),b.push(this._getFilterExpression(a.condition,a,c,a.colId));else{var d=[];n.forEach(this.grid.columns(),function(b){b.isFilterable()&&
d.push(this._getFilterExpression(a.condition,a,c,b.id))},this);b.push(g.or.apply(g,d))}},this);this.grid.filter.setFilter((a.type==="all"?g.and:g.or).apply(g,b));var c=this;this.model.when({}).then(function(){c._currentSize=c.model.size();c._totalSize=c.model._cache.size();c._buildFilterState()})},confirmToExecute:function(a,i){var c=this.ruleCountToConfirmClearFilter;if(this.filterData&&(this.filterData.conditions.length>=c||c<=0)){if(!this._cfmDlg)this._cfmDlg=new b;this._cfmDlg.execute=n.hitch(i,
a);this._cfmDlg.show()}else a.apply(i)},clearFilter:function(a){a?(this.filterData=null,this.grid.filter.setFilter(),this._buildFilterState()):this.confirmToExecute(n.hitch(this,"clearFilter",!0),this)},columnMixin:{isFilterable:function(){return this.grid._columnsById[this.id].filterable!==!1},setFilterable:function(a){this.grid.filterBar._setFilterable(this.id,a);return this},dataType:function(){return(this.grid._columnsById[this.id].dataType||"string").toLowerCase()},filterConditions:function(){return this.grid.filterBar._getColumnConditions(this.id)}},
refresh:function(){this.btnClose.style.display=this.closeFilterBarButton?"":"none";this.btnFilter.style.display=this.defineFilterButton?"":"none"},isVisible:function(){return this.domNode.style.display!="none"},show:function(){this.domNode.style.display="block";this.grid.vLayout.reLayout();this.onShow()},hide:function(){this.domNode.style.display="none";this.grid.vLayout.reLayout();this._hideTooltip();this.onHide()},onShow:function(){},onHide:function(){},showFilterDialog:function(){var a=this._filterDialog;
if(!a)this._filterDialog=a=new d({grid:this.grid});a.open||(a.setData(this.filterData),a.show())},uninitialize:function(){this._filterDialog&&this._filterDialog.destroyRecursive();this.inherited(arguments);n.destroy(this.domNode)},_getColumnConditions:function(a){var b;a?(b=this.grid._columnsById[a].disabledConditions||[],a=(this.grid._columnsById[a].dataType||"string").toLowerCase()):(b=[],a="string");var a=this.conditions[a],c={};a||(a=conditionData.string);n.forEach(b,function(a){c[a]=!0});return a=
n.filter(a,function(a){return!c[a]})},_setFilterable:function(a,b){var c=this.grid._columnsById[a];if(c&&c.filterable!=!!b&&(c.filterable=!!b,this.filterData)){var c=this.filterData,h=c.conditions.length;c.conditions=n.filter(c.conditions,function(b){return b.colId!=a});h!=c.conditions.length&&this.applyFilter(c);this._filterDialog.open&&this._filterDialog.setData(c)}},_initWidgets:function(){this.btnFilter=m.byNode(n.query(".dijitButton",this.domNode)[0]);this.btnClose=n.query(".gridxFilterBarCloseBtn",
this.domNode)[0];this.statusNode=n.query(".gridxFilterBarStatus",this.domNode)[0].firstChild},_buildFilterState:function(){var a=this._nls;!this.filterData||!this.filterData.conditions.length?this.statusNode.innerHTML=a.filterBarMsgNoFilterTemplate:(this.statusNode.innerHTML=n.string.substitute(a.filterBarMsgHasFilterTemplate,[this._currentSize,this._totalSize,"items"])+'&nbsp; &nbsp; <a href="javascript:void(0);" action="clear" title="Clear filter">Clear Filter</a>',this._buildTooltip())},_buildTooltip:function(){if(!this._tooltip)this._tooltip=
new c({grid:this.grid});this._tooltip.buildContent()},_showTooltip:function(a,b){this._hideTooltip();if(this.filterData&&this.filterData.conditions&&this.filterData.conditions.length)b?this._tooltip.show(a):this._pointTooltipDelay=window.setTimeout(n.hitch(this,"_showTooltip",a,!0),this.tooltipDelay)},_hideTooltip:function(){var a=this._tooltip;if(a&&!a.isMouseOn){if(this._pointTooltipDelay)window.clearTimeout(this._pointTooltipDelay),this._pointTooltipDelay=null;a.hide()}},_getRuleString:function(a,
b,c){if(a=="isEmpty")b="";else if(/^date|^time/i.test(c)){var h=this._formatDate;if(/^time/i.test(c))h=this._formatTime;b=a==="range"?n.string.substitute(this._nls.rangeTemplate,[h(b.start),h(b.end)]):h(b)}return'<span style="font-style:italic">'+this._getConditionDisplayName(a)+"</span> "+b},_getConditionDisplayName:function(a){return this._nls["condition"+(a.charAt(0).toUpperCase()+a.substring(1))]},_getConditionOptions:function(a){var b=this._nls,c=this._conditionOptions=this._conditionOptions||
{};if(!c[a]){var h=[];n.forEach(this._getColumnConditions(a),function(a){var c=a.charAt(0).toUpperCase()+a.substring(1);h.push({label:b["condition"+c],value:a})},this);c[a]=h}return c[a]},_getFilterExpression:function(a,b,c,h){var a={date:this.grid._columnsById[h].dateParser||this._stringToDate,time:this.grid._columnsById[h].timeParser||this._stringToTime},d=b.condition,e=!1,c=d=="isEmpty"?"string":c;d==="range"?(e=g.value(b.value.start,c),b=g.value(b.value.end,c),c=g.column(h,c,a[c]),c=g.and(g.greaterEqual(c,
e),g.lessEqual(c,b))):(/^not/.test(d)&&(e=!0,d=d.replace(/^not/g,""),d=d.charAt(0).toLowerCase()+d.substring(1)),c=g[d](g.column(h,c,a[c]),d=="isEmpty"?null:g.value(b.value,c)),e&&(c=g.not(c)));return c},_stringToDate:function(a,b){b=b||/(\d{4})\/(\d\d?)\/(\d\d?)/;b.test(a);var c=new Date;c.setFullYear(parseInt(RegExp.$1));c.setMonth(parseInt(RegExp.$2)-1);return c},_stringToTime:function(a,b){b=b||/(\d\d?):(\d\d?):(\d\d?)/;b.test(a);var c=new Date;c.setHours(parseInt(RegExp.$1));c.setMinutes(parseInt(RegExp.$2));
c.setSeconds(parseInt(RegExp.$3));return c},_formatDate:function(a){var b=a.getMonth()+1,c=a.getDate();return b+"/"+c+"/"+a.getFullYear()},_formatTime:function(a){var b=a.getHours(),a=a.getMinutes();b<10&&(b="0"+b);a<10&&(a="0"+a);return b+":"+a+":00"},destroy:function(){f.destroy(this.domNode);this.inherited(arguments)}})})},"gridx/core/model/Model":function(){define(["require","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","dojo/DeferredList","dojo/_base/connect"],
function(n,m,o,f,l,e,k){var g=f.isArrayLike,d=f.isString;return m([],{constructor:function(b){var c=b.cacheClass,c=typeof c=="string"?n(c):c;this.store=b.store;this._exts={};this._cmdQueue=[];this._model=this._cache=new c(this,b);this._createExts(b.modelExtensions||[],b);b=this._model;this._connects=[k.connect(b,"onDelete",this,"onDelete"),k.connect(b,"onNew",this,"onNew"),k.connect(b,"onSet",this,"onSet")]},destroy:function(){o.forEach(this._connects,k.disconnect);for(var b in this._exts)this._exts[b].destroy()},
when:function(){this._oldSize=this.size();this._addCmd({name:"_cmdRequest",scope:this,args:arguments,async:1});return this._exec()},scan:function(b,c){var a=new l,i=b.start||0,d=b.pageSize||this._cache.pageSize||1,h=b.count,s=h>0?i+h:Infinity,e=b.whenScope||this,g=b.whenFunc||e.when,k=function(b){a.progress(b/(h>0?b+h:e.size()));g.call(e,{id:[],range:[{start:b,count:d}]},function(){var a,i,h=[];for(a=b;a<b+d&&a<s;++a)if(i=e.byIndex(a))h.push(i);else{s=-1;break}if(c(h,b)||a==s)s=-1}).then(function(){s==
-1?a.callback():k(b+d)})};k(i);return a},onDelete:function(){},onNew:function(){},onSet:function(){},onSizeChange:function(){},_msg:function(){},_addCmd:function(b){var c=this._cmdQueue,a=c[c.length-1];a&&a.name==b.name&&a.scope==b.scope?a.args.push(b.args||[]):(b.args=[b.args||[]],c.push(b))},_onSizeChange:function(){var b=this._oldSize,c=this._oldSize=this.size();if(b!=c)this.onSizeChange(c,b)},_execEvents:function(b,c){this._onSizeChange();c&&c.call(b)},_cmdRequest:function(){var b=this;return new e(o.map(arguments,
function(c){var a=c[0],i=f.hitch(b,b._execEvents,c[2],c[1]);if(a===null||!c.length)return c=new l,i(),c.callback(),c;return b._model._call("when",[b._normArgs(a),i])}),0,1)},_exec:function(){var b=this,c=b._cache,a=new l,i=b._cmdQueue,d=function(a,i){b._busy=0;c.skipCacheSizeCheck=0;c._checkSize&&c._checkSize();i?a.errback(i):a.callback()},h=function(){if(o.some(i,function(a){return a.name=="_cmdRequest"}))try{for(;i.length;){var b=i.shift(),c=b.scope[b.name].apply(b.scope,b.args);if(b.async){l.when(c,
h,f.partial(d,a));return}}}catch(e){d(a,e);return}d(a)};if(b._busy)return b._busy;b._busy=a;c.skipCacheSizeCheck=1;h();return a},_createExts:function(b,c){b=o.filter(b,function(a){return(a=typeof a=="string"?n(a):a)&&a.prototype});b.sort(function(a,b){return a.prototype.priority-b.prototype.priority});for(var a=0,i=b.length;a<i;++a)if(a==b.length-1||b[a]!=b[a+1]){var d=new b[a](this,c);this._exts[d.name]=d}},_normArgs:function(b){var c,a=[],i=[],r={range:a,id:i},h=function(a){return typeof a=="number"&&
a>=0},s=function(b){if(b&&h(b.start))a.push(b);else if(h(b))a.push({start:b,count:1});else if(g(b))for(c=b.length-1;c>=0;--c)h(b[c])?a.push({start:b[c],count:1}):b[c]&&h(b[c].start)?a.push(b[c]):d(b)&&i.push(b[c]);else d(b)&&i.push(b)};if(b&&(b.index||b.range||b.id))if(s(b.index),s(b.range),g(b.id))for(c=b.id.length-1;c>=0;--c)i.push(b.id[c]);else b.id&&i.push(b.id);else s(b);!a.length&&!i.length&&this.size()<0&&a.push({start:0,count:this._cache.pageSize||1});return r}})})},"gridx/modules/select/Column":function(){define(["dojo/_base/declare",
"dojo/_base/query","dojo/_base/array","dojo/_base/sniff","dojo/dom-class","dojo/keys","./_Base","../../core/_Module"],function(n,m,o,f,l,e,k){return n(k,{name:"selectColumn",columnMixin:{select:function(){this.grid.select.column._markById(this.id,1);return this},deselect:function(){this.grid.select.column._markById(this.id,0);return this},isSelected:function(){return this.grid.select.column.isSelected(this.id)}},selectById:function(e){this._markById(e,1)},deselectById:function(e){this._markById(e,
0)},isSelected:function(e){e=this.grid._columnsById[e];return!(!e||!e._selected)},getSelected:function(){var e=[],d,b,c=this.grid._columns,a=c.length;for(d=0;d<a;++d)b=c[d],b._selected&&e.push(b.id);return e},clear:function(){var e=this.grid._columns,d,b=e.length;for(d=0;d<b;++d)this._markById(e[d].id,0)},_type:"column",_init:function(){var g=this;g.batchConnect([g.grid,"onHeaderCellClick",function(d){l.contains(d.target,"gridxArrowButtonNode")||g._select(d.columnId,d.ctrlKey)}],[g.grid,f("ff")<4?
"onHeaderCellKeyUp":"onHeaderCellKeyDown",function(d){(d.keyCode==e.SPACE||d.keyCode==e.ENTER)&&g._select(d.columnId,d.ctrlKey)}])},_markById:function(e,d){var b=this.grid._columnsById[e];if(this.arg("enabled")&&(d=!!d,b&&!b._selected==d))b._selected=d,this._highlight(e,d),this[d?"onSelected":"onDeselected"](this.grid.column(e,1))},_highlight:function(e,d){var b=this,c=b.grid;m("[colid='"+e+"']",c.bodyNode).forEach(function(a){l.toggle(a,"gridxColumnSelected",d);b.onHighlightChange({column:c._columnsById[e].index},
d)})},_onRender:function(e,d){var b,c,a,i=e+d;b=this.grid;var r=b.bodyNode,h=o.filter(b._columns,function(a){return a._selected});for(b=h.length-1;b>=0;--b)for(c=e;c<i;++c)a=m(['[visualindex="',c,'"] [colid="',h[b].id,'"]'].join(""),r)[0],l.add(a,"gridxColumnSelected")}})})},"gridx/modules/select/_RowCellBase":function(){define(["dojo/_base/declare","dojo/_base/lang","./_Base","../../core/model/extensions/Mark"],function(n,m,o,f){return n(o,{modelExtensions:[f],selectById:function(f,e){var k=this.model;
this.arg("enabled")&&(k.markById(f,1,this._getMarkType(e)),k.when())},deselectById:function(f,e){var k=this.model;this.arg("enabled")&&(k.markById(f,0,this._getMarkType(e)),k.when())},isSelected:function(f,e){return this.model.isMarked(f,this._getMarkType(e))},_init:function(){var f=this.model;this.batchConnect([f,"onMarked",m.hitch(this,"_onMark",1)],[f,"onMarkRemoved",m.hitch(this,"_onMark",0)])}})})},"gridx/modules/IndirectSelect":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/query",
"dojo/_base/lang","dojo/dom-class","dojo/_base/Deferred","../core/_Module","../util","./RowHeader"],function(n,m,o,f,l,e,k,g){return n(k,{name:"indirectSelect",required:["rowHeader","selectRow"],preload:function(){var d=this,b=d.grid,c=b.focus,a=b.select.row,i=b.rowHeader;i.cellProvider=f.hitch(d,d._createSelector);d.batchConnect([a,"onHighlightChange","_onHighlightChange"],[a,"clear","_onClear"],[a,"onSelectionChange","_onSelectionChange"],[b,"onRowMouseOver","_onMouseOver"],[b,"onRowMouseOut","_onMouseOut"],
c&&[c,"onFocusArea",function(a){a=="rowHeader"&&d._onMouseOver()}],c&&[c,"onBlurArea",function(a){a=="rowHeader"&&d._onMouseOut()}]);if(a.selectByIndex&&d.arg("all"))d._allSelected={},i.headerProvider=f.hitch(d,d._createSelectAllBox),i.loaded.then(function(){c&&d._initFocus();d.connect(b,"onRowHeaderHeaderMouseDown","_onSelectAll")})},all:!0,_createSelector:function(d){d=o('[rowid="'+d.rowId+'"]',this.grid.bodyNode)[0];return this._createCheckBox(d&&l.contains(d,"gridxRowSelected"))},_createCheckBox:function(d){var b=
this._getDijitClass();return['<span class="gridxIndirectSelectionCheckBox dijitReset dijitInline ',b," ",d?b+"Checked":"",'"><span class="gridxIndirectSelectionCheckBoxInner">&#9633;</span></span>'].join("")},_createSelectAllBox:function(){return this._createCheckBox(this._allSelected[this._getPageId()])},_getPageId:function(){return this.grid.body.rootStart+","+this.grid.body.rootCount},_onClear:function(){var d=this._getDijitClass()+"Checked";o("."+d,this.grid.rowHeader.bodyNode).forEach(function(b){l.remove(b,
d)})},_onHighlightChange:function(d,b){var c=o('[visualindex="'+d.row+'"].gridxRowHeaderRow .gridxIndirectSelectionCheckBox',this.grid.rowHeader.bodyNode)[0];c&&l.toggle(c,this._getDijitClass()+"Checked",b)},_onMouseOver:function(){var d=this.grid.select.row;if(!d.holdingCtrl)this._holdingCtrl=!1,d.holdingCtrl=!0},_onMouseOut:function(){if(this.hasOwnProperty("_holdingCtrl"))this.grid.select.row.holdingCtrl=!1,delete this._holdingCtrl},_getDijitClass:function(){return this._isSingle()?"dijitRadio":
"dijitCheckBox"},_isSingle:function(){var d=this.grid.select.row;return d.hasOwnProperty("multiple")&&!d.arg("multiple")},_onSelectAll:function(){var d=this.grid,b=d.body;d.select.row[this._allSelected[this._getPageId()]?"deselectByIndex":"selectByIndex"]([0,b.visualCount-1])},_onSelectionChange:function(d){var b=this,c,a,i=b.grid.body,r=b.model,h=i.rootStart,s=i.rootCount;s===r.size()?a=s==d.length:(c=new e,r.when({start:h,count:s},function(){var b=m.filter(m.map(d,function(a){return r.idToIndex(a)}),
function(a){return a>=h&&a<h+s});a=s==b.length;c.callback()}));e.when(c,function(){b._allSelected[b._getPageId()]=a;l.toggle(b.grid.rowHeader.headerCellNode.firstChild,b._getDijitClass()+"Checked",a)})},_initFocus:function(){var d=this.grid,b=d.rowHeader,c=b.headerCellNode,a=function(a){g.stopEvent(a);l.add(c,"gridxHeaderCellFocus");c.focus();return!0},i=function(){l.remove(c,"gridxHeaderCellFocus");return!0};d.focus.registerArea({name:"selectAll",priority:0.89,focusNode:b.headerNode,doFocus:a,doBlur:i,
onFocus:a,onBlur:i})}})})},"gridx/modules/extendedSelect/_RowCellBase":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/query","./_Base","../../core/model/extensions/Mark"],function(n,m,o,f,l){return n(f,{modelExtensions:[l],_getRowId:function(e){return(e=o('[visualindex="'+e+'"]',this.grid.bodyNode)[0])&&e.getAttribute("rowid")},_init:function(){var e=this.model;this.batchConnect([this.grid.body,"onMoveToCell","_onMoveToCell"],[e,"onMarked",m.hitch(this,"_onMark",1)],[e,"onMarkRemoved",
m.hitch(this,"_onMark",0)])}})})},"gridx/modules/pagination/PaginationBar":function(){define(["dojo/_base/declare","./_PaginationBarBase","./LinkPager","../../core/_Module","./GotoPagePane","dijit/Dialog","dijit/form/Button","dijit/form/NumberTextBox"],function(n,m,o,f,l,e,k,g){return n(m,{gotoButton:!0,visibleSteppers:3,sizeSeparator:"|",gotoPagePane:l,dialogClass:e,buttonClass:k,numberTextBoxClass:g,pagerClass:o})})},"gridx/modules/VScroller":function(){define(["dojo/_base/declare","dojo/_base/Deferred",
"dojo/_base/event","dojo/_base/sniff","dojo/_base/query","dojo/keys","dojox/html/metrics","../core/_Module"],function(n,m,o,f,l,e,k,g){return n(g,{name:"vScroller",forced:["body","vLayout","columnWidth"],optional:["pagination"],getAPIPath:function(){return{vScroller:this}},preload:function(){var d=this.grid,b=this.domNode=d.vScrollerNode;this.stubNode=b.firstChild;if(f("ie")<8)this.stubNode.style.width=k.getScrollbar().w+"px";d.autoHeight?b.style.display="none":this.domNode.style.width=k.getScrollbar().w+
"px";d.hLayout.register(null,b,1)},load:function(d,b){var c=this,a=c.grid,i=a.bodyNode;c.batchConnect([c.domNode,"onscroll","_doScroll"],[i,"onmousewheel","_onMouseWheel"],[a.mainNode,"onkeypress","_onKeyScroll"],[a.body,"onRender","_onBodyChange"],[a.body,"onForcedScroll","_onForcedScroll"],[a,"_onResizeEnd","_onBodyChange"],f("ff")&&[i,"DOMMouseScroll","_onMouseWheel"]);b.then(function(){m.when(c._init(d),function(){c.domNode.style.width="";c.loaded.callback()})})},scrollToRow:function(d,b){var c=
new m,a=this.grid.bodyNode,i=this.domNode,r=0,h=l('[visualindex="'+d+'"]',a)[0];if(h){var r=h.offsetTop,e=a.scrollTop;if(b)return i.scrollTop=r,c.callback(!0),c;else if(r<e)r-=e;else if(r+h.offsetHeight>e+a.clientHeight)r=r+h.offsetHeight-e-a.clientHeight;else return c.callback(!0),c;i.scrollTop+=r}c.callback(!!h);return c},_init:function(){this._onForcedScroll()},_doScroll:function(){this.grid.bodyNode.scrollTop=this.domNode.scrollTop},_onMouseWheel:function(d){this.grid.autoHeight||(this.domNode.scrollTop-=
typeof d.wheelDelta==="number"?d.wheelDelta/3:-40*d.detail,o.stop(d))},_onBodyChange:function(){var d=this,b=d.grid;window.setTimeout(function(){d.stubNode.style.height=b.bodyNode.scrollHeight+"px";d._doScroll();b.vScrollerNode.scrollTop=b.vScrollerNode.scrollTop||0},0)},_onForcedScroll:function(){var d=this,b=d.grid.body;return d.model.when({start:b.rootStart,count:b.rootCount},function(){b.renderRows(0,b.rootCount||d.model.size()-b.rootStart)})},_onKeyScroll:function(d){var i;var h;var b=this.grid.body,
c=this.grid.focus,a=this.domNode;if(!c||c.currentArea()=="body"){if(d.keyCode==e.HOME)b._focusCellRow=0,a.scrollTop=0;else if(d.keyCode==e.END)b._focusCellRow=b.visualCount-1,a.scrollTop=this.stubNode.clientHeight-b.domNode.offsetHeight;else if(d.keyCode==e.PAGE_UP)h=b._focusCellRow=Math.max(b.renderStart-b.renderCount,0),b=h,this.scrollToRow(b,1);else if(d.keyCode==e.PAGE_DOWN)i=b._focusCellRow=Math.min(b.visualCount-1,b.renderStart+b.renderCount),b=i,this.scrollToRow(b,1);else return;o.stop(d)}}})})},
"gridx/core/model/cache/_Cache":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","../_Extension"],function(n,m,o,f,l){var e=o.hitch,k=o.mixin,g=m.indexOf;return n(l,{constructor:function(d,b){var c=this,a=c.store=b.store,i=a.fetch;c.columns=b.columns;!i&&a.notify?c.connect(a,"notify",function(a,b){a===void 0?c._onDelete(b):b===void 0?c._onNew(a):c._onSet(a)}):(c.connect(a,i?"onSet":"put","_onSet"),c.connect(a,i?"onNew":"add","_onNew"),c.connect(a,
i?"onDelete":"remove","_onDelete"));c.clear();c._mixinAPI("byIndex","byId","indexToId","idToIndex","size","treePath","hasChildren","keep","free")},destroy:function(){this.inherited(arguments);this.clear()},clear:function(){this._filled=0;this._priority=[];this._struct={};this._cache={};this._size={};this._struct[""]=[];this._size[""]=-1},byIndex:function(d,b){this._init("byIndex",arguments);return this._cache[this.indexToId(d,b)]},byId:function(d){this._init("byId",arguments);return this._cache[d]},
indexToId:function(d,b){this._init("indexToId",arguments);var c=this._struct[b||""];return typeof d=="number"&&d>=0?c&&c[d+1]:void 0},idToIndex:function(d){this._init("idToIndex",arguments);var b=this._struct,b=g(b[b[d]&&b[d][0]]||[],d);return b>0?b-1:-1},treePath:function(d){for(var b=this._struct,c=[];d!==void 0;)c.unshift(d),d=b[d]&&b[d][0];return c[0]!==""?[]:(c.pop(),c)},hasChildren:function(d){var b=this.store,c;this._init("hasChildren",arguments);c=this.byId(d);return b.hasChildren&&b.hasChildren(d,
c&&c.item)},size:function(d){this._init("size",arguments);var b=this._size[d||""];return b>=0?b:-1},onBeforeFetch:function(){},onAfterFetch:function(){},onSetColumns:function(d){var b,c,a,i;this.columns=d;for(b in this._cache)for(a in c=this._cache[b],d)i=d[a],c.data[a]=this._formatCell(i.id,c.rawData)},_itemToObject:function(d){var b=this.store;if(b.fetch){var c={};m.forEach(b.getAttributes(d),function(a){c[a]=b.getValue(d,a)});return c}return d},_formatCell:function(d,b){var c=this.columns[d];return c.formatter?
c.formatter(b):b[c.field||d]},_formatRow:function(d){var b=this.columns,c={},a;for(a in b)c[a]=this._formatCell(a,d);return c},_addRow:function(d,b,c,a,i){var i=i||"",r=this._struct,h=this._priority,e=r[i];if(!e)throw Error("Fatal error of cache._addRow: parent item "+i+" of "+d+" is not loaded");if(e[b+1]){if(e[b+1]!==d)throw Error("Fatal error of cache._addRow: different row id "+d+" and "+e[b+1]+" for same row index "+b);}else e[b+1]=d;r[d]=r[d]||[i];i||(b=g(h,d),b>=0&&h.splice(b,1),h.push(d));
this._cache[d]={data:this._formatRow(c),rawData:c,item:a};this._filled=1},_loadChildren:function(d){var b=this,c=new f,a=b.store,i=b.byId(d),i=i&&a.getChildren&&a.getChildren(i.item)||[];f.when(i,function(i){for(var h=0,e,k=b._size[d]=i.length;h<k;++h)e=i[h],b._addRow(a.getIdentity(e),h,b._itemToObject(e),e,d);c.callback()},e(c,c.errback));return c},_onBegin:function(d){this._size[""]=parseInt(d,10)},_onComplete:function(d,b,c){try{for(var a=0,i;i=c[a];++a)this._addRow(this.store.getIdentity(i),b+
a,this._itemToObject(i),i);d.callback()}catch(r){d.errback(r)}},_storeFetch:function(d){var b=this.store,c=new f,a=k({},this.options||{},d),i=e(this,this._onBegin),d=e(this,this._onComplete,c,d.start),r=e(c,c.errback);this.onBeforeFetch();b.fetch?b.fetch(k(a,{onBegin:i,onComplete:d,onError:r})):(b=b.query(a.query,a),f.when(b.total,i),f.when(b,d,r));c.then(e(this,this.onAfterFetch));return c},_onSet:function(d){var b=this.store.getIdentity(d),c=this.idToIndex(b),a=this.treePath(b);a.length&&this._addRow(b,
c,this._itemToObject(d),d,a.pop());this.onSet(b,c,this._cache[b])},_onNew:function(d,b){var c=this.store,a=this._itemToObject(d),i=b&&b[c.fetch?"item":"parent"];i&&c.getIdentity(i);var r=this._size[""];this.clear();this.onNew(c.getIdentity(d),0,{data:this._formatRow(a),rawData:a,item:d});!i&&r>=0&&(this._size[""]=r+1,this.model._onSizeChange())},_onDelete:function(d){var b=this.store,c=this._struct,d=b.fetch?b.getIdentity(d):d,a=this.treePath(d);if(a.length){var i,r,b=[d],h=a.pop(),e=this._size,k=
e[""],f=g(c[h],d);c[h].splice(f,1);--e[h];for(i=0;i<b.length;++i)if(a=c[b[i]])for(r=a.length-1;r>0;--r)b.push(a[r]);for(i=b.length-1;i>=0;--i)r=b[i],delete this._cache[r],delete c[r],delete e[r];i=g(this._priority,d);i>=0&&this._priority.splice(i,1);this.onDelete(d,f-1);!h&&k>=0&&(e[""]=k-1,this.model._onSizeChange())}else this.onDelete(d)}})})},"gridx/core/Core":function(){define(["require","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","dojo/DeferredList","./model/Model",
"./Row","./Column","./Cell","./_Module"],function(n,m,o,f,l,e,k,g,d,b,c){function a(a){a=a.moduleClass.prototype;return(a.forced||[]).concat(a.optional||[])}function i(a,b){if(b)for(var c in b){var h=a[c],d=b[c];h&&f.isObject(h)&&!A(h)?i(h,d):a[c]=d}}function r(a,b){var c=[],i=b&&b.length||0;u(a.modules,function(a,b){if(A(a)||y(a))a={moduleClass:a};if(a){var h=a.moduleClass;if(y(h))try{h=a.moduleClass=n(h)}catch(d){console.error(d)}if(A(h)){c.push(a);return}}console.error(["The ",b+1-i,"-th declared module can NOT be found, please require it before using it"].join(""))});
a.modules=c;return a}function h(a){var b,c={},i=[];u(a.modules,function(a){c[a.moduleClass.prototype.name]=a});for(b in c)i.push(c[b]);a.modules=i;return a}function s(b){var c=b.modules,i,h,d,r,e=function(a){for(var b=c.length-1;b>=0;--b)if(c[b].moduleClass.prototype.name==a)return c[b];return null};for(i=c.length-1;h=c[i];--i){d=h.moduleClass.prototype.name;for(r=a(h);r.length;){h=r.shift();if(h==d)throw Error("Module '"+h+"' is in a dependancy circle!");(h=e(h))&&(r=r.concat(a(h)))}}return b}var t=
f.delegate,A=f.isFunction,y=f.isString,v=f.hitch,u=o.forEach;return m([],{_reset:function(a){this._uninit();var b={},i;for(i in a)b[i]=a[i];a=b;this.store=a.store;a.modules=a.modules||[];a.modelExtensions=a.modelExtensions||[];this.setColumns(a.structure);a.columns=this._columnsById;i=r(a,this.coreModules);var a=c._modules,b=i.modules,d,e,g,f,t,l,A;for(d=0;d<b.length;++d){f=b[d].moduleClass.prototype;t=(f.forced||[]).concat(f.required||[]);for(e=0;e<t.length;++e){l=t[e];for(g=b.length-1;g>=0;--g)if(b[g].moduleClass.prototype.name===
l)break;g<0&&(a[l]?b.push({moduleClass:a[l]}):(A=1,console.error(["Forced/Required dependent module '",l,"' is NOT found for '",f.name,"' module."].join(""))))}}if(A)throw Error("Some forced/required dependent modules are NOT found.");A=s(h(i));i=A.modules;for(a=i.length-1;a>=0;--a)(b=i[a].moduleClass.prototype.modelExtensions)&&[].push.apply(A.modelExtensions,b);a=A;this.model=new k(a);this._create(a)},_postCreate:function(){var a=this._deferStartup=new l;this._preload();this._load(a).then(v(this,
"onModulesLoaded"))},onModulesLoaded:function(){},setStore:function(a){this.store=a;this._reset(this);this._postCreate();this._deferStartup.callback()},setColumns:function(a){this.structure=a;var a=this._columns=f.clone(a),b={},c,i,h;if(f.isArray(a)){i=0;for(h=a.length;i<h;++i)c=a[i],c.index=i,c.id=c.id||String(i+1),b[c.id]=c}this._columnsById=b;if(this.model)this.model._cache.onSetColumns(this._columnsById)},row:function(a,b){typeof a=="number"&&!b&&(a=this.model.indexToId(a));if(this.model.idToIndex(a)>=
0)return this._rowObj=this._rowObj||this._mixin(new g(this),"row"),t(this._rowObj,{id:a});return null},column:function(a,b){var w;var c,i,h={};typeof a=="number"&&!b&&(w=(c=this._columns[a])&&c.id,a=w);if(c=this._columnsById[a]){this._colObj=this._colObj||this._mixin(new d(this),"column");for(i in c)this._colObj[i]===void 0&&(h[i]=c[i]);return t(this._colObj,h)}return null},cell:function(a,c,i){if(a=a instanceof g?a:this.row(a,i))if(c=c instanceof d?c:this.column(c,i))return this._cellObj=this._cellObj||
this._mixin(new b(this),"cell"),t(this._cellObj,{row:a,column:c});return null},columnCount:function(){return this._columns.length},rowCount:function(a){return this.model.size(a)},columns:function(a,b){return this._arr(this._columns.length,"column",a,b)},rows:function(a,b){return this._arr(this.model.size(),"row",a,b)},_uninit:function(){var a=this._modules,b;for(b in a){b=a[b].mod;if(b.getAPIPath){var c=b.getAPIPath();if(c){var i=void 0;for(i in c)delete this[i]}}b.destroy()}this.model&&this.model.destroy()},
_arr:function(a,b,c,i){for(var h=c||0,c=i>=0?c+i:a,i=[];h<c&&h<a;++h)i.push(this[b](h));for(var d in o)A(o[d])&&(i[d]=f.partial(o[d],i));return i},_preload:function(){var a,b=this._modules;for(a in b)a=b[a],a.mod.preload&&a.mod.preload(a.args)},_load:function(a){var b=[],c;for(c in this._modules)b.push(this._initMod(a,c));return new e(b,0,1)},_mixin:function(a,b){var c,i,h=this._modules;for(c in h)c=h[c].mod,i=c[b+"Mixin"],A(i)&&(i=i.apply(c)),f.mixin(a,i||{});return a},_create:function(b){var c=
this,h=c._modules={};u(b.modules,function(b){var d;d=b.moduleClass.prototype.name;h[d]||(h[d]={args:b,mod:d=new b.moduleClass(c,b),deps:a(b)},d.getAPIPath&&i(c,d.getAPIPath()))})},_initMod:function(a,b){var c=this._modules,i=c[b],h=i.mod,d=h.loaded;if(!i.done)i.done=1,(new e(o.map(o.filter(i.deps,function(a){return c[a]}),v(this,this._initMod,a)),0,1)).then(function(){h.load?h.load(i.args,a):d.fired<0&&d.callback()});return d}})})},"gridx/core/model/extensions/ClientFilter":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","../_Extension"],function(n,m,o,f,l){var e=o.hitch,k=m.forEach,g=m.indexOf;return n(l,{name:"clientFilter",priority:20,constructor:function(d,b){this.pageSize=b.pageSize||100;this._mixinAPI("filter","hasFilter");d.onFilterProgress=function(){};this.connect(d,"_msg","_receiveMsg")},clear:function(){this._ids=0;this._indexes={}},filter:function(){this.model._addCmd({name:"_cmdFilter",scope:this,args:arguments,async:1})},hasFilter:function(){return!!this._ids},
byIndex:function(d){var b=this._ids,c=this.inner,a=b&&b[d];return b?a&&c._call("byId",[a]):c._call("byIndex",arguments)},byId:function(d){return this.ids&&this._indexes[d]===void 0?null:this.inner._call("byId",arguments)},indexToId:function(d){return this._ids?this._ids[d]||void 0:this.inner._call("indexToId",arguments)},idToIndex:function(d){if(this._ids){var b=g(this._ids,d);return b>=0?b:void 0}return this.inner._call("idToIndex",arguments)},size:function(){return this._ids?this._ids.length:this.inner._call("size",
arguments)},when:function(d,b){var c=this,a=function(){c._ids&&c._mapWhenArgs(d);return c.inner._call("when",[d,b])};if(c._refilter&&(c._refilter=0,c._ids)){var i=new f;c._reFilter().then(function(){a().then(e(i,i.callback),e(i,i.errback))});return i}return a()},_cmdFilter:function(){var d=arguments;return this._filter.apply(this,d[d.length-1])},_filter:function(d){var b=this;b.size();b.clear();if(o.isFunction(d)){var c=[];return b.model.scan({start:0,pageSize:b.pageSize,whenScope:b,whenFunc:b.when},
function(a,r){var h,e,k,g=r+a.length;for(h=r;h<g;++h)if(e=b.indexToId(h),k=b.byIndex(h))d(k,e)&&(c.push(e),b._indexes[e]=h);else break}).then(function(){c.length==b.size()?b.clear():(b._ids=c,b.model._msg("filter",c))},0,b.model.onFilterProgress)}else{var a=new f;a.callback();return a}},_mapWhenArgs:function(d){var b=this,c=[],a=b._ids.length;d.id=m.filter(d.id,function(a){return b._indexes[a]!==void 0});k(d.range,function(i){if(!i.count||i.count<0){var d=a-i.start;if(d<=0)return;i.count=d}for(d=
0;d<i.count;++d){var h=b._mapIndex(d+i.start);h!==void 0&&c.push({start:h,count:1})}});d.range=c},_mapMoveArgs:function(d){var b=this;if(d.length==3){for(var c=[],a=d[0],i=d[0]+d[1];a<i;++a)c.push(b._mapIndex(a));d[0]=c;d[1]=b._mapIndex(d[2]);d.pop()}else d[0]=m.map(d[0],function(a){return b._mapIndex(a)}),d[1]=b._mapIndex(d[1])},_mapIndex:function(d){return this._indexes[this._ids[d]]},_moveFiltered:function(d,b,c){var a=this._ids.length;if(d>=0&&d<a&&b>0&&b<Infinity&&c>=0&&c<a&&(c<d||c>d+b)){var i=
[],a=d;for(d+=b;a<d;++a)i.push(this._mapIndex(a));this.inner._call("moveIndexes",[i,this._mapIndex(c)])}},_reFilter:function(){var d=this;return d.inner._call("when",[{id:d._ids,range:[]},function(){k(d._ids,function(b){var c=d.inner._call("idToIndex",[b]);d._indexes[b]=c});d._ids.sort(function(b,c){return d._indexes[b]-d._indexes[c]})}])},_onMoved:function(d){var b=this;k(b._ids,function(c){var a=b._indexes[c];d[a]!==void 0&&(b._indexes[c]=d[a])});b._ids.sort(function(c,a){return b._indexes[c]-b._indexes[a]})},
_receiveMsg:function(d,b){if(this._ids)d=="storeChange"?this._refilter=1:d=="moved"?this._onMoved(b):d=="beforeMove"&&this._mapMoveArgs(b)},_onNew:function(d){if(this._ids)this._ids.push(d),this._refilter=1;this.onNew.apply(this,arguments)},_onDelete:function(d,b,c){var a=this._indexes,i=this._ids;if(i){var r=g(i,d),h=a[d];r>=0&&i.splice(r,1);if(r>=0&&h!==void 0)for(r in b=r,a)a[r]>h&&--a[r];else b=void 0,this._refilter=1}this.onDelete(d,b,c)}})})},"url:gridx/templates/PaginationBar.html":"<div class='gridxPager'\r\n\t><table class='gridxPagerInner' cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\"\r\n\t\t><tr\r\n\t\t\t><td class=\"gridxPagerDescriptionTD\"\r\n\t\t\t\t><div class=\"gridxPagerDescription\"\r\n\t\t\t\t\tdata-dojo-attach-point=\"_descContainer\"\r\n\t\t\t\t></div\r\n\t\t\t></td\r\n\t\t\t><td class=\"gridxPagerStepperTD\"\r\n\t\t\t\t><div class=\"gridxPagerStepper\"\r\n\t\t\t\t\tdata-dojo-attach-point=\"_pageStepperContainer\"\r\n\t\t\t\t\t><span class='gridxPagerStepperBtn gridxPagerPrevPage'\r\n\t\t\t\t\t\ttabindex='${_tabIndex}'\r\n\t\t\t\t\t\ttitle='${prevPageTitle}'\r\n\t\t\t\t\t\taria-label='${prevPageWai}'\r\n\t\t\t\t\t\tpageindex='Prev',\r\n\t\t\t\t\t\tdata-dojo-attach-point='_prevPageBtn'\r\n\t\t\t\t\t\tdata-dojo-attach-event='onclick: _gotoPrevPage'\r\n\t\t\t\t\t\t><span class='gridxPagerA11yInner'>&nbsp;&lt;</span\r\n\t\t\t\t\t></span\r\n\t\t\t\t\t><span class='gridxPagerPages'\r\n\t\t\t\t\t\tdata-dojo-attach-point='_pageBtnContainer'\r\n\t\t\t\t\t\tdata-dojo-attach-event='onclick: _gotoPage, onmouseover: _onHoverPageBtn, onmouseout: _onHoverPageBtn'\r\n\t\t\t\t\t></span\r\n\t\t\t\t\t><span class='gridxPagerStepperBtn gridxPagerNextPage'\r\n\t\t\t\t\t\ttabindex='${_tabIndex}'\r\n\t\t\t\t\t\ttitle='${nextPageTitle}'\r\n\t\t\t\t\t\taria-label='${nextPageWai}'\r\n\t\t\t\t\t\tpageindex='Next',\r\n\t\t\t\t\t\tdata-dojo-attach-point='_nextPageBtn'\r\n\t\t\t\t\t\tdata-dojo-attach-event='onclick: _gotoNextPage'\r\n\t\t\t\t\t\t><span class='gridxPagerA11yInner'>&nbsp;&gt;</span\r\n\t\t\t\t\t></span\r\n\t\t\t\t></div\r\n\t\t\t></td\r\n\t\t\t><td class=\"gridxPagerSizeSwitchTD\"\r\n\t\t\t\t><div class=\"gridxPagerSizeSwitch\"\r\n\t\t\t\t\tdata-dojo-attach-point='_sizeSwitchContainer'\r\n\t\t\t\t\tdata-dojo-attach-event='onclick: _switchPageSize, onmouseover: _onHoverSizeBtn, onmouseout: _onHoverSizeBtn'\r\n\t\t\t\t></div\r\n\t\t\t\t><span></span\r\n\t\t\t></td\r\n\t\t\t><td class='gridxPagerGoto'\r\n\t\t\t\t><span class='gridxPagerGotoBtn'\r\n\t\t\t\t\ttabindex='${_tabIndex}'\r\n\t\t\t\t\ttitle='${gotoBtnTitle}'\r\n\t\t\t\t\taria-label='${gotoBtnWai}'\r\n\t\t\t\t\tdata-dojo-attach-point='_gotoBtn'\r\n\t\t\t\t\tdata-dojo-attach-event='onclick: _showGotoDialog'\r\n\t\t\t\t\t><span class='gridxPagerA11yInner'>&perp;</span\r\n\t\t\t\t></span\r\n\t\t\t></td\r\n\t\t></tr\r\n\t></table\r\n></div>\r\n",
"url:gridx/templates/FilterConfirmDialog.html":'<div class="gridxFilterConfirmDialogMessage">This will remove the filter and show all available records.</div\r\n><div class="gridxFilterConfirmDialogButtons"\r\n\t><input type="button" data-dojo-type="dijit.form.Button" label="Clear"\r\n\t/><input type="button" data-dojo-type="dijit.form.Button" label="Cancel"\r\n/></div>\r\n',"gridx/modules/select/_Base":function(){define(["dojo/_base/declare","dojo/_base/connect","../../core/_Module"],function(n,
m,o){return n(o,{getAPIPath:function(){var f={select:{}};f.select[this._type]=this;return f},preload:function(){var f=this,l=f.grid;f.subscribe("gridClearSelection_"+l.id,function(e){e!=f._type&&f.clear()});f.connect(l.body,"onRender","_onRender");f.arg("multiple")&&l.domNode.setAttribute("aria-multiselectable",!0);f._init()},enabled:!0,multiple:!0,holdingCtrl:!1,onSelected:function(){},onDeselected:function(){},onHighlightChange:function(){},_getMarkType:function(){},_select:function(f,l){var e=
1;this.arg("enabled")&&(this.arg("multiple")&&(l||this.arg("holdingCtrl"))?e=!this.isSelected(f):this.clear(),m.publish("gridClearSelection_"+this.grid.id,[this._type]),this._markById(f,e))}})})},"url:gridx/templates/FilterBar.html":'<input type="button" data-dojo-type="dijit.form.Button" data-dojo-props="\r\n\ticonClass: \'gridxFilterBarBtnIcon\',\r\n\tlabel: \'...\',\r\n\ttitle: \'Define filter.\'"\r\n/><div class="gridxFilterBarStatus"\r\n\t><span>No filter applied.</span\r\n\t><span class="gridxFilterBarCloseBtn" title="Hide"></span\r\n></div>\r\n',
"gridx/modules/pagination/DropDownPager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/store/Memory","./_PagerBase","../../util","dojo/text!../../templates/PaginationBarDD.html"],function(n,m,o,f,l,e){return n(f,{templateString:e,refresh:function(){this._createDescription();this._createPageStepper();this._createPageSizeSwitch()},_onSwitchPage:function(e){this._pageStepperSelect.set("value",e+1)},_onChangePageSize:function(){this._createPageStepper()},_onSizeChange:function(){this._createDescription();
this._createPageStepper()},_createPageStepper:function(){var e=this.module;if(this._toggleNode("gridxPagerStepper",e._exist(this.position,"stepper"))){var g=[],d,b=this.pagination,c=b.pageCount(),a=b.currentPage(),i=this._pageStepperSelect,r,h;for(r=0;r<c;++r)h=r+1,h={id:h,label:h,value:h},g.push(h),a==r&&(d=h);g=new o({data:g});i?(i.set("store",g),i.set("value",a+1)):(a=e.arg("stepperClass"),e=m.mixin({store:g,searchAttr:"label",item:d,"class":"gridxPagerStepperWidget",onChange:function(a){b.gotoPage(a-
1)}},e.arg("stepperProps")||{}),i=this._pageStepperSelect=new a(e),i.placeAt(this._pageStepperContainer,"last"),i.startup());i.set("disabled",c<=1)}},_createPageSizeSwitch:function(){var e=this.module;if(this._toggleNode("gridxPagerSizeSwitch",e._exist(this.position,"sizeSwitch"))){for(var g=[],d=this.pagination,b=d.pageSize(),c=e.arg("pageSizeAllText",this.pageSizeAll),a=this._sizeSwitchSelect,i=e.arg("sizes"),r=0,h=i.length;r<h;++r){var s=i[r],f=!(s>0);g.push({label:f?c:s,value:f?-1:s,selected:b==
s||f&&d.isAll()})}a?(a.removeOption(a.getOptions()),a.addOption(g)):(b=e.arg("sizeSwitchClass"),e=m.mixin({options:g,"class":"gridxPagerSizeSwitchWidget",onChange:function(a){d.setPageSize(a<0?0:a)}},e.arg("sizeSwitchProps")||{}),a=this._sizeSwitchSelect=new b(e),a.placeAt(this._sizeSwitchContainer,"last"),a.startup())}},_initFocus:function(){var e=this,g=e.module.grid.focus,d=e.position,b=e.focusPriority;g&&(g.registerArea({name:d+"PageStepper",priority:b,focusNode:e._pageStepperContainer,doFocus:function(b){l.stopEvent(b);
e._pageStepperSelect.focus();return!0}}),g.registerArea({name:d+"PageSizeSwitch",priority:b+0.001,focusNode:e._sizeSwitchContainer,doFocus:function(b){l.stopEvent(b);e._sizeSwitchSelect.focus();return!0}}))}})})},"gridx/modules/Body":function(){define(["dojo/_base/declare","dojo/_base/query","dojo/_base/array","dojo/dom-construct","dojo/dom-class","dojo/_base/Deferred","dojo/_base/sniff","dojo/keys","../core/_Module","../util","dojo/i18n!../nls/Body"],function(n,m,o,f,l,e,k,g,d,b,c){return n(d,{name:"body",
optional:["tree"],getAPIPath:function(){return{body:this}},preload:function(){var a=this.grid,b=this.domNode=a.bodyNode;a.emptyNode.innerHTML=c.loadingInfo;a._connectEvents(b,"_onMouseEvent",this);this._initFocus()},load:function(){var a=this,b=a.model,c=a.grid;a.batchConnect([b,"onDelete","_onDelete"],[b,"onSet","_onSet"],[b,"onSizeChange","_onSizeChange"],[c,"onRowMouseOver","_onRowMouseOver"],[c,"onCellMouseOver","_onCellMouseOver"],[c,"onCellMouseOut","_onCellMouseOver"],[c.bodyNode,"onmouseleave",
function(){var b=m(".gridxRowOver",a.domNode)[0];b&&l.remove(b,"gridxRowOver")}],[c,"setColumns",function(){a.refresh()}]);b.when({},function(){var h=a.rootCount,h=a.rootCount=h?h:b.size();a.visualCount=c.tree?c.tree.getVisualSize(a.rootStart,h):h;a.loaded.callback()})},destroy:function(){this.inherited(arguments);this.domNode.innerHTML=""},rowMixin:{node:function(){return this.grid.body.getRowNode({rowId:this.id})},visualIndex:function(){var a=this.id;return this.grid.body.getRowInfo({rowId:a,rowIndex:this.index(),
parentId:this.model.treePath(a).pop()}).visualIndex}},cellMixin:{node:function(){return this.grid.body.getCellNode({rowId:this.row.id,cellId:this.column.id})}},getRowNode:function(a){return(a=this._getRowNodeQuery(a))?m(a,this.domNode)[0]||null:null},getCellNode:function(a){var b=a.colId,c=this._getRowNodeQuery(a);if(c){if(!b&&typeof a.colIndex=="number")b=this.grid._columns[a.colIndex].id;c+=" [colid='"+b+"'].gridxCell";return m(c,this.domNode)[0]||null}return null},getRowInfo:function(a){var b=
this.model,c=this.grid,h=a.rowId;if(h)a.rowIndex=b.idToIndex(h),a.parentId=b.treePath(h).pop();if(typeof a.rowIndex=="number"&&a.rowIndex>=0)a.visualIndex=c.tree?c.tree.getVisualIndexByRowInfo(parentId,rowIndex,this.rootStart):a.rowIndex-this.rootStart;else if(typeof a.visualIndex=="number"&&a.visualIndex>=0)c.tree?(c=c.tree.getRowInfoByVisualIndex(a.visualIndex,this.rootStart),a.rowIndex=c.start,a.parentId=c.parentId):a.rowIndex=this.rootStart+a.visualIndex;else return a;a.rowId=h||b.indexToId(a.rowIndex,
a.parentId);return a},refresh:function(a){var b=this;return b.model.when({}).then(function(){var c=b.renderStart,h=b.renderCount;if(typeof a=="number"&&a>=0){a=c>a?c:a;var d=c+h-a,c=m('[visualindex="'+a+'"]',b.domNode)[0],h=[],g=[];if(c){var k=b._buildRows(a,d,h,g);if(k){f.place(k,c,"before");for(var k=0,l=g.length;k<l;++k)b.onAfterRow.apply(b,g[k])}}for(;c;)g=c.nextSibling,f.destroy(c),c=g;e.when(b._buildUncachedRows(h),function(){b.onRender(a,d)})}else b.renderRows(c,h,0,1),b.onForcedScroll()})},
refreshCell:function(a,b){var c=new e,h=this,d=h.model,g=h.grid,k=g._columns[b],f=k&&h.getCellNode({visualIndex:a,colId:k.id});if(f){var l,m=h.getRowInfo({visualIndex:a}),n=m.rowIndex,o=m.parentId;d.when({start:n,count:1,parentId:o},function(){if(l=d.byIndex(n,o))m.rowId=d.indexToId(n,o),f.innerHTML=h._buildCellContent(k,m,l.data,g.tree&&l.data[k.id]===void 0),h.onAfterCell(f,m,k,l)}).then(function(){c.callback(!!l)});return c}c.callback(0);return c},rootStart:0,rootCount:0,renderStart:0,renderCount:0,
visualStart:0,visualCount:0,autoUpdate:1,autoChangeSize:1,updateRootRange:function(a,b){var c=this.grid.tree,c=this.visualCount=c?c.getVisualSize(a,b):b;this.rootStart=a;this.rootCount=b;if(this.renderStart+this.renderCount>c&&(this.renderStart=c-this.renderCount,this.renderStart<0))this.renderStart=0,this.renderCount=c;if(!this.renderCount&&c)this.onForcedScroll()},renderRows:function(a,b,d,h){var s=this,g=s.grid,l="",m=[],n=[],o=s.domNode,x=g.emptyNode;if(b>0){x.innerHTML=c.loadingInfo;d!="top"&&
d!="bottom"&&s.model.free();l=s._buildRows(a,b,m,n);if(d=="top")s.renderCount+=s.renderStart-a,s.renderStart=a,f.place(l,o,"first");else if(d=="bottom")s.renderCount=a+b-s.renderStart,f.place(l,o,"last");else{s.renderStart=a;s.renderCount=b;d=h?o.scrollTop:0;o.scrollTop=0;if(k("ie"))for(;o.childNodes.length;)o.removeChild(o.firstChild);o.innerHTML=l;o.scrollTop=d;o.scrollLeft=g.hScrollerNode.scrollLeft;x.innerHTML=l?"":c.emptyInfo;s.onUnrender()}g=0;for(l=n.length;g<l;++g)s.onAfterRow.apply(s,n[g]);
e.when(s._buildUncachedRows(m),function(){s.onRender(a,b)})}else if(!{top:1,bottom:1}[d])o.scrollTop=0,o.innerHTML="",x.innerHTML=c.emptyInfo,s.onUnrender(),s.model.free()},unrenderRows:function(a,b){if(a>0){var c=0,h,d=this.domNode;if(b=="post")for(;c<a&&d.lastChild;++c)h=d.lastChild.getAttribute("rowid"),this.model.free(h),d.removeChild(d.lastChild),this.onUnrender(h);else{for(var e=d.scrollTop;c<a&&d.firstChild;++c)h=d.firstChild.getAttribute("rowid"),this.model.free(h),e-=d.firstChild.offsetHeight,
d.removeChild(d.firstChild),this.onUnrender(h);this.renderStart+=c;d.scrollTop=e>0?e:0}this.renderCount-=c;this.model.when()}},onAfterRow:function(){},onAfterCell:function(){},onRender:function(){},onUnrender:function(){},onDelete:function(){},onSet:function(){},collectCellWrapper:function(){},onMoveToCell:function(){},onForcedScroll:function(){},_getRowNodeQuery:function(a){var b;a.rowId?b="[rowid='"+a.rowId+"']":typeof a.rowIndex=="number"&&a.rowIndex>=0?(b="[rowindex='"+a.rowIndex+"']",a.parentId&&
(b+="[parentid='"+a.parentId+"']")):typeof a.visualIndex=="number"&&a.visualIndex>=0&&(b="[visualindex='"+a.visualIndex+"']");return b&&b+".gridxRow"},_buildRows:function(a,b,c,h){for(var b=a+b,d=[],e=this.model,g=this.domNode.scrollWidth;a<b;++a){var k=this.getRowInfo({visualIndex:a}),f=e.byIndex(k.rowIndex,k.parentId);d.push('<div class="gridxRow ',a%2?"gridxRowOdd":"",'" role="row" visualindex="',a);f?(e.keep(k.rowId),d.push('" rowid="',k.rowId,'" rowindex="',k.rowIndex,'" parentid="',k.parentId,
'">',this._buildCells(f.data,k),"</div>"),h.push([k,f])):(d.push('"><div class="gridxRowDummy" style="width:',g,'px;"></div></div>'),k.start=k.rowIndex,k.count=1,c.push(k))}return d.join("")},_buildUncachedRows:function(a){return a.length&&this.model.when(a,function(){for(var b=0,c=a.length;b<c;++b)this._buildRowContent(a[b])},this)},_buildRowContent:function(a){var b=this.model,c=m('[visualindex="'+a.visualIndex+'"]',this.domNode)[0];if(c){var h=b.byIndex(a.rowIndex,a.parentId);h?(a.rowId=b.indexToId(a.rowIndex,
a.parentId),b.keep(a.rowId),c.setAttribute("rowid",a.rowId),c.setAttribute("rowindex",a.rowIndex),c.setAttribute("parentid",a.parentId||""),c.innerHTML=this._buildCells(h.data,a),this.onAfterRow(a,h)):console.error("Row is not in cache:",a.rowIndex)}},_buildCells:function(a,b){for(var c,h,d=this.grid,e=d._columns,g=d.focus&&d.focus.currentArea()=="body",k=['<table class="gridxRowTable" role="presentation" border="0" cellpadding="0" cellspacing="0"><tr>'],f=0,l=e.length;f<l;++f)c=e[f],h=d.tree&&a[c.id]===
void 0,k.push('<td class="gridxCell '),h&&k.push("gridxPaddingCell"),g&&this._focusCellRow===b.visualIndex&&this._focusCellCol===f&&k.push("gridxCellFocus"),k.push('" role="gridcell" tabindex="-1" colid="',c.id,'" style="width: ',c.width,'">',this._buildCellContent(c,b,a,h),"</td>");k.push("</tr></table>");return k.join("")},_buildCellContent:function(a,b,c,h){var d="";h||(d=this._wrapCellData(a.decorator?a.decorator(c[a.id],b.rowId,b.visualIndex):c[a.id],b.rowId,a.id));return!d&&k("ie")<8?"$nbsp;":
d},_wrapCellData:function(a,b,c){var h=[];this.collectCellWrapper(h,b,c);var d=h.length-1;for(d>0&&h.sort(function(a,b){return a.priority-b.priority});d>=0;--d)a=h[d].wrap(a,b,c);return a},_onMouseEvent:function(a,b){var c=this.grid,h="onCell"+a,d="onRow"+a;if(c._isConnected(h)||c._isConnected(d))if(this._decorateEvent(b),b.rowId){if(b.columnId)c[h](b);c[d](b)}},_decorateEvent:function(a){for(var b=a.target||a.originalTarget,c=this.grid,h;b&&b!=c.bodyNode;b=b.parentNode){h=b.tagName.toLowerCase();
if(h=="td"&&l.contains(b,"gridxCell")){var d=c._columnsById[b.getAttribute("colid")];a.cellNode=b;a.columnId=d.id;a.columnIndex=d.index}if(h=="div"&&l.contains(b,"gridxRow")){a.rowId=b.getAttribute("rowid");a.parentId=b.getAttribute("parentid");a.rowIndex=parseInt(b.getAttribute("rowindex"),10);a.visualIndex=parseInt(b.getAttribute("visualindex"),10);break}}},_onSet:function(a,b,c){if(this.autoUpdate){var h=this.getRowNode({rowId:a});if(h&&c){var d=this.getRowInfo({rowId:a,rowIndex:b});h.innerHTML=
this._buildCells(c.data,d);this.onAfterRow(d,c);this.onSet(a,b,c);this.onRender(b,1)}}},_onDelete:function(a){if(this.autoUpdate){var b=this.getRowNode({rowId:a});if(b){for(var c=0,h=parseInt(b.getAttribute("rowindex"),10),d=b.getAttribute("parentid"),e={id:1},g=[b],k,l=[a],b=b.nextSibling;b&&e[b.getAttribute("parentid")];b=b.nextSibling)k=b.getAttribute("rowid"),l.push(k),g.push(b),e[k]=1;for(;b;b=b.nextSibling)b.getAttribute("parentid")==d&&b.setAttribute("rowindex",parseInt(b.getAttribute("rowindex"),
10)-1),b.setAttribute("visualindex",parseInt(b.getAttribute("visualindex"),10)-1),++c;o.forEach(g,f.destroy);o.forEach(l,this.onUnrender,this);this.autoChangeSize&&this.rootStart===0&&!d&&this.updateRootRange(0,this.rootCount-1);this.onDelete(a,h);this.onRender(h,c)}}},_onSizeChange:function(a,b){if(this.autoChangeSize&&this.rootStart===0&&(this.rootCount===b||b<0))this.updateRootRange(0,a),this.refresh()},_onRowMouseOver:function(a){var b=m("> div.gridxRowOver",this.domNode)[0],a=this.getRowNode({rowId:a.rowId});
b!=a&&(b&&l.remove(b,"gridxRowOver"),l.add(a,"gridxRowOver"))},_onCellMouseOver:function(a){l.toggle(a.cellNode,"gridxCellOver",a.type=="mouseover")},_focusCellCol:0,_focusCellRow:0,_initFocus:function(){var a=this,b=a.grid,c=b.isLeftToRight(),h=b.bodyNode,d=b.focus;d&&(d.registerArea({name:"body",priority:1,focusNode:h,scope:a,doFocus:a._doFocus,doBlur:a._blurCell,onFocus:a._onFocus,onBlur:a._blurCell}),a.connect(b.mainNode,"onkeypress",function(h){if(d.currentArea()=="body"&&(!b.tree||!h.ctrlKey)){d._noBlur=
1;var e={},k=c?1:-1;e[g.LEFT_ARROW]=[0,-k,h];e[g.RIGHT_ARROW]=[0,k,h];e[g.UP_ARROW]=[-1,0,h];e[g.DOWN_ARROW]=[1,0,h];a._moveFocus.apply(a,e[h.keyCode]||[]);d._noBlur=0}}),a.connect(b,"onCellClick",function(b){a._focusCellRow=b.visualIndex;a._focusCellCol=b.columnIndex}),a.connect(a,"onRender",function(b,c){a._focusCellRow>=b&&a._focusCellRow<b+c&&d.currentArea()=="body"&&a._focusCell()}),b.hScroller&&a.connect(h,"onscroll",function(){b.hScroller.scroll(!c&&(k("webkit")||k("ie")<8)?h.scrollWidth-h.offsetWidth-
h.scrollLeft:h.scrollLeft)}))},_doFocus:function(a){return this._focusCell(a)||this._focusCell(0,-1,-1)},_focusCell:function(a,c,d){b.stopEvent(a);d=d>=0?d:this._focusCellCol;c=c>=0?c:this._focusCellRow;if(a=this.getCellNode({visualIndex:c,colId:this.grid._columns[d].id})){var h=m(".gridxCellFocus",this.domNode)[0];if(a!=h)h&&l.remove(h,"gridxCellFocus"),l.add(a,"gridxCellFocus"),this._focusCellRow=c,this._focusCellCol=d;k("ie")<8||a.focus()}else if(!this.grid.rowCount())return this.grid.emptyNode.focus(),
!0;return a},_moveFocus:function(a,c,d){if(a||c){b.stopEvent(d);var h,e,g=this,k=g.grid,f=k._columns,l=g.visualCount;h=g._focusCellRow+a;h=h<0?0:h>=l?l-1:h;e=g._focusCellCol+c;e=e<0?0:e>=f.length?f.length-1:e;k.vScroller.scrollToRow(h).then(function(){g._focusCell(0,h,e);g.onMoveToCell(h,e,d)})}},_nextCell:function(a,b,c,h){var d=new e,g=this.grid,k=g._columns.length,f=this.visualCount;do if(b+=c,b<0||b>=k)a+=c,b=b<0?k-1:0,a<0?(a=f-1,b=k-1):a>=f&&(b=a=0);while(!h(a,b));g.vScroller.scrollToRow(a).then(function(){d.callback({r:a,
c:b})});return d},_blurCell:function(){var a=m(".gridxCellFocus",this.domNode)[0];a&&l.remove(a,"gridxCellFocus");return!0},_onFocus:function(a){for(a=a.target;a&&a!=this.domNode;a=a.parentNode)if(l.contains(a,"gridxCell")){for(var b=this.grid._columnsById[a.getAttribute("colid")].index;!l.contains(a,"gridxRow");)a=a.parentNode;return this._focusCell(0,parseInt(a.getAttribute("visualindex"),10),b)}return!1}})})},"gridx/nls/SummaryBar":function(){define({root:{summary:"${0} items",summaryWithSelection:"Total: ${0} Selected: ${1}"}})},
"gridx/modules/Printer":function(){define(["../core/_Module","dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred","dojo/_base/xhr","dojo/_base/array","dojo/_base/sniff","dojo/_base/window"],function(n,m,o,f,l,e,k,g){function d(b){var c=new f,h=a(c,c.callback);b?l.get({url:b}).then(h,function(){h("")}):h("");return c}function b(a){var b,h=function(b){b=b.document;b.open();b.write(a);b.close()};if(g.print)if(k("chrome")||k("opera"))b=g.open("javascript:''","","status=0,menubar=0,location=0,toolbar=0,width=1,height=1,resizable=0,scrollbars=0"),
h(b),b.print(),b.close();else{if(!c){c=g.doc.createElement("iframe");c.frameBorder=0;b=c.style;b.position="absolute";b.width=b.height="1px";b.right=b.bottom=0;b.border="none";b.overflow="hidden";if(!k("ie"))b.visibility="hidden";g.body().appendChild(c)}b=c.contentWindow;h(b);b.focus();b.print()}else console.warn("Print function is not available")}var c,a=o.hitch;return m(n,{name:"printer",forced:["exportTable"],getAPIPath:function(){return{printer:this}},print:function(a){return this.toHTML(a).then(b)},
toHTML:function(b){var c=this,h=new f;d(b.styleSrc).then(function(d){c.grid.exporter.toTable(b).then(function(a){h.callback(c._wrap(b,d,a))},a(h,h.errback),a(h,h.progress))});return h},_wrap:function(a,b,c){return['<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html ',this.grid.isLeftToRight()?"":'dir="rtl"',"><head><title>",a.title||"",'</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><style type="text/css">',
b,'</style><style type="text/css">',a.style||"","</style>",a.customHead||"","</head><body>",a.description||"",c,"</body></html>"].join("")}})})},"gridx/modules/AutoScroll":function(){define(["dojo/_base/declare","dojo/_base/window","dojo/dom-geometry","../core/_Module"],function(n,m,o,f){return f.register(n(f,{name:"autoScroll",constructor:function(){this.connect(m.doc,"mousemove","_onMouseMove")},getAPIPath:function(){return{autoScroll:this}},enabled:!1,vertical:!0,horizontal:!0,margin:20,_timeout:100,
_step:10,_maxMargin:100,_onMouseMove:function(f){if(this.arg("enabled")){var e,k,g=this.grid,d=this.arg("margin"),b=o.position(g.bodyNode);if(this.arg("vertical")&&g.vScroller)e=f.clientY-b.y-d,k=e+2*d-b.h,this._vdir=e<0?e:k>0?k:0;if(this.arg("horizontal")&&g.hScroller)e=f.clientX-b.x-d,k=e+2*d-b.w,this._hdir=e<0?e:k>0?k:0;this._handler||this._scroll()}},_scroll:function(){var f=this;if(f.arg("enabled")){var e,k;e=f.grid;var g=f._maxMargin,d=f._step,b=f._vdir,c=f._hdir;f.arg("vertical")&&b&&(k=Math.min(g,
Math.abs(b))/d,e.vScroller.domNode.scrollTop+=(k<1?1:k)*d*(b>0?1:-1),k=1);f.arg("horizontal")&&c&&(k=Math.min(g,Math.abs(c))/d,e.hScroller.domNode.scrollLeft+=(k<1?1:k)*d*(c>0?1:-1),k=1);if(k){f._handler=setTimeout(function(){f._scroll()},f._timeout);return}}delete f._handler}}))})},"gridx/modules/exporter/Table":function(){define(["dojo/_base/declare","dojo/_base/lang","../../core/_Module","./Exporter"],function(n,m,o){function f(f,e){var k=f.columnWidth,k=k&&k[e.id]||(f.natualWidth?"":e.getWidth())||
"auto";return[' colid="',e.id,'" style="width:',k,'"'].join("")}return n(o,{name:"exportTable",forced:["exporter"],getAPIPath:function(){return{exporter:{toTable:m.hitch(this,this.toTable)}}},toTable:function(f){return this.grid.exporter._export(this,f||{})},initialize:function(f){this._rst=['<table class="grid"',f.natualWidth?"":' style="table-layout:fixed;"',' border="0" cellpadding="0" cellspacing="0">']},beforeHeader:function(){this._rst.push('<thead><tr class="grid_header">')},handleHeaderCell:function(l,
e){var k=l.column;this._rst.push('<th class="grid_header_cell"',f(e,k),">",k.name(),"</th>")},afterHeader:function(){this._rst.push("</tr><thead>")},beforeBody:function(){this._rst.push("<tbody>")},beforeRow:function(f){var f=f.row,e=f.index();this._rst.push('<tr class="grid_row grid_row_',e%2?"even":"odd",'" rowid="',f.id,'" rowindex="',e,'">')},handleCell:function(l,e){this._rst.push('<td class="grid_cell"',f(e,l.column),">",l.data,"</td>")},afterRow:function(){this._rst.push("</tr>")},afterBody:function(){this._rst.push("</tbody></table>")},
getResult:function(){return this._rst.join("")}})})},"gridx/nls/FilterBar":function(){define({root:{clearFilterDialogTitle:"Clear Filter",filterDefDialogTitle:"Filter",ruleTitleTemplate:"Rule ${0}",conditionEqual:"equal",conditionNotEqual:"does not equal",conditionLess:"is less than",conditionLessEqual:"less than or equal",conditionGreater:"is greater than",conditionGreaterEqual:"greater than or equal",conditionContain:"contains",conditionIs:"is",conditionStartWith:"starts with",conditionEndWith:"ends with",
conditionNotContain:"does not contain",conditionIsNot:"is not",conditionNotStartWith:"does not start with",conditionNotEndWith:"does not end with",conditionBefore:"before",conditionAfter:"after",conditionRange:"range",conditionIsEmpty:"is empty",all:"all",any:"any",relationAll:"all rules",waiRelAll:"Match all of the following rules:",relationAny:"any rules",waiRelAny:"Match any of the following rules:",relationMsgFront:"Match",relationMsgTail:"",and:"and",or:"or",addRuleButton:"Add Rule",waiAddRuleButton:"Add a new rule",
removeRuleButton:"Remove Rule",waiRemoveRuleButtonTemplate:"Remove rule ${0}",cancelButton:"Cancel",waiCancelButton:"Cancel this dialog",clearButton:"Clear",waiClearButton:"Clear the filter",filterButton:"Filter",waiFilterButton:"Submit the filter",columnSelectLabel:"Column",waiColumnSelectTemplate:"Column for rule ${0}",conditionSelectLabel:"Condition",waiConditionSelectTemplate:"Condition for rule ${0}",valueBoxLabel:"Value",waiValueBoxTemplate:"Enter value to filter for rule ${0}",rangeTo:"to",
rangeTemplate:"from ${0} to ${1}",statusTipHeaderColumn:"Column",statusTipHeaderCondition:"Rules",statusTipTitle:"Filter Bar",statusTipMsg:"Click the filter bar here to filter on values in ${0}.",anycolumn:"any column",statusTipTitleNoFilter:"Filter Bar",statusTipTitleHasFilter:"Filter",statusTipRelPre:"Match",statusTipRelPost:"rules.",statusTipHeaderAll:"Match all rules.",statusTipHeaderAny:"Match any rules.",defaultItemsName:"items",filterBarMsgHasFilterTemplate:"${0} of ${1} ${2} shown.",filterBarMsgNoFilterTemplate:"No filter applied",
filterBarDefButton:"Define filter",waiFilterBarDefButton:"Filter the table",a11yFilterBarDefButton:"Filter...",filterBarClearButton:"Clear filter",waiFilterBarClearButton:"Clear the filter",closeFilterBarBtn:"Close filter bar",clearFilterMsg:"This will remove the filter and show all available records.",anyColumnOption:"Any Column",trueLabel:"True",falseLabel:"False"}})},"gridx/modules/filter/Filter":function(){define(["../../core/_Module","../../core/model/extensions/ClientFilter","../../core/model/extensions/Query",
"dojo/_base/declare","dojo/_base/array","dojo/_base/lang"],function(n,m,o,f,l,e){function k(b,c,a){e.isFunction(a)&&(b=a(b));switch(c){case "number":return parseFloat(b,10);case "boolean":return!!b;case "date":return b=new Date(b),b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0),b.getTime();case "time":return b=new Date(b),b.setDate(1),b.setMonth(0),b.setFullYear(2E3),b.getTime();default:return String(b)}}function g(b,c,a,d){e.isArray(a)&&(a=l.map(a,function(a){return a.expr}));
return e.mixin(b,{expr:e.mixin({op:c,data:a},d||{})})}function d(b,c,a,d,e){c=String(c.apply(0,b));b=String(a.apply(0,b));d||(c=c.toLowerCase(),b=b.toLowerCase());return e(c,b)}n=f(n,{name:"filter",modelExtensions:[m,o],getAPIPath:function(){return{filter:this}},constructor:function(){this.setFilter(this.arg("preCondition"),1)},serverMode:!1,setupFilterQuery:function(b){return b},setFilter:function(b,c){var a=this.model;if(b!=this._checker)this._checker=b,this.arg("serverMode")?a.query(this.setupFilterQuery(b.expr)):
(a.filter(b),c||this.grid.body.refresh())},getFilter:function(){return this._checker}});return e.mixin(n,{column:function(b,c,a,d){c=String(c||"string").toLowerCase();return g(function(e){return k(e[d?"rawData":"data"][b],c,a)},c,b,{isCol:!0})},value:function(b,c,a){c=String(c||typeof b).toLowerCase();b=k(b,c,a);return g(function(){return b},c,b)},isEmpty:function(b,c){return g(function(){var a=b.apply(0,arguments);return c?l.indexOf(c,a)>=0:a===""||a===null||a===void 0},"isEmpty",[b])},and:function(){var b=
l.filter(arguments,function(b){return e.isFunction(b)});return g(function(){var c=arguments;return l.every(b,function(a){return a.apply(0,c)})},"and",b)},or:function(){var b=l.filter(arguments,function(b){return e.isFunction(b)});return g(function(){var c=arguments;return l.some(b,function(a){return a.apply(0,c)})},"or",b)},not:function(b){return g(function(){return!b.apply(0,arguments)},"not",[b])},equal:function(b,c){return g(function(){return b.apply(0,arguments)===c.apply(0,arguments)},"equal",
[b,c])},greater:function(b,c){return g(function(){return b.apply(0,arguments)>c.apply(0,arguments)},"greater",[b,c])},less:function(b,c){return g(function(){return b.apply(0,arguments)<c.apply(0,arguments)},"less",[b,c])},greaterEqual:function(b,c){return g(function(){return b.apply(0,arguments)>=c.apply(0,arguments)},"greaterEqual",[b,c])},lessEqual:function(b,c){return g(function(){return b.apply(0,arguments)<=c.apply(0,arguments)},"lessEqual",[b,c])},match:function(b,c){return g(function(){return String(b.apply(0,
arguments)).search(c)>=0},"match",[b,{expr:{op:"regex",data:c}}])},contain:function(b,c,a){return g(function(){return d(arguments,b,c,a,function(a,b){return a.indexOf(b)>=0})},"contain",[b,c])},startWith:function(b,c,a){return g(function(){return d(arguments,b,c,a,function(a,b){return a.substring(0,b.length)===b})},"startWith",[b,c])},endWith:function(b,c,a){return g(function(){return d(arguments,b,c,a,function(a,b){return a.substring(a.length-b.length)===b})},"endWith",[b,c])}})})},"gridx/modules/dnd/_Dnd":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/_base/Deferred","dojo/dom-construct","dojo/dom-geometry","dojo/dom-class","dojo/dom-style","dojo/dom","dojo/_base/window","dojo/_base/sniff","dojo/dnd/Source","dojo/dnd/Manager","../../core/_Module","../AutoScroll"],function(n,m,o,f,l,e,k,g,d,b,c,a,i){var r=m.hitch;return i.register(n(i,{name:"_dnd",constructor:function(){var a=this.grid,b=d.doc;this.accept=[];this._profiles={};this._selectStatus={};this._node=f.create("div");this.batchConnect([a,"onCellMouseOver","_checkDndReady"],
[a,"onCellMouseOut","_dismissDndReady"],[a,"onCellMouseDown","_beginDnd"],[b,"onmouseup","_endDnd"],[b,"onmousemove","_onMouseMove"]);this.subscribe("/dnd/cancel","_endDnd")},load:function(){var a=this.grid.bodyNode;this._source=new c(a,{isSource:!1,accept:this.accept,getSelectedNodes:function(){return[0]},getItem:r(this,"_getItem"),checkAcceptance:r(this,"_checkAcceptance"),onDraggingOver:r(this,"_onDraggingOver"),onDraggingOut:r(this,"_onDraggingOut"),onDropExternal:r(this,"_onDropExternal"),onDropInternal:r(this,
"_onDropInternal")});b("ff")&&this._fixFF(this._source,a);this._source.grid=this.grid;this._saveSelectStatus();this.loaded.callback()},destory:function(){this.inherited(arguments);this._source.destory();f.destroy(this._node)},getAPIPath:function(){return{dnd:{_dnd:this}}},profile:null,register:function(a,b){this._profiles[a]=b;[].push.apply(this.accept,b.arg("accept"))},_fixFF:function(a){return this.connect(d.doc,"onmousemove",function(b){var c=l.position(a.node),d=b.clientX,b=b.clientY,i=a._alreadyIn;
isIn=b>=c.y&&b<=c.y+c.h&&d>=c.x&&d<=c.x+c.w;if(!i&&isIn)a._alreadyIn=1,a.onOverEvent();else if(i&&!isIn)a._alreadyIn=0,a.onOutEvent()})},_onMouseMove:function(a){this._alreadyIn&&(this._dnding||this._extDnding)&&this._markTargetAnchor(a)},_saveSelectStatus:function(a){var b,c,d=this.grid.select;if(d)for(b in d)if((c=d[b])&&m.isObject(c))if(this._selectStatus[b]=c.arg("enabled"),a!==void 0)c.enabled=a},_loadSelectStatus:function(){var a,b,c=this.grid.select;if(c)for(a in c)if((b=c[a])&&m.isObject(b))b.enabled=
this._selectStatus[a]},_checkDndReady:function(a){var b,c;if(!this._dndReady&&!this._dnding&&!this._extDnding)for(b in this._profiles)if(c=this._profiles[b],c.arg("enabled")&&c._checkDndReady(a)){this.profile=c;this._saveSelectStatus(!1);e.add(d.body(),"gridxDnDReadyCursor");this._dndReady=1;break}},_dismissDndReady:function(){if(this._dndReady)this._loadSelectStatus(),this._dndReady=0,e.remove(d.body(),"gridxDnDReadyCursor")},_beginDnd:function(b){var c=this;c._checkDndReady(b);if(c._dndReady){var d=
c.profile,i=a.manager();c._source.isSource=!0;c._source.canNotDragOut=!d.arg("provide").length;c._node.innerHTML=d._buildDndNodes();c._oldStartDrag=i.startDrag;i.startDrag=r(c,"_startDrag",b);if(c.avatar)c._oldMakeAvatar=i.makeAvatar,i.makeAvatar=function(){return new c.avatar(i)};i._dndInfo={cssName:d._cssName,count:d._getDndCount()};d._onBeginDnd(c._source);g.setSelectable(c.grid.domNode,!1)}},_endDnd:function(){var b=a.manager();this._source.isSource=!1;this._alreadyIn=0;delete b._dndInfo;if(this._oldStartDrag)b.startDrag=
this._oldStartDrag,delete this._oldStartDrag;if(this._oldMakeAvatar)b.makeAvatar=this._oldMakeAvatar,delete this._oldMakeAvatar;if(this._dndReady||this._dnding||this._extDnding)this._dnding=this._extDnding=0,this._destroyUI(),g.setSelectable(this.grid.domNode,!0),e.remove(d.body(),"gridxDnDReadyCursor"),this.profile._onEndDnd(),this._loadSelectStatus()},_createUI:function(){e.add(d.body(),"gridxDnDCursor");if(this.grid.autoScroll)this.profile._onBeginAutoScroll(),this.grid.autoScroll.enabled=!0},
_destroyUI:function(){this._unmarkTargetAnchor();e.remove(d.body(),"gridxDnDCursor");if(this.grid.autoScroll)this.profile._onEndAutoScroll(),this.grid.autoScroll.enabled=!1},_createTargetAnchor:function(){return f.create("div",{"class":"gridxDnDAnchor"})},_markTargetAnchor:function(a){if(this._extDnding||this.profile.arg("canRearrange")){var b=this._targetAnchor,c=l.position(this.grid.mainNode);if(!b)b=this._targetAnchor=this._createTargetAnchor(),b.style.display="none",this.grid.mainNode.appendChild(b);
e.add(b,"gridxDnDAnchor"+this.profile._cssName);(a=this.profile._calcTargetAnchorPos(a,c))?(k.set(b,a),b.style.display="block"):b.style.display="none"}},_unmarkTargetAnchor:function(){var a=this._targetAnchor;if(a)a.style.display="none",e.remove(a,"gridxDnDAnchor"+this.profile._cssName)},_startDrag:function(b,c,d,i){if(this._dndReady&&c===this._source)this._oldStartDrag.call(a.manager(),c,this._node.childNodes,i),this._dndReady=0,this._dnding=this._alreadyIn=1,this._createUI(),this._markTargetAnchor(b)},
_getItem:function(a){return{type:this.profile.arg("provide"),data:this.profile._getItemData(a)}},_checkAcceptance:function(a){var b=function(a){for(var b={},c=a.length-1;c>=0;--c)b[a[c]]=1;return b},d=c.prototype.checkAcceptance;if(d.apply(this._source,arguments)){if(a.grid===this.grid)return this.profile.arg("canRearrange");if(!a.canNotDragOut)for(var i in this._profiles){var e=this._profiles[i],g=d.apply({accept:b(e.arg("accept"))},arguments);if(e.arg("enabled")&&g&&(!e.checkAcceptance||e.checkAcceptance.apply(e,
arguments)))return this.profile=e,this._extDnding=1,!0}}return!1},_onDraggingOver:function(){if(this._dnding||this._extDnding)this._alreadyIn=1,this._createUI()},_onDraggingOut:function(){if(this._dnding||this._extDnding)this._alreadyIn=0,this._destroyUI()},_onDropInternal:function(a,b){this.profile._onDropInternal(a,b)},_onDropExternal:function(a,b,c){var d=this,b=d.profile._onDropExternal(a,b,c);o.when(b,function(){if(!c)if(a.grid)a.grid.dnd._dnd.profile.onDraggedOut(d._source);else a.deleteSelectedNodes()})}}))})},
"gridx/modules/VLayout":function(){define(["dojo/_base/declare","dojo/dom-geometry","dojo/DeferredList","../core/_Module"],function(n,m,o,f){return n(f,{name:"vLayout",getAPIPath:function(){return{vLayout:this}},preload:function(){var f=this,e=f.grid;f.connect(e,"_onResizeEnd",function(e,g){var d,b=[];for(d in g)b.push(g[d]);(new o(b)).then(function(){f.reLayout()})});e.autoHeight?f.connect(e.body,"onRender","reLayout"):f.connect(e,"setColumns",function(){setTimeout(function(){f.reLayout()},0)})},
load:function(f,e){var k=this;e.then(function(){k._defs&&k._mods?(new o(k._defs)).then(function(){k._layout();k.loaded.callback()}):k.loaded.callback()})},register:function(f,e,k,g,d){this._defs=this._defs||[];this._mods=this._mods||{};this._mods[k]=this._mods[k]||[];this._defs.push(d||f.loaded);this._mods[k].push({p:g||0,mod:f,nodeName:e})},reLayout:function(){var f,e=0,k;for(f in this._mods)(k=this.grid[f])&&(e+=m.getMarginBox(k).h);this._updateHeight(e)},_layout:function(){var f,e=0,k=this._mods,
g,d,b,c,a;for(f in k)if(g=this.grid[f]){b=k[f];b.sort(function(a,b){return a.p-b.p});for(d=0;d<b.length;++d)c=b[d].mod,a=b[d].nodeName,c&&c[a]&&g.appendChild(c[a]);e+=m.getMarginBox(g).h}this._updateHeight(e)},_updateHeight:function(f){var e=this.grid,k=e.domNode,g=e.mainNode.style;e.autoHeight?e.vScroller.loaded.then(function(){var d=e.bodyNode.lastChild,d=d?d.offsetTop+d.offsetHeight:0;k.style.height=d+f+"px";g.height=d+"px"}):g.height=k.clientHeight-f+"px"}})})},"gridx/modules/ColumnResizer":function(){define(["dojo/_base/declare",
"dojo/_base/sniff","dojo/_base/window","dojo/dom","dojo/dom-style","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/query","../core/_Module"],function(n,m,o,f,l,e,k,g,d,b){function c(a){var b=a.target;if(b){if(/table/i.test(b.tagName)){for(var a=a.offsetX||a.layerX||0,c=0,b=b.rows[0].cells;a>0;)a-=b[c].offsetWidth,c++;return b[c]||null}for(;b&&b.tagName;){if(b.tagName.toLowerCase()=="th")return b;b=b.parentNode}}return null}var a=e.remove;return n(b,{name:"columnResizer",minWidth:20,
detectWidth:5,load:function(){var a=this.grid;this.batchConnect([a.header.innerNode,"mousemove","_mousemove"],[a,"onHeaderMouseOut","_mouseout"],[a,"onHeaderMouseDown","_mousedown",this,this.name],[o.doc,"mousemove","_docMousemove"],[o.doc,"onmouseup","_mouseup"]);this.loaded.callback()},getAPIPath:function(){return{columnResizer:this}},columnMixin:{setWidth:function(a){this.grid.columnResizer.setWidth(this.id,a)}},setWidth:function(a,b){var c=this.grid,e=this.arg("minWidth"),g,b=parseInt(b,10);b<
e&&(b=e);c._columnsById[a].width=b+"px";d('[colid="'+a+'"]',c.domNode).forEach(function(a){g||(g=m("webkit")?a.offsetWidth:l.get(a,"width"));a.style.width=b+"px"});c.header.onRender();c.body.onRender();c.vLayout.reLayout();this.onResize(a,b,g)},onResize:function(){},_mousemove:function(b){var d=c(b),h=this.grid._eventFlags;if(d&&(this._resizing&&a(d,"gridxHeaderCellOver"),!this._resizing&&d&&!this._ismousedown))b=this._readyToResize=this._isInResizeRange(b),h.onHeaderMouseDown=h.onHeaderCellMouseDown=
b?this.name:void 0,e.toggle(o.body(),"gridxColumnResizing",b),b&&a(d,"gridxHeaderCellOver")},_docMousemove:function(a){this._resizing&&this._updateResizerPosition(a)},_mouseout:function(){if(!this._resizing)this._readyToResize=0,a(o.body(),"gridxColumnResizing")},_updateResizerPosition:function(a){var b=a.pageX-this._startX,c=this._targetCell,d=this.grid,e=d.hScroller,g=0,a=a.pageX-this._gridX,g=this.arg("minWidth");c.offsetWidth+b<g&&(a=this._startX-this._gridX-c.offsetWidth+g);b=e&&e.container.offsetHeight?
e.container:d.bodyNode;g=b.parentNode.offsetTop+b.offsetHeight-d.header.domNode.offsetTop;l.set(this._resizer,{top:d.header.domNode.offsetTop+"px",left:a+"px",height:g+"px"})},_showResizer:function(a){if(!this._resizer)this._resizer=k.create("div",{className:"gridxColumnResizer"},this.grid.domNode,"last"),this.connect(this._resizer,"mouseup","_mouseup");this._resizer.style.display="block";this._updateResizerPosition(a)},_hideResizer:function(){this._resizer.style.display="none"},_mousedown:function(a){var b=
this.grid.bodyNode;this._readyToResize?(f.setSelectable(this.grid.domNode,!1),o.doc.onselectstart=function(){return!1},this._resizing=1,this._startX=a.pageX,this._gridX=g.position(b).x-b.offsetLeft,this._showResizer(a)):this._ismousedown=1},_mouseup:function(b){this._ismousedown=0;if(this._resizing){this._readyToResize=this._resizing=0;a(o.body(),"gridxColumnResizing");f.setSelectable(this.grid.domNode,!0);o.doc.onselectstart=null;var c=this._targetCell,b=b.pageX-this._startX,b=(m("webkit")?c.offsetWidth:
l.get(c,"width"))+b,d=this.arg("minWidth");b<d&&(b=d);this.setWidth(c.getAttribute("colid"),b);this._hideResizer()}},_isInResizeRange:function(a){var b=c(a),d;var e=a.target,g=c(a);if(g)if(/table/i.test(e.tagName))d=0;else{d=a.offsetX;if(d==void 0)d=a.layerX;/th/i.test(e.tagName)||(d+=e.offsetLeft);m("ff")&&/th/i.test(e.tagName)&&(a=d-parseInt(g.parentNode.parentNode.parentNode.style.marginLeft,10)-g.offsetLeft-g.offsetParent.offsetLeft,a>=0&&(d=a))}else d=1E5;a=this.arg("detectWidth");if(d<a)return!!(this._targetCell=
b.previousSibling);else if(d>b.offsetWidth-a&&d<=b.offsetWidth)return this._targetCell=b,1;return 0}})})},"gridx/core/_Module":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/_base/connect"],function(n,m,o,f,l){var e=m.isFunction,n=n([],{constructor:function(e,d){this.grid=e;this.model=e.model;this.loaded=new f;this._cnnts=[];this._sbscs=[];m.mixin(this,d)},destroy:function(){var e=o.forEach;e(this._cnnts,l.disconnect);e(this._sbscs,l.unsubscribe)},
arg:function(g,d,b){arguments.length==2&&e(d)&&(b=d,d=void 0);var c=this.grid,a=this[g];if(!this.hasOwnProperty(g)){var i=this.name+g.substring(0,1).toUpperCase()+g.substring(1);c[i]===void 0?d!==void 0&&(a=d):a=c[i]}this[g]=b&&!b(a)?d:a;return a},connect:function(g,d,b,c,a){var i=this.grid,k=c||this,g=g===i&&typeof d=="string"?l.connect(g,d,function(){var c=arguments;i._eventFlags[d]===a&&(e(b)?b.apply(k,c):e(k[b])&&k[b].apply(k,c))}):l.connect(g,d,k,b);this._cnnts.push(g);return g},batchConnect:function(){for(var e=
0,d=arguments,b=d.length;e<b;++e)m.isArrayLike(d[e])&&this.connect.apply(this,d[e])},subscribe:function(e,d,b){e=l.subscribe(e,b||this,d);this._sbscs.push(e);return e}}),k=n._modules={};n.register=function(e){var d=e.prototype;return k[d.name||d.declaredClass]=e};n._markupAttrs=["id","name","field","width","dataType","!formatter","!decorator","!sortable"];return n})},"gridx/core/model/extensions/Sort":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","../_Extension"],function(n,
m,o,f){return n(f,{name:"sort",priority:30,constructor:function(f,e){var k=e.baseSort;this.clear();this._mixinAPI("sort");if(k&&k.length)this._baseSort=k,this._sort()},clear:function(){},sort:function(){this.model._addCmd({name:"_cmdSort",scope:this,args:arguments})},_cmdSort:function(){var f=arguments;this._sort.apply(this,f[f.length-1])},_sort:function(f){var e=this.model,k=this._baseSort,g=e._cache,d=g.options=g.options||{},b,c,a;if(m.isArrayLike(f)){for(b=0;b<f.length;++b)c=f[b],c.colId?c.attribute=
g.columns?g.columns[c.colId].field||c.colId:c.colId:c.colId=c.attribute;k&&(f=f.concat(k))}else f=k;d.sort&&d.sort.length?o.toJson(d.sort)!==o.toJson(f)&&(a=1):f&&f.length&&(a=1);d.sort=m.clone(f);a&&g.clear();e._msg("storeChange")}})})},"gridx/tests/support/modules":function(){define(["gridx/core/model/extensions/FormatSort","gridx/modules/Focus","gridx/modules/VScroller","gridx/modules/ColumnResizer","gridx/modules/VirtualVScroller","gridx/modules/SingleSort","gridx/modules/NestedSort","gridx/modules/ColumnLock",
"gridx/modules/select/Row","gridx/modules/select/Column","gridx/modules/select/Cell","gridx/modules/extendedSelect/Row","gridx/modules/extendedSelect/Column","gridx/modules/extendedSelect/Cell","gridx/modules/move/Row","gridx/modules/move/Column","gridx/modules/dnd/Row","gridx/modules/dnd/Column","gridx/modules/AutoScroll","gridx/modules/pagination/Pagination","gridx/modules/pagination/PaginationBar","gridx/modules/pagination/PaginationBarDD","gridx/modules/filter/Filter","gridx/modules/filter/FilterBar",
"gridx/modules/CellWidget","gridx/modules/Edit","gridx/modules/RowHeader","gridx/modules/IndirectSelect","gridx/modules/Persist","gridx/modules/exporter/Exporter","gridx/modules/exporter/CSV","gridx/modules/exporter/Table","gridx/modules/Printer","gridx/modules/Menu","gridx/modules/Dod","gridx/modules/TitleBar","gridx/modules/Tree","gridx/modules/RowLock","gridx/modules/ToolBar","gridx/modules/SummaryBar"],function(n,m,o,f,l,e,k,g,d,b,c,a,i,r,h,s,t,A,y,v,u,x,C,w,z,D,B,E,F,G,H,I,J,K,L,M,N,O,P,Q){return{FormatSort:n,
Focus:m,VScroller:o,ColumnResizer:f,VirtualVScroller:l,SingleSort:e,NestedSort:k,ColumnLock:g,SelectRow:d,SelectColumn:b,SelectCell:c,ExtendedSelectRow:a,ExtendedSelectColumn:i,ExtendedSelectCell:r,MoveRow:h,MoveColumn:s,DndRow:t,DndColumn:A,AutoScroll:y,Pagination:v,PaginationBar:u,PaginationBarDD:x,Filter:C,FilterBar:w,CellWidget:z,Edit:D,RowHeader:B,IndirectSelect:E,Persist:F,Exporter:G,ExportCSV:H,ExportTable:I,Printer:J,Menu:K,Dod:L,TitleBar:M,Tree:N,RowLock:O,ToolBar:P,SummaryBar:Q}})},"gridx/modules/Edit":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/_base/json","dojo/_base/Deferred","dojo/_base/sniff","dojo/DeferredList","dojo/dom-class","dojo/keys","../core/_Module","../util","dojo/date/locale","dijit/form/TextBox"],function(n,m,o,f,l,e,k,g,d,b,c){function a(a,b,d){if(a.storePattern&&(a.dataType=="date"||a.dataType=="time"))return c.parse(b,a.storePattern);return d}function i(a,b,d,i){return(b=c.parse(i[a],b))?c.format(b,d):i[a]}function r(a){return a&&function(b,c,d){var i=d.gridCellEditField,d=d.cell,e=d.column.editorArgs;
i.set(e&&e.valueField||"value",a(c,b,d,i))}}d._markupAttrs.push("!editable","!alwaysEditing","editor","!editorArgs","applyWhen");return n(d,{name:"edit",forced:["cellWidget"],constructor:function(){this._editingCells={};for(var a=0,b=this.grid._columns,c=b.length;a<c;++a){var d=b[a];if(d.storePattern&&d.field&&(d.dataType=="date"||d.dataType=="time")){d.gridPattern=d.gridPattern||!m.isFunction(d.formatter)&&(m.isObject(d.formatter)||typeof d.formatter=="string")&&d.formatter||d.storePattern;var e;
if(m.isString(d.storePattern))e=d.storePattern,d.storePattern={},d.storePattern[d.dataType+"Pattern"]=e;d.storePattern.selector=d.dataType;if(m.isString(d.gridPattern))e=d.gridPattern,d.gridPattern={},d.gridPattern[d.dataType+"Pattern"]=e;d.gridPattern.selector=d.dataType;d.formatter=m.partial(i,d.field,d.storePattern,d.gridPattern)}}},getAPIPath:function(){return{edit:this}},preload:function(){this.connect(this.grid,"onCellDblClick","_onUIBegin");this.connect(this.grid.cellWidget,"onCellWidgetCreated",
"_onCellWidgetCreated");this._initAlwaysEdit();this._initFocus()},cellMixin:{beginEdit:function(){return this.grid.edit.begin(this.row.id,this.column.id)},cancelEdit:function(){this.grid.edit.cancel(this.row.id,this.column.id);return this},applyEdit:function(){return this.grid.edit.apply(this.row.id,this.column.id)},isEditing:function(){return this.grid.edit.isEditing(this.row.id,this.column.id)}},columnMixin:{isEditable:function(){return this.grid._columnsById[this.id].editable},isAlwaysEditing:function(){return this.grid._columnsById[this.id].alwaysEditing},
setEditable:function(a){this.grid._columnsById[this.id].editable=!!a;return this},editor:function(){return this.grid._columnsById[this.id].editor},setEditor:function(a,b){this.grid.edit.setEditor(this.id,a,b);return this}},begin:function(b,c){var d=new f,i=this;if(i.isEditing(b,c))i._record(b,c),i._focusEditor(b,c),d.callback(!0);else{var e=i.grid,k=i.model.idToIndex(b),g=e._columnsById[c];k>=0&&g.editable?(e.cellWidget.setCellDecorator(b,c,i._getDecorator(c),r(g.editorArgs&&g.editorArgs.toEditor||
m.partial(a,g))),i._record(b,c),e.body.refreshCell(k,g.index).then(function(){i._focusEditor(b,c);d.callback(!0)})):d.callback(!1)}return d},cancel:function(a,b){var c=new f,d=this.model,i=d.idToIndex(a);if(i>=0){var e=this.grid,g=e.cellWidget,k=e._columnsById[b];k&&(k.alwaysEditing?(d=d.byId(a),g=g.getCellWidget(a,b),g.setValue(d.data[b],d.rawData[k.field]),c.callback()):(this._erase(a,b),g.restoreCellDecorator(a,b),e.body.refreshCell(i,k.index).then(function(){c.callback()})))}else c.callback();
return c},apply:function(a,b){var d=new f,i=this,e=i.grid,g=e.cell(a,b,1);if(g){var k=e.cellWidget.getCellWidget(a,b),r=k&&k.gridCellEditField;if(r&&(!m.isFunction(r.isValid)||r.isValid())){var l=g.column.editorArgs,r=r.get(l&&l.valueField||"value"),n=function(c){i._erase(a,b);g.column.alwaysEditing?d.callback(c):(e.cellWidget.restoreCellDecorator(a,b),e.body.refreshCell(g.row.index(),g.column.index()).then(function(){d.callback(c)}))};try{l&&l.fromEditor?r=l.fromEditor(r,k.cell):g.column.storePattern&&
(r=c.format(r,g.column.storePattern)),g.rawData()==r?n(!0):f.when(g.setRawData(r),function(){n(!0)})}catch(o){console.warn("Can not apply change! Error message: ",o),n(!1)}return d}}d.callback(!1);return d},isEditing:function(a,b){var c=this.grid._columnsById[b];if(c&&c.alwaysEditing)return!0;c=this.grid.cellWidget.getCellWidget(a,b);return!!c&&!!c.gridCellEditField},setEditor:function(a,b,c){var a=this.grid._columnsById[a],d=a.editorArgs=a.editorArgs||{};a.editor=b;if(c)d.toEditor=c.toEditor,d.fromEditor=
c.fromEditor,d.dijitProperties=c.dijitProperties},_initAlwaysEdit:function(){for(var b=this.grid._columns,c=b.length-1;c>=0;--c){var d=b[c];if(d.alwaysEditing)d.editable=!0,d.navigable=!0,d.userDecorator=this._getDecorator(d.id),d.setCellValue=r(d.editorArgs&&d.editorArgs.toEditor||m.partial(a,d)),d.decorator=function(){return""},d._cellWidgets={},d._backupWidgets=[]}},_getColumnEditor:function(a){a=this.grid._columnsById[a].editor;return m.isFunction(a)?a.prototype.declaredClass:m.isString(a)?a:
"dijit.form.TextBox"},_onCellWidgetCreated:function(a,b){if(a.gridCellEditField&&b.alwaysEditing){var c=this,d=a.gridCellEditField;a.connect(d,"onChange",function(){if(a.isInit)a.isInit=0;else{for(var i=a.domNode.parentNode;i&&!k.contains(i,"gridxRow");)i=i.parentNode;if(i){var e=b.editorArgs&&b.editorArgs.applyDelay||500;clearTimeout(d._timeoutApply);d._timeoutApply=setTimeout(function(){c.apply(i.getAttribute("rowid"),b.id)},e)}}})}},_focusEditor:function(a,b){var c=this.grid.cellWidget,d=function(){var d=
c.getCellWidget(a,b);(d=d&&d.gridCellEditField)&&!d.focused&&d.focus()};l("webkit")?d():setTimeout(d,1)},_getDecorator:function(a){var b=this._getColumnEditor(a),a=this.grid._columnsById[a],c=a.editorArgs,d=c&&c.constraints||{},i=c&&c.props||"";(a=a.gridPattern||a.storePattern)&&(d=m.mixin({},a,d));d=o.toJson(d);d=d.substring(1,d.length-1);i&&d&&(i+=", ");return function(){return["<div data-dojo-type='",b,"' data-dojo-attach-point='gridCellEditField' class='gridxCellEditor gridxHasGridCellValue gridxUseStoreData' data-dojo-props='",
i,d,"'></div>"].join("")}},_record:function(a,b){var c=this._editingCells,d=c[a];d||(d=c[a]={});d[b]=1},_erase:function(a,b){var c=this._editingCells[a];c&&delete c[b]},_applyAll:function(){var a=this._editingCells,b,c;for(b in a)for(c in a[b])this.apply(b,c)},_onUIBegin:function(a){this.isEditing(a.rowId,a.columnId)||this._applyAll();return this.begin(a.rowId,a.columnId)},_initFocus:function(){var a=this.grid.focus;a&&a.registerArea({name:"edit",priority:1,scope:this,doFocus:this._onFocus,doBlur:this._doBlur,
onFocus:this._onFocus,onBlur:this._onBlur,connects:[this.connect(this.grid,"onCellKeyPress","_onKey"),this.connect(this,"_focusEditor","_focus")]})},_onFocus:function(a){if(a){for(var b=a.target;b&&!k.contains(b,"gridxCell");)b=b.parentNode;if(b){var c=b.getAttribute("colid"),d=b.parentNode.parentNode.parentNode.parentNode.getAttribute("rowid");if(this.isEditing(d,c)&&b!=a.target)return this._record(d,c),!0}return!1}return this._editing},_doBlur:function(a,c){var d=this,i=d.grid,e=i.body;if(d._editing){var g=
e.getRowInfo({parentId:d.model.treePath(d._focusCellRow).pop(),rowIndex:d.model.idToIndex(d._focusCellRow)}).visualIndex;e._nextCell(g,i._columnsById[d._focusCellCol].index,c>0?1:-1,function(a,b){return i._columns[b].editable}).then(function(c){b.stopEvent(a);d._applyAll();d._focusCellCol=i._columns[c.c].id;var g=e.getRowInfo({visualIndex:c.r});d._focusCellRow=d.model.indexToId(g.rowIndex,g.parentId);e._focusCellCol=c.c;e._focusCellRow=c.r;d.begin(d._focusCellRow,d._focusCellCol)});return!1}return!0},
_onBlur:function(){this._applyAll();return!0},_focus:function(a,b){this._editing=!0;this._focusCellCol=b;this._focusCellRow=a;this.grid.focus.focusArea("edit")},_blur:function(){this._editing=!1;var a=this.grid.focus;a&&(l("ie")?setTimeout(function(){a.focusArea("body")},1):a.focusArea("body"))},_onKey:function(a){var c=this,d=c.grid;if(d._columnsById[a.columnId].editable){var i=c.isEditing(a.rowId,a.columnId);a.keyCode==g.ENTER?i?c.apply(a.rowId,a.columnId).then(function(a){a&&c._blur()}):d.focus.currentArea()==
"body"&&(b.stopEvent(a),c._onUIBegin(a)):a.keyCode==g.ESCAPE&&i&&c.cancel(a.rowId,a.columnId).then(m.hitch(c,c._blur)).then(function(){d.focus.focusArea("body")})}c._editing&&a.keyCode!==g.TAB&&a.stopPropagation()}})})},"gridx/modules/Header":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-class","dojo/dom-geometry","dojo/_base/query","dojo/_base/sniff","dojo/keys","../util","../core/_Module"],function(n,m,o,f,l,e,k,g,d){return n(d,{name:"header",forced:["hLayout"],getAPIPath:function(){return{header:this}},
constructor:function(){var b=this.domNode=m.create("div",{"class":"gridxHeaderRow",role:"presentation"}),c=this.innerNode=m.create("div",{"class":"gridxHeaderRowInner",role:"row",innerHTML:'<table border="0" cellpadding="0" cellspacing="0"><tr><th class="gridxCell"></th></tr></table>'});b.appendChild(c)},preload:function(){var b=this.grid,c=this.domNode;b.headerNode.appendChild(c);b.vLayout.register(this,"domNode","headerNode");this.batchConnect([b,"onHScroll","_onHScroll"],[b,"onHeaderCellMouseOver",
"_onHeaderCellMouseOver"],[b,"onHeaderCellMouseOut","_onHeaderCellMouseOver"],b.columnResizer&&[b.columnResizer,"onResize","_onColumnResize"]);this._initFocus();b._connectEvents(c,"_onMouseEvent",this)},destroy:function(){this.inherited(arguments);m.destroy(this.domNode)},columnMixin:{headerNode:function(){return this.grid.header.getHeaderNode(this.id)}},getHeaderNode:function(b){return l("[colid='"+b+"']",this.domNode)[0]},refresh:function(){var b=this,c=b.grid,a=c.focus,d=['<table role="presentation" border="0" cellpadding="0" cellspacing="0"><tr>'];
c.columns().forEach(function(c){d.push('<th colid="',c.id,'" class="gridxCell ',a&&a.currentArea()=="header"&&c.id==b._focusHeaderId?b._focusClass:"",'" role="columnheader" aria-readonly="true" tabindex="-1" style="width: ',c.getWidth(),'"><div class="gridxSortNode">',c.name(),"</div></th>")});d.push("</tr></table>");b.innerNode.innerHTML=d.join("");b._onHScroll(b._scrollLeft);b.onRender()},onRender:function(){},onMoveToHeaderCell:function(){},_scrollLeft:0,_onColumnResize:function(b,c,a){b=this.grid;
b.autoWidth?(c=this._columnsWidth+=c-a,b.bodyNode.style.width=c+"px",b.domNode.style.width=b.hLayout.lead+b.hLayout.tail+c+"px"):this._onHScroll(b.hScrollerNode.scrollLeft)},_onHScroll:function(b){var c=this.grid.isLeftToRight();this.innerNode.firstChild.style[c?"marginLeft":"marginRight"]=(!c&&e("ff")?b:-b)+"px";this._scrollLeft=b},_onMouseEvent:function(b,c){var a=this.grid,d="onHeaderCell"+b,e="onHeader"+b;if(a._isConnected(d)||a._isConnected(e)){this._decorateEvent(c);if(c.columnIndex>=0)a[d](c);
a[e](c)}},_decorateEvent:function(b){for(var c=b.target;c&&c!==this.domNode;c=c.parentNode)if(c.tagName.toLowerCase()=="th"){if(c=this.grid._columnsById[c.getAttribute("colid")])b.columnId=c.id,b.columnIndex=c.index;break}},_onHeaderCellMouseOver:function(b){o.toggle(this.getHeaderNode(b.columnId),"gridxHeaderCellOver",b.type=="mouseover")},_focusHeaderId:null,_focusClass:"gridxHeaderCellFocus",_initFocus:function(){var b=this,c=b.grid;c.focus&&c.focus.registerArea({name:"header",priority:0,focusNode:b.domNode,
scope:b,doFocus:b._doFocus,doBlur:b._blurNode,onBlur:b._blurNode,connects:[b.connect(b.domNode,"onkeydown","_onKeyDown"),b.connect(c,"onHeaderCellMouseDown",function(a){b._focusNode(b.getHeaderNode(a.columnId))})]})},_doFocus:function(b){var c=this._focusNode(this._focusHeaderId&&this.getHeaderNode(this._focusHeaderId)||l("th.gridxCell",this.domNode)[0]);g.stopEvent(c&&b);return c},_focusNode:function(b){if(b){var c=this.grid;if(this._focusHeaderId=b.getAttribute("colid")){this._blurNode();if(c.hScroller){var a=
f.position(b),d=f.position(this.domNode),e=a.x+a.w-d.x-d.w;e<0&&(e=a.x-d.x,e>0&&(e=0));e+=this._scrollLeft;this._onHScroll(e);c.hScroller.scroll(e)}o.add(b,this._focusClass);b.focus();return!0}}return!1},_blurNode:function(){var b=l("th."+this._focusClass,this.domNode)[0];b&&o.remove(b,this._focusClass);return!0},_onKeyDown:function(b){var c=this.grid,a;a=c.isLeftToRight()?1:-1;var d=b.keyCode==k.LEFT_ARROW?-a:a;if(this._focusHeaderId&&(b.keyCode==k.LEFT_ARROW||b.keyCode==k.RIGHT_ARROW))if(g.stopEvent(b),
a=c._columnsById[this._focusHeaderId],a=c._columns[a.index+d])this._focusNode(this.getHeaderNode(a.id)),this.onMoveToHeaderCell(a.id,b)}})})},"gridx/modules/dnd/Column":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/dom-geometry","dojo/dom-class","dojo/_base/query","./_Base","../../core/_Module"],function(n,m,o,f,l,e){return n(e,{name:"dndColumn",required:["_dnd","selectColumn","moveColumn"],getAPIPath:function(){return{dnd:{column:this}}},preload:function(){this.inherited(arguments);
this._selector=this.grid.select.column},accept:[],provide:["grid/columns"],_checkDndReady:function(e){if(this._selector.isSelected(e.columnId))return this._selectedColIds=this._selector.getSelected(),this.grid.dnd._dnd.profile=this,!0;return!1},onDraggedOut:function(){},_cssName:"Column",_onBeginDnd:function(e){e.delay=this.arg("delay")},_getDndCount:function(){return this._selectedColIds.length},_onEndDnd:function(){},_buildDndNodes:function(){var e=this.grid.id;return m.map(this._selectedColIds,
function(g){return["<div id='",e,"_dndcolumn_",g,"' gridid='",e,"' columnid='",g,"'></div>"].join("")}).join("")},_onBeginAutoScroll:function(){var e=this.grid.autoScroll;this._autoScrollV=e.vertical;e.vertical=!1},_onEndAutoScroll:function(){this.grid.autoScroll.vertical=this._autoScrollV},_getItemData:function(e){return e.substring((this.grid.id+"_dndcolumn_").length)},_calcTargetAnchorPos:function(e,g){for(var d=e.target,b=this,c=b.grid,a=c.isLeftToRight(),i=c._columns,r={height:g.h+"px",width:"",
top:""},h=function(d){var h=d.getAttribute("colid"),f=c._columnsById[h].index,s=d,m=d,n=d=f;if(b._selector.isSelected(h)){for(d=f;d>0&&b._selector.isSelected(i[d-1].id);)--d;s=l(".gridxHeaderRow [colid='"+i[d].id+"']",c.headerNode)[0];for(n=f;n<i.length-1&&b._selector.isSelected(i[n+1].id);)++n;m=l(".gridxHeaderRow [colid='"+i[n].id+"']",c.headerNode)[0]}s&&m?(h=o.position(s),f=o.position(m),s=e.clientX<(h.x+f.x+f.w)/2,r.left=s?h.x-g.x-1+"px":f.x+f.w-g.x-1+"px",b._target=s^a?n+1:d):delete b._target;
return r};d;){if(f.contains(d,"gridxCell"))return h(d);d=d.parentNode}var s=l(".gridxRow",c.bodyNode)[0],m=o.position(s.firstChild);if(m.x+m.w<=e.clientX)r.left=m.x+m.w-g.x-1+"px",b._target=i.length;else if(m.x>=e.clientX)r.left=m.x-g.x-1+"px",b._target=0;else if(l(".gridxCell",s).some(function(a){var b=o.position(a);if(b.x<=e.clientX&&b.x+b.w>=e.clientX)return d=a,!0}))return h(d);return r},_onDropInternal:function(){var e=this;if(e._target>=0){var g=m.map(e._selectedColIds,function(d){return e.grid._columnsById[d].index});
e.grid.move.column.move(g,e._target)}},_onDropExternal:function(){}})})},"gridx/core/model/extensions/Query":function(){define(["dojo/_base/declare","../_Extension"],function(n,m){return n(m,{name:"query",priority:40,constructor:function(m,f){this.clear();this._mixinAPI("query");f.query&&this.query(f.query)},clear:function(){},query:function(){this.model._addCmd({name:"_cmdQuery",scope:this,args:arguments})},_cmdQuery:function(){var m=arguments,m=m[m.length-1],f=this.model,l=f._cache,e=l.options=
l.options||{};e.query=m[0];e.queryOptions=m[1];f._msg("storeChange");l.clear()}})})},"gridx/modules/filter/FilterDialog":function(){define(["dojo/_base/kernel","dijit","dojo/_base/declare","dijit/Dialog","dojo/text!../../templates/FilterDialog.html","./FilterPane","./Filter","dijit/layout/AccordionContainer","dojo/data/ItemFileReadStore","dojo/_base/array","dojo/_base/html","dojo/query"],function(n,m,o,f,l,e){return o(f,{title:"Filter",cssClass:"gridxFilterDialog",grid:null,autofocus:!1,postCreate:function(){this.inherited(arguments);
this.set("content",l);this._initWidgets();n.addClass(this.domNode,"gridxFilterDialog")},done:function(){this.hide();this.grid.filterBar.applyFilter(this.getData())},getData:function(){return{type:this._sltMatch.get("value"),conditions:n.map(this._accordionContainer.getChildren(),function(e){return e.getData()})}},setData:function(e){this.removeChildren();e&&e.conditions.length&&(this._sltMatch.set("value",e&&e.type),n.forEach(e.conditions,function(e){this.addRule().setData(e)},this))},removeChildren:function(){n.forEach(this._accordionContainer.getChildren(),
n.hitch(this._accordionContainer,"removeChild"))},clear:function(){this.grid.filterBar.confirmToExecute(function(){this.grid.filterBar.clearFilter(!0);this.hide()},this)},cancel:function(){this.hide()},show:function(){this.inherited(arguments);this._accordionContainer.hasChildren()||this.addRule()},addRule:function(){var k=this._accordionContainer;k.getChildren().length===3&&(k._contentBox.w-=dojox.html.metrics.getScrollbar().w);var g=new e({grid:this.grid,title:"Rule"});k.addChild(g);k.selectChild(g);
if(!this._titlePaneHeight)this._titlePaneHeight=n.position(g._buttonWidget.domNode).h+3;g._initCloseButton();g._onColumnChange();try{g.tbSingle.focus()}catch(d){}n.toggleClass(k.domNode,"gridxFilterSingleRule",k.getChildren().length===1);this.connect(g,"onChange","_updateButtons");this._updateButtons();this._updateAccordionContainerHeight();k.domNode.parentNode.scrollTop=1E5;return g},_initWidgets:function(){this._accordionContainer=m.byNode(n.query(".dijitAccordionContainer",this.domNode)[0]);this._sltMatch=
m.byNode(n.query(".dijitSelect",this.domNode)[0]);var e=n.query(".dijitButton",this.domNode);this._btnAdd=m.byNode(e[0]);this._btnFilter=m.byNode(e[1]);this._btnClear=m.byNode(e[2]);this._btnCancel=m.byNode(e[3]);this.connect(this._btnAdd,"onClick","addRule");this.connect(this._btnFilter,"onClick","done");this.connect(this._btnClear,"onClick","clear");this.connect(this._btnCancel,"onClick","cancel");this.connect(this._accordionContainer,"removeChild","_updateButtons");this.connect(this._accordionContainer,
"removeChild","_updatePaneTitle")},_updatePaneTitle:function(){n.forEach(this._accordionContainer.getChildren(),function(e){e._updateTitle()})},_updateButtons:function(){var e=this._accordionContainer.getChildren();n.some(e,function(d){return d.getData()===null})?this._btnFilter.set("disabled",!0):this._btnFilter.set("disabled",!1);var g=this.grid.filterBar.maxRuleCount;this._btnAdd.set("disabled",e.length>=g&&g>0);this._btnClear.set("disabled",!this.grid.filterBar.filterData)},_updateAccordionContainerHeight:function(){var e=
this._accordionContainer,g=e.getChildren().length;n.style(e.domNode,"height",145+g*this._titlePaneHeight+"px");e.resize()}})})},"gridx/modules/SingleSort":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/keys","../core/model/extensions/Sort","../core/_Module"],function(n,m,o,f,l){return n(l,{name:"sort",forced:["header"],modelExtensions:[f],getAPIPath:function(){return{sort:this}},preload:function(){var e=this,f=e.grid,g;e.connect(f,"onHeaderCellClick","_onClick");e.connect(f,"onHeaderCellKeyDown",
"_onKeyDown");f.persist&&(g=f.persist.registerAndLoad("sort",function(){return[{colId:e._sortId,descending:e._sortDescend}]}));g=g||e.arg("preSort");m.isArrayLike(g)&&(g=g[0]);if(g&&g.colId)e._sortId=g.colId,e._sortDescend=g.descending,e.model.sort([g])},load:function(){var e=this,f,g=function(){e._sortId&&e._updateHeader(e._sortId,e._sortDescend)};e.connect(e.grid.header,"onRender",g);for(f in e.grid._columnsById)e._initHeader(f);g();e.loaded.callback()},columnMixin:{sort:function(e,f){this.grid.sort.sort(this.id,
e,f);return this},isSorted:function(){return this.grid.sort.isSorted(this.id)},clearSort:function(e){this.isSorted()&&this.grid.sort.clear(e);return this},isSortable:function(){var e=this.grid._columnsById[this.id];return e.sortable||e.sortable===void 0},setSortable:function(e){this.grid._columnsById[this.id].sortable=!!e;return this}},sort:function(e,f,g){var d=this.grid,b=d._columnsById[e];if(b&&(b.sortable||b.sortable===void 0))(this._sortId!=e||this._sortDescend==!f)&&this._updateHeader(e,f),
this.model.sort([{colId:e,descending:f}]),g||d.body.refresh()},isSorted:function(e){if(e==this._sortId)return this._sortDescend?-1:1;return 0},clear:function(e){if(this._sortId!==null)this._initHeader(this._sortId),this._sortId=this._sortDescend=null,this.model.sort(),e||this.grid.body.refresh()},getSortData:function(){return this._sortId?[{colId:this._sortId,descending:this._sortDescend}]:null},_sortId:null,_sortDescend:null,_initHeader:function(e){var f=this.grid.header.getHeaderNode(e);f.innerHTML=
["<div class='gridxSortNode'>",this.grid.column(e,1).name(),"</div>"].join("");f.removeAttribute("aria-sort")},_updateHeader:function(e,f){this._sortId&&this._sortId!=e&&this._initHeader(this._sortId);this._sortId=e;this._sortDescend=!!f;var g=this.grid,d=g.header.getHeaderNode(e);d.innerHTML=["<div class='gridxSortNode ",f?"gridxSortDown":"gridxSortUp","'><div class='gridxArrowButtonChar'>",f?"&#9662;":"&#9652;","</div><div role='presentation' class='gridxArrowButtonNode'></div><div class='gridxColCaption'>",
g.column(e,1).name(),"</div></div>"].join("");d.setAttribute("aria-sort",f?"descending":"ascending");g.vLayout.reLayout()},_onClick:function(e){this.sort(e.columnId,this._sortId!=e.columnId?0:!this._sortDescend)},_onKeyDown:function(e){e.keyCode==o.ENTER&&this._onClick(e)}})})},"gridx/core/model/cache/Sync":function(){define(["dojo/_base/declare","dojo/_base/Deferred","./_Cache"],function(n,m,o){return n(o,{keep:function(){},free:function(){},when:function(f,l){var e=new m;try{l&&l(),e.callback()}catch(k){e.errback(k)}return e},
_init:function(){this._filled||(this._storeFetch({start:0}),this.store.getChildren&&this._fetchChildren())},_fetchChildren:function(){for(var f=this._struct,l=f[""].slice(1),e;l.length;)e=l.shift(),m.when(this._loadChildren(e),function(){[].push.apply(l,f[e].slice(1))})}})})},"gridx/modules/extendedSelect/Row":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/query","dojo/_base/lang","dojo/_base/Deferred","dojo/_base/sniff","dojo/dom-class","dojo/mouse","dojo/keys","../../core/_Module",
"./_RowCellBase"],function(n,m,o,f,l,e,k,g,d,b,c){return n(c,{name:"selectRow",rowMixin:{select:function(){this.grid.select.row.selectById(this.id);return this},deselect:function(){this.grid.select.row.deselectById(this.id);return this},isSelected:function(){return this.model.isMarked(this.id)}},triggerOnCell:!1,getSelected:function(){return this.model.getMarkedIds()},isSelected:function(){return m.every(arguments,function(a){return this.model.isMarked(a)},this)},clear:function(a){o(".gridxRowSelected",
this.grid.bodyNode).forEach(function(a){k.remove(a,"gridxRowSelected")});this.model.clearMark();a||this._onSelectionChange()},onHighlightChange:function(){},_type:"row",_init:function(){var a=this,b=a.grid;a.inherited(arguments);a.model._spTypes.select=1;a.batchConnect(b.rowHeader&&[b.rowHeader,"onMoveToRowHeaderCell","_onMoveToRowHeaderCell"],[b,"onRowMouseDown",function(c){if(g.isLeft(c)&&(a.arg("triggerOnCell")||!c.columnId))a._isOnCell=c.columnId,b.body._focusCellCol=c.columnIndex,a._start({row:c.visualIndex},
c.ctrlKey,c.shiftKey)}],[b,"onRowMouseOver",function(c){if(a._selecting&&a.arg("triggerOnCell")&&c.columnId)b.body._focusCellCol=c.columnIndex;a._highlight({row:c.visualIndex})}],[b,e("ff")<4?"onRowKeyUp":"onRowKeyDown",function(b){if((a.arg("triggerOnCell")||!b.columnId)&&b.keyCode===d.SPACE)a._isOnCell=b.columnId,a._start({row:b.visualIndex},b.ctrlKey,b.shiftKey),a._end()}])},_markById:function(a,b){var c=this.model;m.forEach(a,function(a){c.markById(a,b)});c.when()},_markByIndex:function(a,b){var c=
this.model,d=this.grid.body;m.forEach(a,function(a){if(f.isArrayLike(a)){var e=a[0],a=a[1],g;if(e>=0&&e<Infinity){g=a>=e&&a<Infinity?a-e+1:d.visualCount-e;e=d.getRowInfo({visualIndex:e}).rowIndex;for(a=0;a<g;++a)c.markByIndex(a+e,b)}}else if(a>=0&&a<Infinity)a=d.getRowInfo({visualIndex:a}).rowIndex,c.markByIndex(a,b)});return c.when()},_onRender:function(a,b){var c,d=a+b;for(c=a;c<d;++c){var e={row:c};(this._isSelected(e)||this._selecting&&this._toSelect&&this._inRange(c,this._startItem.row,this._currentItem.row,
1))&&this._doHighlight(e,1)}},_onMark:function(a,b,c){if(c=="select"&&!this._marking&&(b=o('[rowid="'+b+'"]',this.grid.bodyNode)[0]))k.toggle(b,"gridxRowSelected",a),this.onHighlightChange({row:parseInt(b.getAttribute("visualindex"),10)},!!a)},_onMoveToCell:function(a,b,c){if(this.arg("triggerOnCell")&&c.shiftKey&&(c.keyCode==d.UP_ARROW||c.keyCode==d.DOWN_ARROW))this._start({row:a},c.ctrlKey,1),this._end()},_onMoveToRowHeaderCell:function(a,b){b.shiftKey&&(this._start({row:a},b.ctrlKey,1),this._end())},
_isSelected:function(a){a=this._getRowId(a.row);return this._isRange?m.indexOf(this._refSelectedIds,a)>=0:this.model.isMarked(a)},_beginAutoScroll:function(){var a=this.grid.autoScroll;this._autoScrollH=a.horizontal;a.horizontal=!1},_endAutoScroll:function(){this.grid.autoScroll.horizontal=this._autoScrollH},_doHighlight:function(a,b){o('[visualindex="'+a.row+'"]',this.grid.bodyNode).forEach(function(a){k.toggle(a,"gridxRowSelected",b);a.setAttribute("aria-selected",!!b)});this.onHighlightChange(a,
b)},_end:function(){this.inherited(arguments);delete this._isOnCell},_focus:function(a){var b=this.grid,c=b.focus;if(c)b.body._focusCellRow=a.row,c.focusArea(this._isOnCell?"body":"rowHeader",!0)},_addToSelected:function(a,b,c){var d=this,e=d.grid.body,g=d.model,f=d._lastEndItem,k,n,o;if(!d._isRange)d._refSelectedIds=g.getMarkedIds();if(d._isRange&&d._inRange(b.row,a.row,f.row))return k=Math.min(b.row,f.row),f=Math.max(b.row,f.row),a=e.getRowInfo({visualIndex:k}).rowIndex+1,b=e.getRowInfo({visualIndex:f}).rowIndex,
o=new l,g.when({start:a,count:b-a+1},function(){for(n=a;n<=b;++n){var c=g.indexToId(n),e=m.indexOf(d._refSelectedIds,c)>=0;g.markById(c,e)}}).then(function(){g.when(null,function(){o.callback()})}),o;else{k=Math.min(a.row,b.row);f=Math.max(a.row,b.row);a=e.getRowInfo({visualIndex:k}).rowIndex;b=e.getRowInfo({visualIndex:f}).rowIndex;for(n=a;n<=b;++n)g.markByIndex(n,c);return g.when()}}})})},"gridx/modules/ColumnWidth":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/Deferred",
"dojo/_base/query","dojo/_base/sniff","dojo/dom-geometry","dojo/dom-class","dojo/dom-style","dojo/keys","../core/_Module"],function(n,m,o,f,l,e,k,g,d,b){return n(b,{name:"columnWidth",forced:["hLayout","header"],getAPIPath:function(){return{columnWidth:this}},constructor:function(){this._ready=new o},preload:function(){var b=this,a=b.grid;if(!a.hScroller)b.autoResize=!0;b.batchConnect([a,"_onResizeBegin",function(d,e){e.header=new o;if(b.arg("autoResize")){var h=a.domNode.clientWidth-a.hLayout.lead-
a.hLayout.tail;a.bodyNode.style.width=(h<0?0:h)+"px"}else b._adaptWidth();e.header.callback()}],[a.hLayout,"onUpdateWidth",function(){b._adaptWidth();b._ready.callback()}],[a,"setColumns","_adaptWidth"])},load:function(){var b=this.loaded;this._ready.then(function(){b.callback()})},"default":60,autoResize:!1,_adaptWidth:function(){var b=this,a=b.grid,d=a.domNode,r=a.header,h=a.isLeftToRight(),s=h?"marginLeft":"marginRight",n=h?"marginRight":"marginLeft",h=a.hLayout.lead,o=a.hLayout.tail,y=r.innerNode,
v=a.bodyNode.style,u=y.style,x=(d.clientWidth||g.get(d,"width"))-h-o,C=f(".gridxCell",y)[0],w=e.getMarginBox(C).w-e.getContentBox(C).w,z=!d.offsetHeight,D=g.get(C,"borderCollapse")=="collapse";u[s]=v[s]=h+"px";u[n]=o+"px";x=x<0?0:x;z&&D&&w--;if(a.autoWidth){m.forEach(a._columns,function(a){if(!a.width)a.width=b.arg("default")+"px"});r.refresh();var s=f("th.gridxCell",y),B=D?2:0;s.forEach(function(b){var c=g.get(b,"width");if(!l("webkit")||!z)c+=w;B+=c;l("ie")&&D&&B--;b=a._columnsById[b.getAttribute("colid")];
if(!b.width||/%$/.test(b.width))b.width=c+"px"});r._columnsWidth=B;v.width=B+"px";d.style.width=h+o+B+"px"}else{if(b.arg("autoResize"))v.width=x+"px",k.add(d,"gridxPercentColumnWidth"),m.forEach(a._columns,function(a){if(!a.width||!/%$/.test(a.width))a.width="auto"});else{var E=[],F=D?2:0;v.width=x+"px";m.forEach(a._columns,function(a){if(!a.width||a.width=="auto")a.width="auto",E.push(a);else if(/%$/.test(a.width))a.width=parseInt(x*parseFloat(a.width,10)/100-w,10)+"px"});r.refresh();m.forEach(a._columns,
function(a){if(a.width!="auto"){var b=g.get(r.getHeaderNode(a.id),"width");if(!a.width||/%$/.test(a.width))a.width=b+"px";if(!l("webkit")||!z)b+=w;F+=b}});if(E.length){l("webkit")&&(w=0);var G=x>F?(x-F)/E.length-w:b.arg("default");x>F&&l("ie")&&D&&(G+=a._columns.length/E.length);G=parseInt(G,10);m.forEach(E,function(a){a.width=G+"px"})}}r.refresh()}if(l("ie")<8)u.width=x+"px";a.hScroller&&(a.hScroller.scroll(0),r._onHScroll(0))}})})},"gridx/modules/ToolBar":function(){define(["dojo/_base/kernel",
"dojo/_base/declare","dijit/Toolbar","../core/_Module"],function(n,m,o,f){return m(f,{name:"toolBar",getAPIPath:function(){return{toolBar:this}},constructor:function(f,e){n.experimental("gridx/modules/ToolBar");this.widget=new o(e);this.domNode=this.widget.domNode},preload:function(){var f=this.widget,e=this.grid.vLayout;e.register(this,"domNode","headerNode",-10);this.batchConnect([f,"addChild","reLayout",e],[f,"removeChild","reLayout",e]);this._initFocus()},_initFocus:function(){var f=this.grid.focus;
f&&f.registerArea({name:this.name,priority:-1,focusNode:this.domNode,scope:this,doFocus:this._doFocus})},_doFocus:function(){var f=this.widget.getChildren();f[0]&&f[0].focus();return f.length}})})},"gridx/modules/select/Row":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/sniff","dojo/dom-class","dojo/keys","./_RowCellBase","../../core/_Module"],function(n,m,o,f,l,e){return n(e,{name:"selectRow",rowMixin:{select:function(){this.grid.select.row.selectById(this.id);return this},
deselect:function(){this.grid.select.row.deselectById(this.id);return this},isSelected:function(){return this.model.isMarked(this.id)}},triggerOnCell:!1,getSelected:function(){return this.model.getMarkedIds()},clear:function(){if(this.arg("enabled")){var e=this.model;m.forEach(e.getMarkedIds(),function(g){e.markById(g,0)});e.when()}},_type:"row",_init:function(){var e=this,g=e.grid;e.inherited(arguments);e.model._spTypes.select=1;e.batchConnect([g,"onRowMouseDown",function(d){(e.arg("triggerOnCell")||
!d.columnId)&&e._select(d.rowId,d.ctrlKey)}],[g,o("ff")<4?"onRowKeyUp":"onRowKeyDown",function(d){(e.arg("triggerOnCell")||!d.columnId)&&d.keyCode==l.SPACE&&e._select(d.rowId,d.ctrlKey)}])},_onMark:function(e,g,d){if(d=="select"){var b=this;b._highlight(g,e);b.model.when({id:g},function(){b[e?"onSelected":"onDeselected"](b.grid.row(g,!0))})}},_highlight:function(e,g){var d=this.grid.body.getRowNode({rowId:e});d&&(f.toggle(d,"gridxRowSelected",g),d.setAttribute("aria-selected",!!g),this.onHighlightChange({row:parseInt(d.getAttribute("visualindex"),
10)},!!g))},_markById:function(e,g){var d=this.model;d.markById(e,g);d.when()},_onRender:function(e,g){var d=this.model,b=e+g,c,a;for(c=e;c<b;++c)a=d.indexToId(this.grid.body.getRowInfo({visualIndex:c}).rowIndex),d.isMarked(a)&&this._highlight(a,1)}})})},"gridx/modules/ColumnLock":function(){define(["dojo/_base/kernel","dojo/_base/lang","../core/_Module","dojo/_base/declare","dojo/_base/array","dojo/_base/html","dojo/query"],function(n,m,o,f,l,e,k){return f(o,{name:"columnLock",required:["body"],
count:0,load:function(g,d){this.count=this.arg("count");var b=this,c=this.grid;e.body();d.then(function(){b.connect(c.body,"onAfterRow",function(a){this._lockColumns(c.body.getRowNode(a))});c.columnResizer&&b.connect(c.columnResizer,"onResize","_updateBody");c.header&&(c.header.loaded.then(function(){b._updateHeader()}),c.move&&c.move.column&&b.connect(c.move.column,"move","_updateHeader"));b._hackHScroller();b.count&&b.lock(b.count);b.loaded.callback()})},getAPIPath:function(){return{columnLock:this}},
lock:function(g){g>=this.grid._columns.length?(this.count=0,console.warn("Warning: lock count is larger than columns count, do nothing.")):(this.unlock(),g&&e.addClass(this.grid.domNode,"gridxColumnLock"),this.count=g,this._updateUI())},unlock:function(){e.removeClass(this.grid.domNode,"gridxColumnLock");this._unlockColumns(k(".gridxHeaderRowInner",this.grid.headerNode)[0]);l.forEach(this.grid.bodyNode.childNodes,this._unlockColumns,this);this.count=0;this._updateUI()},_unlockColumns:function(g){for(var d=
g.firstChild.rows[0],b=0;b<this.count;b++){var c=d.cells[b];e.removeClass(c,"gridxLockedCell");e.style(c,{height:"auto"})}g.style.paddingLeft="0px"},_updateUI:function(){this.grid.header&&this._updateHeader();this._updateBody();this._updateScroller();this.grid.hScroller&&this.grid.hScroller._doScroll();this.grid.header.onRender()},_lockColumns:function(g){if(!this.count||this.count>=this.grid._columns.length)this.count=0;else{var d=g.firstChild.rows[0],b;for(b=0;b<this.count;b++)n.style(d.cells[b],
"height","auto");var c=n.contentBox(d.cells[d.cells.length-1]).h;b=n.marginBox(d.cells[d.cells.length-1]).h;n.style(g.firstChild,"height",b+"px");var a=0;for(b=0;b<this.count;b++){var i=d.cells[b];e.addClass(i,"gridxLockedCell");e.style(i,{height:c+"px",left:a+"px"});a+=i.offsetWidth}g.style.paddingLeft=a+"px";g.scrollLeft=this.grid.hScroller?this.grid.hScroller.domNode.scrollLeft:0}},_updateHeader:function(){this._lockColumns(k(".gridxHeaderRowInner",this.grid.headerNode)[0]);this._updateScroller()},
_updateBody:function(){l.forEach(this.grid.bodyNode.childNodes,this._lockColumns,this)},_updateScroller:function(){this.grid.hScroller&&this.grid.hScroller.refresh()},_hackHScroller:function(){var e=this;m.mixin(this.grid.hScroller,{_doScroll:function(){var d=this.domNode.scrollLeft;e.count?l.forEach(this.grid.bodyNode.childNodes,function(b){b.scrollLeft=d}):this.grid.bodyNode.scrollLeft=d;this.grid.onHScroll(d)}})}})})},"gridx/core/model/extensions/Mark":function(){define(["dojo/_base/declare","dojo/_base/array",
"../_Extension"],function(n,m,o){return n(o,{name:"move",priority:5,constructor:function(f){this.clear();this._mixinAPI("isMarked","getMarkedIds","markById","markByIndex","clearMark");f.onMarked=function(){};f.onMarkRemoved=function(){};this.connect(f,"_msg","_receiveMsg");f._spTypes={}},clear:function(){this._byId={}},clearMark:function(f){this._byId[this._initMark(f)]={}},getMarkedIds:function(f){var l=[],e;if(f=this._byId[this._initMark(f)])for(e in f)l.push(e);return l},isMarked:function(f,l){return!!this._byId[this._initMark(l)][f]},
markById:function(f,l,e){this._cmd(f,l,e,1)},markByIndex:function(f,l,e){f>=0&&f<Infinity&&this._cmd(f,l,e)},_mark:function(f,l,e){var e=this._initMark(e),k=this.isMarked(f,e);l&&!k?this._addMark(f,e):!l&&k&&this._removeMark(f,e)},_cmdMark:function(){var f=this,l=arguments,e=[],k=f.model._model;m.forEach(l,function(g){g[3]||e.push({start:g[0],count:1})});return k._call("when",[{id:[],range:e},function(){m.forEach(l,function(e){e[3]||(e[0]=k._call("indexToId",[e[0]]));e[0]&&f._mark.apply(f,e)})}])},
_onDelete:function(f){var l,e=this._byId;for(l in e)delete e[this._initMark(l)][f];this.onDelete.apply(this,arguments)},_initMark:function(f){var l=this._byId,f=f||"select";l[f]=l[f]||{};return f},_addMark:function(f,l){var e=this._initMark(l);this._byId[e][f]=1;this.model.onMarked(f,e)},_removeMark:function(f,l){var e=this._initMark(l);delete this._byId[e][f];this.model.onMarkRemoved(f,e)},_cmd:function(){this.model._addCmd({name:"_cmdMark",scope:this,args:arguments,async:1})},_receiveMsg:function(f,
l){if(f=="filter"){var e,k=this.model._spTypes,g;for(e in k)if(k[e])for(g in this._byId[e])l[g]||this._removeMark(g,e)}}})})},"gridx/modules/dnd/Row":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/Deferred","dojo/_base/lang","dojo/dom-class","dojo/dom-geometry","dojo/_base/sniff","./_Base","../../core/_Module"],function(n,m,o,f,l,e,k,g){function d(a,d){if(a.grid){var e=new o,h=b(e,e.callback),g=b(e,e.errback),k=[],l=a.grid,m=l.dnd.row._selectedRowIds;l.model.when({id:m},function(){c(m,
function(a){l.model.idToIndex(a);(a=l.model.byId(a))&&k.push(f.clone(a.rawData))})}).then(function(){h(k)},g);return e}else return a.getGridDndRowData&&a.getGridDndRowData(d)||[]}var b=f.hitch,c=m.forEach;return n(g,{name:"dndRow",required:["_dnd","moveRow"],getAPIPath:function(){return{dnd:{row:this}}},accept:["grid/rows"],provide:["grid/rows"],onDraggedOut:function(a){var b=[];if(a.grid)b=a.grid.dnd._dnd.profile.arg("accept");else for(var d in a.accept)b.push(d);if(!this.checkArg("copyWhenDragOut",
b)){var a=this.grid,e=a.model,g=a.store,f=this._selectedRowIds;if(g.fetch){var k=[];a.model.when({id:f},function(){c(f,function(a){(a=e.byId(a))&&k.push(a.item)})}).then(function(){c(k,g.deleteItem,g);g.save()})}else c(f,g.remove,g)}},_checkDndReady:function(a){var b=this.model;if(!b.isMarked||b.isMarked(a.rowId))return this.grid.dnd._dnd.profile=this,this._selectedRowIds=b.getMarkedIds?b.getMarkedIds():[a.rowId],!0;return!1},_cssName:"Row",_onBeginDnd:function(a){a.delay=this.arg("delay")},_getDndCount:function(){return this._selectedRowIds.length},
_onEndDnd:function(){},_buildDndNodes:function(){var a=this.grid.id;return m.map(this._selectedRowIds,function(b){return["<div id='",a,"_dndrow_",b,"' gridid='",a,"' rowid='",b,"'></div>"].join("")}).join("")},_onBeginAutoScroll:function(){var a=this.grid.autoScroll;this._autoScrollH=a.horizontal;a.horizontal=!1},_onEndAutoScroll:function(){this.grid.autoScroll.horizontal=this._autoScrollH},_getItemData:function(a){return a.substring((this.grid.id+"_dndrow_").length)},_calcTargetAnchorPos:function(a,
b){var c=this,d=a.target,g=c.grid.body,f={width:b.w+"px",height:"",left:""},n=function(a){return c.model.isMarked&&c.model.isMarked(a.getAttribute("rowid"))},o=function(a){return parseInt(a.getAttribute("visualindex"),10)},v=function(d){var h=d,g=h,k=h;if(n(h)){for(g=h.previousSibling;g&&n(g);)h=g,g=g.previousSibling;g=h;h=d;for(k=h.nextSibling;k&&n(k);)h=k,k=k.nextSibling;k=h}g&&k?(h=e.position(g),d=e.position(k),a.clientY<(h.y+d.y+d.h)/2?(c._target=o(g),f.top=h.y-b.y+"px"):(c._target=o(k)+1,f.top=
d.y+d.h-b.y+"px")):delete c._target;return f};if(!k("ff"))for(;d;){if(l.contains(d,"gridxRow"))return v(d);d=d.parentNode}var u=g.domNode,x=u.childNodes;if(x.length){var d=u.firstChild,C=o(d),w=e.position(d);if(C===0&&a.clientY<=w.y+w.h)f.top=w.y-b.y+"px",c._target=0;else if(d=u.lastChild,C=o(d),w=e.position(d),C===g.visualCount-1&&a.clientY>w.y+w.h)f.top=w.y+w.h-b.y+"px",c._target=g.visualCount;else return m.some(x,function(b){w=e.position(b);if(w.y<=a.clientY&&w.y+w.h>=a.clientY)return d=b,!0})?
v(d):null}else f.top="0px",c._target=0;return f},_onDropInternal:function(){var a=this,b=a.grid;a._target>=0&&a.model.when({id:a._selectedRowIds},function(){var c=m.map(a._selectedRowIds,function(b){return a.model.idToIndex(b)});b.move.row.move(c,b.body.getRowInfo({visualIndex:a._target}).rowIndex)})},_onDropExternal:function(a,c){var e=new o,h=b(e,e.callback),g=b(e,e.errback),f=this.grid,k=this._target,l,m,n=d(a,c);f.model.when([k-1,k],function(){l=f.model.byIndex(k);m=f.model.byIndex(k-1)}).then(function(){o.when(n,
function(a){a&&a.length&&(a=f.model.insert(a,m&&m.item,l&&l.item),o.when(a,h,g))},g)},g);return e}})})},"gridx/modules/NestedSort":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/connect","dojo/_base/event","dojo/_base/query","dojo/_base/window","dojo/dom-class","dojo/dom-construct","dojo/dom-style","dojo/keys","../core/_Module","../core/model/extensions/Sort","dojo/i18n!../nls/NestedSort"],function(n,m,o,f,l,e,k,g,d,b,c,a,i){var r=m.forEach,h=m.filter,s=m.indexOf,t=k.contains,
A=k.remove,y=k.add;return n(c,{name:"sort",forced:["header"],modelExtensions:[a],_a11yText:{dojoxGridDescending:"&#9662;",dojoxGridAscending:"&#9652;",dojoxGridAscendingTip:"&#1784;",dojoxGridDescendingTip:"&#1783;",dojoxGridUnsortedTip:"x"},constructor:function(){this._sortData=[]},getAPIPath:function(){return{sort:this}},preload:function(){var a=this;a._sortData=a.arg("preSort")||a._sortData;if(a.grid.persist){var b=a.grid.persist.registerAndLoad("sort",function(){return a._sortData});if(b)a._sortData=
b}a._sortData=h(a._sortData,function(b){return a.isSortable(b.colId)});a._sortData.length&&a.grid.model.sort(a._sortData)},load:function(){this._init();this.loaded.callback()},columnMixin:{isSorted:function(){return this.grid.sort.isSorted(this.id)},isSortable:function(){return this.grid.sort.isSortable(this.id)}},getSortData:function(){return this._sortData},sort:function(a){var b=this;b._sortData=h(a,function(a){return b.isSortable(a.colId)});b._doSort();b._updateUI()},isSorted:function(a){return m.some(this._sortData,
function(b){return b.colId==a})},_doSort:function(){var a=this.grid,b=this._sortData;a.model.sort(b.length?b:null);a.body.refresh()},clear:function(){this._sortData.length=0;this._doSort();this._updateUI()},isSortable:function(a){return(a=this.grid._columnsById[a])&&(a.sortable||a.sortable===void 0)},_init:function(){var a=this,b=a.grid.header.domNode,c=function(){a._initHeader();a._initFocus();a._updateUI()};a.connect(b,"onclick","_onHeaderClick");a.connect(b,"onmouseover","_onMouseOver");a.connect(b,
"onmouseout","_onMouseOver");a.connect(a.grid.header,"onRender",c);c()},_initHeader:function(){var a=this,b=a.grid.header.domNode.firstChild.firstChild;l(".gridxSortBtn",b).length||r(b.rows[0].cells,function(b){var c=b.getAttribute("colid");a.isSortable(c)&&(g.create("div",{className:"gridxSortBtn gridxSortBtnNested"},b,"first"),g.create("div",{className:"gridxSortBtn gridxSortBtnSingle"},b,"first"))})},_onHeaderClick:function(a){var b=a.target,c=this._sortData,d;this._markFocus(a);if(t(b,"gridxSortBtn")){d=
b.parentNode.getAttribute("colid");if(t(b,"gridxSortBtnSingle")){if(c.length>1)c.length=0;b=h(c,function(a){return a.colId===d})[0];c.length=0;b&&c.push(b);this._sortColumn(d)}else t(b,"gridxSortBtnNested")&&this._sortColumn(d);f.stop(a)}},_onMouseOver:function(a){var b=this.grid;k.toggle(b.header.domNode,"gridxHeaderHover",a.type=="mouseover");b.autoHeight&&b.vLayout.reLayout()},_sortColumn:function(a){var b=this._sortData;if(this.isSortable(a)){var c=h(b,function(b){return b.colId===a})[0];c?(c.descending&&
b.splice(s(b,c),1),c.descending=!c.descending):b.push({colId:a,descending:!1});this._doSort();this._updateUI()}},_updateUI:function(){var a=this,b=a.grid,c=b.domNode,d=a._sortData;A(c,"gridxSingleSorted");A(c,"gridxNestedSorted");l("th",b.header.domNode).forEach(function(b){var c=b.getAttribute("colid");if(a.isSortable(c)){r(["","Desc","Asc","Main"],function(a){A(b,"gridxCellSorted"+a)});var g=b.childNodes[0],f=b.childNodes[1],k=t(e.body(),"dijit_a11y"),l=a._a11yText;g.title=i.singleSort+" - "+i.ascending;
f.title=i.nestedSort+" - "+i.ascending;g.innerHTML=k?l.dojoxGridAscendingTip:"&nbsp;";f.innerHTML=d.length+1+(k?l.ascending:"");var m=h(d,function(a){return a.colId===c})[0];a._setWaiState(b,c,m);if(m){f.innerHTML=s(d,m)+1;y(b,"gridxCellSorted");m==d[0]&&y(b,"gridxCellSortedMain");var n=d.length;if(m.descending)if(y(b,"gridxCellSortedDesc"),n==1){if(g.title=i.singleSort+" - "+i.unsorted,k)g.innerHTML=l.dojoxGridUnsortedTip}else{if(f.title=i.nestedSort+" - "+i.unsorted,k)f.innerHTML=l.dojoxGridUnsortedTip}else if(y(b,
"gridxCellSortedAsc"),n==1){if(g.title=i.singleSort+": "+i.descending,k)g.innerHTML=l.dojoxGridDescendingTip}else if(f.title=i.nestedSort+" - "+i.descending,k)f.innerHTML=l.dojoxGridDescendingTip}}});d.length==1?y(c,"gridxSingleSorted"):d.length>1&&y(c,"gridxNestedSorted")},_initFocus:function(){var a=this.grid,b=a.header.domNode;a.focus&&(this._initRegions(),a.focus.registerArea({name:"header",priority:0,focusNode:b,scope:this,doFocus:this._doFocus,doBlur:this._blurNode,onBlur:this._blurNode,connects:[this.connect(b,
"onkeypress","_onKeyPress")]}))},_doFocus:function(){this._focusRegion(this._getCurrentRegion()||this._focusRegions[0]);return!0},_blurNode:function(){return!0},_onKeyPress:function(a){var c=this.grid.isLeftToRight(),d=c?b.RIGHT_ARROW:b.LEFT_ARROW,c=c?b.LEFT_ARROW:b.RIGHT_ARROW;switch(a.keyCode){case c:this._focusPrevious();break;case d:this._focusNext();break;case b.ENTER:case b.SPACE:this._onHeaderClick(a)}},_onBlur:function(a){this._blurRegion(a.target)},_focusNext:function(){for(var a=this._currRegionIdx,
b=this._focusRegions;b[a+1]&&d.get(b[++a],"display")==="none";);b[a]&&this._focusRegion(b[a])},_focusPrevious:function(){for(var a=this._currRegionIdx,b=this._focusRegions;b[a-1]&&(d.get(b[--a],"display")==="none"||t(b[a],"gridxSortBtn")););b[a]&&this._focusRegion(b[a])},_markFocus:function(a){a=a.target;s(this._focusRegions,a)>=0&&this._focusRegion(a)},_initRegions:function(){var a=this;r(a._nconns,o.disconnect);a._focusRegions=[];a._nconns=[];l(".gridxCell",a.grid.header.domNode).forEach(function(b){var c=
b.childNodes;r([2,1,0],function(b){c[b]&&(c[b].setAttribute("tabindex","-1"),a._focusRegions.push(c[b]),a._nconns.push(a.connect(c[b],"onblur","_onBlur")))})});a._currRegionIdx=-1},_focusRegion:function(a){if(a){a.focus();var b=this._getRegionHeader(a);y(b,"gridxCellSortFocus");t(a,"gridxSortNode")?y(a,"gridxSortNodeFocus"):t(a,"gridxSortBtn")&&y(a,"gridxSortBtnFocus");y(this.grid.header.domNode,"gridxHeaderFocus");this._currRegionIdx=s(this._focusRegions,a);a.focus()}},_blurRegion:function(a){if(a){var b=
this._getRegionHeader(a);A(b,"gridxCellSortFocus");A(a,"gridxSortNodeFocus");A(a,"gridxSortBtnFocus");A(this.grid.header.domNode,"gridxHeaderFocus")}},_getCurrentRegion:function(){return this._currRegionIdx===-1?null:this._focusRegions[this._currRegionIdx]},_getRegionHeader:function(a){for(;a&&!t(a,"gridxCell");)a=a.parentNode;return a},_setWaiState:function(a,b,c){var b="Column "+this.grid.column(b).name(),d="none",e="ascending";c&&(d=c.descending?"descending":"ascending",e=c.descending?"none":"descending");
c=b+" - is nested sorted by "+d+". Choose to nested sort by "+e;a.childNodes[0].setAttribute("aria-label",b+" - is sorted by "+d+". Choose to sort by "+e);a.childNodes[1].setAttribute("aria-label",c)}})})},"url:gridx/templates/FilterPane.html":'<ul class="gridxFilterPaneForm">\r\n\t<li><label>Column</label></li>\r\n\t<li name="sltColumn">\r\n\t\t<div data-dojo-type="dijit.form.Select" style="width:100%;"></div>\r\n\t</li>\r\n\t<li><label>Condition</label></li>\r\n\t<li name="sltCondition">\r\n\t\t<div data-dojo-type="dijit.form.Select"style="width:100%;"></div>\r\n\t</li>\r\n\t<li><label>Value</label></li>\r\n\t\r\n\t<li class="gridxFilterPaneFieldWrapper gridxFilterPaneTextWrapper">\r\n\t\t<input type="text" data-dojo-type="dijit.form.TextBox" intermediateChanges="true"\r\n\t\t style="width:100%;"/>\r\n\t</li>\r\n\t\r\n<\!--            dropDownClass="gridx.modules.filter.DistinctComboBoxMenu"--\>\r\n\t<li class="gridxFilterPaneFieldWrapper gridxFilterPaneComboWrapper">\r\n\t\t<input type="text" data-dojo-type="dijit.form.ComboBox" \r\n\t\t\tintermediateChanges="true" autoComplete="false" queryExpr="*${0}*" \r\n\t\t\tstyle="width:100%;"/>\r\n\t</li>\r\n\t\r\n\t<li class="gridxFilterPaneFieldWrapper gridxFilterPaneNumberWrapper">\r\n\t\t<input type="text" data-dojo-type="dijit.form.NumberTextBox" intermediateChanges="true" style="width:100%;"/>\r\n\t</li>\r\n\t\r\n\t<li class="gridxFilterPaneFieldWrapper gridxFilterPaneDateWrapper">\r\n\t\t<div data-dojo-type="dijit.form.DateTextBox" intermediateChanges="true" style="width: 100%"></div>\r\n\t</li>\r\n\t\r\n\t<li class="gridxFilterPaneFieldWrapper gridxFilterPaneDateRangeWrapper">\r\n\t\t<div data-dojo-type="dijit.form.DateTextBox" style="width:44%; float: left;" intermediateChanges="true"></div>\r\n\t\t<div style="width:10%; text-align: center; float: left;">to</div>\r\n\t\t<div data-dojo-type="dijit.form.DateTextBox" style="width:44%; float: right;" intermediateChanges="true"></div>\r\n\t</li>\r\n\t\r\n\t<li class="gridxFilterPaneFieldWrapper gridxFilterPaneTimeWrapper">\r\n\t\t<div data-dojo-type="dijit.form.TimeTextBox" style="width: 100%" intermediateChanges="true"></div>\r\n\t</li>\r\n\t\r\n\t<li class="gridxFilterPaneFieldWrapper gridxFilterPaneTimeRangeWrapper">\r\n\t\t<div data-dojo-type="dijit.form.TimeTextBox" style="width:44%; float: left;" intermediateChanges="true"></div>\r\n\t\t<div style="text-align: center; float: left; width: 10%;">to</div>\r\n\t\t<div data-dojo-type="dijit.form.TimeTextBox" style="width:44%; float: right;" intermediateChanges="true"></div>\r\n\t</li>\r\n\t\r\n\t<li class="gridxFilterPaneFieldWrapper gridxFilterPaneRadioWrapper">\r\n\t\t<span style="width:49%; float:left;">\r\n\t\t\t<div data-dojo-type="dijit.form.RadioButton" checked="true"></div><label for="">True</label>\r\n\t\t</span>\r\n\t\t<span style="width:49%; float: right;">\r\n\t\t\t<div data-dojo-type="dijit.form.RadioButton"></div><label for="">False</label>\r\n\t\t</span>\r\n\t</li>\r\n\t\r\n\t<li class="gridxFilterPaneFieldWrapper gridxFilterPaneSelectWrapper">\r\n\t\t<div data-dojo-type="dijit.form.Select" style="width: 100%"></div>\r\n\t</li>\r\n</ul>\r\n',
"gridx/modules/Menu":function(){define(["dojo/_base/declare","dojo/_base/connect","../core/_Module","dojo/dom-class","dojo/keys","dojo/_base/event","dojo/_base/lang","dijit/registry","dijit/Menu"],function(n,m,o,f,l,e,k,g){return n(o,{name:"menu",getAPIPath:function(){return{menu:this}},constructor:function(){this._menus={}},context:null,bind:function(d,b){var b=b||{},c=this,a=c.grid,e=b.hookPoint&&b.hookPoint.toLowerCase()||"grid",f=b.selected?e+"-selected":e,h=c._evtMap[e],l=c._menus[f]=c._menus[f]||
{},f=k.partial(c._showMenu,f);m.disconnect(l.open);m.disconnect(l.close);l.menu=g.byId(d);l.open=h?c.connect(a,h,f):e=="body"?c.connect(a.bodyNode,"oncontextmenu",f):c.connect(a.domNode,"oncontextmenu",f);l.close=c.connect(l.menu,"onClose",function(){c._mutex=0})},unbind:function(d){var b,c=this._menus,a,d=g.byId(d);for(b in c)if(a=c[b],a.menu==d){m.disconnect(a.open);m.disconnect(a.close);delete c[b];break}},_evtMap:{header:"onHeaderContextMenu",headercell:"onHeaderCellContextMenu",cell:"onCellContextMenu",
row:"onRowContextMenu"},_showMenu:function(d,b){var c=this._menus;if(!this._mutex&&c[d].menu){var a=this.grid,i=b.rowId,g=b.columnId,h=!d.indexOf("row"),k=!d.indexOf("cell"),m=!d.indexOf("headercell"),n=d.indexOf("-")>0,o=!!(k&&f.contains(b.cellNode,"gridxCellSelected")||m&&f.contains(a.header.getHeaderNode(g),"gridxColumnSelected")||h&&f.contains(a.body.getRowNode({rowId:i}),"gridxRowSelected"));if(n==o||!n&&o&&!c[d+"-selected"])this.context={grid:a,column:m&&a.column(g,1),row:h&&a.row(i,1),cell:k&&
a.cell(i,g,1)},e.stop(b),this._mutex=1,c[d].menu._openMyself({target:b.target,coords:b.keyCode!=l.F10&&"pageX"in b?{x:b.pageX,y:b.pageY}:null})}}})})},"gridx/modules/pagination/_PaginationBarBase":function(){define(["dojo/_base/declare","dojo/_base/array","../../core/_Module"],function(n,m,o){return n(o,{name:"paginationBar",required:["vLayout"],forced:["pagination"],getAPIPath:function(){return{paginationBar:this}},preload:function(){var f=this.grid,l=f.vLayout,f=f.pagination;this._pagers=[];this._exist("top")&&
l.register(this,"_topPagerNode","headerNode",-5);this._exist("bottom")&&l.register(this,"_bottomPagerNode","footerNode",5);if(!f.arg("initialPageSize"))f.initialPageSize=this.arg("sizes")[0]},load:function(f,l){var e=this;l.then(function(){e._init();e.loaded.callback()})},destroy:function(){this.inherited(arguments);m.forEach(this._pagers,function(f){f.destroyRecursive()})},sizes:[10,25,50,100,0],position:"bottom",sizeSwitch:!0,stepper:!0,description:!0,refresh:function(){m.forEach(this._pagers,function(f){f.refresh()});
this.grid.vLayout.reLayout()},_exist:function(f,l){var e=this.arg(l||"position");return(e=e&&String(e).toLowerCase())&&(e!="top"&&e!="bottom"||e==f)},_init:function(){var f=this;m.forEach(["top","bottom"],function(l){if(f._exist(l)){var e=new (f.arg("pagerClass"))({pagination:f.grid.pagination,module:f,position:l,focusPriority:{top:-5,bottom:5}[l]});f._pagers.push(e);f["_"+l+"PagerNode"]=e.domNode}})}})})},"gridx/core/Cell":function(){define(["dojo/_base/declare"],function(n){return n([],{constructor:function(m,
n,f){this.grid=m;this.model=m.model;this.row=n;this.column=f},data:function(){return this.model.byId(this.row.id).data[this.column.id]},rawData:function(){var m=this.column.field();return m&&this.model.byId(this.row.id).rawData[m]},setRawData:function(m){var n={};n[this.column.field()]=m;return this.row.setRawData(n)}})})},"url:gridx/templates/GotoPagePane.html":"<div class='gridxGotoPage'\r\n\t><table><tbody\r\n\t\t><tr><td class='gridxGotoPageMainMsg'>\r\n\t\t${gotoDialogMainMsg}\r\n\t\t</td></tr\r\n\t\t><tr><td class='gridxGotoPageInput'\r\n\t\t\t><input data-dojo-type='${numberTextBoxClass}'\r\n\t\t\t\tclass='gridxGotoPageInputBox'\r\n\t\t\t\tdata-dojo-attach-point='pageInputBox'\r\n\t\t\t\tdata-dojo-attach-event='onKeyUp: _updateStatus'></input\r\n\t\t\t><span\r\n\t\t\t\tclass='gridxPageCountMsg'\r\n\t\t\t\tdata-dojo-attach-point='pageCountMsgNode'></span\r\n\t\t></td></tr\r\n\t\t><tr><td class='gridxGotoPageBtns'\r\n\t\t\t><button data-dojo-type='${buttonClass}' \r\n\t\t\t\tdata-dojo-attach-point='okBtn'\r\n\t\t\t\tdata-dojo-attach-event='onClick: _onOK'>\r\n\t\t\t\t${gotoDialogOKBtn}\r\n\t\t\t</button\r\n\t\t\t><button data-dojo-type='${buttonClass}'\r\n\t\t\t\tdata-dojo-attach-event='onClick: _onCancel'>\r\n\t\t\t\t${gotoDialogCancelBtn}\r\n\t\t\t</button\r\n\t\t></td></tr\r\n\t></tbody></table\r\n></div>\r\n",
"gridx/modules/HScroller":function(){define(["dojo/_base/declare","dojo/dom-style","dojo/_base/sniff","dojo/_base/Deferred","dojox/html/metrics","../core/_Module"],function(n,m,o,f,l,e){return n(e,{name:"hScroller",forced:["header"],getAPIPath:function(){return this.grid.autoWidth?{}:{hScroller:this}},constructor:function(){this.grid._initEvents(["H"],["Scroll"])},preload:function(){var e=this,g=e.grid,d=g.hScrollerNode;if(!g.autoWidth&&(e.domNode=d,e.container=d.parentNode,e.stubNode=d.firstChild,
g.vLayout.register(e,"container","footerNode",0),d.style.display="block",e.batchConnect([g.header,"onRender","refresh"],[d,"onscroll","_onScroll"],[g,"_onResizeBegin",function(b,c){c.hScroller=new f}],[g,"_onResizeEnd",function(b,c){f.when(c.header,function(){e.refresh();c.hScroller.callback()})}]),o("ie")))d.style.height=l.getScrollbar().h+"px"},scroll:function(e){var g=this.domNode;if((o("webkit")||o("ie")<8)&&!this.grid.isLeftToRight())e=g.scrollWidth-g.offsetWidth-e;g.scrollLeft=e},refresh:function(){var e=
this.grid,g=e.isLeftToRight(),d=g?"marginLeft":"marginRight",g=g?"marginRight":"marginLeft",b=e.hLayout.lead,c=e.hLayout.tail,a=(e.domNode.clientWidth||m.get(e.domNode,"width"))-b-c,i=e.header.innerNode,f=m.get(i,"paddingLeft")||0,h=this.domNode.style,i=i.firstChild.offsetWidth+f,l=h.display,n=i<=a?"none":"block";h[d]=b+f+"px";h[g]=c+"px";h.width=(a-f<0?0:a-f)+"px";this.stubNode.style.width=(i-f<0?0:i-f)+"px";h.display=n;l=="block"&&n=="none"&&e.vLayout.reLayout()},_lastLeft:0,_onScroll:function(){var e=
this.domNode.scrollLeft;if((o("webkit")||o("ie")<8)&&!this.grid.isLeftToRight())e=this.domNode.scrollWidth-this.domNode.offsetWidth-e;if(this._lastLeft!=e)this._lastLeft=e,this._doScroll()},_doScroll:function(){var e=this.grid;e.bodyNode.scrollLeft=this.domNode.scrollLeft;e.onHScroll(this._lastLeft)}})})},"gridx/modules/exporter/Exporter":function(){define(["dojo/_base/declare","dojo/_base/lang","../../core/_Module","dojo/_base/Deferred","dojo/_base/array"],function(n,m,o,f,l){function e(d,b,c,a){return!d[b]||
!1!==d[b](c||a,a)}function k(d,b,c){var a=[],e=0,g=0,h=d.progressStep;if(typeof d.start=="number"&&d.start>=0)e=d.start;typeof d.count=="number"&&d.count>0&&(g=e+d.count);g=g||c;if(b)if(b=l.filter(b,function(a){return a>=e&&a<g}),b.length&&(!h||b.length<=h))a.push(b);else for(d=0;d<b.length;d+=h)a.push(b.slice(d,d+h));else if(b=g-e,!h||b<=h)a.push({start:e,count:b});else for(d=e;d<g;d+=h)a.push({start:d,count:d+h<g?h:g-d});a.p=0;return a}function g(d,b,c){var c=c.p+1,a=m.isArray(d);return c<(a?d.length:
d.start+d.count)?{p:c,row:b.row(a?d[c]:c)}:null}return o.register(n(o,{name:"exporter",getAPIPath:function(){return{exporter:this}},_export:function(d,b){var c=new f,a=this,i=a.model,g=a._getColumns(b),h=a.grid.select,s=h&&h.row,h=h&&h.column,n,o,y={columnIds:g},v=function(){e(d,"afterBody",y,b);c.callback(d.getResult())},u=m.hitch(c,c.errback);try{if(e(d,"initialize",0,b),!b.omitHeader&&e(d,"beforeHeader",y,b)&&(l.forEach(g,function(c){y.column=a.grid.column(c,1);e(d,"handleHeaderCell",y,b)}),e(d,
"afterHeader",y,b)),e(d,"beforeBody",y,b)){if(b.selectedOnly&&s&&(!h||!h.getSelected().length))n=i.when().then(function(){o=s.getSelected()},u);f.when(n,function(){var e,h=o&&i.when({id:o},function(){e=l.map(o,function(a){return i.idToIndex(a)});e.sort(function(a,b){return a-b})},u);f.when(h,function(){var h=new f,g=i.size();a._fetchRows(c,d,y,b,h,k(b,e,g));h.then(v,u)},u)},u)}else c.callback(d.getResult())}catch(x){u(x)}return c},_fetchRows:function(d,b,c,a,i,f){var h=this,k=h.grid,l=a.filter,n=
c.columnIds,o=f[f.p++],v=m.hitch(i,i.errback),u=function(){h.model.when(o,function(){for(var d=m.isArray(o)?{p:0,row:k.row(o[0])}:{p:o.start,row:k.row(o.start)};d&&d.row;d=g(o,k,d))if(c.row=d.row,(!l||l(d.row))&&e(b,"beforeRow",c,a)){for(var i=0;i<n.length;++i){var f=k.column(n[i],1),r=c.cell=k.cell(d.row,f);c.column=f;c.data=h._format(a,r);e(b,"handleCell",c,a)}e(b,"afterRow",c,a)}}).then(function(){h._fetchRows(d,b,c,a,i,f)},v)};o?(d.progress(f.p/f.length),f.length>1?setTimeout(u,10):u()):i.callback()},
_format:function(d,b){var c=d.formatters,a=b.column.id;if(c&&m.isFunction(c[a]))return c[a](b);else if(d.useStoreData)return b.rawData()||"";return b.data()||""},_getColumns:function(d){var b=this.grid,c=b._columnsById;m.isArrayLike(d.columns)&&d.columns.length?(d=l.filter(d.columns,function(a){return c[a]}),d.sort(function(a,b){return c[a].index-c[b].index})):d=l.map(b._columns,function(a){return a.id});return d}}))})},"gridx/modules/select/Cell":function(){define(["dojo/_base/declare","dojo/_base/array",
"dojo/_base/sniff","dojo/dom-class","dojo/keys","./_RowCellBase","../../core/_Module"],function(n,m,o,f,l,e){return n(e,{name:"selectCell",cellMixin:{select:function(){this.grid.select.cell.selectById(this.row.id,this.column.id);return this},deselect:function(){this.grid.select.cell.deselectById(this.row.id,this.column.id);return this},isSelected:function(){return this.model.isMarked(this.row.id,this.column.id)}},getSelected:function(){var e=this,g=[];m.forEach(e.grid._columns,function(d){var b=e.model.getMarkedIds(e._getMarkType(d.id));
g.push.apply(g,m.map(b,function(b){return[b,d.id]}))});return g},clear:function(){var e=this,g=e.model;e.arg("enabled")&&(m.forEach(e.grid._columns,function(d){var d=e._getMarkType(d.id),b=g.getMarkedIds(d),c=b.length,a;for(a=0;a<c;++a)g.markById(b[a],0,d)}),g.when())},_type:"cell",_markTypePrefix:"select_",_getMarkType:function(e){e=this._markTypePrefix+e;this.model._spTypes[e]=1;return e},_init:function(){var e=this;e.inherited(arguments);e.batchConnect([e.grid,"onCellMouseDown",function(g){e._select([g.rowId,
g.columnId],g.ctrlKey)}],[e.grid,o("ff")<4?"onCellKeyUp":"onCellKeyDown",function(g){g.keyCode==l.SPACE&&e._select([g.rowId,g.columnId],g.ctrlKey)}])},_onMark:function(e,g,d){var b=this;if(d.indexOf(b._markTypePrefix)===0){var c=d.substr(b._markTypePrefix.length);b.grid._columnsById[c]&&(b._highlight(g,c,e),b.model.when({id:g},function(){b[e?"onSelected":"onDeselected"](b.grid.cell(g,c,1))}))}},_highlight:function(e,g,d){if(e=this.grid.body.getCellNode({rowId:e,colId:g}))f.toggle(e,"gridxCellSelected",
d),e.setAttribute("aria-selected",!!d),this.onHighlightChange()},_markById:function(e,g){var d=this.model;d.markById(e[0],g,this._getMarkType(e[1]));d.when()},_onRender:function(e,g){var d=this.model,b=e+g,c,a,i,f,h=this.grid._columns;for(c=e;c<b;++c){i=d.indexToId(c);for(a=h.length-1;a>=0;--a)f=h[a].id,d.isMarked(i,this._getMarkType(f))&&this._highlight(i,f,1)}}})})},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(n,m,o){n.DeferredList=function(f,
l,e,k){var g=[];m.call(this);var d=this;f.length===0&&!l&&this.resolve([0,[]]);var b=0;o.forEach(f,function(c,a){function i(c,e){g[a]=[c,e];b++;b===f.length&&d.resolve(g)}c.then(function(b){l?d.resolve([a,b]):i(!0,b)},function(a){e?d.reject(a):i(!1,a);if(k)return null;throw a;})})};n.DeferredList.prototype=new m;n.DeferredList.prototype.gatherResults=function(f){f=new n.DeferredList(f,!1,!0,!1);f.addCallback(function(f){var e=[];o.forEach(f,function(f){e.push(f[1])});return e});return f};return n.DeferredList})},
"gridx/modules/pagination/PaginationBarDD":function(){define(["dojo/_base/declare","../../core/_Module","./_PaginationBarBase","./DropDownPager","dijit/form/FilteringSelect","dijit/form/Select"],function(n,m,o,f,l,e){return n(o,{stepperClass:l,sizeSwitchClass:e,pagerClass:f})})},"gridx/modules/Persist":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/json","dojo/_base/unload","dojo/cookie","../core/_Module"],function(n,m,o,f,l,e,k){return n(k,{name:"persist",
constructor:function(e){var d=this;d.key=window.location+"/"+d.arg("key",e.id,function(b){return b});d._persistedList={};var b=e.destroy;e.destroy=function(){d.save();b.call(e)};d._restoreColumnState();l.addOnWindowUnload(function(){d.save()})},getAPIPath:function(){return{persist:this}},enabled:!0,options:null,key:"",put:function(g,d,b){d&&o.isObject(d)?e(g,f.toJson(d),b):e(g,null,{expires:-1})},get:function(g){return f.fromJson(e(g))},registerAndLoad:function(e,d,b){this._persistedList[e]={saver:d,
scope:b,enabled:!0};return(d=this.get(this.key))?d[e]:null},enable:function(e){this._setEnable(e,1)},disable:function(e){this._setEnable(e,0)},isEnabled:function(e){var d=this._persistedList[e];if(d)return d.enabled;return e?!1:this.arg("enabled")},save:function(){var e=null;if(this.arg("enabled")){var d,b=this._persistedList,e={};for(d in b)b[d].enabled&&(e[d]=b[d].saver.call(b[d].scope||o.global))}this.put(this.key,e,this.options)},_persistedList:null,_setEnable:function(e,d){var b=this._persistedList,
d=!!d;if(b[e])b[e].enabled=d;else if(!e){for(e in b)b[e].enabled=d;this.enabled=d}},_restoreColumnState:function(){var e=this.grid,d=[],b=this.registerAndLoad("column",this._columnStateSaver,this);o.isArray(b)&&(m.forEach(b,function(b){m.some(e._columns,function(a,i){if(a.id==b.id)return d[b.index]=e._columns[i],d[b.index].width=b.width,!0})}),e.setColumns(d))},_columnStateSaver:function(){return m.map(this.grid._columns,function(e){return{id:e.id,index:e.index,width:e.width}})}})})},"gridx/modules/RowHeader":function(){define(["dojo/_base/declare",
"dojo/_base/query","dojo/_base/lang","dojo/_base/sniff","dojo/aspect","dojo/dom-construct","dojo/dom-class","dojo/dom-style","dojo/keys","../core/_Module","../util"],function(n,m,o,f,l,e,k,g,d,b,c){return n(b,{name:"rowHeader",getAPIPath:function(){return{rowHeader:this}},constructor:function(){this.headerNode=e.create("div",{"class":"gridxRowHeaderHeader",role:"row",innerHTML:['<table border="0" cellspacing="0" cellpadding="0" style="width: ',this.arg("width"),';"><tr><th class="gridxRowHeaderHeaderCell" role="rowheader" tabindex="-1"></th></tr></table>'].join("")});
this.bodyNode=e.create("div",{"class":"gridxRowHeaderBody"})},destroy:function(){this.inherited(arguments);this._b.remove();e.destroy(this.headerNode);e.destroy(this.bodyNode)},preload:function(){var a=this.headerNode,b=this.bodyNode,c=this.grid,d=c.body,e=this.arg("width");c._initEvents(["RowHeaderHeader","RowHeaderCell"],c._eventNames);c.header.domNode.appendChild(a);a.style.width=e;this.headerCellNode=m("th",a)[0];c._connectEvents(a,"_onHeaderMouseEvent",this);c.mainNode.appendChild(b);b.style.width=
e;c.hLayout.register(null,b);this.batchConnect([d,"onRender","_onRendered"],[d,"onAfterRow","_onAfterRow"],[d,"onAfterCell","_onAfterCell"],[d,"onUnrender","_onUnrender"],[c.bodyNode,"onscroll","_onScroll"],[c,"onRowMouseOver","_onRowMouseOver"],[c,"onRowMouseOut","_onRowMouseOver"],[c,"_onResizeEnd","_onResize"],c.columnResizer&&[c.columnResizer,"onResize","_onResize"]);this._b=l.before(d,"renderRows",o.hitch(this,this._onRenderRows),!0);c._connectEvents(b,"_onBodyMouseEvent",this);this._initFocus()},
width:"20px",onMoveToRowHeaderCell:function(){},_onRenderRows:function(a,b,c){var d=this.bodyNode;if(b>0)a=this._buildRows(a,b),c=="top"?e.place(a,d,"first"):c=="bottom"?e.place(a,d,"last"):(d.innerHTML=a,d.scrollTop=0);else if(c!="top"&&c!="bottom")d.innerHTML=""},_onAfterRow:function(a){var b=m('[visualindex="'+a.visualIndex+'"].gridxRowHeaderRow',this.bodyNode)[0],c=m('[visualindex="'+a.visualIndex+'"].gridxRow .gridxRowTable',this.grid.bodyNode)[0],d=b.firstChild,e=this.arg("cellProvider");b.setAttribute("rowid",
a.rowId);b.setAttribute("rowindex",a.rowIndex);b.setAttribute("parentid",a.parentId||"");if(e)d.firstChild.firstChild.firstChild.innerHTML=e.call(this,a);this._syncRowHeight(d,c)},_onAfterCell:function(a,b){var c=m('[visualindex="'+b.visualIndex+'"].gridxRowHeaderRow',this.bodyNode)[0],d=m('[visualindex="'+b.visualIndex+'"].gridxRow .gridxRowTable',this.grid.bodyNode)[0];this._syncRowHeight(c.firstChild,d)},_syncRowHeight:function(a,b){function c(){return f("ie")?b.offsetHeight+"px":g.getComputedStyle(b).height}
a.style.height=c();setTimeout(function(){a.style.height=c()},0)},_onRendered:function(){var a=this.arg("headerProvider");if(a)this.headerCellNode.innerHTML=a();this._onScroll()},_onUnrender:function(a){(a=a&&m('[rowid="'+a+'"].gridxRowHeaderRow',this.bodyNode)[0])&&e.destroy(a)},_onScroll:function(){this.bodyNode.scrollTop=this.grid.bodyNode.scrollTop},_onResize:function(){for(var a=this.grid.bodyNode.firstChild,b=this.bodyNode.firstChild;a&&b;a=a.nextSibling,b=b.nextSibling)b.firstChild.style.height=
a.firstChild.offsetHeight+"px"},_buildRows:function(a,b){for(var c=[],d=0;d<b;++d)c.push('<div class="gridxRowHeaderRow" role="row" visualindex="',a+d,'"><table border="0" cellspacing="0" cellpadding="0" style="height: 24px;"><tr><td class="gridxRowHeaderCell" role="rowheader" tabindex="-1"></td></tr></table></div>');return c.join("")},_onHeaderMouseEvent:function(a,b){var c=this.grid,d="onRowHeaderHeader"+a,e="onHeader"+a;if(c._isConnected(d))c[d](b);if(c._isConnected(e))c[e](b)},_onBodyMouseEvent:function(a,
b){var c=this.grid,d="onRowHeaderCell"+a,e="onRow"+a,f=c._isConnected(d),g=c._isConnected(e);if(f||g)if(this._decorateBodyEvent(b),b.rowIndex>=0){if(b.isRowHeader&&f)c[d](b);if(g)c[e](b)}},_decorateBodyEvent:function(a){for(var b=a.target||a.originalTarget;b&&b!=this.bodyNode;){if(k.contains(b,"gridxRowHeaderCell"))a.isRowHeader=!0;else if(b.tagName.toLowerCase()==="div"&&k.contains(b,"gridxRowHeaderRow")){a.rowId=b.getAttribute("rowid");a.parentId=b.getAttribute("parentid");a.rowIndex=parseInt(b.getAttribute("rowindex"),
10);a.visualIndex=parseInt(b.getAttribute("visualindex"),10);break}b=b.parentNode}},_onRowMouseOver:function(a){var b=m('[rowid="'+a.rowId+'"].gridxRowHeaderRow',this.bodyNode)[0];b&&k.toggle(b,"gridxRowOver",a.type.toLowerCase()=="mouseover")},_initFocus:function(){var a=this.grid.focus;a&&a.registerArea({name:"rowHeader",priority:0.9,focusNode:this.bodyNode,scope:this,doFocus:this._doFocus,onFocus:this._onFocus,doBlur:this._blur,onBlur:this._blur,connects:[this.connect(this.bodyNode,"onkeydown",
"_onKeyDown")]})},_doFocus:function(a){if(this._focusRow(this.grid.body._focusCellRow))return c.stopEvent(a),!0},_onFocus:function(a){for(a=a.target;a!=this.bodyNode;){if(k.contains(a,"gridxRowHeaderRow"))return this._focusRow(this.grid.body._focusCellRow=parseInt(a.getAttribute("visualindex"),10)),!0;a=a.parentNode}},_focusRow:function(a){a=m('[visualindex="'+a+'"] .gridxRowHeaderCell',this.bodyNode)[0];this._blur();if(a=a||this.bodyNode.firstChild)k.add(a,"gridxCellFocus"),a.focus();return a},_blur:function(){m(".gridxCellFocus",
this.bodyNode).forEach(function(a){k.remove(a,"gridxCellFocus")});return!0},_onKeyDown:function(a){var b=this,e=b.grid;if(e.focus.currentArea()=="rowHeader"&&a.keyCode==d.UP_ARROW||a.keyCode==d.DOWN_ARROW){c.stopEvent(a);var h=e.body,f=h._focusCellRow+(a.keyCode==d.UP_ARROW?-1:1);h._focusCellRow=f=f<0?0:f>=h.visualCount?h.visualCount-1:f;e.vScroller.scrollToRow(f).then(function(){b._focusRow(f);b.onMoveToRowHeaderCell(f,a)})}}})})},"gridx/modules/filter/FilterPane":function(){define(["dojo/_base/kernel",
"dijit","dojo/text!../../templates/FilterPane.html","dojo/_base/declare","./DistinctComboBoxMenu","./Filter","dijit/layout/ContentPane","dojo/data/ItemFileReadStore","dijit/form/Select","dijit/form/TextBox","dijit/form/DateTextBox","dijit/form/TimeTextBox","dijit/form/RadioButton","dijit/form/NumberTextBox","dijit/form/ComboBox","dojox/html/ellipsis","dojo/store/util/QueryResults","dojo/_base/array","dojo/_base/lang","dojo/_base/html","dojo/query"],function(n,m,o,f,l){return f([m.layout.ContentPane],
{content:o,sltColumn:null,sltCondition:null,grid:null,title:"Rule",postCreate:function(){this.inherited(arguments);this._initFields();this._initSltCol();this.connect(this.sltColumn,"onChange","_onColumnChange");this.connect(this.sltCondition,"onChange","_onConditionChange");this.comboText.dropDownClass=l},getData:function(){var e=this._getValue(),f=this.sltCondition.get("value");return f==="isEmpty"||e!==null&&(f!=="range"||e.start&&e.end)?{colId:this.sltColumn.get("value"),condition:f,value:f===
"isEmpty"?"":e,type:this._getType()}:null},setData:function(e){e!==null&&(this.sltColumn.set("value",e.colId,null),this._onColumnChange(),this.sltCondition.set("value",e.condition,null),this._onConditionChange(),this._setValue(e.value))},close:function(){var e=this._getContainer();e.getChildren().length===4&&(e._contentBox.w+=dojox.html.metrics.getScrollbar().w);if(this===e.selectedChildWidget){var f=n.indexOf(e.getChildren(),this);f>0&&e.selectChild(e.getChildren()[f-1])}e.removeChild(this);n.toggleClass(e.domNode,
"gridxFilterSingleRule",e.getChildren().length===1);this.grid.filterBar._filterDialog._updateAccordionContainerHeight()},onChange:function(){},_getContainer:function(){return m.byNode(this.domNode.parentNode.parentNode.parentNode)},_initFields:function(){this.sltColumn=m.byNode(n.query("li>table",this.domNode)[0]);this.sltCondition=m.byNode(n.query("li>table",this.domNode)[1]);var e=this._fields=[this.tbSingle=m.byNode(n.query(".gridxFilterPaneTextWrapper > .dijitTextBox",this.domNode)[0]),this.tbNumber=
m.byNode(n.query(".gridxFilterPaneNumberWrapper > .dijitTextBox",this.domNode)[0]),this.comboText=m.byNode(n.query(".gridxFilterPaneComboWrapper > .dijitComboBox",this.domNode)[0]),this.sltSingle=m.byNode(n.query(".gridxFilterPaneSelectWrapper > .dijitSelect",this.domNode)[0]),this.dtbSingle=m.byNode(n.query(".gridxFilterPaneDateWrapper > .dijitDateTextBox",this.domNode)[0]),this.dtbStart=m.byNode(n.query(".gridxFilterPaneDateRangeWrapper > .dijitDateTextBox",this.domNode)[0]),this.dtbEnd=m.byNode(n.query(".gridxFilterPaneDateRangeWrapper > .dijitDateTextBox",
this.domNode)[1]),this.ttbSingle=m.byNode(n.query(".gridxFilterPaneTimeWrapper > .dijitTimeTextBox",this.domNode)[0]),this.ttbStart=m.byNode(n.query(".gridxFilterPaneTimeRangeWrapper > .dijitTimeTextBox",this.domNode)[0]),this.ttbEnd=m.byNode(n.query(".gridxFilterPaneTimeRangeWrapper > .dijitTimeTextBox",this.domNode)[1]),this.rbTrue=m.byNode(n.query(".gridxFilterPaneRadioWrapper .dijitRadio",this.domNode)[0]),this.rbFalse=m.byNode(n.query(".gridxFilterPaneRadioWrapper .dijitRadio",this.domNode)[1])];
this.rbTrue.domNode.nextSibling.htmlFor=this.rbTrue.id;this.rbFalse.domNode.nextSibling.htmlFor=this.rbFalse.id;var f="rb_name_"+Math.random();this.rbTrue.set("name",f);this.rbFalse.set("name",f);n.forEach(e,function(e){this.connect(e,"onChange","_onValueChange")},this)},_initSltCol:function(){var e=[{label:"Any Column",value:""}],f=this.sltColumn;n.forEach(this.grid.columns(),function(f){f.isFilterable()&&e.push({value:f.id,label:f.name()})},this);f.addOption(e)},_initCloseButton:function(){var e=
this._buttonWidget;this.connect(n.create("span",{className:"gridxFilterPaneCloseButton",innerHTML:'<img src="'+this._blankGif+'"/>',title:"Close"},e.domNode,"first"),"onclick","close");n.addClass(e.titleTextNode,"dojoxEllipsis")},_onColumnChange:function(){var e=this.grid.filterBar._getConditionOptions(this.sltColumn.get("value")),f=this.sltCondition;f.options&&f.options.length&&f.removeOption(f.options);f.addOption(n.clone(e));this._updateTitle();this.onChange()},_onConditionChange:function(){this._updateValueField();
this._updateTitle();this.onChange()},_onValueChange:function(){this._updateTitle();this.onChange()},_getDataType:function(){var e=this.sltColumn.get("value"),f="string";e!==""&&(f=this.grid.column(e).dataType());return f},_getType:function(){var e={string:"Text",number:"Number",date:"Date",time:"Time","boolean":"Radio"}[this._getDataType()];"range"===this.sltCondition.get("value")&&(e+="Range");return e},_updateTitle:function(){if(this._buttonWidget){var e;e=this._getValue();var f=this._getType(),
g=this.sltCondition.get("value"),d=this._buttonWidget.titleTextNode;e=e&&(g!=="range"||e.start&&e.end)?this.sltColumn.get("displayedValue")+" "+this.grid.filterBar._getRuleString(g,e,f):"Rule "+(n.indexOf(this._getContainer().getChildren(),this)+1);d.innerHTML=e;d.title=e.replace(/<\/?span[^>]*>/g,"").replace("&nbsp;"," ")}},_needComboBox:function(){var e=this.sltColumn.get("value");return this._getType()==="Text"&&!!e&&this.grid._columnsById[e].field},_updateValueField:function(){var e=this._getType(),
f=this.sltColumn.get("value"),g=this._needComboBox();n.forEach(["Text","Combo","Date","Number","DateRange","Time","TimeRange","Select","Radio"],function(b){n.removeClass(this.domNode,"gridxFilterPane"+b)},this);n.addClass(this.domNode,"gridxFilterPane"+(g?"Combo":e));var d=this.sltCondition.get("value")==="isEmpty";n.forEach(this._fields,function(b){b.set("disabled",d)});if(g){if(!this._dummyCombo)this._dummyCombo=new m.form.ComboBox({store:this.grid.store});e=this.grid._columnsById[f];n.mixin(this.comboText,
{store:this.grid.store,searchAttr:e.field,fetchProperties:{sort:[{attribute:e.field,descending:!1}]}})}},_getValue:function(){var e=this._getType(),f=this._needComboBox();switch(e){case "Text":return(f?this.comboText:this.tbSingle).get("value")||null;case "Number":return isNaN(this.tbNumber.get("value"))?null:this.tbNumber.get("value");case "Select":return this.sltSingle.get("value")||null;case "Date":return this.dtbSingle.get("value")||null;case "DateRange":return{start:this.dtbStart.get("value"),
end:this.dtbEnd.get("value")};case "Time":return this.ttbSingle.get("value")||null;case "TimeRange":return{start:this.ttbStart.get("value"),end:this.ttbEnd.get("value")};case "Radio":return!!this.rbTrue.get("checked");default:return null}},_setValue:function(e){if(e){var f=this._getType(),g=this._needComboBox();switch(f){case "Text":(g?this.comboText:this.tbSingle).set("value",e);break;case "Number":this.tbNumber.set("value",e);break;case "Select":this.sltSingle.set("value",e);break;case "Date":this.dtbSingle.set("value",
e);break;case "DateRange":this.dtbStart.set("value",e.start);this.dtbEnd.set("value",e.end);break;case "Time":this.ttbSingle.set("value",e);break;case "TimeRange":this.ttbStart.set("value",e.start);this.ttbEnd.set("value",e.end);break;case "Radio":this.rbTrue.set("checked",!0)}}},uninitialize:function(){this._dummyCombo&&this._dummyCombo.destroyRecursive()}})})},"gridx/modules/Focus":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/connect","dojo/_base/lang","dojo/_base/sniff",
"dojo/_base/window","dojo/keys","../core/_Module","../util"],function(n,m,o,f,l,e,k,g,d){return n(g,{name:"focus",getAPIPath:function(){return{focus:this}},constructor:function(){this._areas={};this._tabQueue=[];this._focusNodes=[]},preload:function(){var b=this,c=b.grid;b._onDocFocus=function(a){if(!b._noBlur){if(l("ie"))a.target=a.srcElement;b._onFocus(a)}};b.batchConnect([c.domNode,"onkeydown","_onTabDown"],[c.firstFocusNode,"onfocus","_focus"],[c.lastFocusNode,"onfocus","_focus"],[c,"onBlur",
"_doBlur"]);l("ie")?e.doc.attachEvent("onfocusin",b._onDocFocus):e.doc.addEventListener("focus",b._onDocFocus,!0)},destroy:function(){this._areaQueue=this._areas=null;this._focusNodes=[];this._queueIdx=-1;l("ie")?e.doc.detachEvent("onfocusin",this._onDocFocus):e.doc.removeEventListener("focus",this._onDocFocus,!0);this.inherited(arguments)},registerArea:function(b){if(b&&b.name&&typeof b.priority=="number"){var c=this._tabQueue,a=function(a){b[a]=b[a]?f.hitch(b.scope||b,b[a]):function(){return!0}};
this._areas[b.name]&&this.removeArea(b.name);a("doFocus");a("doBlur");a("onFocus");a("onBlur");b.connects=b.connects||[];this._areas[b.name]=b;a=d.biSearch(c,function(a){return a.p-b.priority});c[a]&&c[a].p===b.priority?(c[a].stack.unshift(b.name),this._focusNodes[a]=b.focusNode||this._focusNodes[a]):(c.splice(a,0,{p:b.priority,stack:[b.name]}),this._focusNodes.splice(a,0,b.focusNode))}},focusArea:function(b,c){var a=this._areas[b];if(a){var d=this._areas[this.currentArea()];if(d&&d.name===b)return c&&
d.doFocus(),!0;else if(!d||d.doBlur()){if(d)this.onBlurArea(d.name);if(a.doFocus())return this.onFocusArea(a.name),this._updateCurrentArea(a),!0;this._updateCurrentArea()}}return!1},currentArea:function(){var b=this._tabQueue[this._queueIdx];return b?b.stack[this._stackIdx]:""},tab:function(b,c){var a=this._areas,d=a[this.currentArea()];if(!b)return d?d.name:"";var e=this._queueIdx+b,h=b>0?1:-1,f=this._tabQueue;if(d){var g=d.doBlur(c,b),k=a[g];if(g)this.onBlurArea(d.name);if(k&&k.doFocus(c,b))return this.onFocusArea(k.name),
this._updateCurrentArea(k),k.name;else if(!g)return d.name}for(;e>=0&&e<f.length;e+=h){g=f[e].stack;for(d=0;d<g.length;++d)if(k=g[d],a[k].doFocus(c,b))return this.onFocusArea(k),this._queueIdx=e,this._stackIdx=d,k}this._tabingOut=1;b<0?(this._queueIdx=-1,this.grid.domNode.focus()):(this._queueIdx=f.length,this.grid.lastFocusNode.focus());return""},removeArea:function(b){var c=this._areas[b];if(c){this.currentArea()===b&&this._updateCurrentArea();var a=d.biSearch(this._tabQueue,function(a){return a.p-
c.priority}),e,f=this._tabQueue[a].stack;for(e=f.length-1;e>=0;--e)if(f[e]===c.name){f.splice(e,1);break}f.length||(this._tabQueue.splice(a,1),this._focusNodes.splice(a,1));m.forEach(c.connects,o.disconnect);delete this._areas[b];return!0}return!1},onFocusArea:function(){},onBlurArea:function(){},_queueIdx:-1,_stackIdx:0,_onTabDown:function(b){b.keyCode===k.TAB&&this.tab(b.shiftKey?-1:1,b)},_onFocus:function(b){var c,a,d,e;a=this.grid.domNode;d=b.target;for(var h=this._areas[this.currentArea()];d&&
d!==a;){c=m.indexOf(this._focusNodes,d);if(c>=0){d=this._tabQueue[c].stack;for(a=0;a<d.length;++a)if(e=this._areas[d[a]],e.onFocus(b)){h&&h.name!==e.name&&(h.onBlur(b),this.onBlurArea(h.name));this.onFocusArea(e.name);this._queueIdx=c;this._stackIdx=a;break}return}d=d.parentNode}d==a&&h&&this._doBlur(b,h)},_focus:function(b){if(this._tabingOut)this._tabingOut=0;else if(b.target==this.grid.firstFocusNode)this._queueIdx=-1,this.tab(1);else if(b.target===this.grid.lastFocusNode)this._queueIdx=this._tabQueue.length,
this.tab(-1)},_doBlur:function(b,c){!c&&this.currentArea()&&(c=this._areas[this.currentArea()]);c&&(c.onBlur(b),this.onBlurArea(c.name),this._updateCurrentArea())},_updateCurrentArea:function(b){var c=this._tabQueue;if(b){var a=this._queueIdx=d.biSearch(c,function(a){return a.p-b.priority});this._stackIdx=m.indexOf(c[a].stack,b.name)}else this._queueIdx=null,this._stackIdx=0}})})},"gridx/core/model/cache/Async":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred",
"dojo/DeferredList","./_Cache"],function(n,m,o,f,l,e){function k(b,a){if(!a.length||!b.length)return b;var d=[],e=0,h,f=[];h=function(a,b){var c,e;for(c=a.length-1;c>=0;--c){e=a[c];var h=e.start,f=b;d[h]=d[h]||0;d[h]+=f;e.count&&(e=e.start+e.count,h=-b,d[e]=d[e]||0,d[e]+=h)}};h(b,1);h(a,2);for(var g=0,k=d.length;g<k;++g)if(d[g])if(e+=d[g],e===1)f.push({start:g});else{if(e===3)f._overlap=!0;if((h=f[f.length-1])&&!h.count)h.count=g-h.start}return f}function g(b){for(var a=[],d=b.range,e,h,f,g,k,l;d.length>
0;){k=f=d.pop();l=0;for(e=d.length-1;e>=0;--e){g=d[e];f.start<g.start&&(h=g,g=f,f=h);if(g.count)if(f.start<=g.start+g.count)if(f.count&&f.start+f.count>g.start+g.count)g.count=f.start+f.count-g.start;else{if(!f.count)g.count=null}else{f=k;continue}d[e]=g;l=1;break}l||a.push(k)}b.range=a;return b}function d(b,a){var d=b.range,e=[],h,f;for(d.sort(function(a,b){return a.start-b.start});d.length;){h=d.shift();if(d.length)if(f=d[0],f.count&&f.count+f.start-h.start<=a){f.count=f.count+f.start-h.start;f.start=
h.start;continue}else if(!f.count&&f.start-h.start<a){f.start=h.start;continue}e.push(h)}b.range=e;return b}var b=o.hitch;return n(e,{isAsync:!0,constructor:function(b,a){var d=a.cacheSize,e=a.pageSize;this.cacheSize=typeof d=="number"&&!isNaN(d)?d:-1;this.pageSize=typeof e=="number"&&!isNaN(e)&&e>0?e:100},when:function(c,a){var d=this,e=c._def=new f,h=b(e,e.errback),g=function(a){d._requests.pop();h(a)};d._fetchById(c).then(function(b){d._fetchByIndex(b).then(function(b){d._fetchByParentId(b).then(function(b){f.when(b._req,
function(){var b;if(a)try{a()}catch(c){b=c}d._requests.shift();b?e.errback(b):e.callback()},g)},g)},g)},h);return e},keep:function(b){var a=this._kept;this._cache[b]&&this._struct[b]&&!a[b]&&(a[b]=1,++this._keptSize)},free:function(b){b?this._kept[b]&&(delete this._kept[b],--this._keptSize):(this._kept={},this._keptSize=0)},clear:function(){this._requests&&this._requests.length?this._clearLock=1:(this.inherited(arguments),this._requests=[],this._priority=[],this._kept={},this._keptSize=0)},_init:function(){},
_findMissingIds:function(b){var a=this._cache;return m.filter(b,function(b){return!a[b]})},_searchRootLevel:function(c){var a=this,d=new f,e=b(d,d.errback),h=a._struct[""],g=[],k,l;if(c.length){for(var m=1,n=h.length;m<n;++m)h[m]||(l?k.count++:(l=1,g.push(k={start:m-1,count:1})));g.push({start:h.length<2?0:h.length-2})}var o=function(b){b.length&&g.length?a._storeFetch(g.shift()).then(function(){o(a._findMissingIds(b))},e):d.callback(b)};o(c);return d},_searchChildLevel:function(c){var a=this,d=new f,
e=b(d,d.errback),h=a._struct,g=h[""].slice(1),k=function(b){if(b.length&&g.length){var c=g.shift();a._loadChildren(c).then(function(){[].push.apply(g,h[c].slice(1));k(a._findMissingIds(b))},e)}else d.callback(b)};k(c);return d},_fetchById:function(c){var a=this,d=new f,e,h,g=b(d,d.callback),k=b(d,d.errback),l=c.range,n=a.store.getChildren;c.pids=[];if(n)for(e=l.length-1;e>=0;--e)if(h=l[e],h=h.parentId)c.id.push(h),c.pids.push(h),l.splice(e,1);e=a._findMissingIds(c.id);var o=[];e.length?(m.forEach(e,
function(b){var c=a.idToIndex(b);c>=0&&!a.treePath(b).pop()?l.push({start:c,count:1}):o.push(b)}),a._searchRootLevel(o).then(function(b){b.length&&n?a._searchChildLevel(b).then(function(a){a.length&&console.warn("Requested row ids are not found: ",a);g(c)},k):g(c)},k)):g(c);return d},_fetchByParentId:function(c){var a=this,d=new f;(new l(m.map(c.pids,function(b){return a._loadChildren(b)}),0,1)).then(b(d,d.callback,c),b(d,d.errback));return d},_fetchByIndex:function(c){var a=this,e=new f,k=a._size[""],
c=d(a._mergePendingRequests(a._findMissingIndexes(g(c))),a.pageSize),h=k>0?m.filter(c.range,function(a){if(a.count>0&&k>a.start+a.count)a.count=k-a.start;return a.start<k}):c.range;(new l(m.map(h,function(b){return a._storeFetch(b)}),0,1)).then(b(e,e.callback,c),b(e,e.errback));return e},_findMissingIndexes:function(b){var a,d,e,f,g,k=[],l=this._struct[""],m=this._size[""];for(a=b.range.length-1;a>=0;--a){e=b.range[a];f=e.count?e.start+e.count:l.length-1;g=1;for(d=e.start;d<f;++d){var n=l[d+1];!n||
!this._cache[n]?(g?k.push({start:d,count:1}):++k[k.length-1].count,g=0):g=1}e.count||(g?(m<0||d<m)&&k.push({start:d}):delete k[k.length-1].count)}b.range=k;return b},_mergePendingRequests:function(b){var a,d,e=[],f=this._requests;for(a=f.length-1;a>=0;--a)d=f[a],b.range=k(b.range,d.range),b.range._overlap&&e.push(d._def);b._req=e.length&&new l(e,0,1);f.push(b);return b},_checkSize:function(){var b,a=this.cacheSize,d=this._priority;if(this._clearLock)this._clearLock=0,this.clear();else if(a>=0)for(a+=
this._keptSize;d.length>a;)b=d.shift(),this._kept[b]?d.push(b):delete this._cache[b]}})})},"gridx/core/Column":function(){define(["dojo/_base/declare"],function(n){return n([],{constructor:function(m,n){this.grid=m;this.model=m.model;this.id=n},index:function(){var m=this.grid._columnsById[this.id];return m?m.index:-1},cell:function(m,n){return this.grid.cell(m,this,n)},name:function(){return this.grid._columnsById[this.id].name||""},setName:function(m){this.grid._columnsById[this.id].name=m;return this},
field:function(){return this.grid._columnsById[this.id].field||null},getWidth:function(){return this.grid._columnsById[this.id].width}})})},"gridx/core/model/_Extension":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/_base/array"],function(n,m,o){return n([],{constructor:function(f){var l=this.inner=f._model;this._cnnts=[];this.model=f;f._model=this;l&&(this.connect(l,"onDelete","_onDelete"),this.connect(l,"onNew","_onNew"),this.connect(l,"onSet","_onSet"))},destroy:function(){o.forEach(this._cnnts,
m.disconnect)},connect:function(f,l,e,k){f=m.connect(f,l,k||this,e);this._cnnts.push(f);return f},_onNew:function(){this.onNew.apply(this,arguments)},_onSet:function(){this.onSet.apply(this,arguments)},_onDelete:function(){this.onDelete.apply(this,arguments)},onNew:function(){},onDelete:function(){},onSet:function(){},_call:function(f,l){var e=this[f],k=this.inner;return e?e.apply(this,l||[]):k&&k._call(f,l)},_mixinAPI:function(){var f,l=this.model,e=arguments,k=function(e){return function(){return l._model._call(e,
arguments)}};for(f=e.length-1;f>=0;--f)l[e[f]]=k(e[f])}})})},"gridx/modules/dnd/_Base":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","../../core/_Module","./Avatar","./_Dnd"],function(n,m,o,f,l){return n(f,{delay:2,enabled:!0,canRearrange:!0,copyWhenDragOut:!1,avatar:l,preload:function(){var e=this.grid.dnd._dnd;e.register(this.name,this);e.avatar=this.arg("avatar")},checkArg:function(e,f){var g=this.arg(e);return g&&o.isObject(g)?m.some(f,function(d){return g[d]}):
g}})})},"gridx/modules/move/Column":function(){define(["dojo/_base/declare","../../core/_Module"],function(n,m){return n(m,{name:"moveColumn",getAPIPath:function(){return{move:{column:this}}},columnMixin:{moveTo:function(m,f){this.grid.move.column.moveRange(this.index(),1,m,f);return this}},move:function(m,f,l){typeof m==="number"&&(m=[m]);var e=[],k,g,d=this.grid._columns,b,c=[];k=0;for(g=m.length;k<g;++k)e[m[k]]=!0;for(k=e.length-1;k>=0;--k)e[k]&&(c.unshift(d[k]),d.splice(k,1));k=0;for(g=d.length;k<
g;++k)if(d[k].index>=f){b=k;break}if(b===void 0)b=d.length;this._moveComplete(c,b,l)},moveRange:function(m,f,l,e){if(l<m||l>m+f)l>m+f&&(l-=f),this._moveComplete(this.grid._columns.splice(m,f),l,e)},onMoved:function(){},_moveComplete:function(m,f,l){var e=this.grid,k={},g,d=e._columns;for(g=m.length-1;g>=0;--g)k[m[g].index]=f+g;d.splice.apply(d,[f,0].concat(m));for(g=d.length-1;g>=0;--g)d[g].index=g;e.header.refresh();l||(e.body.refresh(),this.onMoved(k))}})})},"gridx/modules/extendedSelect/Column":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/_base/query","dojo/_base/lang","dojo/_base/sniff","dojo/dom-class","dojo/mouse","dojo/keys","../../core/_Module","./_Base"],function(n,m,o,f,l,e,k,g,d,b){return n(b,{name:"selectColumn",columnMixin:{select:function(){this.grid.select.column.selectById(this.id);return this},deselect:function(){this.grid.select.column.deselectById(this.id);return this},isSelected:function(){return this.grid._columnsById[this.id]._selected}},getSelected:function(){return m.map(m.filter(this.grid._columns,
function(b){return b._selected}),function(b){return b.id})},clear:function(b){o(".gridxColumnSelected",this.grid.domNode).forEach(function(a){e.remove(a,"gridxColumnSelected")});m.forEach(this.grid._columns,function(a){a._selected=0});b||this._onSelectionChange()},isSelected:function(){var b=this.grid._columnsById;return m.every(arguments,function(a){return(a=b[a])&&a._selected})},_type:"column",_markById:function(b,a){m.forEach(b,function(b){if(b=this.grid._columnsById[b])b._selected=a,this._doHighlight({column:b.index},
a)},this)},_markByIndex:function(b,a){var d,e,h=this.grid._columns;for(d=0;d<b.length;++d){var g=b[d];if(f.isArrayLike(g)){var k=g[0],g=g[1];if(k>=0&&k<Infinity)for(g>=k&&g<Infinity||(g=h.length-1);k<g+1;++k)if(e=h[k])e._selected=a,this._doHighlight({column:e.index},a)}else if(g>=0&&g<Infinity&&(e=h[g]))e._selected=a,this._doHighlight({column:g},a)}},_init:function(){var b=this,a=b.grid;b.batchConnect([a,"onHeaderCellMouseDown",function(a){k.isLeft(a)&&!e.contains(a.target,"gridxArrowButtonNode")&&
b._start({column:a.columnIndex},a.ctrlKey,a.shiftKey)}],[a,"onHeaderCellMouseOver",function(a){b._highlight({column:a.columnIndex})}],[a,"onCellMouseOver",function(a){b._highlight({column:a.columnIndex})}],[a,l("ff")<4?"onHeaderCellKeyUp":"onHeaderCellKeyDown",function(a){if((a.keyCode==g.SPACE||a.keyCode==g.ENTER)&&!e.contains(a.target,"gridxArrowButtonNode"))b._start({column:a.columnIndex},a.ctrlKey,a.shiftKey),b._end()}],[a.header,"onMoveToHeaderCell","_onMoveToHeaderCell"])},_onRender:function(b,
a){var d,f,h=b+a;d=this.grid;var g=d.bodyNode,k,l=m.filter(d._columns,function(a){return a._selected});for(d=l.length-1;d>=0;--d)for(f=b;f<h;++f)k=o(['[visualindex="',f,'"] [colid="',l[d].id,'"]'].join(""),g)[0],e.add(k,"gridxColumnSelected")},_onMoveToHeaderCell:function(b,a){if(a.shiftKey&&(a.keyCode==g.LEFT_ARROW||a.keyCode==g.RIGHT_ARROW))this._start({column:this.grid._columnsById[b].index},a.ctrlKey,1),this._end()},_isSelected:function(b){var b=this.grid._columns[b.column],a=b.id;return this._isRange?
m.indexOf(this._refSelectedIds,a)>=0:b._selected},_beginAutoScroll:function(){var b=this.grid.autoScroll;this._autoScrollV=b.vertical;b.vertical=!1},_endAutoScroll:function(){this.grid.autoScroll.vertical=this._autoScrollV},_doHighlight:function(b,a){o('[colid="'+this.grid._columns[b.column].id+'"].gridxCell',this.grid.domNode).forEach(function(b){e.toggle(b,"gridxColumnSelected",a)})},_focus:function(b){var a=this.grid;a.focus&&a.header._focusNode(o('[colid="'+a._columns[b.column].id+'"].gridxCell',
a.header.domNode)[0])},_addToSelected:function(b,a,d){var e=this.grid,f;if(!this._isRange)this._refSelectedIds=this.getSelected();if(this._isRange&&this._inRange(a.column,b.column,this._lastEndItem.column)){b=Math.min(a.column,this._lastEndItem.column);for(a=Math.max(a.column,this._lastEndItem.column);b<=a;++b)e._columns[b]._selected=m.indexOf(this._refSelectedIds,e._columns[b].id)>=0}else{f=Math.min(b.column,a.column);a=Math.max(b.column,a.column);for(b=f;b<=a;++b)e._columns[b]._selected=d}}})})},
"url:gridx/templates/Grid.html":'<div class="gridx" role="grid"\r\n\t><span data-dojo-attach-point="firstFocusNode" tabindex="0"></span\r\n\t><div class="gridxHeader" role="presentation" data-dojo-attach-point="headerNode"></div\r\n\t><div class="gridxMain" role="presentation" data-dojo-attach-point="mainNode"\r\n\t\t><div class="gridxBodyEmpty" role="alert" tabindex="-1" data-dojo-attach-point="emptyNode"></div\r\n\t\t><div class="gridxBody" role="presentation" data-dojo-attach-point="bodyNode"></div\r\n\t\t><div class="gridxVScroller" data-dojo-attach-point="vScrollerNode"\r\n\t\t\t><div style=\'width: 1px;\'></div\r\n\t\t></div\r\n\t></div\r\n\t><div class="gridxFooter" data-dojo-attach-point="footerNode"\r\n\t\t><div class="gridxHScroller"\r\n\t\t\t><div class="gridxHScrollerInner" data-dojo-attach-point="hScrollerNode"><div style="width:1px; height: 1px;"></div></div\r\n\t\t></div\r\n\t></div\r\n\t><span data-dojo-attach-point="lastFocusNode" tabindex="0"></span\r\n></div>\r\n',
"gridx/core/model/extensions/FormatSort":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/data/util/sorter","../_Extension"],function(n,m,o,f,l){function e(e,d,b,c){return function(a,f){return d*b(c.getValue(a,e),c.getValue(f,e))}}function k(e,d,b,c,a,f){var k={};return function(e,g){var l=c.getIdentity(e),m=c.getIdentity(g);k[l]||(k[l]=f(a._itemToObject(e)));k[m]||(k[m]=f(a._itemToObject(g)));return d*b(k[l],k[m])}}return n(l,{name:"formatSort",priority:50,constructor:function(e){var a;
a=this.cache=e._cache,e=a;this.connect(e,"onBeforeFetch","_onBeforeFetch");this.connect(e,"onAfterFetch","_onAfterFetch")},_onBeforeFetch:function(){this._oldCreateSortFunction=f.createSortFunction;f.createSortFunction=o.hitch(this,this._createComparator)},_onAfterFetch:function(){if(this._oldCreateSortFunction)f.createSortFunction=this._oldCreateSortFunction,delete this._oldCreateSortFunction},_createComparator:function(g,d){var b=[],c=this.cache,a=d.comparatorMap,i=f.basicComparator;m.forEach(g,
function(f){var h=f.attribute,g=f.descending?-1:1,l=i,f=c.columns&&c.columns[f.colId];a&&(typeof h!=="string"&&h.toString&&(h=h.toString()),l=a[h]||i);if(f&&f.comparator)l=f.comparator;f=f&&f.sortFormatted&&f.formatter;b.push(f?k(h,g,l,d,c,f):e(h,g,l,d))});return function(a,c){var d,e,f=0;d=0;for(e=b.length;!f&&d<e;++d)f=b[d](a,c);return f}}})})},"gridx/modules/RowLock":function(){define(["dojo/_base/kernel","dojo/_base/lang","../core/_Module","dojo/_base/declare","dojo/_base/array","dojo/_base/html",
"dojo/query"],function(n,m,o,f,l,e){return f(o,{name:"rowLock",required:["vLayout"],forced:["hLayout","vScroller"],count:0,getAPIPath:function(){return{rowLock:this}},load:function(e,f){n.experimental("gridx/modules/RowLock");this.count=this.arg("count");var d=this,b=this.grid;f.then(function(){d.connect(b.vScrollerNode,"onscroll",function(){d._updatePosition()});d.loaded.callback()})},lock:function(f){this.unlock();this.count=f;this._foreachLockedRows(function(f){f.style.position="absolute";e.addClass(f,
"gridxLockedRow")});this._adjustBody();this._updatePosition()},unlock:function(){this._foreachLockedRows(function(f){f.style.position="static";e.removeClass(f,"gridxLockedRow")});this.grid.bodyNode.style.paddingTop="0px";this.count=0},_adjustBody:function(){var e=0;this._foreachLockedRows(function(f){e+=f.offsetHeight});this.grid.bodyNode.style.paddingTop=e+"px"},_updatePosition:function(){if(this.count){var e=this.grid.bodyNode.scrollTop,f=0;this._foreachLockedRows(function(d){d.style.top=e+f+"px";
f+=d.offsetHeight})}},_foreachLockedRows:function(e){for(var f=this.grid.bodyNode.childNodes,d=0;d<this.count;d++)e(f[d])}})})},"gridx/nls/Body":function(){define({root:{loadingInfo:"Loading...",emptyInfo:"No items to display"}})},"gridx/modules/VirtualVScroller":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/sniff","dojo/_base/event","dojo/_base/Deferred","dojo/query","./VScroller","../core/_Module"],function(n,m,o,f,l,e,k,g){return n(g,{constructor:function(d,
b){d.autoHeight?m.mixin(this,new g(d,b)):this._scrolls=[]},buffSize:5,lazy:!1,lazyTimeout:50,scrollToRow:function(d,b){var c=new e,a=this,f=a._scrolls,g=function(){a._subScrollToRow(d,c,b)};f.push(c);f.length>1?f[f.length-2].then(g):g();return c},_subScrollToRow:function(d,b,c){var a=this,e=0,f=a._avgRowHeight,h=a.grid.bodyNode,g=a.domNode,e=h.scrollTop,l=g.scrollTop,m=k('[visualindex="'+d+'"]',h)[0],n=function(c){a._scrolls.splice(o.indexOf(a._scrolls,b),1);b.callback(c)};if(m)if(f=m.offsetTop,f+
m.offsetHeight>e+h.clientHeight)e=f-e,c||(e+=m.offsetHeight-h.clientHeight);else if(f<e||c&&f>e)e=f-e;else{n(!0);return}else if(h.childNodes.length){for(m=h.firstChild;m&&m.offsetTop<e;)m=m.nextSibling;var v=m&&m.getAttribute("visualindex");if(m&&d<v)e=(d-v)*f;else{for(m=h.lastChild;m&&m.offsetTop+m.offsetHeight>e+h.clientHeight;)m=m.previousSibling;v=m&&m.getAttribute("visualindex");if(m&&d>v)e=(d-v)*f;else{n(!1);return}}}else{n(!1);return}f=l===0&&e<0;l=l>=g.scrollHeight-g.offsetHeight&&e>0;f||
l?a._doVirtualScroll(1):g.scrollTop+=e/a._ratio;f&&h.firstChild.getAttribute("visualindex")==0||l&&h.lastChild.getAttribute("visualindex")==a.grid.body.visualCount-1?n(!1):setTimeout(function(){a._subScrollToRow(d,b,c)},5)},_init:function(){var d=this;d._rowHeight={};d._syncHeight();d.connect(d.grid,"_onResizeEnd",function(){d._doScroll(0,1)});d._doScroll(0,1)},_doVirtualScroll:function(d){var b=this.domNode,c=b.scrollTop,a=this._ratio*(c-(this._lastScrollTop||0));if(d||a){this._lastScrollTop=c;var e=
this.arg("buffSize"),d=b.scrollHeight-b.offsetHeight,f=this.grid.body,h=f.visualStart,g=h+f.visualCount,l=this.grid.bodyNode,m=l.firstChild,n=m&&m.offsetTop-a,o=l.lastChild,u=o&&o.offsetTop-a+o.offsetHeight,x=l.scrollTop,C=x+l.clientHeight,w=this._avgRowHeight,b=Math.ceil(b.offsetHeight/w)+2*e,z,D,B;if(m&&n>x&&n<C)D=f.renderStart,B=Math.ceil((n-x)/w)+e,z=c===0?h:Math.max(D-B,h),B="top";else if(o&&u>x&&u<C)z=f.renderStart+f.renderCount,B=Math.ceil((C-u)/w)+e,D=c===d&&c?g:Math.min(z+B,g),B="bottom";
else if(!m||n>C||!o||u<x)c<=d/2?(z=c===0?h:h+Math.max(Math.floor(c/w)-e,0),D=Math.min(z+b,g)):(D=c===d?g:g+Math.min(b-Math.floor((d-c)/w),0),z=Math.max(D-b,h)),B="clear";else if(m)c===0?(g=f.renderStart,g>h&&(z=h,D=g,B="top")):c===d&&(h=f.renderStart+f.renderCount-1,h<g-1&&(z=h+1,D=g,B="bottom"));typeof z=="number"&&typeof D=="number"&&(f.renderRows(z,D-z,B),c&&z<D&&(z=k('[visualindex="'+D+'"]',l)[0])&&(a+=z.offsetTop));c===0?l.scrollTop=0:c>=d?l.scrollTop=l.scrollHeight:B!="clear"&&(l.scrollTop+=
a)}},_doScroll:function(d,b){this.arg("lazy")?(this._lazyScrollHandle&&clearTimeout(this._lazyScrollHandle),this._lazyScrollHandle=setTimeout(m.hitch(this,this._doVirtualScroll,b),this.arg("lazyTimeout"))):this._doVirtualScroll(b)},_onMouseWheel:function(d){this.domNode.scrollTop-=(typeof d.wheelDelta==="number"?d.wheelDelta/3:-40*d.detail)/this._ratio;l.stop(d)},_onBodyChange:function(){this._doScroll(0,1);this._doVirtual()},_onForcedScroll:function(){this._rowHeight={};this._onBodyChange()},_avgRowHeight:24,
_rowHeight:null,_ratio:1,_syncHeight:function(){var d=this._avgRowHeight*this.grid.body.visualCount,b=1342177;f("ff")?b=17895697:f("webkit")&&(b=134217726);if(d>b)this._ratio=d/b,d=b;this.stubNode.style.height=d+"px"},_doVirtual:function(){var d=this;clearTimeout(d._pVirtual);d._pVirtual=setTimeout(function(){d._update()},100)},_update:function(){var d=0,b=0,c=this.grid,a=c.body,c=c.bodyNode,e=this.buffSize*this._avgRowHeight,f=c.scrollTop,h=f-e,g=f+c.clientHeight+e,k=this._rowHeight;o.forEach(c.childNodes,
function(a){k[a.getAttribute("rowid")]=a.offsetHeight;a.offsetTop>g?++b:a.offsetTop+a.offsetHeight<h&&++d});a.unrenderRows(d);a.unrenderRows(b,"post");var l,c=a=0;for(l in k)a+=k[l],++c;if(c)this._avgRowHeight=a/c,this._syncHeight()}})})},"gridx/modules/TitleBar":function(){define(["dojo/_base/declare","dojo/dom-construct","../core/_Module"],function(n,m,o){return n(o,{name:"titleBar",getAPIPath:function(){return{titleBar:this}},constructor:function(){this.domNode=m.create("div",{"class":"gridxTitleBar",
innerHTML:this.arg("label")})},preload:function(){this.grid.vLayout.register(this,"domNode","headerNode",-15)},destroy:function(){this.inherited(arguments);m.destroy(this.domNode)},label:"",setLabel:function(f){this.domNode.innerHTML=this.label=f}})})},"gridx/modules/CellWidget":function(){define(["dojo/_base/declare","dojo/_base/query","dojo/_base/event","dojo/_base/sniff","dojo/dom-class","dojo/keys","dijit/registry","dijit/a11y","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin",
"../core/_Module"],function(n,m,o,f,l,e,k,g,d,b,c,a){var i=function(){return""},r=n([d,b,c],{content:"",setCellValue:null,cell:null,postMixInProperties:function(){this.templateString=['<div class="gridxCellWidget">',this.content,"</div>"].join("")},postCreate:function(){this.connect(this.domNode,"onmousedown",function(a){a.cancelBubble=!0})},setValue:function(a,b){try{m(".gridxHasGridCellValue",this.domNode).map(function(a){return k.byNode(a)}).forEach(function(c){if(c){var d=l.contains(c.domNode,
"gridxUseStoreData");c.set("value",d?b:a)}}),this.setCellValue&&this.setCellValue(a,b,this)}catch(c){console.error("Can not set cell value: ",c)}}});a._markupAttrs.push("!widgetsInCell","!setCellValue");return n(a,{name:"cellWidget",getAPIPath:function(){return{cellWidget:this}},cellMixin:{cellWidget:function(){return this.grid.cellWidget.getCellWidget(this.row.id,this.column.id)}},constructor:function(){this._decorators={};var a,b,c=this.grid._columns;for(a=c.length-1;a>=0;--a)if(b=c[a],b.decorator&&
b.widgetsInCell)b.userDecorator=b.decorator,b.decorator=i,b._cellWidgets={},b._backupWidgets=[]},preload:function(){var a=this.grid.body;this.batchConnect([a,"onAfterRow","_showDijits"],[a,"onAfterCell","_showDijit"],[a,"onUnrender","_onUnrenderRow"]);this._initFocus()},destory:function(){this.inherited(arguments);var a,b,c,d,e=this.grid._columns;for(a=e.length-1;a>=0;--a)if(c=e[a],d=c._cellWidgets){for(b in d)d[b].destroyRecursive();delete c._cellWidgets}},backupCount:20,setCellDecorator:function(a,
b,c,d){var e=this._decorators[a];e||(e=this._decorators[a]={});(a=e[b])||(a=e[b]={});a.decorator=c;a.setCellValue=d;a.widget=null},restoreCellDecorator:function(a,b){var c=this._decorators[a];if(c){var d=c[b];if(d&&d.widget){var e=d.widget.domNode.parentNode;if(e)e.innerHTML=null;window.setTimeout(function(){d.widget.destroyRecursive();d.widget=null;d.decorator=null;d.setCellValue=null},100)}delete c[b]}},getCellWidget:function(a,b){var c=this.grid.body.getCellNode({rowId:a,colId:b});if(c&&(c=m(".gridxCellWidget",
c)[0]))return k.byNode(c);return null},onCellWidgetCreated:function(){},_showDijits:function(a,b){var c=m('[rowid="'+a.rowId+'"]',this.grid.bodyNode)[0],d,e,g,i=this.grid._columns;for(d=i.length-1;d>=0;--d)if(e=i[d],e.userDecorator||this._getSpecialCellDec(a.rowId,e.id))if(g=m('[colid="'+e.id+'"]',c)[0]){e=this._getCellWidget(e,a,b);if(f("ie"))for(;g.childNodes.length;)g.removeChild(g.firstChild);else g.innerHTML="";e.placeAt(g);e.startup()}},_showDijit:function(a,b,c,d){if(c.userDecorator||this._getSpecialCellDec(b.rowId,
c.id))cellWidget=this._getCellWidget(c,b,d),a.innerHTML="",cellWidget.placeAt(a),cellWidget.startup()},_getCellWidget:function(a,b,c){var d=this._getSpecialWidget(a,b,c),e=c.data[a.id],c=c.rawData[a.field];d||(d=a._backupWidgets.pop(),d||(d=new r({content:a.userDecorator(),setCellValue:a.setCellValue}),this.onCellWidgetCreated(d,a)),a._cellWidgets[b.rowId]=d);d.cell=this.grid.cell(b.rowId,a.id,1);d.isInit=!0;d.setValue(e,c);return d},_onUnrenderRow:function(a){for(var b=this.grid._columns,c=this.arg("backupCount"),
d=function(a,b){var d=a._cellWidgets[b];a._backupWidgets.length<c?a._backupWidgets.push(d):d.destroyRecursive()},e=0,f=b.length;e<f;++e){var g=b[e],i=g._cellWidgets;if(i)if(a&&i[a])d(g,a),delete i[a];else{for(var k in i)d(g,k);g._cellWidgets={}}}},_getSpecialCellDec:function(a,b){var c=this._decorators[a];return c&&c[b]},_getSpecialWidget:function(a,b,c){var d=this._decorators[b.rowId];if(d&&(d=d[a.id])){if(!d.widget&&d.decorator)try{d.widget=new r({content:d.decorator(c.data[a.id],b.rowId,b.rowIndex),
setCellValue:d.setCellValue})}catch(e){console.error("Edit:",e)}return d.widget}return null},_initFocus:function(){var a=this.grid.focus;a&&a.registerArea({name:"cellwidget",priority:1,scope:this,doFocus:this._doFocus,doBlur:this._doBlur,onFocus:this._onFocus,onBlur:this._endNavigate,connects:[this.connect(this.grid,"onCellKeyPress","_onKey")]})},_doFocus:function(a,b){if(this._navigating){var c=this._navElems,d=function(){var a=b<0?c.highest||c.last:c.lowest||c.first;a&&a.focus()};f("webkit")?d():
setTimeout(d,5);return!0}return!1},_doBlur:function(a,b){if(a){var c=this,d=c.model,e=c.grid,g=e.body,i=c._navElems,k=i.lowest||i.first,i=i.last||i.highest||k;if((f("ie")?a.srcElement:a.target)==(b>0?i:k))o.stop(a),d.when({id:c._focusRowId},function(){var a=g.getRowInfo({parentId:d.treePath(c._focusRowId).pop(),rowIndex:d.idToIndex(c._focusRowId)}).visualIndex;g._nextCell(a,e._columnsById[c._focusColId].index,b>0?1:-1,function(a,b){return c._isNavigable(e._columns[b].id)}).then(function(a){c._focusColId=
e._columns[a.c].id;var f=g.getRowInfo({visualIndex:a.r});c._focusRowId=d.indexToId(f.rowIndex,f.parentId);g._focusCellCol=a.c;g._focusCellRow=a.r;c._beginNavigate(c._focusRowId,c._focusColId);c._doFocus(null,b)})});return!1}else return this._navigating=!1,!0},_isNavigable:function(a){return(a=this.grid._columnsById[a])&&a.navigable&&a.decorator},_beginNavigate:function(a,b){if(this._isNavigable(b))return this._navigating=!0,this._focusColId=b,this._focusRowId=a,this._navElems=g._getTabNavigable(this.grid.body.getCellNode({rowId:a,
colId:b})),!0;return!1},_endNavigate:function(){this._navigating=!1},_onFocus:function(a){for(var b=a.target,c=this.grid.domNode;b&&b!==c&&!l.contains(b,"gridxCell");)b=b.parentNode;if(b&&b!==c){for(var c=b,d=b.getAttribute("colid");b&&!l.contains(b,"gridxRow");)b=b.parentNode;if(b)return b=b.getAttribute("rowid"),c!=a.target&&this._beginNavigate(b,d)}return!1},_onKey:function(a){var b=this.grid.focus;if(a.keyCode==e.F2&&!this._navigating&&b.currentArea()=="body")this._beginNavigate(a.rowId,a.columnId)&&
(o.stop(a),b.focusArea("cellwidget"));else if(a.keyCode==e.ESCAPE&&this._navigating&&b.currentArea()=="cellwidget")this._navigating=!1,b.focusArea("body")}})})},"gridx/nls/NestedSort":function(){define({root:{singleSort:"Single Sort",nestedSort:"Nested Sort",ascending:"Click to sort Ascending",descending:"Click to sort Descending",sortingState:"${0} - ${1}",unsorted:"Do not sort this column"}})}}});define("gridx/gridx-all",[],1);