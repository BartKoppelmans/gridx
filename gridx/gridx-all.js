//>>built
require({cache:{"gridx/modules/extendedSelect/_Base":function(){define(["dojo/_base/declare","dojo/_base/query","dojo/_base/connect","dojo/_base/Deferred","dojo/_base/sniff","dojo/_base/window","dojo/dom","dojo/keys","../../core/_Module","../AutoScroll"],function(n,m,o,l,i,f,g,e,d){return n(d,{required:["autoScroll"],getAPIPath:function(){var c={select:{}};c.select[this._type]=this;return c},load:function(){var c=this,b=c.grid,a=f.doc;c._refSelectedIds=[];c.subscribe("gridClearSelection_"+b.id,function(a){a!=
c._type&&c.clear()});c.batchConnect([b.body,"onRender","_onRender"],[a,"onmouseup","_end"],[a,"onkeydown",function(a){a.keyCode==e.SHIFT&&g.setSelectable(b.domNode,!1)}],[a,"onkeyup",function(a){a.keyCode==e.SHIFT&&g.setSelectable(b.domNode,!0)}]);c._init();c.loaded.callback()},enabled:!0,holdingCtrl:!1,holdingShift:!1,selectById:function(){return this._subMark("_markById",arguments,!0)},deselectById:function(){return this._subMark("_markById",arguments,!1)},selectByIndex:function(){return this._subMark("_markByIndex",
arguments,!0)},deselectByIndex:function(){return this._subMark("_markByIndex",arguments,!1)},onSelectionChange:function(){},_subMark:function(c,b,a){var h=this;if(h.arg("enabled"))return a&&o.publish("gridClearSelection_"+h.grid.id,[h._type]),h._lastSelectedIds=h.getSelected(),h._refSelectedIds=[],l.when(h[c](b,a),function(){h._onSelectionChange()})},_start:function(c,b,a){if(!this._selecting&&!this._marking&&this.arg("enabled")){g.setSelectable(this.grid.domNode,!1);this._fixFF(1);var h=this._isSelected(c);
(a=a||this.arg("holdingShift"))&&this._lastStartItem?(this._isRange=1,this._toSelect=this._lastToSelect,this._startItem=this._lastStartItem,this._currentItem=this._lastEndItem):(this._startItem=c,this._currentItem=null,b||this.arg("holdingCtrl")?this._toSelect=!h:(this._toSelect=1,this.clear(1)));o.publish("gridClearSelection_"+this.grid.id,[this._type]);this._beginAutoScroll();this.grid.autoScroll.enabled=!0;this._lastSelectedIds=this.getSelected();this._selecting=1;this._highlight(c)}},_highlight:function(c){var b=
this;if(b._selecting){var a=b._type,h=b._startItem,k=b._currentItem,r=function(h,k,r){for(var h=h[a],k=k[a],c=h<k?1:-1;h!=k;h+=c){var d={};d[a]=h;b._highlightSingle(d,r)}};k===null?b._highlightSingle(c,1):b._inRange(c[a],h[a],k[a])?r(k,c,0):(b._inRange(h[a],c[a],k[a])&&(r(k,h,0),k=h),r(c,k,1));b._currentItem=c;b._focus(c)}},_end:function(){var c=this,b=c.grid;if(c._selecting){c._fixFF();c._endAutoScroll();c._selecting=0;c._marking=1;b.autoScroll.enabled=!1;var a=c._addToSelected(c._startItem,c._currentItem,
c._toSelect);c._lastToSelect=c._toSelect;c._lastStartItem=c._startItem;c._lastEndItem=c._currentItem;c._startItem=c._currentItem=c._isRange=null;l.when(a,function(){g.setSelectable(b.domNode,!0);c._marking=0;c._onSelectionChange()})}},_highlightSingle:function(c,b){b=b?this._toSelect:this._isSelected(c);this._doHighlight(c,b)},_onSelectionChange:function(){var c=this.getSelected();this.onSelectionChange(c,this._lastSelectedIds);this._lastSelectedIds=c},_inRange:function(c,b,a,h){return(c>=b&&c<=a||
c>=a&&c<=b)&&(h||c!=a)},_fixFF:function(c){i("ff")&&m(".gridxSortNode",this.grid.headerNode).forEach(function(b){b.style.overflow=c?"visible":""})}})})},"gridx/Grid":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-class","dojo/dom-geometry","dojo/_base/query","dijit/_WidgetBase","dijit/_TemplatedMixin","dojo/text!./templates/Grid.html","./core/Core","./core/_Module","./modules/Header","./modules/Body","./modules/VLayout","./modules/HLayout","./modules/VScroller",
"./modules/HScroller","./modules/ColumnWidth"],function(n,m,o,l,i,f,g,e,d,c,b,a,h,k,r,s,x,E){var w=m.forEach,u=function(){},n=n("gridx.Grid",[g,e,c],{templateString:d,coreModules:[a,h,k,r,s,x,E],coreExtensions:[],postMixInProperties:function(){this._eventFlags={};this.modules=this.coreModules.concat(this.modules||[]);this.modelExtensions=this.coreExtensions.concat(this.modelExtensions||[]);this._initEvents(this._compNames,this._eventNames);this.reset(this)},buildRendering:function(){this.inherited(arguments);
l.toggle(this.domNode,"gridxRtl",!this.isLeftToRight())},postCreate:function(){this.inherited(arguments);this._postCreate()},startup:function(){this._started||(this.inherited(arguments),this._deferStartup.callback())},destroy:function(){this._uninit();this.inherited(arguments)},resize:function(a){var h={};a&&(this.autoWidth&&delete a.w,this.autoHeight&&delete a.h,i.setMarginBox(this.domNode,a));this._onResizeBegin(a,h);this._onResizeEnd(a,h)},_onResizeBegin:function(){},_onResizeEnd:function(){},
_compNames:["Cell","HeaderCell","Row","Header"],_eventNames:["Click","DblClick","MouseDown","MouseUp","MouseOver","MouseOut","MouseMove","ContextMenu","KeyDown","KeyPress","KeyUp"],_initEvents:function(a,h){var k=this;w(a,function(a){w(h,function(h){h="on"+a+h;k[h]=k[h]||u})})},_connectEvents:function(a,h,k){w(this._eventNames,function(b){this.connect(a,"on"+b.toLowerCase(),o.hitch(k,h,b))},this)},_isConnected:function(a){return this[a]!==u}});n.markupFactory=function(a,h,k){if(!a.structure&&h.nodeName.toLowerCase()==
"table"){var r=a.structure=[];f("thead > tr > th",h).forEach(function(a){var h={};w(b._markupAttrs,function(k){k[0]=="!"?(k=k.slice(1),h[k]=eval(a.getAttribute(k))):h[k]=a.getAttribute(k)});h.name=h.name||a.innerHTML;r.push(h)})}return new k(a,h)};return n})},"gridx/modules/extendedSelect/Cell":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/query","dojo/_base/lang","dojo/_base/Deferred","dojo/_base/sniff","dojo/dom-class","dojo/mouse","dojo/keys","../../core/_Module","./_RowCellBase"],
function(n,m,o,l,i,f,g,e,d,c,b){var a=l.isArrayLike;return c.register(n(b,{name:"selectCell",cellMixin:{select:function(){this.grid.select.cell.selectByIndex(this.row.index(),this.column.index());return this},deselect:function(){this.grid.select.cell.deselectByIndex(this.row.index(),this.column.index());return this},isSelected:function(){return this.grid.select.cell.isSelected(this.row.id,this.column.id)}},getSelected:function(){var a=this,k=[];m.forEach(a.grid._columns,function(b){var c=a.model.getMarkedIds(a._getMarkType(b.id));
k.push.apply(k,m.map(c,function(a){return[a,b.id]}))});return k},clear:function(a){var k=this;o(".gridxCellSelected",k.grid.bodyNode).forEach(function(a){g.remove(a,"gridxCellSelected")});m.forEach(k.grid._columns,function(a){k.model.clearMark(k._getMarkType(a.id))});a||k._onSelectionChange()},isSelected:function(a,k){return this.model.isMarked(a,this._getMarkType(k))},_type:"cell",_markTypePrefix:"select_",_getMarkType:function(a){a=this._markTypePrefix+a;this.model._spTypes[a]=1;return a},_markById:function(h,
k){a(h[0])||(h=[h]);var b=this,c=b.grid._columnsById,d=b.model;m.forEach(h,function(a){var h=a[0],a=a[1];h&&c[a]&&d.markById(h,k,b._getMarkType(a))});d.when()},_markByIndex:function(h,k){a(h[0])||(h=[h]);var h=m.filter(h,function(h){if(a(h)&&h.length>=2&&h[0]>=0&&h[0]<Infinity&&h[1]>=0&&h[1]<Infinity){if(h.length>=4&&h[2]>=0&&h[2]<Infinity&&h[3]>=0&&h[3]<Infinity)h._range=1;return!0}}),b=this,c=b.model,d=b.grid,e=d._columns,f=d.body,g,i,l,n;m.forEach(h,function(a){if(a._range){var h=Math.min(a[0],
a[2]),d=Math.max(a[0],a[2])-h+1,x=Math.max(a[1],a[3]);for(g=Math.min(a[1],a[3]);g<=x;++g)if(l=e[g]){h=f.getRowInfo({visualIndex:h}).rowIndex;n=b._getMarkType(l.id);for(i=0;i<d;++i)c.markByIndex(i,k,n)}}else if(l=e[a[1]])g=f.getRowInfo({visualIndex:a[0]}).rowIndex,c.markByIndex(g,k,b._getMarkType(l.id))});return c.when()},_init:function(){var a=this,k=a.grid;a.inherited(arguments);a.batchConnect([k,"onCellMouseDown",function(k){e.isLeft(k)&&a._start({rid:k.rowId,r:k.visualIndex,cid:k.columnId,c:k.columnIndex},
k.ctrlKey,k.shiftKey)}],[k,"onCellMouseOver",function(k){a._highlight({rid:k.rowId,r:k.visualIndex,cid:k.columnId,c:k.columnIndex})}],[k,f("ff")<4?"onCellKeyUp":"onCellKeyDown",function(k){k.keyCode===d.SPACE&&(a._start({rid:k.rowId,r:k.visualIndex,cid:k.columnId,c:k.columnIndex},k.ctrlKey,k.shiftKey),a._end())}])},_onRender:function(a,k){var b,c=this.model,d=this.grid,e=d._columns,f=a+k;for(b=0;b<e.length;++b){var u=e[b].id,i=this._getMarkType(u);if(c.getMarkedIds(i).length)for(j=a;j<f;++j){var l=
this._getRowId(j);(c.isMarked(l,i)||this._selecting&&this._toSelect&&this._inRange(b,this._startItem.c,this._currentItem.c,1)&&this._inRange(j,this._startItem.r,this._currentItem.r,1))&&g.add(o('[visualindex="'+j+'"] [colid="'+u+'"]',d.bodyNode)[0],"gridxCellSelected")}}},_onMark:function(a,k,b){if(!this._marking&&b.indexOf(this._markTypePrefix)===0&&(k=o('[rowid="'+k+'"]',this.grid.bodyNode)[0]))b=b.substr(this._markTypePrefix.length),(b=o('[colid="'+b+'"]',k)[0])&&g.toggle(b,"gridxCellSelected",
a)},_onMoveToCell:function(a,k,b){b.shiftKey&&(this._start({rid:this._getRowId(a),r:a,cid:this.grid._columns[k].id,c:k},b.ctrlKey,1),this._end())},_isSelected:function(a){if(!a.rid)a.rid=this._getRowId(a.r);if(this._isRange){var k=this._refSelectedIds[a.cid];return k&&m.indexOf(k,a.rid)>=0}else return this.model.isMarked(a.rid,this._getMarkType(a.cid))},_highlight:function(a){var k=this,b=k._currentItem;if(k._selecting){if(b===null)k._highlightSingle(a,1);else{var c=k._startItem,d=function(a,h,b){var c=
h.c>a.c?1:-1,d=h.r>a.r?1:-1,r,s,x={};if(!b){s=a.r;for(p=h.r+d;s!=p;s+=d)x[s]=k.model.indexToId(s)}r=a.c;for(q=h.c+c;r!=q;r+=c){var e=k.grid._columns[r].id;s=a.r;for(p=h.r+d;s!=p;s+=d)k._highlightSingle({rid:x[s],r:s,cid:e,c:r},b)}};(k._inRange(a.r,c.r,b.r)||k._inRange(a.c,c.c,b.c)||k._inRange(c.r,a.r,b.r)||k._inRange(c.c,a.c,b.c))&&d(c,b,0);d(c,a,1);k._focus(a)}k._currentItem=a}},_doHighlight:function(a,k){var b,c=this.grid.bodyNode.childNodes;for(b=c.length-1;b>=0;--b)if(c[b].getAttribute("visualindex")==
a.r){c=c[b].getElementsByTagName("td");for(b=c.length-1;b>=0;--b)if(c[b].getAttribute("colid")==a.cid){g.toggle(c[b],"gridxCellSelected",k);break}break}},_focus:function(a){this.grid.focus&&this.grid.body._focusCell(null,a.r,a.c)},_getSelectedIds:function(){var a=this,k={};m.forEach(a.grid._columns,function(b){var c=a.model.getMarkedIds(a._getMarkType(b.id));c.length&&(k[b.id]=c)});return k},_beginAutoScroll:function(){},_endAutoScroll:function(){},_addToSelected:function(a,k,b){var c=this,d=c.model,
e=new i,f=c._lastEndItem,g,l,m,n=[],o=function(){d.when().then(function(){e.callback()})};if(!c._isRange)c._refSelectedIds=c._getSelectedIds();c._isRange&&(c._inRange(k.r,a.r,f.r)&&(g=Math.min(k.r,f.r),l=Math.max(k.r,f.r),n.push({start:g+1,count:l-g,columnStart:a.c,columnEnd:f.c})),c._inRange(k.c,a.c,f.c)&&(m=k.c<f.c?1:-1,g=Math.min(a.r,k.r),l=Math.max(a.r,k.r),n.push({start:g,count:l-g+1,columnStart:k.c+m,columnEnd:f.c})));m=a.c<k.c?1:-1;for(f=a.c;f!=k.c+m;f+=m){var y=c._getMarkType(c.grid._columns[f].id);
g=Math.min(a.r,k.r);for(l=Math.max(a.r,k.r);g<=l;++g)d.markByIndex(g,b,y)}n.length?d.when(n,function(){var a,k,h,b;for(a=0;a<n.length;++a){b=n[a];var r=b.columnStart<b.columnEnd?1:-1;for(k=b.columnStart;k!=b.columnEnd+r;k+=r){h=c.grid._columns[k].id;var e=c._getMarkType(h),f=c._refSelectedIds[h];for(h=b.start;h<b.start+b.count;++h){var g=d.indexToId(h);d.markById(g,f&&f[g],e)}}}}).then(o):o();return e}}))})},"gridx/modules/dnd/Avatar":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/dom-construct",
"dojo/_base/window","dojo/dnd/Avatar"],function(n,m,o,l,i){return n(i,{construct:function(){this.isA11y=m.contains(l.body(),"dijit_a11y");this.node=o.toDom(["<table border='0' cellspacing='0' class='gridxDndAvatar' style='position: absolute; z-index: 1999; margin: 0'><tbody><tr style='opacity: 0.9;'><td class='gridxDnDIcon'>",this.isA11y?"<span id='a11yIcon'>"+(this.manager.copy?"+":"<")+"</span>":"","</td><td class='gridxDnDItemIcon ",this._getIconClass(),"'></td><td><span class='gridxDnDItemCount'>",
this._generateText(),"</span></td></tr></tbody></table>"].join(""))},_getIconClass:function(){var f=this.manager._dndInfo;return["gridxDnDIcon",f.cssName,f.count===1?"Single":"Multi"].join("")},_generateText:function(){return"("+this.manager._dndInfo.count+")"}})})},"gridx/modules/Dod":function(){define(["dojo/_base/kernel","../core/_Module","dojo/_base/declare","dojo/_base/html","dojo/fx","dojo/query"],function(n,m,o,l,i){return m.register(o(m,{name:"dod",required:["body"],useAnimation:!0,duration:750,
defaultShow:!1,showExpando:!0,autoClose:!1,load:function(){this._rowMap={};this.connect(this.grid.body,"onAfterRow","_onAfterRow");this.connect(this.grid.bodyNode,"onclick","_onBodyClick");this.grid.columnResizer&&this.connect(this.grid.columnResizer,"onResize","_onColumnResize");this.loaded.callback()},getAPIPath:function(){return{dod:this}},rowMixin:{showDetail:function(){this.grid.dod.show(this)},hideDetail:function(){this.grid.dod.hide(this)},toggleDetail:function(){this.grid.dod.toggle(this)},
refreshDetail:function(){this.grid.dod.refreshDetail(this)},isDetailShown:function(){return this.grid.dod.isShown(this)}},show:function(f){var g=this._row(f);if(!g.dodShown&&!g.inAnim){g.dodShown=!0;var e=f.node(),d=e.scrollWidth;if(!g.dodLoadingNode)g.dodLoadingNode=n.create("div",{className:"gridxDodLoadNode",innerHTML:"Loading..."});if(!g.dodNode)g.dodNode=n.create("div",{className:"gridxDodNode"});l.place(g.dodLoadingNode,e,"last");l.place(g.dodNode,e,"last");l.style(g.dodLoadingNode,"width",
d+"px");l.style(g.dodNode,"width",d+"px");l.addClass(e,"gridxDodShown");l.style(g.dodNode,"display","none");g.dodLoaded?this._detailLoadComplete(f):(l.style(g.dodLoadingNode,"display","block"),e=new n.Deferred,this.detailProvider(this.grid,f.id,g.dodNode,e),e.then(n.hitch(this,"_detailLoadComplete",f),n.hitch(this,"_detailLoadError",f)))}},hide:function(f){var g=this._row(f),e=this.grid;if(g.dodShown&&!g.inAnim)l.removeClass(f.node(),"gridxDodShown"),l.style(g.dodLoadingNode,"display","none"),g.inAnim=
!0,i.wipeOut({node:g.dodNode,duration:this.arg("duration"),onEnd:function(){g.dodShown=!1;g.inAnim=!1;e.body.onRender()}}).play(),g.defaultShow=!1},toggle:function(f){this.isShown(f)?this.hide(f):this.show(f)},refresh:function(f){this._row(f).dodLoaded=!1;this.show(f)},isShown:function(f){return!!this._row(f).dodShown},onShow:function(){},onHide:function(){},_rowMap:null,_lastOpen:null,_row:function(f){f=f.id||f;return this._rowMap[f]||(this._rowMap[f]={})},_onBodyClick:function(f){if(l.hasClass(f.target,
"gridxDodExpando")){for(f=f.target;f&&!l.hasClass(f,"gridxRow");)f=f.parentNode;f=l.attr(f,"rowindex");this.toggle(this.grid.row(parseInt(f)))}},_onAfterRow:function(f){var g=this.grid.row(f.rowIndex),e=this._row(g);if(this.isShown(g)||this.arg("defaultShow")&&e.dodShown===void 0)e.dodShown=!1,e.defaultShow=!0,this.show(g);this.arg("showExpando")&&(f=n.query('[rowid="'+f.rowId+'"]',this.grid.bodyNode)[0],f=n.query("table",f)[0].rows[0].cells[0],n.create("span",{className:"gridxDodExpando"},f,"first"))},
_onColumnResize:function(){n.query(".gridxDodNode",this.grid.bodyNode).forEach(function(f){l.style(f,"width",f.parentNode.firstChild.offsetWidth+"px")})},_detailLoadComplete:function(f){var g=this._row(f),e=this.grid;if(this.isShown(f))g.dodLoaded=!0,g.defaultShow?(l.style(g.dodNode,"display","block"),e.body.onRender()):(n.style(g.dodLoadingNode,"display")=="block"&&(l.marginBox(g.dodNode,{h:l.marginBox(g.dodLoadingNode).h}),l.style(g.dodNode,"display","block")),g.inAnim=!0,i.wipeIn({node:g.dodNode,
duration:this.arg("duration"),onEnd:function(){g.inAnim=!1;e.body.onRender()}}).play()),l.style(g.dodLoadingNode,"display","none")},_detailLoadError:function(f){var g=this._row(f);g.dodLoaded=!1;if(this.isShown(f))g.dodLoadingNode.innerHTML="Error: failed to load detail."},_showLoading:function(f){this._row(f).dodLoadingNode.innerHTML="Loading..."},_hideLoading:function(){},endFunc:function(){}}))})},"url:gridx/templates/PaginationBarDD.html":'<div class=\'gridxPager\'\r\n\t><table class=\'gridxPagerInner\' cellpadding="0" cellspacing="0" role="presentation"\r\n\t\t><tr\r\n\t\t\t><td class="gridxPagerDescriptionTD"\r\n\t\t\t\t><div class="gridxPagerDescription"\r\n\t\t\t\t\tdata-dojo-attach-point="_descContainer"\r\n\t\t\t\t></div\r\n\t\t\t></td\r\n\t\t\t><td class="gridxPagerStepperTD"\r\n\t\t\t\t><div class="gridxPagerStepper"\r\n\t\t\t\t\tdata-dojo-attach-point="_pageStepperContainer"\r\n\t\t\t\t\t><label class=\'gridxPagerLabel\'>${pageLabel}</label\r\n\t\t\t\t></div\r\n\t\t\t></td\r\n\t\t\t><td class="gridxPagerSizeSwitchTD"\r\n\t\t\t\t><div class="gridxPagerSizeSwitch"\r\n\t\t\t\t\tdata-dojo-attach-point=\'_sizeSwitchContainer\'\r\n\t\t\t\t\t><label class=\'gridxPagerLabel\'>${pageSizeLabel}</label\r\n\t\t\t\t></div\r\n\t\t\t></td\r\n\t\t></tr\r\n\t></table\r\n></div>\r\n',
"gridx/modules/exporter/CSV":function(){define(["dojo/_base/declare","dojo/_base/lang","../../core/_Module","./Exporter"],function(n,m,o){return o.register(n(o,{name:"csv",forced:["exporter"],getAPIPath:function(){return{exporter:{toCSV:m.hitch(this,this.toCSV)}}},toCSV:function(l){this._separator=l.separator||",";this._newLine=l.newLine||"\r\n";this._result="";return this.grid.exporter._export(this,l||{})},getResult:function(){return this._result},beforeHeader:function(l,i){if(!m.isArray(i.columnIds)||
!i.columnIds.length)return!1;this._headerCells=[]},handleHeaderCell:function(l,i){this._headerCells.push(this.grid.column(i.columnId,!0).name())},afterHeader:function(){this._result+=this._headerCells.join(this._separator)+this._newLine},beforeBody:function(){this._rows=[]},beforeRow:function(){this._cells=[]},handleCell:function(l,i){var f=i.data,f=f===null?"":f===void 0?String(grid.cell(i.rowId,i.columnId,!0).data())||"":String(f),f=f.replace(/"/g,'""');if(f.indexOf(this._separator)>=0||f.search(/[" \t\r\n]/)>=
0)f='"'+f+'"';this._cells.push(f)},afterRow:function(){this._rows.push(this._cells.join(this._separator))},afterBody:function(){this._result+=this._rows.join(this._newLine)}}))})},"url:gridx/templates/FilterDialog.html":'<label>Match </label>\r\n<select data-dojo-type="dijit.form.Select">\r\n\t<option value="all">All rules</option>\r\n\t<option value="any">Any rules</option>\r\n</select>\r\n\r\n<div class="gridxFilterAccordionWrapper">\r\n\t<div data-dojo-type="dijit.layout.AccordionContainer"></div>\r\n</div>\r\n\r\n<div class="gridxFilterDialogButtons">\r\n\t<input type="button" class="gridxFilterDialogBtnAdd" data-dojo-type="dijit.form.Button" showLabel="false" iconClass="gridxFilterBtnAddRule"/>\r\n\t<input type="button" data-dojo-type="dijit.form.Button" label="Filter"/>\r\n\t<input type="button" data-dojo-type="dijit.form.Button" label="Clear"/>\r\n\t<input type="button" data-dojo-type="dijit.form.Button" label="Cancel"/>\r\n</div>\r\n',
"gridx/util":function(){define([],function(){return{stopEvent:function(n){n&&n.stopPropagation&&n.preventDefault&&(n.stopPropagation(),n.preventDefault())},biSearch:function(n,m){var o=0,l=n.length,i;for(i=Math.floor((o+l)/2);o+1<l;i=Math.floor((o+l)/2))m(n[i])>0?l=i:o=i;return n.length&&m(n[o])>=0?o:l}}})},"gridx/modules/filter/DistinctComboBoxMenu":function(){define(["dojo/_base/declare","dijit/form/_ComboBoxMenu"],function(n,m){return n(m,{createOptions:function(m,l,i){var f={};arguments[0]=m.filter(function(g){g=
i(g).label;return f[g]?!1:f[g]=!0});this.inherited(arguments)}})})},"gridx/core/Row":function(){define(["dojo/_base/declare"],function(n){return n([],{constructor:function(m,n){this.grid=m;this.model=m.model;this.id=n},index:function(){return this.model.idToIndex(this.id)},cell:function(m,n){return this.grid.cell(this,m,n)},data:function(){return this.model.byId(this.id).data},rawData:function(){return this.model.byId(this.id).rawData},item:function(){return this.model.byId(this.id).item}})})},"gridx/modules/pagination/_PagerBase":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/_base/query","dojo/string","dijit/_WidgetBase","dijit/_TemplatedMixin","dojo/i18n!../../nls/PaginationBar"],function(n,m,o,l,i,f,g){return n([i,f],{pagination:null,module:null,position:"bottom",focusPriority:0,constructor:function(){this._nls=g;m.mixin(this,g)},postCreate:function(){var e=this.pagination,d=this.module.model;this.connect(e,"onSwitchPage","_onSwitchPage");this.connect(e,"onChangePageSize","_onChangePageSize");this.connect(d,"onSizeChange","_onSwitchPage");this.connect(d,
"onMarked","_createDescription");this.connect(d,"onMarkRemoved","_createDescription");this._initFocus();this.refresh()},_toggleNode:function(e,d){o("."+e,this.domNode)[0].style.display=d?"":"none";return d},_createDescription:function(){var e=this.module;if(this._toggleNode("gridxPagerDescription",e._exist(this.position,"description"))){var d=e.grid,c=d.select&&d.select.row,b=c?c.getSelected().length:0,e=c?e.arg("descriptionSelectionTemplate",g.summaryWithSelection):e.arg("descriptionTemplate",g.summary);
this._descContainer.innerHTML=l.substitute(e,[d.model.size(),b])}}})})},"gridx/modules/Tree":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/_base/lang","dojo/_base/Deferred","dojo/DeferredList","dojo/query","dojo/keys","../util","../core/_Module"],function(n,m,o,l,i,f,g,e,d,c){function b(a){return(a=a.firstChild)&&a.className&&m.contains(a,"gridxTreeExpandoCell")&&!m.contains(a,"gridxTreeExpandoLoading")}return c.register(n(c,{name:"tree",constructor:function(){var a=
[];this._openInfo={"":{id:"",parentId:null,index:-1,count:0,openned:a}};this._parentOpenInfo={"":a}},getAPIPath:function(){return{tree:this}},preload:function(){var a=this.grid;a.domNode.setAttribute("role","treegrid");this.batchConnect([a.body,"collectCellWrapper","_createCellWrapper"],[a,"onCellClick","_onCellClick"]);this._initFocus();if(a.persist){var h;if(a=a.persist.registerAndLoad("tree",l.hitch(this,this._persist))){var k=this._openInfo=a.openInfo;parentOpenInfo=this._parentOpenInfo=a.parentOpenInfo;
for(h in k)k[h].openned=parentOpenInfo[h];this._persisted=1}}},load:function(){var a=this;a._persisted?a.loaded.callback():a.model.when({},function(){a._openInfo[""].count=a.model.size()}).then(function(){a.loaded.callback()})},nested:!1,onExpand:function(){},onCollapse:function(){},isExpanded:function(a){return!!this._openInfo[a]},expand:function(a,h){var k=new i,b=this;a&&!b.isExpanded(a)?b.model.when({parentId:a,start:0},function(){b._logicExpand(a)}).then(function(){i.when(h||b._updateBody(a),
function(){k.callback();b.onExpand(a)})}):k.callback();return k},collapse:function(a,h){var k=new i,b=this;a&&b.isExpanded(a)?(b._logicCollapse(a),i.when(h||b._updateBody(a),function(){k.callback();b.onCollapse(a)})):k.callback();return k},expandRecursive:function(a,h){var k=this,b=k.model,c=new i;k.expand(a,1).then(function(){var d,e=[],g=b.size(a);b.when({start:0,parentId:a},function(){for(d=0;d<g;++d){var h=b.indexToId(d,a);e.push(k.expandRecursive(h,1))}}).then(function(){(new f(e)).then(function(){i.when(h||
k._updateBody(a),function(){c.callback()})})})});return c},collapseRecursive:function(a,h){var k=new i,b=l.hitch(k,k.callback),c=l.hitch(k,k.errback),d=this,e=d._openInfo[a||""],g,u=[];if(e){for(g=e.openned.length-1;g>=0;--g)u.push(d.collapseRecursive(e.openned[g],1));(new f(u)).then(function(){a?d.collapse(a,h).then(b,c):h||d._updateBody().then(b,c)})}else b();return k},getRowInfoByVisualIndex:function(a,h){var k=this._openInfo[""].openned,b,c;for(c=0;c<k.length;++c)if(b=this._openInfo[k[c]],b.index<
h)a+=b.count+1;else break;for(k={parentId:"",preCount:0};!k.found;)k=this._getChild(a,k);return k},getVisualIndexByRowInfo:function(a,h,k){a=this._getAbsoluteVisualIndex(a,h);if(a>=0)return a-this._getAbsoluteVisualIndex("",k)},getVisualSize:function(a,h,k){if(k=this._openInfo[k||""]){var b,c=k.openned.length,d,e=h;for(b=0;b<c;++b)d=this._openInfo[k.openned[b]],d.index>=a&&d.index<a+h&&(e+=d.count);return e}return 0},_createCellWrapper:function(a,h,k){k=this.grid._columnsById[k];if(k.expandLevel){var b=
this.model.treePath(h).length;if(!this.arg("nested")||k.expandLevel==b){var c=this.model.hasChildren(h),d=this.isExpanded(h),e=0,f=this.grid.isLeftToRight();this.arg("nested")||(e=(b-1)*18);a.push({priority:0,wrap:function(a){return["<div class='gridxTreeExpandoCell ",d?"gridxTreeExpandoCellOpen":"","' style='padding-",f?"left":"right",": ",e+18,"px;'><span class='gridxTreeExpandoIcon ",c?"":"gridxTreeExpandoIconNoChildren","' style='margin-",f?"left":"right",": ",e,"px;'><span class='gridxTreeExpandoInner'>",
d?"-":"+","</span></span><span class='gridxTreeExpandoContent'>",a,"</span></span>"].join("")}})}}},_onCellClick:function(a){if(b(a.cellNode)){var h=o.position(g(".gridxTreeExpandoIcon",a.cellNode)[0]);a.clientX>=h.x&&a.clientX<=h.x+h.w&&a.clientY>=h.y&&a.clientY<=h.y+h.h&&(this.isExpanded(a.rowId)?this.collapse(a.rowId):this.expand(a.rowId))}},_updateBody:function(a){var h=this.grid.body;if(h){h.updateRootRange(h.rootStart,h.rootCount);var k=h.getRowNode({rowId:a}),b,c,d=this.isExpanded(a);if(k&&
(b=g(".gridxTreeExpandoCell",k)[0]))c=g(".gridxTreeExpandoIcon",b)[0],c.firstChild.innerHTML="o",m.add(b,"gridxTreeExpandoLoading");a=a?this.getVisualIndexByRowInfo(this.model.treePath(a).pop(),this.model.idToIndex(a),h.rootStart):-1;return h.refresh(a+1).then(function(){if(b)c.firstChild.innerHTML=d?"-":"+",m.remove(b,"gridxTreeExpandoLoading"),m.toggle(b,"gridxTreeExpandoCellOpen",d)})}return null},_getAbsoluteVisualIndex:function(a,h){var k=this._openInfo[a||""];if(k){for(var b=0,c=this._openInfo,
d=function(a){b+=h;var k,d;for(d=0;d<a.openned.length;++d)if(k=c[a.openned[d]],k.index<h)b+=k.count;else break;h=a.index;a.id&&b++;return c[a.parentId]};k;)k=d(k);return b}return-1},_logicExpand:function(a){var h=this.model;if(h.hasChildren(a)){var k=h.treePath(a).pop(),b=this._openInfo,c=this._parentOpenInfo,x=c[k]=c[k]||[];c[a]=c[a]||[];if(!b[a]){var e=h.idToIndex(a),h=h.size(a),f=d.biSearch(x,function(a){return b[a].index-e});x[f]!==a&&x.splice(f,0,a);for(f=c[a].length-1;f>=0;--f)h+=b[c[a][f]].count;
b[a]={id:a,parentId:k,index:e,count:h,openned:c[a]};for(a=b[k];a;)a.count+=h,a=b[a.parentId]}}},_logicCollapse:function(a){var h=this._openInfo[a];if(h){var k=this._openInfo,b=this.model.treePath(a).pop(),c=this._parentOpenInfo[b],x=d.biSearch(c,function(a){return k[a].index-h.index}),e=h.count;c.splice(x,1);for(h=k[b];h;)h.count-=e,h=k[h.parentId];delete k[a]}},_getChild:function(a,h){var k=this._openInfo[h.parentId],b,c,d=h.preCount+k.index+1,e={found:!0,visualIndex:a,count:1};b=0;for(c=k.openned.length;b<
c;++b){var f=k.openned[b],g=this._openInfo[f],i=g.index+d;if(i===a)return l.mixin({parentId:k.id,start:g.index},e);else if(i>a)break;else if(i+g.count>=a)return{parentId:f,preCount:d};d+=g.count}return l.mixin({parentId:k.id,start:a-d},e)},_initFocus:function(){this.connect(this.grid,"onCellKeyPress","_onKey")},_onKey:function(a){if(a.keyCode==e.ESCAPE){var h=this,k=h.model,c=k.treePath(a.rowId),d=c.pop(),a=c.length,x=h.grid;if(d){var f,g,i;for(f=x._columns.length-1;f>=0;--f)if(g=x._columns[f],g.expandLevel&&
(!h.arg("nested")||g.expandLevel==a))break;k.when({id:d},function(){i=x.body.getVisualIndex({parentId:c.pop(),rowIndex:k.idToIndex(d)}).visualIndex}).then(function(){x.vScroller.scrollToRow(i).then(function(){x.body._focusCell(null,i,g.index)})})}}else a.ctrlKey&&b(a.cellNode)&&(f=x.isLeftToRight(),a.keyCode==(f?e.LEFT_ARROW:e.RIGHT_ARROW)&&h._openInfo[a.rowId]?h.collapse(a.rowId):a.keyCode==(f?e.RIGHT_ARROW:e.LEFT_ARROW)&&!h._openInfo[a.rowId]&&h.expand(a.rowId))},_persist:function(){return{openInfo:this._openInfo,
parentOpenInfo:this._parentOpenInfo}}}))})},"gridx/modules/move/Row":function(){define(["dojo/_base/declare","../../core/_Module","../../core/model/extensions/Move"],function(n,m,o){return m.register(n(m,{name:"moveRow",modelExtensions:[o],constructor:function(){this.connect(this.model,"onMoved","_onMoved")},getAPIPath:function(){return{move:{row:this}}},rowMixin:{moveTo:function(l,i){this.grid.move.row.move([this.index()],l,i);return this}},move:function(l,i,f){var g=this.model;g.moveIndexes(l,i);
f||g.when()},moveRange:function(l,i,f,g){var e=this.model;e.move(l,i,f);g||e.when()},onMoved:function(){},_onMoved:function(){this.grid.body.refresh();this.onMoved()}}))})},"dojox/html/metrics":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/sniff","dojo/ready","dojo/_base/unload","dojo/_base/window","dojo/dom-geometry"],function(n,m,o,l,i,f,g){var e=m.getObject("dojox.html.metrics",!0),d=m.getObject("dojox");e.getFontMeasurements=function(){var a={"1em":0,"1ex":0,"100%":0,"12pt":0,
"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0};if(o("ie"))f.doc.documentElement.style.fontSize="100%";var h=f.doc.createElement("div"),b=h.style;b.position="absolute";b.left="-100px";b.top="0";b.width="30px";b.height="1000em";b.borderWidth="0";b.margin="0";b.padding="0";b.outline="0";b.lineHeight="1";b.overflow="hidden";f.body().appendChild(h);for(var c in a)b.fontSize=c,a[c]=Math.round(h.offsetHeight*12/16)*16/12/1E3;f.body().removeChild(h);return a};var c=null;
e.getCachedFontMeasurements=function(a){if(a||!c)c=e.getFontMeasurements();return c};var b=null,a={};e.getTextBox=function(k,h,c){var d,e;if(b)d=b;else{d=b=f.doc.createElement("div");var i=f.doc.createElement("div");i.appendChild(d);e=i.style;e.overflow="scroll";e.position="absolute";e.left="0px";e.top="-10000px";e.width="1px";e.height="1px";e.visibility="hidden";e.borderWidth="0";e.margin="0";e.padding="0";e.outline="0";f.body().appendChild(i)}d.className="";e=d.style;e.borderWidth="0";e.margin=
"0";e.padding="0";e.outline="0";if(arguments.length>1&&h)for(var l in h)l in a||(e[l]=h[l]);if(arguments.length>2&&c)d.className=c;d.innerHTML=k;e=g.position(d);e.w=d.parentNode.scrollWidth;return e};var h={w:16,h:16};e.getScrollbar=function(){return{w:h.w,h:h.h}};e._fontResizeNode=null;e.initOnFontResize=function(){var a=e._fontResizeNode=f.doc.createElement("iframe"),b=a.style;b.position="absolute";b.width="5em";b.height="10em";b.top="-10000px";o("ie")?a.onreadystatechange=function(){if(a.contentWindow.document.readyState==
"complete")a.onresize=a.contentWindow.parent[d._scopeName].html.metrics._fontresize}:a.onload=function(){a.contentWindow.onresize=a.contentWindow.parent[d._scopeName].html.metrics._fontresize};a.setAttribute("src","javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}<\/script></head><body></body></html>'");f.body().appendChild(a);e.initOnFontResize=function(){}};e.onFontResize=function(){};e._fontresize=function(){e.onFontResize()};i.addOnUnload(function(){var a=
e._fontResizeNode;if(a){if(o("ie")&&a.onresize)a.onresize=null;else if(a.contentWindow&&a.contentWindow.onresize)a.contentWindow.onresize=null;e._fontResizeNode=null}});l(function(){try{var a=f.doc.createElement("div");a.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";f.body().appendChild(a);h.w=a.offsetWidth-a.clientWidth;h.h=a.offsetHeight-a.clientHeight;f.body().removeChild(a);delete a}catch(b){}"fontSizeWatch"in n.config&&n.config.fontSizeWatch&&
e.initOnFontResize()});return e})},"gridx/modules/pagination/LinkPager":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/sniff","dojo/_base/query","dojo/dom-class","dojo/string","dojo/keys","../../util","./_PagerBase","dojo/text!../../templates/PaginationBar.html"],function(n,m,o,l,i,f,g,e,d,c,b){function a(a,b,k){for(a=a.target;!h(a,b);){if(h(a,k))return null;a=a.parentNode}return a}var h=f.contains,k=f.toggle,r=g.substitute;return n(c,{templateString:b,_tabIndex:-1,
postMixInProperties:function(){if(l("ie")){var a=this.module.grid.domNode.getAttribute("tabindex");this._tabIndex=a>0?a:0}},refresh:function(){this._createDescription();this._createPageStepper();this._createPageSizeSwitch();this._createGotoButton()},_onSwitchPage:function(){this._createPageStepper();this.module.grid.vLayout.reLayout()},_focusArea:function(){var a=this.module.grid.focus;return a&&a.currentArea()},_onChangePageSize:function(a,b){var h=i('[pagesize="'+a+'"]',this._sizeSwitchContainer)[0];
h&&f.add(h,"gridxPagerSizeSwitchBtnActive");(h=i('[pagesize="'+b+'"]',this._sizeSwitchContainer)[0])&&f.remove(h,"gridxPagerSizeSwitchBtnActive");this._focusArea()==this.position+"PageSizeSwitch"&&this._findNextPageSizeSwitch();this._createPageStepper();this.module.grid.vLayout.reLayout()},_createPageStepper:function(){var a=this.module;if(this._toggleNode("gridxPagerStepper",a._exist(this.position,"stepper"))){var b=this.pagination,h=b.pageCount(),c=b.currentPage(),d=a.arg("visibleSteppers"),b=[],
e=this._tabIndex,f=!1,g=!1,i=[a.arg("pageIndexTitleTemplate",this.pageIndexTitle),a.arg("pageIndexWaiTemplate",this.pageIndexWai),a.arg("pageIndexTemplate",this.pageIndex)],a=function(a){return['<span class="gridxPagerStepperBtn gridxPagerPage ',c==a?"gridxPagerStepperBtnActive":"",'" pageindex="',a,'" title="',r(i[0],[1]),'" aria-label="',r(i[1],[1]),'" tabindex="',e,'">',r(i[2],[a+1]),"</span>"].join("")};if(h){var l=c-Math.floor((d-1)/2),m=l+d-1;l<1?(l=1,m=d-1):h>d&&l>=h-d&&(l=h-d);m>=h-1&&(m=
h-2);b.push(a(0));if(h>2){l>1&&b.push('<span class="gridxPagerStepperEllipsis">&hellip;</span>');for(d=l;d<=m;++d)b.push(a(d));m<h-2&&b.push('<span class="gridxPagerStepperEllipsis">&hellip;</span>')}h>1&&b.push(a(h-1))}this._pageBtnContainer.innerHTML=b.join("");if(!c||c===h-1)g=!c||h<=1,f=c||h<=1;k(this._nextPageBtn,"gridxPagerStepperBtnDisable gridxPagerNextPageDisable",f);k(this._prevPageBtn,"gridxPagerStepperBtnDisable gridxPagerPrevPageDisable",g);this._focusArea()==this.position+"PageStepper"&&
this._findNextPageStepperBtn()}},_gotoPrevPage:function(){this._focusPageIndex="Prev";var a=this.pagination;a.gotoPage(a.currentPage()-1)},_gotoNextPage:function(){this._focusPageIndex="Next";var a=this.pagination;a.gotoPage(a.currentPage()+1)},_gotoPage:function(b){var s;if(b=a(b,"gridxPagerStepperBtn","gridxPagerPages"))s=this._focusPageIndex=b.getAttribute("pageindex"),b=s,this.pagination.gotoPage(parseInt(b,10))},_onHoverPageBtn:function(b){var h=a(b,"gridxPagerStepperBtn","gridxPagerPages");
h&&k(h,"gridxPagerStepperBtnHover",b.type=="mouseover")},_onHoverSizeBtn:function(b){var h=a(b,"gridxPagerSizeSwitchBtn","gridxPagerSizeSwitch");h&&k(h,"gridxPagerSizeSwitchBtnHover",b.type=="mouseover")},_createPageSizeSwitch:function(){var a=this.module;if(this._toggleNode("gridxPagerSizeSwitch",a._exist(this.position,"sizeSwitch"))){var b=[],h=this._tabIndex,k=a.arg("sizeSeparator"),c=this.pagination.pageSize(),d=[a.arg("pageSizeTitleTemplate",this.pageSizeTitle),a.arg("pageSizeWaiTemplate",this.pageSizeWai),
a.arg("pageSizeTemplate",this.pageSize),a.arg("pageSizeAllTitleText",this.pageSizeAllTitle),a.arg("pageSizeAllWaiText",this.pageSizeAllWai),a.arg("pageSizeAllText",this.pageSizeAll)];m.forEach(a.arg("sizes"),function(a){var s=!1;a>0||(a=0,s=!0);b.push('<span class="gridxPagerSizeSwitchBtn ',c===a?"gridxPagerSizeSwitchBtnActive":"",'" pagesize="',a,'" title="',s?d[3]:r(d[0],[a]),'" aria-label="',s?d[4]:r(d[1],[a]),'" tabindex="',h,'">',s?d[5]:r(d[2],[a]),"</span>",'<span class="gridxPagerSizeSwitchSeparator">'+
k+"</span>")});b.pop();this._sizeSwitchContainer.innerHTML=b.join("")}},_switchPageSize:function(b){var s;if(b=a(b,"gridxPagerSizeSwitchBtn","gridxPagerSizeSwitch"))s=this._focusPageSize=b.getAttribute("pagesize"),b=s,this.pagination.setPageSize(parseInt(b,10))},_createGotoButton:function(){this._toggleNode("gridxPagerGoto",this.module._exist(this.position,"gotoButton"))},_showGotoDialog:function(){var a=this.module;if(!this._gotoDialog){var b=a.arg("dialogClass"),h=a.arg("gotoPagePane"),a=o.mixin({title:this.gotoDialogTitle,
content:new h({pager:this})},a.arg("dialogProps")||{});this._gotoDialog=new b(a)}b=this.pagination.pageCount();a=this._gotoDialog.content;a.pageCountMsgNode.innerHTML=r(this.gotoDialogPageCount,[b]);a.pageInputBox.constraints={fractional:!1,min:1,max:b};this._gotoDialog.show()},_initFocus:function(){var a=this,b=a.module.grid,k=b.focus;if(k){var c=b.pagination,r=a.position,f=a.focusPriority,g=b.isLeftToRight()?e.LEFT_ARROW:e.RIGHT_ARROW;k.registerArea({name:r+"PageStepper",priority:f,focusNode:a._pageStepperContainer,
doFocus:o.hitch(a,a._findNextPageStepperBtn,!1,!1)});a.connect(a._pageStepperContainer,"onkeypress",function(b){if(b.keyCode==e.LEFT_ARROW||b.keyCode==e.RIGHT_ARROW)a._findNextPageStepperBtn(!0,b.keyCode==g);else if(b.keyCode==e.ENTER&&h(b.target,"gridxPagerStepperBtn")&&!h(b.target,"gridxPagerStepperBtnActive")&&!h(b.target,"gridxPagerStepperBtnDisable"))if(isNaN(parseInt(a._focusPageIndex,10)))a["_goto"+a._focusPageIndex+"Page"]();else c.gotoPage(parseInt(a._focusPageIndex,10))});k.registerArea({name:r+
"PageSizeSwitch",priority:f+0.001,focusNode:a._sizeSwitchContainer,doFocus:o.hitch(a,a._findNextPageSizeSwitch,!1,!1)});a.connect(a._sizeSwitchContainer,"onkeypress",function(b){b.keyCode==e.LEFT_ARROW||b.keyCode==e.RIGHT_ARROW?a._findNextPageSizeSwitch(!0,b.keyCode==g):b.keyCode==e.ENTER&&h(b.target,"gridxPagerSizeSwitchBtn")&&!h(b.target,"gridxPagerSizeSwitchBtnActive")&&c.setPageSize(parseInt(a._focusPageSize,10))});k.registerArea({name:r+"GotoPage",priority:f+0.002,focusNode:a._gotoBtn,doFocus:function(b){d.stopEvent(b);
a._gotoBtn.focus();return!0}});a.connect(a._gotoBtn,"onkeypress",function(b){b.keyCode==e.ENTER&&a._showGotoDialog()})}},_findNextPageSizeSwitch:function(a,b,k){d.stopEvent(k);var k=this._sizeSwitchContainer,c=i('[pagesize="'+this._focusPageSize+'"]',k)[0];if(c=focus(i(".gridxPagerSizeSwitchBtn",k),c,a,b,function(a){return!h(a,"gridxPagerSizeSwitchBtnActive")}))this._focusPageSize=c.getAttribute("pagesize");return c},_findNextPageStepperBtn:function(a,b,k){d.stopEvent(k);var k=this._pageStepperContainer,
c=i('[pageindex="'+this._focusPageIndex+'"]',k)[0];if(c=focus(i(".gridxPagerStepperBtn",k),c,a,b,function(a){return!h(a,"gridxPagerStepperBtnActive")&&!h(a,"gridxPagerStepperBtnDisable")}))this._focusPageIndex=c.getAttribute("pageindex");return c}})})},"gridx/modules/pagination/Pagination":function(){define(["dojo/_base/declare","dojo/_base/array","../../core/_Module"],function(n,m,o){return o.register(n(o,{name:"pagination",forced:["body"],getAPIPath:function(){return{pagination:this}},rowMixin:{getPage:function(){return this.grid.pagination.pageOfIndex(this.index())},
indexInPage:function(){return this.grid.pagination.indexInPage(this.index())}},preload:function(){this.grid.body.autoChangeSize=!1},load:function(){var l=this;l._pageSize=l.arg("initialPageSize")||l._pageSize;l._page=l.arg("initialPage",l._page,function(i){return i>=0});l.model.when({},function(){l._updateBody(1);l.connect(l.model,"onSizeChange","_onSizeChange");l.loaded.callback()})},pageSize:function(){var l=this._pageSize;return l>0?l:this.model.size()},isAll:function(){return this._pageSize===
0},pageCount:function(){return Math.ceil(this.model.size()/this.pageSize())},currentPage:function(){return this._page},firstIndexInPage:function(l){if(!l&&l!==0)l=this._page;else if(!(l>=0))return-1;l*=this.pageSize();return l<this.model.size()?l:-1},lastIndexInPage:function(l){l=this.firstIndexInPage(l);if(l>=0){var l=l+this.pageSize()-1,i=this.model.size();return l<i?l:i-1}return-1},pageOfIndex:function(l){return Math.floor(l/this.pageSize())},indexInPage:function(l){return l%this.pageSize()},filterIndexesInPage:function(l,
i){var f=this.firstIndexInPage(i),g=this.lastIndexInPage(i);return f<0?[]:m.filter(l,function(e){return e>=f&&e<=g})},gotoPage:function(l){var i=this._page;if(l!=i&&this.firstIndexInPage(l)>=0)this._page=l,this._updateBody(),this.onSwitchPage(l,i)},setPageSize:function(l){var i=this._pageSize;if(l!=i&&l>=0){var f=this.firstIndexInPage(),g=-1;this._pageSize=l;if(this._page>=this.pageCount())g=this._page,this._page=this.pageOfIndex(f);this._updateBody();this.onChangePageSize(l,i);if(g>=0)this.onSwitchPage(this._page,
g)}},onSwitchPage:function(){},onChangePageSize:function(){},_page:0,_pageSize:10,_updateBody:function(l){var i=this.grid.body,f=this.model.size(),g=this.pageSize(),e=this.firstIndexInPage();f===0||e<0?g=e=0:f-e<g&&(g=f-e);i.updateRootRange(e,g);l||i.refresh()},_onSizeChange:function(l){if(l===0)this._page=0,this.grid.body.updateRootRange(0,0);else{if(this.firstIndexInPage()<0&&this._page!==0)l=this._page,this._page=0,this.onSwitchPage(0,l);this._updateBody()}}}))})},"gridx/nls/PaginationBar":function(){define({root:{pageIndex:"${0}",
pageIndexTitle:"Page ${0}",pageIndexWai:"Page ${0}",firstPageTitle:"First page",firstPageWai:"First page",prevPageTitle:"Previous page",prevPageWai:"Previous page",nextPageTitle:"Next page",nextPageWai:"Next page",lastPageTitle:"Last page",lastPageWai:"Last page",pageSize:"${0}",pageSizeTitle:"${0} items per page",pageSizeWai:"${0} items per page",pageSizeAll:"All",pageSizeAllTitle:"All items",pageSizeAllWai:"All items",description:"${0} - ${1} of ${2} items.",descriptionEmpty:"Grid is empty.",summary:"Total: ${0}",
summaryWithSelection:"Total: ${0} Selected: ${1}",gotoBtnTitle:"Go to a specific page",gotoBtnWai:"Go to a specific page",gotoDialogTitle:"Go to Page",gotoDialogMainMsg:"Specify the page number:",gotoDialogPageCount:"(${0} pages)",gotoDialogOKBtn:"Go",gotoDialogCancelBtn:"Cancel",pageLabel:"Page",pageSizeLabel:"Rows"}})},"gridx/core/model/extensions/Move":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred","dojo/DeferredList","../_Extension"],function(n,m,o,l,i){function f(d,
c){var b,a,h=[],k=[],r,s=1,e=1,f=c,g=c,i;b=0;for(a=d.length;b<a;++b)h[d[b]]=1;b=0;for(a=h.length;b<a;++b)h[b]?b<c?s?(s=0,r=[b,1],i=k.length,k.unshift(r)):h[b-1]&&++r[1]:e?(e=0,r=[b,1,g],k.push(r),++g):h[b-1]&&(++r[1],++g):s=e=1;for(b=0;b<=i;++b)r=k[b],r[2]=f,f-=r[1];return k}function g(d,c,b,a){var h={},k,r,s={};if(b>d+c){for(r=0;r<c;++r)h[d+r]=b+r-c;for(r=0;r<b-d-c;++r)h[d+c+r]=d+r}else if(b<d){for(r=0;r<c;++r)h[d+r]=b+r;for(r=0;r<d-b;++r)h[b+r]=b+r+c}else return;for(k in a)s[a[k]]=parseInt(k,10);
for(k in h)d=h[k],s.hasOwnProperty(k)&&(k=s[k]),k==d?delete a[k]:a[k]=d}var e=m.hitch;return n(i,{name:"move",priority:10,constructor:function(d,c){var b=d._cache.options=d._cache.options||{};this._mixinAPI("move","moveIndexes","insert");d.onMoved=function(){};if(c.updateStore)this.updateStore=c.updateStore;b.sort=c.moveSortInfo?c.moveSortInfo:[{attribute:this.moveField=c.moveField||"order",descending:this.moveFieldDescending=c.moveFieldDescending||!1}]},clear:function(){},move:function(d,c,b){d>=
0&&d<Infinity&&c>0&&c<Infinity&&b>=0&&b<Infinity&&(b<d||b>d+c)&&this.model._addCmd({name:"_cmdMove",scope:this,args:[d,c,b],async:1})},moveIndexes:function(d,c){this.model._addCmd({name:"_cmdMove",scope:this,args:[d,c],async:1})},insert:function(d,c,b){for(var a=new o,h=e(a,a.callback),k=e(a,a.errback),r=this.moveField,s=this.model.store,f,g=[],c=c?s.fetch?s.getValue(c,r):c[r]:null,i=b?s.fetch?s.getValue(b,r):b[r]:null,b=0;f=d[b];++b)if(c===null&&i===null?c=Math.random():c===null?c=i-1:i===null?c+=
1:c=(c+i)/2,f[r]=c,s.fetch)s.newItem(f);else{var u=new o;o.when(s.add(f),e(u,u.callback),e(u,u.errback));g.push(u)}s.fetch?s.save({onComplete:h,onError:k}):(new l(g)).then(h,k);return a},updateStore:function(d,c,b){var a=[],h=[],k=[],c=[],r,s,f={},g,i={},u,n=0,t=this.inner,z=this.model.store,C=this.moveField,y=[],B=function(b){for(;b<a.length;++b){var k=a[b];if(!h[k])return k===void 0?b:k}return b},A=function(a){return(a=t._call("byIndex",[a]))&&a.item},D=function(a){return z.fetch?z.getValue(a,C):
a[C]},G=function(a,b){var k=h[a];return k?k.value:a<0?D(A(0))-1:a<b?D(A(a)):D(A(b-1))+1},F=function(){z.fetch?z.save({onComplete:function(){d.callback()},onError:function(a){d.errback(a)}}):(new l(y)).then(function(){d.callback()},function(a){d.errback(a)})},H=Infinity;for(r in b)r=parseInt(r,10),s=b[r],f[r]=s,s<H&&(H=s),a[s]=r;for(b=H;b<a.length;++b)a[b]===void 0&&(a[b]=b,f[b]=b);for(r in f)r=parseInt(r,10),s=f[r],g=s-r,i[g]===void 0?i[g]=1:++i[g];for(g in i)i[g]>n&&(n=i[g],u=g);for(s=0;s<a.length;++s)r=
a[s],r!==void 0&&s-r!=u&&(h[r]={},k.push(r));for(b=0;b<k.length;++b)r=k[b],s=f[r],g=h[r].before=s>0?a[s-1]===void 0?s-1:a[s-1]:-1,s=h[r].after=B(s),c.push({start:r,count:1},{start:s,count:1}),g>=0&&c.push({start:g,count:1});t._call("when",[{id:[],range:c},function(){for(var a=t._call("size"),b=0;b<k.length;++b){r=k[b];var c=A(r),d=h[r],s=G(d.before,a),f=G(d.after,a),s=(s+f)/2,d=d.value=s;z.fetch?z.setValue(c,C,d):(c=m.clone(c),c[C]=d,d=new o,o.when(z.put(c,{overwrite:!0}),e(d,d.callback)),y.push(d))}F()}])},
_cmdMove:function(){var d=new o,c=this.model,b,a,h={},k,r=[];this.inner._call("size");for(b=0;a=arguments[b];++b)c._msg("beforeMove",a),a.length==2?r=r.concat(f(a[0],a[1])):r.push(a);for(b=0;a=r[b];++b)g(a[0],a[1],a[2],h);for(b in h){k=1;break}k?this.updateStore(d,r,h):d.callback();d.then(function(){c._cache.clear();c._msg("moved",h);c.onMoved(r,h)});return d}})})},"gridx/modules/filter/FilterTooltip":function(){define(["dojo","dijit","dojo/_base/declare","./Filter","./FilterDialog","dijit/TooltipDialog",
"dijit/popup","dijit/Tooltip","dojo/i18n!../../nls/FilterBar","dojo/_base/array","dojo/_base/event","dojo/_base/html"],function(n,m,o){return o(m.TooltipDialog,{grid:null,filterBar:null,postCreate:function(){this.inherited(arguments);this.filterBar=this.grid.filterBar;this.connect(this,"onClick","_onClick");this.connect(this,"onMouseEnter","_onMouseEnter");this.connect(this,"onMouseLeave","_onMouseLeave");n.addClass(this.domNode,"gridxFilterTooltip")},show:function(l){this.inherited(arguments);m.popup.open({popup:this,
x:l.pageX,y:l.pageY,padding:{x:-6,y:-3}})},hide:function(){this.inherited(arguments);m.popup.close(this)},buildContent:function(){var l=this.filterBar,i=l._nls,f=l.filterData;if(f&&f.conditions.length){var g=['<div class="gridxFilterTooltipTitle"><b>Filter:</b> ',f.type==="all"?i.statusTipHeaderAll:i.statusTipHeaderAny,"</div><table><tr><th>Column</th><th>Rule</th></tr>"];n.forEach(f.conditions,function(e,d){g.push("<tr",d%2?' class="gridxFilterTooltipOddRow"':"","><td>",e.colId?this.grid.column(e.colId).name():
"Any column",'</td><td class="gridxFilterTooltipValueCell">',"<div>",l._getRuleString(e.condition,e.value,e.type),'<img src="'+this.grid._blankGif+'" action="remove-rule" title="'+i.removeRuleButton+'" class="gridxFilterTooltipRemoveBtn"/></div></td></tr>')},this);g.push("</table>");this.set("content",g.join(""));n.toggleClass(this.domNode,"gridxFilterTooltipSingleRule",f.conditions.length===1)}},_onMouseEnter:function(){this.isMouseOn=!0},_onMouseLeave:function(){this.isMouseOn=!1;this.hide()},_onClick:function(l){var i=
this._getTr(l),f=this.filterBar;i&&/^img$/i.test(l.target.tagName)?(f.filterData.conditions.splice(i.rowIndex-1,1),i.parentNode.removeChild(i),f.applyFilter(f.filterData),n.stopEvent(l)):(this.filterBar.showFilterDialog(),this.hide())},_getTr:function(l){for(l=l.target;l&&!/^tr$/i.test(l.tagName)&&l!==this.domNode;)l=l.parentNode;return l&&/^tr$/i.test(l.tagName)?l:null}})})},"gridx/modules/filter/FilterConfirmDialog":function(){define(["dojo/_base/kernel","dijit","dojo/_base/declare","dojo/text!../../templates/FilterConfirmDialog.html",
"dijit/Dialog","dijit/layout/AccordionContainer","dojo/data/ItemFileReadStore","./FilterPane","./Filter"],function(n,m,o,l){return o(m.Dialog,{title:"Clear Filter",cssClass:"gridxFilterConfirmDialog",autofocus:!1,postCreate:function(){this.inherited(arguments);this.set("content",l);var i=m.findWidgets(this.domNode);this.btnClear=i[0];this.btnCancel=i[1];this.connect(this.btnCancel,"onClick","hide");this.connect(this.btnClear,"onClick","onExecute")},onExecute:function(){this.execute()},execute:function(){}})})},
"gridx/modules/HLayout":function(){define(["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/DeferredList","../core/_Module"],function(n,m,o,l,i,f,g){return g.register(n(g,{name:"hLayout",getAPIPath:function(){return{hLayout:this}},load:function(e,d){var c=this;d.then(function(){c._layout();c.loaded.callback()})},lead:0,tail:0,register:function(e,d,c){var b=this._regs=this._regs||[];e||(e=new m,e.callback());b.push([e,d,c])},onUpdateWidth:function(){},
_layout:function(){var e=this,d=e._regs;if(d){var c=0,b=0,a=o.map(d,function(a){return a[0]});(new f(a)).then(function(){o.forEach(d,function(a){var k=l.getMarginBox(a[1]).w||i.get(a[1],"width");a[2]?b+=k:c+=k});e.lead=c;e.tail=b;e.onUpdateWidth(c,b)})}else e.onUpdateWidth(0,0)}}))})},"gridx/modules/pagination/GotoPagePane":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/keys","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!../../templates/GotoPagePane.html"],
function(n,m,o,l,i,f,g){return n([l,i,f],{templateString:g,pager:null,postMixInProperties:function(){var e=this.pager,d=e.module;m.mixin(this,e._nls);this.numberTextBoxClass=d.arg("numberTextBoxClass").prototype.declaredClass;this.buttonClass=d.arg("buttonClass").prototype.declaredClass;this.connect(this.domNode,"onkeydown","_onKeyDown")},postCreate:function(){this._updateStatus()},_updateStatus:function(){var e=this.pageInputBox;this.okBtn.set("disabled",!e.isValid()||e.get("displayedValue")==="")},
_onOK:function(){var e=this.pager;e.pagination.gotoPage(this.pageInputBox.get("value")-1);e._gotoDialog.hide()},_onCancel:function(){this.pager._gotoDialog.hide()},_onKeyDown:function(e){!this.okBtn.get("disabled")&&o.ENTER==e.keyCode&&this._onOK()}})})},"dojo/_base/query":function(){define(["./kernel","../query","./NodeList"],function(n){return n.query})},"gridx/modules/filter/FilterBar":function(){define(["dojo/_base/kernel","dijit","dojo/_base/declare","../../core/_Module","dojo/text!../../templates/FilterBar.html",
"dojo/i18n!../../nls/FilterBar","./Filter","./FilterDialog","./FilterConfirmDialog","./FilterTooltip","dijit/TooltipDialog","dijit/popup","dijit/Tooltip","dojo/date/locale","dojo/_base/array","dojo/_base/html","dojo/query","dojo/parser","dojo/string"],function(n,m,o,l,i,f,g,e,d,c){return l.register(o(l,{name:"filterBar",forced:["filter"],getAPIPath:function(){return{filterBar:this}},closeFilterBarButton:!0,defineFilterButton:!0,tooltipDelay:300,maxRuleCount:0,ruleCountToConfirmClearFilter:2,conditions:{string:["equal",
"contain","startWith","endWith","notEqual","notContain","notStartWith","notEndWith","isEmpty"],number:["equal","greater","less","greaterEqual","lessEqual","notEqual","isEmpty"],date:["equal","before","after","range","isEmpty"],time:["equal","before","after","range","isEmpty"],"boolean":["equal","isEmpty"]},load:function(){g.before=g.lessEqual;g.after=g.greaterEqual;this.domNode=n.create("div",{innerHTML:i,"class":"gridxFilterBar"});n.parser.parse(this.domNode);n.toggleClass(this.domNode,"gridxFilterBarHideCloseBtn",
!this.closeFilterBarButton);this.grid.vLayout.register(this,"domNode","headerNode",-1);this._nls=f;this._initWidgets();this.refresh();this.connect(this.domNode,"onclick","onDomClick");this.connect(this.domNode,"onmouseover","onDomMouseOver");this.connect(this.domNode,"onmousemove","onDomMouseMove");this.connect(this.domNode,"onmouseout","onDomMouseOut");this.loaded.callback()},onDomClick:function(b){b.target&&b.target.tagName&&(n.attr(b.target,"action")==="clear"?this.clearFilter():n.hasClass(b.target,
"gridxFilterBarCloseBtn")?this.hide():this.showFilterDialog())},onDomMouseMove:function(b){(!b||!b.target||!(n.attr(b.target,"action")==="clear"||this.btnFilter===m.getEnclosingWidget(b.target)))&&this._showTooltip(b)},onDomMouseOver:function(){},onDomMouseOut:function(){window.setTimeout(n.hitch(this,"_hideTooltip"),10)},applyFilter:function(b){var a=[];this.filterData=b;n.forEach(b.conditions,function(b){var h="string";if(b.colId)h=this.grid.column(b.colId).dataType(),a.push(this._getFilterExpression(b.condition,
b,h,b.colId));else{var c=[];n.forEach(this.grid.columns(),function(a){a.isFilterable()&&c.push(this._getFilterExpression(b.condition,b,h,a.id))},this);a.push(g.or.apply(g,c))}},this);this.grid.filter.setFilter((b.type==="all"?g.and:g.or).apply(g,a));var h=this;this.model.when({}).then(function(){h._currentSize=h.model.size();h._totalSize=h.model._cache.size();h._buildFilterState()})},confirmToExecute:function(b,a){var h=this.ruleCountToConfirmClearFilter;if(this.filterData&&(this.filterData.conditions.length>=
h||h<=0)){if(!this._cfmDlg)this._cfmDlg=new d;this._cfmDlg.execute=n.hitch(a,b);this._cfmDlg.show()}else b.apply(a)},clearFilter:function(b){b?(this.filterData=null,this.grid.filter.setFilter(),this._buildFilterState()):this.confirmToExecute(n.hitch(this,"clearFilter",!0),this)},columnMixin:{isFilterable:function(){return this.grid._columnsById[this.id].filterable!==!1},setFilterable:function(b){this.grid.filterBar._setFilterable(this.id,b);return this},dataType:function(){return(this.grid._columnsById[this.id].dataType||
"string").toLowerCase()},filterConditions:function(){return this.grid.filterBar._getColumnConditions(this.id)}},refresh:function(){this.btnClose.style.display=this.closeFilterBarButton?"":"none";this.btnFilter.style.display=this.defineFilterButton?"":"none"},isVisible:function(){return this.domNode.style.display!="none"},show:function(){this.domNode.style.display="block";this.grid.vLayout.reLayout();this.onShow()},hide:function(){this.domNode.style.display="none";this.grid.vLayout.reLayout();this._hideTooltip();
this.onHide()},onShow:function(){},onHide:function(){},showFilterDialog:function(){var b=this._filterDialog;if(!b)this._filterDialog=b=new e({grid:this.grid});b.open||(b.setData(this.filterData),b.show())},destroy:function(){this._filterDialog&&this._filterDialog.destroyRecursive();this.inherited(arguments);n.destroy(this.domNode)},_getColumnConditions:function(b){var a;b?(a=this.grid._columnsById[b].disabledConditions||[],b=(this.grid._columnsById[b].dataType||"string").toLowerCase()):(a=[],b="string");
var b=this.conditions[b],h={};b||(b=conditionData.string);n.forEach(a,function(a){h[a]=!0});return b=n.filter(b,function(a){return!h[a]})},_setFilterable:function(b,a){var h=this.grid._columnsById[b];if(h&&h.filterable!=!!a&&(h.filterable=!!a,this.filterData)){var h=this.filterData,k=h.conditions.length;h.conditions=n.filter(h.conditions,function(a){return a.colId!=b});k!=h.conditions.length&&this.applyFilter(h);this._filterDialog.open&&this._filterDialog.setData(h)}},_initWidgets:function(){this.btnFilter=
m.byNode(n.query(".dijitButton",this.domNode)[0]);this.btnClose=n.query(".gridxFilterBarCloseBtn",this.domNode)[0];this.statusNode=n.query(".gridxFilterBarStatus",this.domNode)[0].firstChild},_buildFilterState:function(){var b=this._nls;!this.filterData||!this.filterData.conditions.length?this.statusNode.innerHTML=b.filterBarMsgNoFilterTemplate:(this.statusNode.innerHTML=n.string.substitute(b.filterBarMsgHasFilterTemplate,[this._currentSize,this._totalSize,"items"])+'&nbsp; &nbsp; <a href="javascript:void(0);" action="clear" title="Clear filter">Clear Filter</a>',
this._buildTooltip())},_buildTooltip:function(){if(!this._tooltip)this._tooltip=new c({grid:this.grid});this._tooltip.buildContent()},_showTooltip:function(b,a){this._hideTooltip();if(this.filterData&&this.filterData.conditions&&this.filterData.conditions.length)a?this._tooltip.show(b):this._pointTooltipDelay=window.setTimeout(n.hitch(this,"_showTooltip",b,!0),this.tooltipDelay)},_hideTooltip:function(){var b=this._tooltip;if(b&&!b.isMouseOn){if(this._pointTooltipDelay)window.clearTimeout(this._pointTooltipDelay),
this._pointTooltipDelay=null;b.hide()}},_getRuleString:function(b,a,h){if(/^date|^time/i.test(h)){var k=this._formatDate;if(/^time/i.test(h))k=this._formatTime;a=b==="range"?n.string.substitute(this._nls.rangeTemplate,[k(a.start),k(a.end)]):k(a)}return'<span style="font-style:italic">'+this._getConditionDisplayName(b)+"</span> "+a},_getConditionDisplayName:function(b){return this._nls["condition"+(b.charAt(0).toUpperCase()+b.substring(1))]},_getConditionOptions:function(b){var a=this._nls,h=this._conditionOptions=
this._conditionOptions||{};if(!h[b]){var k=[];n.forEach(this._getColumnConditions(b),function(b){var h=b.charAt(0).toUpperCase()+b.substring(1);k.push({label:a["condition"+h],value:b})},this);h[b]=k}return h[b]},_getFilterExpression:function(b,a,h,k){var b={date:this.grid._columnsById[k].dateParser||this._stringToDate,time:this.grid._columnsById[k].timeParser||this._stringToTime},c=a.condition,d=!1;c==="range"?(d=g.value(a.value.start,h),a=g.value(a.value.end,h),h=g.column(k,h,b[h]),h=g.and(g.greaterEqual(h,
d),g.lessEqual(h,a))):(/^not/.test(c)&&(d=!0,c=c.replace(/^not/g,""),c=c.charAt(0).toLowerCase()+c.substring(1)),h=g[c](g.column(k,h,b[h]),c=="isEmpty"?null:g.value(a.value,h)),d&&(h=g.not(h)));return h},_stringToDate:function(b,a){a=a||/(\d{4})\/(\d\d?)\/(\d\d?)/;a.test(b);var h=new Date;h.setYear()(parseInt(RegExp.$1));h.setMonth()(parseInt(RegExp.$2)-1);return h},_stringToTime:function(b,a){a=a||/(\d\d?):(\d\d?):(\d\d?)/;a.test(b);var h=new Date;h.setHours(parseInt(RegExp.$1));h.setMinutes(parseInt(RegExp.$2));
h.setSeconds(parseInt(RegExp.$3));return h},_formatDate:function(b){var a=b.getMonth()+1,h=b.getDate();return a+"/"+h+"/"+b.getFullYear()},_formatTime:function(b){var a=b.getHours(),b=b.getMinutes();a<10&&(a="0"+a);b<10&&(b="0"+b);return a+":"+b+":00"}}))})},"gridx/core/model/Model":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","dojo/DeferredList","dojo/_base/connect"],function(n,m,o,l,i,f){var g=o.isArrayLike,e=o.isString;return n(null,{constructor:function(d){this.store=
d.store;this._exts={};this._cmdQueue=[];this._model=this._cache=new d.cacheClass(this,d);this._createExts(d.modelExtensions||[],d);d=this._model;this._connects=[f.connect(d,"onDelete",this,"onDelete"),f.connect(d,"onNew",this,"onNew"),f.connect(d,"onSet",this,"onSet"),f.connect(d,"onSizeChange",this,"onSizeChange")]},destroy:function(){m.forEach(this._connects,f.disconnect);for(var d in this._exts)this._exts[d].destroy()},clearCache:function(){this._cache.clear()},when:function(){this._addCmd({name:"_cmdRequest",
scope:this,args:arguments,async:1});return this._exec()},scan:function(d,c){var b=new l,a=d.start||0,h=d.pageSize||this._cache.pageSize||1,k=d.count>0?a+d.count:Infinity,r=d.whenScope||this,s=d.whenFunc||r.when,e=function(a){s.call(r,{id:[],range:[{start:a,count:h}]},function(){var b,d,s=[];for(b=a;b<a+h&&b<k;++b)if(d=r.byIndex(b))s.push(d);else{k=-1;break}if(c(s,a)||b==k)k=-1}).then(function(){k==-1?b.callback():e(a+h)})};e(a);return b},onDelete:function(){},onNew:function(){},onSet:function(){},
onSizeChange:function(){},_msg:function(){},_addCmd:function(d){var c=this._cmdQueue,b=c[c.length-1];b&&b.name===d.name&&b.scope===d.scope?b.args.push(d.args||[]):(d.args=[d.args||[]],c.push(d))},_cmdRequest:function(){return new i(m.map(arguments,function(d){var c=d[0],b=o.hitch(d[2]||window,d[1]||function(){});if(c===null||!d.length)return b(),d=new l,d.callback(),d;return this._model._call("when",[this._normArgs(c),b])},this),0,1)},_exec:function(){var d=this,c=d._cache,b=new l,a=d._cmdQueue,h=
function(a,b){d._busy=0;c.skipCacheSizeCheck=0;c._checkSize&&c._checkSize();b?a.errback(b):a.callback()},k=function(){if(m.some(a,function(a){return a.name==="_cmdRequest"}))try{for(;a.length;){var c=a.shift(),d=c.scope[c.name].apply(c.scope,c.args);if(c.async){l.when(d,k,o.partial(h,b));return}}}catch(e){h(b,e);return}h(b)};if(d._busy)return d._busy;d._busy=b;c.skipCacheSizeCheck=1;k();return b},_createExts:function(d,c){d=m.filter(d,function(a){return a&&a.prototype});d.sort(function(a,b){return a.prototype.priority-
b.prototype.priority});for(var b=0,a=d.length;b<a;++b)if(b==d.length-1||d[b]!=d[b+1]){var h=new d[b](this,c);this._exts[h.name]=h}},_normArgs:function(d){var c,b=[],a=[],h={range:b,id:a},k=function(a){return typeof a=="number"&&a>=0},r=function(h){if(h&&k(h.start))b.push(h);else if(k(h))b.push({start:h,count:1});else if(g(h))for(c=h.length-1;c>=0;--c)k(h[c])?b.push({start:h[c],count:1}):h[c]&&k(h[c].start)?b.push(h[c]):e(h)&&a.push(h[c]);else e(h)&&a.push(h)};if(d&&(d.index||d.range||d.id))if(r(d.index),
r(d.range),g(d.id))for(c=d.id.length-1;c>=0;--c)a.push(d.id[c]);else d.id&&a.push(d.id);else r(d);!b.length&&!a.length&&this.size()<0&&b.push({start:0,count:this._cache.pageSize||1});return h}})})},"gridx/modules/select/Column":function(){define(["dojo/_base/declare","dojo/_base/query","dojo/_base/array","dojo/_base/sniff","dojo/dom-class","dojo/keys","./_Base","../../core/_Module"],function(n,m,o,l,i,f,g,e){return e.register(n(g,{name:"selectColumn",columnMixin:{select:function(){this.grid.select.column._markById(this.id,
1);return this},deselect:function(){this.grid.select.column._markById(this.id,0);return this},isSelected:function(){return this.grid.select.column.isSelected(this.id)}},selectById:function(d){this._markById(d,1)},deselectById:function(d){this._markById(d,0)},isSelected:function(d){d=this.grid._columnsById[d];return!(!d||!d._selected)},getSelected:function(){var d=[],c,b,a=this.grid._columns,h=a.length;for(c=0;c<h;++c)b=a[c],b._selected&&d.push(b.id);return d},clear:function(){var d=this.grid._columns,
c,b=d.length;for(c=0;c<b;++c)this._markById(d[c].id,0)},_type:"column",_init:function(){var d=this;d.batchConnect([d.grid,"onHeaderCellClick",function(c){i.contains(c.target,"gridxArrowButtonNode")||d._select(c.columnId,c.ctrlKey)}],[d.grid,l("ff")<4?"onHeaderCellKeyUp":"onHeaderCellKeyDown",function(c){(c.keyCode==f.SPACE||c.keyCode==f.ENTER)&&d._select(c.columnId,c.ctrlKey)}])},_markById:function(d,c){var b=this.grid._columnsById[d];if(this.arg("enabled")&&(c=!!c,b&&!b._selected==c))b._selected=
c,this._highlight(d,c),this[c?"onSelected":"onDeselected"](this.grid.column(d,1))},_highlight:function(d,c){var b=this,a=b.grid;m("[colid='"+d+"']",a.bodyNode).forEach(function(h){i.toggle(h,"gridxColumnSelected",c);b.onHighlightChange({column:a._columnsById[d].index},c)})},_onRender:function(d,c){var b,a,h,k=d+c;b=this.grid;var r=b.bodyNode,e=o.filter(b._columns,function(a){return a._selected});for(b=e.length-1;b>=0;--b)for(a=d;a<k;++a)h=m(['[visualindex="',a,'"] [colid="',e[b].id,'"]'].join(""),
r)[0],i.add(h,"gridxColumnSelected")}}))})},"gridx/modules/select/_RowCellBase":function(){define(["dojo/_base/declare","dojo/_base/lang","./_Base","../../core/model/extensions/Mark"],function(n,m,o,l){return n(o,{modelExtensions:[l],selectById:function(i,f){var g=this.model;this.arg("enabled")&&(g.markById(i,1,this._getMarkType(f)),g.when())},deselectById:function(i,f){var g=this.model;this.arg("enabled")&&(g.markById(i,0,this._getMarkType(f)),g.when())},isSelected:function(i,f){return this.model.isMarked(i,
this._getMarkType(f))},_init:function(){var i=this.model;this.batchConnect([i,"onMarked",m.hitch(this,"_onMark",1)],[i,"onMarkRemoved",m.hitch(this,"_onMark",0)])}})})},"gridx/modules/IndirectSelect":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/query","dojo/_base/lang","dojo/dom-class","dojo/_base/Deferred","../core/_Module","../util","./RowHeader"],function(n,m,o,l,i,f,g,e){return g.register(n(g,{name:"indirectSelect",required:["rowHeader","selectRow"],preload:function(){var d=
this,c=d.grid,b=c.focus,a=c.select.row,h=c.rowHeader;h.cellProvider=l.hitch(d,d._createSelector);d.batchConnect([a,"onHighlightChange","_onHighlightChange"],[a,"onSelectionChange","_onSelectionChange"],[c,"onRowMouseOver","_onMouseOver"],[c,"onRowMouseOut","_onMouseOut"],b&&[b,"onFocusArea",function(a){a=="rowHeader"&&d._onMouseOver()}],b&&[b,"onBlurArea",function(a){a=="rowHeader"&&d._onMouseOut()}]);if(a.selectByIndex&&d.arg("all"))h.headerProvider=l.hitch(d,d._createSelectAllBox),b&&d._initFocus(),
h.loaded.then(function(){d.connect(c,"onRowHeaderHeaderMouseDown","_onSelectAll")})},all:!0,_createSelector:function(d){d=o('[rowid="'+d.rowId+'"]',this.grid.bodyNode)[0];return this._createCheckBox(d&&i.contains(d,"gridxRowSelected"))},_createCheckBox:function(d){var c=this._getDijitClass();return['<span class="gridxIndirectSelectionCheckBox dijitReset dijitInline ',c," ",d?c+"Checked":"",'"><span class="gridxIndirectSelectionCheckBoxInner">\u25a1</span></span>'].join("")},_createSelectAllBox:function(){return this._createCheckBox(this._allSelected)},
_onHighlightChange:function(d,c){var b=o('[visualindex="'+d.row+'"].gridxRowHeaderRow .gridxIndirectSelectionCheckBox',this.grid.rowHeader.bodyNode)[0];b&&i.toggle(b,this._getDijitClass()+"Checked",c)},_onMouseOver:function(){var d=this.grid.select.row;if(!d.holdingCtrl)this._holdingCtrl=!1,d.holdingCtrl=!0},_onMouseOut:function(){if(this.hasOwnProperty("_holdingCtrl"))this.grid.select.row.holdingCtrl=!1,delete this._holdingCtrl},_getDijitClass:function(){return this._isSingle()?"dijitRadio":"dijitCheckBox"},
_isSingle:function(){var d=this.grid.select.row;return d.hasOwnProperty("multiple")&&!d.arg("multiple")},_onSelectAll:function(){var d=this.grid,c=d.body;d.select.row[this._allSelected?"deselectByIndex":"selectByIndex"]([c.rootStart,c.rootStart+c.rootCount-1])},_onSelectionChange:function(d){var c=this,b,a,h=c.grid.body,k=c.model,r=h.rootStart,e=h.rootCount;e===k.size()?a=e==d.length:(b=new f,k.when({start:r,count:e},function(){var h=m.filter(m.map(d,function(a){return k.idToIndex(a)}),function(a){return a>=
r&&a<r+e});a=e==h.length;b.callback()}));f.when(b,function(){c._allSelected=a;i.toggle(c.grid.rowHeader.headerCellNode.firstChild,c._getDijitClass()+"Checked",a)})},_initFocus:function(){var d=this.grid,c=d.rowHeader,b=c.headerCellNode,a=function(a){e.stopEvent(a);i.add(b,"gridxHeaderCellFocus");b.focus();return!0},h=function(){i.remove(b,"gridxHeaderCellFocus");return!0};d.focus.registerArea({name:"selectAll",priority:0.89,focusNode:c.headerNode,doFocus:a,doBlur:h,onFocus:a,onBlur:h})}}))})},"gridx/modules/extendedSelect/_RowCellBase":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/_base/query","./_Base","../../core/model/extensions/Mark"],function(n,m,o,l,i){return n(l,{modelExtensions:[i],_getRowId:function(f){return(f=o('[visualindex="'+f+'"]',this.grid.bodyNode)[0])&&f.getAttribute("rowid")},_init:function(){var f=this.model;this.batchConnect([this.grid.body,"onMoveToCell","_onMoveToCell"],[f,"onMarked",m.hitch(this,"_onMark",1)],[f,"onMarkRemoved",m.hitch(this,"_onMark",0)])}})})},"gridx/modules/pagination/PaginationBar":function(){define(["dojo/_base/declare",
"./_PaginationBarBase","./LinkPager","../../core/_Module","./GotoPagePane","dijit/Dialog","dijit/form/Button","dijit/form/NumberTextBox"],function(n,m,o,l,i,f,g,e){return l.register(n(m,{gotoButton:!0,visibleSteppers:3,sizeSeparator:"|",gotoPagePane:i,dialogClass:f,buttonClass:g,numberTextBoxClass:e,pagerClass:o}))})},"gridx/modules/VScroller":function(){define(["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/event","dojo/_base/sniff","dojo/_base/query","dojo/keys","dojox/html/metrics","../core/_Module"],
function(n,m,o,l,i,f,g,e){return e.register(n(e,{name:"vScroller",forced:["body","vLayout","columnWidth"],optional:["pagination"],getAPIPath:function(){return{vScroller:this}},preload:function(){var d=this.grid,c=this.domNode=d.vScrollerNode;this.stubNode=c.firstChild;if(l("ie")<8)this.stubNode.style.width=g.getScrollbar().w+"px";d.autoHeight?c.style.display="none":this.domNode.style.width=g.getScrollbar().w+"px";d.hLayout.register(null,c,1)},load:function(d,c){var b=this,a=b.grid,h=a.bodyNode;b.batchConnect([b.domNode,
"onscroll","_doScroll"],[h,"onmousewheel","_onMouseWheel"],[a.mainNode,"onkeypress","_onKeyScroll"],[a.body,"onRender","_onBodyChange"],[a.body,"onForcedScroll","_onForcedScroll"],[a,"_onResizeEnd","_onBodyChange"],l("ff")&&[h,"DOMMouseScroll","_onMouseWheel"]);c.then(function(){m.when(b._init(d),function(){b.domNode.style.width="";b.loaded.callback()})})},scrollToPercentage:function(d){this.domNode.scrollTop=this.stubNode.style.clientHeight*d/100},scrollToRow:function(d,c){var b=new m,a=this.grid.bodyNode,
h=this.domNode,k=0,r=i('[visualindex="'+d+'"]',a)[0];if(r){var k=r.offsetTop,e=a.scrollTop;if(c)return h.scrollTop=k,b.callback(!0),b;else if(k<e)k-=e;else if(k+r.offsetHeight>e+a.clientHeight)k=k+r.offsetHeight-e-a.clientHeight;else return b.callback(!0),b;h.scrollTop+=k}b.callback(!!r);return b},_init:function(){this._onForcedScroll()},_doScroll:function(){this.grid.bodyNode.scrollTop=this.domNode.scrollTop},_onMouseWheel:function(d){this.grid.autoHeight||(this.domNode.scrollTop-=typeof d.wheelDelta===
"number"?d.wheelDelta/3:-40*d.detail,o.stop(d))},_onBodyChange:function(){var d=this,c=d.grid;window.setTimeout(function(){d.stubNode.style.height=c.bodyNode.scrollHeight+"px";d._doScroll();c.vScrollerNode.scrollTop=c.vScrollerNode.scrollTop||0},0)},_onForcedScroll:function(){var d=this,c=d.grid.body;return d.model.when({start:c.rootStart,count:c.rootCount},function(){c.renderRows(0,c.rootCount||d.model.size()-start)})},_onKeyScroll:function(d){var h;var a;var c=this.grid.body,b=this.domNode;if(d.keyCode==
f.HOME)c._focusCellRow=0,b.scrollTop=0;else if(d.keyCode==f.END)c._focusCellRow=c.visualCount-1,b.scrollTop=this.stubNode.clientHeight-c.domNode.offsetHeight;else if(d.keyCode==f.PAGE_UP)a=c._focusCellRow=Math.max(c.renderStart-c.renderCount,0),c=a,this.scrollToRow(c,1);else if(d.keyCode==f.PAGE_DOWN)h=c._focusCellRow=Math.min(c.visualCount-1,c.renderStart+c.renderCount),c=h,this.scrollToRow(c,1);else return;o.stop(d)}}))})},"gridx/core/model/cache/_Cache":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","../_Extension"],function(n,m,o,l,i){var f=o.hitch,g=o.mixin,e=m.indexOf;return n(i,{constructor:function(d,c){var c=c||{},b=this,a=b.store=c.store,h=a.fetch;b.columns=c.columns;!h&&a.notify?b.connect(a,"notify",function(a,h){a===void 0?b._onDelete(h):h===void 0?b._onNew(a):b._onSet(a)}):(b.connect(a,h?"onSet":"put","_onSet"),b.connect(a,h?"onNew":"add","_onNew"),b.connect(a,h?"onDelete":"remove","_onDelete"));b.clear();b._mixinAPI("byIndex",
"byId","indexToId","idToIndex","size","treePath","hasChildren","keep","free","item")},destroy:function(){this.inherited(arguments);this.clear()},clear:function(){this._priority=[];this._struct={};this._cache={};this._size={};this._struct[""]=[];this._size[""]=-1},byIndex:function(d,c){this.prepare("byIndex",arguments);return this._cache[this.indexToId(d,c)]},byId:function(d){this.prepare("byId",arguments);return this._cache[d]},indexToId:function(d,c){this.prepare("indexToId",arguments);var b=this._struct[c||
""];return b&&b[d+1]},idToIndex:function(d){this.prepare("idToIndex",arguments);var c=this._struct,c=e(c[c[d]&&c[d][0]]||[],d);return c>0?c-1:-1},treePath:function(d){for(var c=this._struct,b=[];d!==void 0;)b.unshift(d),d=c[d]&&c[d][0];return b[0]!==""?[]:(b.pop(),b)},hasChildren:function(d){var c=this.store;this.prepare("hasChildren",arguments);var b=this.byId(d);return c.hasChildren&&c.hasChildren(d,b&&b.item)},size:function(d){this.prepare("size",arguments);var c=this._size[d||""];return c>=0?
c:-1},onBeforeFetch:function(){},onAfterFetch:function(){},onSetColumns:function(d){var c,b,a,h;this.columns=d;for(c in this._cache)for(a in b=this._cache[c],d)h=d[a],b.data[a]=this._formatCell(h.id,b.rawData)},_itemToObject:function(d){var c=this.store;if(c.fetch){var b,a,h={},k=c.getAttributes(d);b=0;for(a=k.length;b<a;++b)h[k[b]]=c.getValue(d,k[b]);return h}return d},_formatCell:function(d,c){var b=this.columns[d];return b.formatter?b.formatter(c):c[b.field||d]},_formatRow:function(d){var c=this.columns,
b={},a;if(!c)return d;for(a in c)b[a]=this._formatCell(a,d);return b},_addRow:function(d,c,b,a,h){var h=h||"",k=this._struct,r=this._priority,s=k[h];if(!s)throw Error("Fatal error of cache._addRow: parent item "+h+" of "+d+" is not loaded");if(s[c+1]){if(s[c+1]!==d)throw Error("Fatal error of cache._addRow: different row id "+d+" and "+s[c+1]+" for same row index "+c);}else s[c+1]=d;k[d]=k[d]||[h];h||(c=e(r,d),c>=0&&r.splice(c,1),r.push(d));this._cache[d]={data:this._formatRow(b),rawData:b,item:a}},
_loadChildren:function(d){var c=new l,b=this,a=b.store,h=[],k=b.byId(d);k&&(h=a.getChildren&&a.getChildren(k.item)||[]);l.when(h,function(h){b._size[d]=h.length;for(var k=0,e=h.length;k<e;++k){var f=h[k];b._addRow(a.getIdentity(f),k,b._itemToObject(f),f,d)}c.callback()},f(c,c.errback));return c},_onFetchBegin:function(d){var c=this._size[""],d=this._size[""]=parseInt(d,10);if(c!==d)this.onSizeChange(d,c)},_onFetchComplete:function(d,c,b){try{for(var a=[],h=this.store,k=0,r=b.length;k<r;++k)a.push(h.getIdentity(b[k])),
this._addRow(a[k],c+k,this._itemToObject(b[k]),b[k]);d.callback(a)}catch(e){d.errback(e)}},_storeFetch:function(d){var c=this,b=c.store,a=new l,h=g({},c.options||{},d),k=f(c,c._onFetchBegin),d=f(c,c._onFetchComplete,a,d.start),r=f(a,a.errback);c.onBeforeFetch();b.fetch?b.fetch(g(h,{onBegin:k,onComplete:d,onError:r})):(b=b.query(h.query,h),l.when(b.total,k),l.when(b,d,r));a.then(function(){c.onAfterFetch()});return a},_onSet:function(d){var c=this.store.getIdentity(d),b=this.idToIndex(c),a=this.treePath(c);
a.length&&this._addRow(c,b,this._itemToObject(d),d,a.pop());this.onSet(c,b,this._cache[c])},_onNew:function(d,c){var b=this.store,a=b.getIdentity(d),h=this._itemToObject(d),h={data:this._formatRow(h),rawData:h,item:d},k=c&&c[b.fetch?"item":"parent"];k&&b.getIdentity(k);b=this._size[""];this.clear();this.onNew(a,0,h);!k&&b>=0&&(this._size[""]=b+1,this.onSizeChange(b+1,b,"new"))},_onDelete:function(d){var c=this.store,b=this._struct,d=c.fetch?c.getIdentity(d):d,a=this.treePath(d);if(a.length){var h,
k,c=[d],r=a.pop(),s=this._size,f=s[""],g=e(b[r],d);b[r].splice(g,1);--s[r];for(h=0;h<c.length;++h)if(a=b[c[h]])for(k=a.length-1;k>0;--k)c.push(a[k]);for(h=c.length-1;h>=0;--h)k=c[h],delete this._cache[k],delete b[k],delete s[k];h=e(this._priority,d);h>=0&&this._priority.splice(h,1);this.onDelete(d,g-1);!r&&f>=0&&(s[""]=f-1,this.onSizeChange(f-1,f,"delete"))}else this.onDelete(d)}})})},"gridx/core/Core":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred",
"dojo/DeferredList","./model/Model","./Row","./Column","./Cell","./_Module"],function(n,m,o,l,i,f,g,e,d,c){function b(a){a=a.moduleClass.prototype;return(a.forced||[]).concat(a.optional||[])}function a(b,h){if(h)for(var k in h){var c=b[k],d=h[k];c&&o.isObject(c)&&!r(c)?a(c,d):b[k]=d}}function h(a){var h=a.modules,k,c,d,r,e=function(a){for(var b=h.length-1;b>=0;--b)if(h[b].moduleClass.prototype.name===a)return h[b];return null};for(k=h.length-1;c=h[k];--k){d=c.moduleClass.prototype.name;for(r=b(c);r.length;){c=
r.shift();if(c==d)throw Error("Module '"+c+"' is in a dependancy circle!");(c=e(c))&&(r=r.concat(b(c)))}}return a}var k=o.delegate,r=o.isFunction,s=o.hitch;return n([],{reset:function(a){this._uninit();var b={},k;for(k in a)b[k]=a[k];a=b;this.store=a.store;a.modules=a.modules||[];a.modelExtensions=a.modelExtensions||[];this.setColumns(a.structure);a.columns=this._columnsById;k=a;var d=this.coreModules,e,s,a=k.modules,b=[],g=d&&d.length||0,d=0;for(e=a.length;d<e;++d)s=a[d],r(s)?b.push({moduleClass:s}):
s?r(s.moduleClass)?b.push(s):console.error(["The ",d+1-g,"-th declared module has NO moduleClass, please provide it"].join("")):console.error(["The ",d+1-g,"-th declared module can NOT be found, please require it before using it"].join(""));k.modules=b;for(var a=c._modules,b=k.modules,i,l,d=0;d<b.length;++d){g=b[d].moduleClass.prototype;i=(g.forced||[]).concat(g.required||[]);for(e=0;e<i.length;++e){l=i[e];for(s=b.length-1;s>=0;--s)if(b[s].moduleClass.prototype.name===l)break;if(s<0)if(a[l])b.push({moduleClass:a[l]});
else throw Error(["Forced/Required Dependent Module '",l,"' is NOT Found for '",g.name,"'"].join(""));}}a=k.modules;e={};for(b=0;d=a[b];++b)e[d.moduleClass.prototype.name]=d;a=[];for(b in e)a.push(e[b]);k.modules=a;k=h(k);a=k.modules;b=k.modelExtensions;s=[].push;for(d=a.length-1;d>=0;--d)(e=a[d].moduleClass.prototype.modelExtensions)&&s.apply(b,e);a=k;this.model=new f(a);this._createModules(a)},_postCreate:function(){var a=this._deferStartup=new l;this._preloadModules();this._loadModules(a).then(s(this,
this.onModulesLoaded))},onModulesLoaded:function(){},setStore:function(a){this.store=a;this.reset(this);this._postCreate();this._deferStartup.callback()},setColumns:function(a){this.structure=a;var a=this._columns=o.clone(a),b={},h,k,c;if(o.isArray(a)){k=0;for(c=a.length;k<c;++k)h=a[k],h.index=k,h.id=h.id||String(k+1),b[h.id]=h}this._columnsById=b;if(this.model)this.model._cache.onSetColumns(this._columnsById)},row:function(a,b){var h=a;typeof h=="number"&&!b&&(h=this.model.indexToId(h));if(this.model.idToIndex(h)>=
0)return this._rowObj=this._rowObj||this._mixinComponent(new g(this),"row"),k(this._rowObj,{id:h});return null},column:function(a,b){var t;var h=a,c,d={};typeof h=="number"&&!b&&(t=(h=this._columns[h])&&h.id,h=t);if(h=this._columnsById[h]){this._colObj=this._colObj||this._mixinComponent(new e(this),"column");for(c in h)this._colObj[c]===void 0&&(d[c]=h[c]);return k(this._colObj,d)}return null},cell:function(a,b,h){if(a=a instanceof g?a:this.row(a,h))if(b=b instanceof e?b:this.column(b,h))return this._cellObj=
this._cellObj||this._mixinComponent(new d(this),"cell"),k(this._cellObj,{row:a,column:b});return null},columnCount:function(){return this._columns.length},rowCount:function(a){return this.model.size(a)},columns:function(a,b){return this._arr(this._columns.length,"column",a,b)},rows:function(a,b){return this._arr(this.model.size(),"row",a,b)},_uninit:function(){var a=this._modules,b;for(b in a){b=a[b].mod;if(b.getAPIPath){var h=b.getAPIPath();if(h){var k=void 0;for(k in h)delete this[k]}}b.destroy()}this.model&&
this.model.destroy()},_arr:function(a,b,h,k){for(var c=h||0,h=k>=0?h+k:a,k=[];c<h&&c<a;++c)k.push(this[b](c));for(var d in m)r(m[d])&&(k[d]=o.partial(m[d],k));return k},_preloadModules:function(){var a,b=this._modules;for(a in b)a=b[a],a.mod.preload&&a.mod.preload(a.args)},_loadModules:function(a){var b=[],h;for(h in this._modules)b.push(this._initializeModule(a,h));return new i(b)},_mixinComponent:function(a,b){var h,k,c=this._modules;for(h in c)h=c[h].mod,k=h[b+"Mixin"],r(k)&&(k=k.apply(h)),o.mixin(a,
k||{});return a},_createModules:function(b){var t;var b=b.modules,h=this._modules={},k,c,d;for(k=0;k<b.length;++k)if(c=b[k],d=c.moduleClass.prototype.name,!h[d])d=h[d]={args:c},t=d.mod=new c.moduleClass(this,c),c=t,c.forced=c.forced||[],c.optional=c.optional||[],c.loaded=new l,d.deps=c.forced.concat(c.optional),c.getAPIPath&&a(this,c.getAPIPath())},_initializeModule:function(a,b){var h=this._modules,k=h[b],c=k.mod,d=k.deferred,r=k.deferred=d||c.loaded;d||(new i(m.map(m.filter(k.deps,function(a){return h[a]}),
s(this,this._initializeModule,a)))).then(function(){c.load?c.load(k.args,a):r.fired<0&&r.callback()});return r}})})},"gridx/core/model/extensions/ClientFilter":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","../_Extension"],function(n,m,o,l,i){var f=o.hitch,g=m.forEach,e=m.indexOf;return n(i,{name:"clientFilter",priority:10,constructor:function(d,c){this.pageSize=c.pageSize||100;this._mixinAPI("filter","hasFilter");this.connect(d,"_msg","_receiveMsg")},
clear:function(){this._ids=0;this._indexes={}},filter:function(){this.model._addCmd({name:"_cmdFilter",scope:this,args:arguments,async:1})},hasFilter:function(){return!!this._ids},byIndex:function(d){var c=this._ids,b=this.inner;return c?(c=c[d])&&b._call("byId",[c]):b._call("byIndex",arguments)},byId:function(d){return this.ids&&this._indexes[d]===void 0?null:this.inner._call("byId",arguments)},indexToId:function(d){return this._ids?this._ids[d]||void 0:this.inner._call("indexToId",arguments)},idToIndex:function(d){if(this._ids){var c=
e(this._ids,d);return c>=0?c:void 0}return this.inner._call("idToIndex",arguments)},size:function(){return this._ids?this._ids.length:this.inner._call("size",arguments)},when:function(d,c){var b=this,a=function(){b._ids&&b._mapWhenArgs(d);return b.inner._call("when",[d,c])};if(b._refilter&&(b._refilter=0,b._ids)){var h=new l;b._reFilter().then(function(){a().then(f(h,h.callback),f(h,h.errback))});return h}return a()},_cmdFilter:function(){var d=arguments;return this._filter.apply(this,d[d.length-
1])},_filter:function(d){var c=new l,b=this,a=b.size();b.clear();if(o.isFunction(d)){var h=[];b.model.scan({start:0,pageSize:b.pageSize,whenScope:b,whenFunc:b.when},function(a,k){var c,e,f,g=k+a.length;for(c=k;c<g;++c)if(e=b.indexToId(c),f=b.byIndex(c))d(f,e)&&(h.push(e),b._indexes[e]=c);else break}).then(function(){var k=b.size();h.length==k?b.clear():(b._ids=h,k=h.length,b.model._msg("filter",h));if(k!=a)b.onSizeChange(k,a,"filter");c.callback()})}else{var k=b.size();if(k!==a)b.onSizeChange(k,a,
"filter");c.callback()}return c},_mapWhenArgs:function(d){var c=this,b=[],a=c._ids.length;d.id=m.filter(d.id,function(a){return c._indexes[a]!==void 0});g(d.range,function(h){if(!h.count||h.count<0){var k=a-h.start;if(k<=0)return;h.count=k}for(k=0;k<h.count;++k){var d=c._mapIndex(k+h.start);d!==void 0&&b.push({start:d,count:1})}});d.range=b},_mapMoveArgs:function(d){if(d.length==3){for(var c=[],b=d[0],a=d[0]+d[1];b<a;++b)c.push(this._mapIndex(b));d[0]=c;d[1]=this._mapIndex(d[2]);d.pop()}else d[0]=
m.map(d[0],function(a){return this._mapIndex(a)}),d[1]=this._mapIndex(d[1])},_mapIndex:function(d){return this._indexes[this._ids[d]]},_moveFiltered:function(d,c,b){var a=this._ids.length;if(d>=0&&d<a&&c>0&&c<Infinity&&b>=0&&b<a&&(b<d||b>d+c)){var h=[],a=d;for(d+=c;a<d;++a)h.push(this._mapIndex(a));this.inner._call("moveIndexes",[h,this._mapIndex(b)])}},_reFilter:function(){var d=this;return d.inner._call("when",[{id:d._ids,range:[]},function(){g(d._ids,function(c){var b=d.inner._call("idToIndex",
[c]);d._indexes[c]=b});d._ids.sort(function(c,b){return d._indexes[c]-d._indexes[b]})}])},_onMoved:function(d){var c=this;g(c._ids,function(b){var a=c._indexes[b];d[a]!==void 0&&(c._indexes[b]=d[a])});c._ids.sort(function(b,a){return c._indexes[b]-c._indexes[a]})},_receiveMsg:function(d,c){if(this._ids)d=="storeChange"?this._refilter=1:d=="moved"?this._onMoved(c):d=="beforeMove"&&this._mapMoveArgs(c)},_onNew:function(d){if(this._ids)this._ids.push(d),this._refilter=1;this.onNew.apply(this,arguments)},
_onDelete:function(d,c,b){var a=this._indexes,h=this._ids;if(h){var k=e(h,d),r=a[d];k>=0&&h.splice(k,1);if(k>=0&&r!==void 0)for(k in c=k,a)a[k]>r&&--a[k];else c=void 0,this._refilter=1}this.onDelete(d,c,b)}})})},"url:gridx/templates/PaginationBar.html":"<div class='gridxPager'\r\n\t><table class='gridxPagerInner' cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\"\r\n\t\t><tr\r\n\t\t\t><td class=\"gridxPagerDescriptionTD\"\r\n\t\t\t\t><div class=\"gridxPagerDescription\"\r\n\t\t\t\t\tdata-dojo-attach-point=\"_descContainer\"\r\n\t\t\t\t></div\r\n\t\t\t></td\r\n\t\t\t><td class=\"gridxPagerStepperTD\"\r\n\t\t\t\t><div class=\"gridxPagerStepper\"\r\n\t\t\t\t\tdata-dojo-attach-point=\"_pageStepperContainer\"\r\n\t\t\t\t\t><span class='gridxPagerStepperBtn gridxPagerPrevPage'\r\n\t\t\t\t\t\ttabindex='${_tabIndex}'\r\n\t\t\t\t\t\ttitle='${prevPageTitle}'\r\n\t\t\t\t\t\taria-label='${prevPageWai}'\r\n\t\t\t\t\t\tpageindex='Prev',\r\n\t\t\t\t\t\tdata-dojo-attach-point='_prevPageBtn'\r\n\t\t\t\t\t\tdata-dojo-attach-event='onclick: _gotoPrevPage'\r\n\t\t\t\t\t\t><span class='gridxPagerA11yInner'>&nbsp;&lt;</span\r\n\t\t\t\t\t></span\r\n\t\t\t\t\t><span class='gridxPagerPages'\r\n\t\t\t\t\t\tdata-dojo-attach-point='_pageBtnContainer'\r\n\t\t\t\t\t\tdata-dojo-attach-event='onclick: _gotoPage, onmouseover: _onHoverPageBtn, onmouseout: _onHoverPageBtn'\r\n\t\t\t\t\t></span\r\n\t\t\t\t\t><span class='gridxPagerStepperBtn gridxPagerNextPage'\r\n\t\t\t\t\t\ttabindex='${_tabIndex}'\r\n\t\t\t\t\t\ttitle='${nextPageTitle}'\r\n\t\t\t\t\t\taria-label='${nextPageWai}'\r\n\t\t\t\t\t\tpageindex='Next',\r\n\t\t\t\t\t\tdata-dojo-attach-point='_nextPageBtn'\r\n\t\t\t\t\t\tdata-dojo-attach-event='onclick: _gotoNextPage'\r\n\t\t\t\t\t\t><span class='gridxPagerA11yInner'>&nbsp;&gt;</span\r\n\t\t\t\t\t></span\r\n\t\t\t\t></div\r\n\t\t\t></td\r\n\t\t\t><td class=\"gridxPagerSizeSwitchTD\"\r\n\t\t\t\t><div class=\"gridxPagerSizeSwitch\"\r\n\t\t\t\t\tdata-dojo-attach-point='_sizeSwitchContainer'\r\n\t\t\t\t\tdata-dojo-attach-event='onclick: _switchPageSize, onmouseover: _onHoverSizeBtn, onmouseout: _onHoverSizeBtn'\r\n\t\t\t\t></div\r\n\t\t\t></td\r\n\t\t\t><td class='gridxPagerGoto'\r\n\t\t\t\t><span class='gridxPagerGotoBtn'\r\n\t\t\t\t\ttabindex='${_tabIndex}'\r\n\t\t\t\t\ttitle='${gotoBtnTitle}'\r\n\t\t\t\t\taria-label='${gotoBtnWai}'\r\n\t\t\t\t\tdata-dojo-attach-point='_gotoBtn'\r\n\t\t\t\t\tdata-dojo-attach-event='onclick: _showGotoDialog'\r\n\t\t\t\t\t><span class='gridxPagerA11yInner'>\u22a5</span\r\n\t\t\t\t></span\r\n\t\t\t></td\r\n\t\t></tr\r\n\t></table\r\n></div>\r\n",
"url:gridx/templates/FilterConfirmDialog.html":'<div class="gridxFilterConfirmDialogMessage">This will remove the filter and show all available records.</div\r\n><div class="gridxFilterConfirmDialogButtons"\r\n\t><input type="button" data-dojo-type="dijit.form.Button" label="Clear"\r\n\t/><input type="button" data-dojo-type="dijit.form.Button" label="Cancel"\r\n/></div>\r\n',"gridx/modules/select/_Base":function(){define(["dojo/_base/declare","dojo/_base/connect","../../core/_Module"],function(n,
m,o){return n(o,{getAPIPath:function(){var l={select:{}};l.select[this._type]=this;return l},preload:function(){var l=this,i=l.grid;l.subscribe("gridClearSelection_"+i.id,function(f){f!=l._type&&l.clear()});l.connect(i.body,"onRender","_onRender");l._init()},enabled:!0,multiple:!0,holdingCtrl:!1,onSelected:function(){},onDeselected:function(){},onHighlightChange:function(){},_getMarkType:function(){},_select:function(l,i){var f=1;this.arg("enabled")&&(this.arg("multiple")&&(i||this.arg("holdingCtrl"))?
f=!this.isSelected(l):this.clear(),m.publish("gridClearSelection_"+this.grid.id,[this._type]),this._markById(l,f))}})})},"url:gridx/templates/FilterBar.html":'<input type="button" data-dojo-type="dijit.form.Button" data-dojo-props="\r\n\ticonClass: \'gridxFilterBarBtnIcon\',\r\n\tlabel: \'...\',\r\n\ttitle: \'Define filter.\'"\r\n/><div class="gridxFilterBarStatus"\r\n\t><span>No filter applied.</span\r\n\t><span class="gridxFilterBarCloseBtn" title="Hide"></span\r\n></div>\r\n',"gridx/modules/pagination/DropDownPager":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/store/Memory","./_PagerBase","../../util","dojo/text!../../templates/PaginationBarDD.html"],function(n,m,o,l,i,f){return n(l,{templateString:f,refresh:function(){this._createDescription();this._createPageStepper();this._createPageSizeSwitch()},_onSwitchPage:function(f){this._pageStepperSelect.set("value",f+1)},_onChangePageSize:function(){this._createPageStepper()},_createPageStepper:function(){var f=this.module;if(this._toggleNode("gridxPagerStepper",f._exist(this.position,
"stepper"))){var e=[],d,c=this.pagination,b=c.pageCount(),a=c.currentPage(),h=this._pageStepperSelect,k,r;for(k=0;k<b;++k)r=k+1,r={id:r,label:r,value:r},e.push(r),a==k&&(d=r);e=new o({data:e});h?(h.set("store",e),h.set("value",a+1)):(a=f.arg("stepperClass"),f=m.mixin({store:e,searchAttr:"label",item:d,"class":"gridxPagerStepperWidget",onChange:function(a){c.gotoPage(a-1)}},f.arg("stepperProps")||{}),h=this._pageStepperSelect=new a(f),h.placeAt(this._pageStepperContainer,"last"),h.startup());h.set("disabled",
b<=1)}},_createPageSizeSwitch:function(){var f=this.module;if(this._toggleNode("gridxPagerSizeSwitch",f._exist(this.position,"sizeSwitch"))){for(var e=[],d=this.pagination,c=d.pageSize(),b=f.arg("pageSizeAllText",this.pageSizeAll),a=this._sizeSwitchSelect,h=f.arg("sizes"),k=0,r=h.length;k<r;++k){var s=h[k],i=!(s>0);e.push({label:i?b:s,value:i?-1:s,selected:c==s||i&&d.isAll()})}a?(a.removeOption(a.getOptions()),a.addOption(e)):(c=f.arg("sizeSwitchClass"),f=m.mixin({options:e,"class":"gridxPagerSizeSwitchWidget",
onChange:function(a){d.setPageSize(a<0?0:a)}},f.arg("sizeSwitchProps")||{}),a=this._sizeSwitchSelect=new c(f),a.placeAt(this._sizeSwitchContainer,"last"),a.startup())}},_initFocus:function(){var f=this,e=f.module.grid.focus,d=f.position,c=f.focusPriority;e&&(e.registerArea({name:d+"PageStepper",priority:c,focusNode:f._pageStepperContainer,doFocus:function(b){i.stopEvent(b);f._pageStepperSelect.focus();return!0}}),e.registerArea({name:d+"PageSizeSwitch",priority:c+0.001,focusNode:f._sizeSwitchContainer,
doFocus:function(b){i.stopEvent(b);f._sizeSwitchSelect.focus();return!0}}))}})})},"gridx/modules/Body":function(){define(["dojo/_base/declare","dojo/_base/query","dojo/_base/array","dojo/dom-construct","dojo/dom-class","dojo/_base/Deferred","dojo/_base/sniff","dojo/keys","../core/_Module","../util","dojo/i18n!../nls/Body"],function(n,m,o,l,i,f,g,e,d,c,b){return d.register(n(d,{name:"body",optional:["tree"],getAPIPath:function(){return{body:this}},preload:function(){var a=this.grid,b=this.domNode=
a.bodyNode;a._connectEvents(b,"_onMouseEvent",this);this._initFocus()},load:function(){var a=this,b=a.model,k=a.grid;a.batchConnect([b,"onDelete","_onDelete"],[b,"onSet","_onSet"],[b,"onSizeChange","_onSizeChange"],[k,"onRowMouseOver","_onRowMouseOver"],[k,"onCellMouseOver","_onCellMouseOver"],[k,"onCellMouseOut","_onCellMouseOver"],[k.bodyNode,"onmouseleave",function(){var b=m(".gridxRowOver",a.domNode)[0];b&&i.remove(b,"gridxRowOver")}],[k,"setColumns",function(){a.refresh()}]);b.when({},function(){var c=
a.rootCount,c=a.rootCount=c?c:b.size();a.visualCount=k.tree?k.tree.getVisualSize(a.rootStart,c):c;a.loaded.callback()})},destroy:function(){this.inherited(arguments);this.domNode.innerHTML=""},rowMixin:{node:function(){return this.grid.body.getRowNode({rowId:this.id})},visualIndex:function(){var a=this.id;return this.grid.body.getRowInfo({rowId:a,rowIndex:this.index(),parentId:this.model.treePath(a).pop()}).visualIndex}},cellMixin:{node:function(){return this.grid.body.getCellNode({rowId:this.row.id,
cellId:this.column.id})}},getRowNode:function(a){return(a=this._getRowNodeQuery(a))?m(a,this.domNode)[0]||null:null},getCellNode:function(a){var b=a.colId,k=this._getRowNodeQuery(a);if(k){if(!b&&typeof a.colIndex=="number")b=this.grid._columns[a.colIndex].id;k+=" [colid='"+b+"'].gridxCell";return m(k,this.domNode)[0]||null}return null},getRowInfo:function(a){var b=this.model,k=this.grid,c=a.rowId;if(c)a.rowIndex=b.idToIndex(c),a.parentId=b.treePath(c).pop();if(typeof a.rowIndex=="number"&&a.rowIndex>=
0)a.visualIndex=k.tree?k.tree.getVisualIndexByRowInfo(parentId,rowIndex,this.rootStart):a.rowIndex-this.rootStart;else if(typeof a.visualIndex=="number"&&a.visualIndex>=0)k.tree?(k=k.tree.getRowInfoByVisualIndex(a.visualIndex,this.rootStart),a.rowIndex=k.start,a.parentId=k.parentId):a.rowIndex=this.rootStart+a.visualIndex;else return a;a.rowId=c||b.indexToId(a.rowIndex,a.parentId);return a},refresh:function(a){var b=this;return b.model.when({}).then(function(){var k=b.renderStart,c=b.renderCount;
if(typeof a=="number"&&a>=0){a=k>a?k:a;var d=k+c-a,k=m('[visualindex="'+a+'"]',b.domNode)[0],c=[],e=[];if(k){var g=b._buildRows(a,d,c,e);if(g){l.place(g,k,"before");for(var g=0,i=e.length;g<i;++g)b.onAfterRow.apply(b,e[g])}}for(;k;)e=k.nextSibling,l.destroy(k),k=e;f.when(b._buildUncachedRows(c),function(){b.onRender(a,d)})}else b.renderRows(k,c,0,1)})},refreshCell:function(a,b){var k=new f,c=this,d=c.model,e=c.grid,g=e._columns[b],i=g&&c.getCellNode({visualIndex:a,colId:g.id});if(i){var l,m=c.getRowInfo({visualIndex:a}),
n=m.rowIndex,o=m.parentId;d.when({start:n,count:1,parentId:o},function(){if(l=d.byIndex(n,o))m.rowId=d.indexToId(n,o),i.innerHTML=c._buildCellContent(g,m,l.data,e.tree&&l.data[g.id]===void 0),c.onAfterCell(i,m,g,l)}).then(function(){k.callback(!!l)});return k}k.callback(0);return k},rootStart:0,rootCount:0,renderStart:0,renderCount:0,visualStart:0,visualCount:0,autoUpdate:1,autoChangeSize:1,updateRootRange:function(a,b){var k=this.grid.tree,k=this.visualCount=k?k.getVisualSize(a,b):b;this.rootStart=
a;this.rootCount=b;if(this.renderStart+this.renderCount>k&&(this.renderStart=k-this.renderCount,this.renderStart<0))this.renderStart=0,this.renderCount=k;if(!this.renderCount&&k)this.onForcedScroll()},renderRows:function(a,h,k,c){var d=this,e=d.grid,i="",m=[],n=[],o=d.domNode,t=e.emptyNode;if(h>0){t.innerHTML="";k!="top"&&k!="bottom"&&d.model.free();i=d._buildRows(a,h,m,n);if(k=="top")d.renderCount+=d.renderStart-a,d.renderStart=a,l.place(i,o,"first");else if(k=="bottom")d.renderCount=a+h-d.renderStart,
l.place(i,o,"last");else{d.renderStart=a;d.renderCount=h;k=c?o.scrollTop:0;o.scrollTop=0;if(g("ie"))for(;o.childNodes.length;)o.removeChild(o.firstChild);o.innerHTML=i;o.scrollTop=k;o.scrollLeft=e.hScrollerNode.scrollLeft;t.innerHTML=i?"":b.emptyInfo;d.onUnrender()}e=0;for(i=n.length;e<i;++e)d.onAfterRow.apply(d,n[e]);f.when(d._buildUncachedRows(m),function(){d.onRender(a,h)})}else if(!{top:1,bottom:1}[k])o.scrollTop=0,o.innerHTML="",t.innerHTML=b.emptyInfo,d.onUnrender(),d.model.free()},unrenderRows:function(a,
b){if(a>0){var k=0,c,d=this.domNode;if(b=="post")for(;k<a&&d.lastChild;++k)c=d.lastChild.getAttribute("rowid"),this.model.free(c),d.removeChild(d.lastChild),this.onUnrender(c);else{for(var e=d.scrollTop;k<a&&d.firstChild;++k)c=d.firstChild.getAttribute("rowid"),this.model.free(c),e-=d.firstChild.offsetHeight,d.removeChild(d.firstChild),this.onUnrender(c);this.renderStart+=k;d.scrollTop=e>0?e:0}this.renderCount-=k;this.model.when()}},onAfterRow:function(){},onAfterCell:function(){},onRender:function(){},
onUnrender:function(){},onDelete:function(){},onSet:function(){},collectCellWrapper:function(){},onMoveToCell:function(){},onForcedScroll:function(){},_getRowNodeQuery:function(a){var b;a.rowId?b="[rowid='"+a.rowId+"']":typeof a.rowIndex=="number"&&a.rowIndex>=0?(b="[rowindex='"+a.rowIndex+"']",a.parentId&&(b+="[parentid='"+a.parentId+"']")):typeof a.visualIndex=="number"&&a.visualIndex>=0&&(b="[visualindex='"+a.visualIndex+"']");return b&&b+".gridxRow"},_buildRows:function(a,b,c,d){for(var b=a+b,
e=[],f=this.model,g=this.domNode.scrollWidth;a<b;++a){var i=this.getRowInfo({visualIndex:a}),l=f.byIndex(i.rowIndex,i.parentId);e.push('<div class="gridxRow ',a%2?"gridxRowOdd":"",'" role="row" visualindex="',a);l?(f.keep(i.rowId),e.push('" rowid="',i.rowId,'" rowindex="',i.rowIndex,'" parentid="',i.parentId,'">',this._buildCells(l.data,i),"</div>"),d.push([i,l])):(e.push('"><div class="gridxRowDummy" style="width:',g,'px;"></div></div>'),i.start=i.rowIndex,i.count=1,c.push(i))}return e.join("")},
_buildUncachedRows:function(a){return a.length&&this.model.when(a,function(){for(var b=0,c=a.length;b<c;++b)this._buildRowContent(a[b])},this)},_buildRowContent:function(a){var b=this.model,c=m('[visualindex="'+a.visualIndex+'"]',this.domNode)[0];if(c){var d=b.byIndex(a.rowIndex,a.parentId);d?(a.rowId=b.indexToId(a.rowIndex,a.parentId),b.keep(a.rowId),c.setAttribute("rowid",a.rowId),c.setAttribute("rowindex",a.rowIndex),c.setAttribute("parentid",a.parentId||""),c.innerHTML=this._buildCells(d.data,
a),this.onAfterRow(a,d)):console.error("Row is not in cache:",a.rowIndex)}},_buildCells:function(a,b){for(var c,d,e=this.grid,f=e._columns,g=e.focus&&e.focus.currentArea()=="body",i=['<table class="gridxRowTable" role="presentation" border="0" cellpadding="0" cellspacing="0"><tr>'],l=0,m=f.length;l<m;++l)c=f[l],d=e.tree&&a[c.id]===void 0,i.push('<td class="gridxCell '),d&&i.push("gridxPaddingCell"),g&&this._focusCellRow===b.visualIndex&&this._focusCellCol===l&&i.push("gridxCellFocus"),i.push('" role="gridcell" tabindex="-1" colid="',
c.id,'" style="width: ',c.width,'">',this._buildCellContent(c,b,a,d),"</td>");i.push("</tr></table>");return i.join("")},_buildCellContent:function(a,b,c,d){var e="";d||(e=this._wrapCellData(a.decorator?a.decorator(c[a.id],b.rowId,b.visualIndex):c[a.id],b.rowId,a.id));return!e&&g("ie")<8?"$nbsp;":e},_wrapCellData:function(a,b,c){var d=[];this.collectCellWrapper(d,b,c);var e=d.length-1;for(e>0&&d.sort(function(a,b){return a.priority-b.priority});e>=0;--e)a=d[e].wrap(a,b,c);return a},_onMouseEvent:function(a,
b){var c=this.grid,d="onCell"+a,e="onRow"+a;if(c._isConnected(d)||c._isConnected(e))if(this._decorateEvent(b),b.rowId){if(b.columnId)c[d](b);c[e](b)}},_decorateEvent:function(a){for(var b=a.target||a.originalTarget,c=this.grid,d;b&&b!=c.bodyNode;b=b.parentNode){d=b.tagName.toLowerCase();if(d=="td"&&i.contains(b,"gridxCell")){var e=c._columnsById[b.getAttribute("colid")];a.cellNode=b;a.columnId=e.id;a.columnIndex=e.index}if(d=="div"&&i.contains(b,"gridxRow")){a.rowId=b.getAttribute("rowid");a.parentId=
b.getAttribute("parentid");a.rowIndex=parseInt(b.getAttribute("rowindex"),10);a.visualIndex=parseInt(b.getAttribute("visualindex"),10);break}}},_onSet:function(a,b,c){if(this.autoUpdate){var d=this.getRowNode({rowId:a});if(d&&c){var e=this.getRowInfo({rowId:a,rowIndex:b});d.innerHTML=this._buildCells(c.data,e);this.onAfterRow(e,c);this.onSet(a,b,c);this.onRender(b,1)}}},_onDelete:function(a){if(this.autoUpdate){var b=this.getRowNode({rowId:a});if(b){for(var c=0,d=parseInt(b.getAttribute("rowindex"),
10),e=b.getAttribute("parentid"),f={id:1},g=[b],i,m=[a],b=b.nextSibling;b&&f[b.getAttribute("parentid")];b=b.nextSibling)i=b.getAttribute("rowid"),m.push(i),g.push(b),f[i]=1;for(;b;b=b.nextSibling)b.getAttribute("parentid")==e&&b.setAttribute("rowindex",parseInt(b.getAttribute("rowindex"),10)-1),b.setAttribute("visualindex",parseInt(b.getAttribute("visualindex"),10)-1),++c;o.forEach(g,l.destroy);o.forEach(m,this.onUnrender,this);this.autoChangeSize&&this.rootStart===0&&!e&&this.updateRootRange(0,
this.rootCount-1);this.onDelete(a,d);this.onRender(d,c)}}},_onSizeChange:function(a,b){if(this.autoChangeSize&&this.rootStart===0&&(this.rootCount===b||b<0))this.updateRootRange(0,a),this._started&&this.refresh(),this._started=1},_onRowMouseOver:function(a){var b=m("> div.gridxRowOver",this.domNode)[0],a=this.getRowNode({rowId:a.rowId});b!=a&&(b&&i.remove(b,"gridxRowOver"),i.add(a,"gridxRowOver"))},_onCellMouseOver:function(a){i.toggle(a.cellNode,"gridxCellOver",a.type=="mouseover")},_focusCellCol:0,
_focusCellRow:0,_initFocus:function(){var a=this,b=a.grid,c=b.bodyNode,d=b.focus;d&&(d.registerArea({name:"body",priority:1,focusNode:c,scope:a,doFocus:a._doFocus,doBlur:a._blurCell,onFocus:a._onFocus,onBlur:a._blurCell}),a.connect(b.mainNode,"onkeypress",function(c){if(d.currentArea()=="body"&&(!b.tree||!c.ctrlKey)){var k={},f=b.isLeftToRight()?1:-1;k[e.LEFT_ARROW]=[0,-f,c];k[e.RIGHT_ARROW]=[0,f,c];k[e.UP_ARROW]=[-1,0,c];k[e.DOWN_ARROW]=[1,0,c];a._moveFocus.apply(a,k[c.keyCode]||[])}}),a.connect(b,
"onCellClick",function(b){a._focusCellRow=b.visualIndex;a._focusCellCol=b.columnIndex}),a.connect(a,"onRender",function(b,c){a._focusCellRow>=b&&a._focusCellRow<b+c&&d.currentArea()=="body"&&a._focusCell()}),b.hScroller&&a.connect(c,"onscroll",function(){b.hScroller.scroll(c.scrollLeft)}))},_doFocus:function(a){return this._focusCell(a)||this._focusCell(0,0,0)},_focusCell:function(a,b,d){c.stopEvent(a);d=d>=0?d:this._focusCellCol;b=b>=0?b:this._focusCellRow;if(a=this.getCellNode({visualIndex:b,colId:this.grid._columns[d].id})){var e=
m(".gridxCellFocus",this.domNode)[0];if(a!=e)e&&i.remove(e,"gridxCellFocus"),i.add(a,"gridxCellFocus"),this._focusCellRow=b,this._focusCellCol=d;g("ie")<8||a.focus()}return a},_moveFocus:function(a,b,d){if(a||b){c.stopEvent(d);var e,f,g=this,i=g.grid,l=i._columns,m=g.visualCount;e=g._focusCellRow+a;e=e<0?0:e>=m?m-1:e;f=g._focusCellCol+b;f=f<0?0:f>=l.length?l.length-1:f;i.vScroller.scrollToRow(e).then(function(){g._focusCell(0,e,f);g.onMoveToCell(e,f,d)})}},_nextCell:function(a,b,c,d){var e=new f,
g=this.grid,i=g._columns.length,l=this.visualCount;do if(b+=c,b<0||b>=i)a+=c,b=b<0?i-1:0,a<0?(a=l-1,b=i-1):a>=l&&(b=a=0);while(!d(a,b));g.vScroller.scrollToRow(a).then(function(){e.callback({r:a,c:b})});return e},_blurCell:function(){var a=m(".gridxCellFocus",this.domNode)[0];a&&i.remove(a,"gridxCellFocus");return!0},_onFocus:function(a){for(a=a.target;a&&a!=this.domNode;a=a.parentNode)if(i.contains(a,"gridxCell")){for(var b=this.grid._columnsById[a.getAttribute("colid")].index;!i.contains(a,"gridxRow");)a=
a.parentNode;return this._focusCell(0,parseInt(a.getAttribute("visualindex"),10),b)}return!1}}))})},"gridx/modules/Printer":function(){define(["../core/_Module","dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred","dojo/_base/xhr","dojo/_base/array","dojo/_base/sniff","dojo/dom","dojo/dom-construct","dojo/dom-style","dojo/DeferredList"],function(n,m,o,l,i,f,g,e,d,c,b){function a(a){a=f.map(a,function(a){a=o.trim(a);if(a.substring(a.length-4).toLowerCase()===".css")return i.get({url:a});else{var b=
new l;b.callback(a);return b}});return b.prototype.gatherResults(a)}return n.register(m(n,{name:"printer",forced:["table"],constructor:function(a,b){b=o.isObject(b)?b:{};this._title=b.title?b.title:"";if(b.cssFiles)this._cssFiles=o.isString(b.cssFiles)?[b.cssFiles]:o.isArray(b.cssFiles)?b.cssFiles:null},getAPIPath:function(){return{printer:this}},print:function(a){var b=this;b.grid.exporter.toTable(a).then(function(a){b._wrapHTML(b._title,b._cssFiles,a).then(function(a){b._print(a)})})},_wrapHTML:function(b,
c,d){var e=this.grid.isLeftToRight();return a(c).then(function(a){var c,k=['<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">',"<html ",e?"":'dir="rtl"',"><head><title>",b,'</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>'];for(c=0;c<a.length;++c)k.push('<style type="text/css">',a[c],"</style>");k.push("</head>");d.search(/^\s*<body/i)<0&&(d="<body>"+d+"</body>");k.push(d,"</html>");return k.join("")})},_print:function(a){var b,
f=function(b){b=b.document;b.open();b.write(a);b.close()};if(window.print)if(g("chrome")||g("opera"))b=window.open("javascript: ''","","status=0,menubar=0,location=0,toolbar=0,width=1,height=1,resizable=0,scrollbars=0"),f(b),b.print(),b.close();else{b=this._printFrame;var s=this.grid.domNode;if(!b){var i=s.id+"_print_frame";if(!(b=e.byId(i)))b=d.create("iframe"),b.id=i,b.frameBorder=0,c.set(b,{width:"1px",height:"1px",position:"absolute",right:0,bottom:0,border:"none",overflow:"hidden"}),g("ie")||
c.set(b,"visibility","hidden"),s.appendChild(b);this._printFrame=b}b=b.contentWindow;f(b);b.focus();b.print()}}}))})},"gridx/modules/AutoScroll":function(){define(["dojo/_base/declare","dojo/_base/window","dojo/dom-geometry","../core/_Module"],function(n,m,o,l){return l.register(n(l,{name:"autoScroll",constructor:function(){this.connect(m.doc,"mousemove","_onMouseMove")},getAPIPath:function(){return{autoScroll:this}},enabled:!1,vertical:!0,horizontal:!0,margin:20,_timeout:100,_step:10,_maxMargin:100,
_onMouseMove:function(i){if(this.arg("enabled")){var f,g,e=this.grid,d=this.arg("margin"),c=o.position(e.bodyNode);if(this.arg("vertical")&&e.vScroller)f=i.clientY-c.y-d,g=f+2*d-c.h,this._vdir=f<0?f:g>0?g:0;if(this.arg("horizontal")&&e.hScroller)f=i.clientX-c.x-d,g=f+2*d-c.w,this._hdir=f<0?f:g>0?g:0;this._handler||this._scroll()}},_scroll:function(){var i=this;if(i.arg("enabled")){var f,g;f=i.grid;var e=i._maxMargin,d=i._step,c=i._vdir,b=i._hdir;i.arg("vertical")&&c&&(g=Math.min(e,Math.abs(c))/d,
f.vScroller.domNode.scrollTop+=(g<1?1:g)*d*(c>0?1:-1),g=1);i.arg("horizontal")&&b&&(g=Math.min(e,Math.abs(b))/d,f.hScroller.domNode.scrollLeft+=(g<1?1:g)*d*(b>0?1:-1),g=1);if(g){i._handler=setTimeout(function(){i._scroll()},i._timeout);return}}delete i._handler}}))})},"gridx/modules/exporter/Table":function(){define(["dojo/_base/declare","dojo/_base/lang","../../core/_Module","dojo/dom-geometry","./Exporter"],function(n,m,o,l){return o.register(n(o,{name:"table",forced:["exporter"],getAPIPath:function(){return{exporter:{toTable:m.hitch(this,
this.toTable)}}},toTable:function(i){this._result="";this._rowIdx=0;return this.grid.exporter._export(this,i||{})},getResult:function(){return this._result='<div style="position: relative;"><div class="grid_view" style="position: absolute; top: 0; left:0px;">'+this._result+"</div></div>"},beforeHeader:function(i,f){if(!m.isArray(f.columnIds)||!f.columnIds.length)return!1;var g=l.getMarginBox(this.grid.headerNode),e=g.h;this._totalWidth=g.w;this._header=['<table class="grid_header" style="table-layout:fixed; width:',
this._totalWidth,"px;height:",e,'px;" border="0" cellpadding="0" cellspacing="0"><tbody><tr>'];return!0},handleHeaderCell:function(i,f){var g=this.grid.column(f.columnId,!0);this._header.push('<th colid="',g.id,'" style="width: ',g.getWidth()||"auto",'">',g.name(),"</th>")},afterHeader:function(){this._header.push("</tr><tbody></table>");this._result+=this._header.join("")},beforeBody:function(){this._rows=[];return!0},beforeRow:function(i,f){var g=f.rowId,e=this.grid.row(g,!0).index();this._cells=
['<table class="grid_row_',this._rowIdx++%2?"even":"odd",'" style="table-layout:fixed; width:',this._totalWidth,'px;" border="0" cellspacing="0" cellpadding="0" rowId="',g,'" rowIndex="',e,'"><tbody><tr>'];return!0},handleCell:function(i,f){var g=f.data,e=this.grid.column(f.columnId,!0),g=g===null?"":g===void 0?String(grid.cell(f.rowId,f.columnId,!0).data())||"":String(g);this._cells.push('<td colid="',e.id,'" style="width: ',e.getWidth()||"auto",'">',g,"</td>")},afterRow:function(){this._cells.push("</tr></tbody></table>");
this._rows.push(this._cells.join(""))},afterBody:function(){this._result+=this._rows.join("")}}))})},"gridx/nls/FilterBar":function(){define({root:{clearFilterDialogTitle:"Clear Filter",filterDefDialogTitle:"Filter",ruleTitleTemplate:"Rule ${0}",conditionEqual:"equal",conditionNotEqual:"does not equal",conditionLess:"is less than",conditionLessEqual:"less than or equal",conditionGreater:"is greater than",conditionGreaterEqual:"greater than or equal",conditionContain:"contains",conditionIs:"is",conditionStartWith:"starts with",
conditionEndWith:"ends with",conditionNotContain:"does not contain",conditionIsNot:"is not",conditionNotStartWith:"does not start with",conditionNotEndWith:"does not end with",conditionBefore:"before",conditionAfter:"after",conditionRange:"range",conditionIsEmpty:"is empty",all:"all",any:"any",relationAll:"all rules",waiRelAll:"Match all of the following rules:",relationAny:"any rules",waiRelAny:"Match any of the following rules:",relationMsgFront:"Match",relationMsgTail:"",and:"and",or:"or",addRuleButton:"Add Rule",
waiAddRuleButton:"Add a new rule",removeRuleButton:"Remove Rule",waiRemoveRuleButtonTemplate:"Remove rule ${0}",cancelButton:"Cancel",waiCancelButton:"Cancel this dialog",clearButton:"Clear",waiClearButton:"Clear the filter",filterButton:"Filter",waiFilterButton:"Submit the filter",columnSelectLabel:"Column",waiColumnSelectTemplate:"Column for rule ${0}",conditionSelectLabel:"Condition",waiConditionSelectTemplate:"Condition for rule ${0}",valueBoxLabel:"Value",waiValueBoxTemplate:"Enter value to filter for rule ${0}",
rangeTo:"to",rangeTemplate:"from ${0} to ${1}",statusTipHeaderColumn:"Column",statusTipHeaderCondition:"Rules",statusTipTitle:"Filter Bar",statusTipMsg:"Click the filter bar here to filter on values in ${0}.",anycolumn:"any column",statusTipTitleNoFilter:"Filter Bar",statusTipTitleHasFilter:"Filter",statusTipRelPre:"Match",statusTipRelPost:"rules.",statusTipHeaderAll:"Match all rules.",statusTipHeaderAny:"Match any rules.",defaultItemsName:"items",filterBarMsgHasFilterTemplate:"${0} of ${1} ${2} shown.",
filterBarMsgNoFilterTemplate:"No filter applied",filterBarDefButton:"Define filter",waiFilterBarDefButton:"Filter the table",a11yFilterBarDefButton:"Filter...",filterBarClearButton:"Clear filter",waiFilterBarClearButton:"Clear the filter",closeFilterBarBtn:"Close filter bar",clearFilterMsg:"This will remove the filter and show all available records.",anyColumnOption:"Any Column",trueLabel:"True",falseLabel:"False"}})},"gridx/modules/filter/Filter":function(){define(["../../core/_Module","../../core/model/extensions/ClientFilter",
"../../core/model/extensions/Query","dojo/_base/declare","dojo/_base/array","dojo/_base/lang"],function(n,m,o,l,i,f){function g(c,b,a){f.isFunction(a)&&(c=a(c));switch(b){case "number":return parseFloat(c,10);case "boolean":return!!c;case "date":return c=new Date(c),c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0),c.getTime();case "time":return c=new Date(c),c.setDate(1),c.setMonth(0),c.setFullYear(2E3),c.getTime();default:return String(c)}}function e(c,b,a,d){f.isArray(a)&&(a=i.map(a,
function(a){return a.expr}));return f.mixin(c,{expr:f.mixin({op:b,data:a},d||{})})}function d(c,b,a,d,k){b=String(b.apply(0,c));c=String(a.apply(0,c));d||(b=b.toLowerCase(),c=c.toLowerCase());return k(b,c)}n=n.register(l(n,{name:"filter",modelExtensions:[m,o],getAPIPath:function(){return{filter:this}},constructor:function(){this.setFilter(this.arg("preCondition"),1)},serverMode:!1,setupFilterQuery:function(c){return c},setFilter:function(c,b){var a=this.model;if(c!=this._checker)this._checker=c,this.arg("serverMode")?
a.query(this.setupFilterQuery(c.expr)):(a.filter(c),b||this.grid.body.refresh())},getFilter:function(){return this._checker}}));return f.mixin(n,{column:function(c,b,a,d){b=String(b||"string").toLowerCase();return e(function(k){return g(k[d?"rawData":"data"][c],b,a)},b,c,{isCol:!0})},value:function(c,b,a){b=String(b||typeof c).toLowerCase();c=g(c,b,a);return e(function(){return c},b,c)},isEmpty:function(c,b){return e(function(){var a=c.apply(0,arguments);return b?i.indexOf(b,a)>=0:a===""||a===null||
a===void 0},"isEmpty",[c])},and:function(){var c=i.filter(arguments,function(b){return f.isFunction(b)});return e(function(){var b=arguments;return i.every(c,function(a){return a.apply(0,b)})},"and",c)},or:function(){var c=i.filter(arguments,function(b){return f.isFunction(b)});return e(function(){var b=arguments;return i.some(c,function(a){return a.apply(0,b)})},"or",c)},not:function(c){return e(function(){return!c.apply(0,arguments)},"not",[c])},equal:function(c,b){return e(function(){return c.apply(0,
arguments)===b.apply(0,arguments)},"equal",[c,b])},greater:function(c,b){return e(function(){return c.apply(0,arguments)>b.apply(0,arguments)},"greater",[c,b])},less:function(c,b){return e(function(){return c.apply(0,arguments)<b.apply(0,arguments)},"less",[c,b])},greaterEqual:function(c,b){return e(function(){return c.apply(0,arguments)>=b.apply(0,arguments)},"greaterEqual",[c,b])},lessEqual:function(c,b){return e(function(){return c.apply(0,arguments)<=b.apply(0,arguments)},"lessEqual",[c,b])},
match:function(c,b){return e(function(){return String(c.apply(0,arguments)).search(b)>=0},"match",[c,{expr:{op:"regex",data:b}}])},contain:function(c,b,a){return e(function(){return d(arguments,c,b,a,function(a,b){return a.indexOf(b)>=0})},"contain",[c,b])},startWith:function(c,b,a){return e(function(){return d(arguments,c,b,a,function(a,b){return a.substring(0,b.length)===b})},"startWith",[c,b])},endWith:function(c,b,a){return e(function(){return d(arguments,c,b,a,function(a,b){return a.substring(a.length-
b.length)===b})},"endWith",[c,b])}})})},"gridx/modules/dnd/_Dnd":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred","dojo/dom-construct","dojo/dom-geometry","dojo/dom-class","dojo/dom-style","dojo/dom","dojo/_base/window","dojo/_base/sniff","dojo/dnd/Source","dojo/dnd/Manager","../../core/_Module","./Avatar","../AutoScroll"],function(n,m,o,l,i,f,g,e,d,c,b,a,h,k){var r=m.hitch;return h.register(n(h,{name:"_dnd",constructor:function(){var a=this.grid,b=d.doc;this.accept=
[];this._profiles={};this._selectStatus={};this._node=l.create("div");this.batchConnect([a,"onCellMouseOver","_checkDndReady"],[a,"onCellMouseOut","_dismissDndReady"],[a,"onCellMouseDown","_beginDnd"],[b,"onmouseup","_endDnd"],[b,"onmousemove","_onMouseMove"]);this.subscribe("/dnd/cancel","_endDnd")},load:function(){var a=this.grid.bodyNode;this._source=new b(a,{isSource:!1,accept:this.accept,getSelectedNodes:function(){return[0]},getItem:r(this,"_getItem"),checkAcceptance:r(this,"_checkAcceptance"),
onDraggingOver:r(this,"_onDraggingOver"),onDraggingOut:r(this,"_onDraggingOut"),onDropExternal:r(this,"_onDropExternal"),onDropInternal:r(this,"_onDropInternal")});c("ff")&&this._fixFF(this._source,a);this._source.grid=this.grid;this._saveSelectStatus();this.loaded.callback()},destory:function(){this.inherited(arguments);this._source.destory();l.destroy(this._node)},getAPIPath:function(){return{dnd:{_dnd:this}}},profile:null,register:function(a,b){this._profiles[a]=b;[].push.apply(this.accept,b.arg("accept"))},
_fixFF:function(a){return this.connect(d.doc,"onmousemove",function(b){var c=i.position(a.node),d=b.clientX,b=b.clientY,k=a._alreadyIn;isIn=b>=c.y&&b<=c.y+c.h&&d>=c.x&&d<=c.x+c.w;if(!k&&isIn)a._alreadyIn=1,a.onOverEvent();else if(k&&!isIn)a._alreadyIn=0,a.onOutEvent()})},_onMouseMove:function(a){this._alreadyIn&&(this._dnding||this._extDnding)&&this._markTargetAnchor(a)},_saveSelectStatus:function(a){var b,c,d=this.grid.select;if(d)for(b in d)if((c=d[b])&&m.isObject(c))if(this._selectStatus[b]=c.arg("enabled"),
a!==void 0)c.enabled=a},_loadSelectStatus:function(){var a,b,c=this.grid.select;if(c)for(a in c)if((b=c[a])&&m.isObject(b))b.enabled=this._selectStatus[a]},_checkDndReady:function(a){var b,c;if(!this._dndReady&&!this._dnding&&!this._extDnding)for(b in this._profiles)if(c=this._profiles[b],c.arg("enabled")&&c._checkDndReady(a)){this.profile=c;this._saveSelectStatus(!1);f.add(d.body(),"gridxDnDReadyCursor");this._dndReady=1;break}},_dismissDndReady:function(){if(this._dndReady)this._loadSelectStatus(),
this._dndReady=0,f.remove(d.body(),"gridxDnDReadyCursor")},_beginDnd:function(b){this._checkDndReady(b);if(this._dndReady){var c=this.profile,d=a.manager();this._source.isSource=!0;this._source.canNotDragOut=!c.arg("provide").length;this._node.innerHTML=c._buildDndNodes();this._oldStartDrag=d.startDrag;d.startDrag=r(this,"_startDrag",b);this._oldMakeAvatar=d.makeAvatar;d.makeAvatar=function(){return new k(d)};d._dndInfo={cssName:c._cssName,count:c._getDndCount()};c._onBeginDnd(this._source);e.setSelectable(this.grid.domNode,
!1)}},_endDnd:function(){var b=a.manager();this._source.isSource=!1;this._alreadyIn=0;delete b._dndInfo;if(this._oldStartDrag)b.startDrag=this._oldStartDrag,delete this._oldStartDrag;if(this._oldMakeAvatar)b.makeAvatar=this._oldMakeAvatar,delete this._oldMakeAvatar;if(this._dndReady||this._dnding||this._extDnding)this._dnding=this._extDnding=0,this._destroyUI(),e.setSelectable(this.grid.domNode,!0),f.remove(d.body(),"gridxDnDReadyCursor"),this.profile._onEndDnd(),this._loadSelectStatus()},_createUI:function(){f.add(d.body(),
"gridxDnDCursor");if(this.grid.autoScroll)this.profile._onBeginAutoScroll(),this.grid.autoScroll.enabled=!0},_destroyUI:function(){this._unmarkTargetAnchor();f.remove(d.body(),"gridxDnDCursor");if(this.grid.autoScroll)this.profile._onEndAutoScroll(),this.grid.autoScroll.enabled=!1},_createTargetAnchor:function(){return l.create("div",{"class":"gridxDnDAnchor"})},_markTargetAnchor:function(a){if(this._extDnding||this.profile.arg("canRearrange")){var b=this._targetAnchor,c=i.position(this.grid.mainNode);
if(!b)b=this._targetAnchor=this._createTargetAnchor(),b.style.display="none",this.grid.mainNode.appendChild(b);f.add(b,"gridxDnDAnchor"+this.profile._cssName);(a=this.profile._calcTargetAnchorPos(a,c))?(g.set(b,a),b.style.display="block"):b.style.display="none"}},_unmarkTargetAnchor:function(){var a=this._targetAnchor;if(a)a.style.display="none",f.remove(a,"gridxDnDAnchor"+this.profile._cssName)},_startDrag:function(b,c,d,k){if(this._dndReady&&c===this._source)this._oldStartDrag.call(a.manager(),
c,this._node.childNodes,k),this._dndReady=0,this._dnding=this._alreadyIn=1,this._createUI(),this._markTargetAnchor(b)},_getItem:function(a){return{type:this.profile.arg("provide"),data:this.profile._getItemData(a)}},_checkAcceptance:function(a){var c=function(a){for(var b={},c=a.length-1;c>=0;--c)b[a[c]]=1;return b},d=b.prototype.checkAcceptance;if(d.apply(this._source,arguments)){if(a.grid===this.grid)return this.profile.arg("canRearrange");if(!a.canNotDragOut)for(var k in this._profiles){var h=
this._profiles[k],e=d.apply({accept:c(h.arg("accept"))},arguments);if(h.arg("enabled")&&e&&(!h.checkAcceptance||h.checkAcceptance.apply(h,arguments)))return this.profile=h,this._extDnding=1,!0}}return!1},_onDraggingOver:function(){if(this._dnding||this._extDnding)this._alreadyIn=1,this._createUI()},_onDraggingOut:function(){if(this._dnding||this._extDnding)this._alreadyIn=0,this._destroyUI()},_onDropInternal:function(a,b){this.profile._onDropInternal(a,b)},_onDropExternal:function(a,b,c){var d=this,
b=d.profile._onDropExternal(a,b,c);o.when(b,function(){if(!c)if(a.grid)a.grid.dnd._dnd.profile.onDraggedOut(d._source);else a.deleteSelectedNodes()})}}))})},"gridx/modules/VLayout":function(){define(["dojo/_base/declare","dojo/dom-geometry","dojo/DeferredList","../core/_Module"],function(n,m,o,l){return l.register(n(l,{name:"vLayout",getAPIPath:function(){return{vLayout:this}},preload:function(){var i=this,f=i.grid;i.connect(f,"_onResizeEnd",function(f,e){var d,c=[];for(d in e)c.push(e[d]);(new o(c)).then(function(){i.reLayout()})});
f.autoHeight?i.connect(f.body,"onRender","reLayout"):i.connect(f,"setColumns",function(){setTimeout(function(){i.reLayout()},0)})},load:function(i,f){var g=this;f.then(function(){g._defs&&g._mods?(new o(g._defs)).then(function(){g._layout();g.loaded.callback()}):g.loaded.callback()})},register:function(i,f,g,e,d){this._defs=this._defs||[];this._mods=this._mods||{};this._mods[g]=this._mods[g]||[];this._defs.push(d||i.loaded);this._mods[g].push({p:e||0,mod:i,nodeName:f})},reLayout:function(){var i,
f=0,g;for(i in this._mods)(g=this.grid[i])&&(f+=m.getMarginBox(g).h);this._updateHeight(f)},_layout:function(){var i,f=0,g=this._mods,e,d,c,b,a;for(i in g)if(e=this.grid[i]){c=g[i];c.sort(function(a,b){return a.p-b.p});for(d=0;d<c.length;++d)b=c[d].mod,a=c[d].nodeName,b&&b[a]&&e.appendChild(b[a]);f+=m.getMarginBox(e).h}this._updateHeight(f)},_updateHeight:function(i){var f=this.grid,g=f.domNode,e=f.mainNode.style;f.autoHeight?f.vScroller.loaded.then(function(){var d=f.bodyNode.lastChild,d=d?d.offsetTop+
d.offsetHeight:0;g.style.height=d+i+"px";e.height=d+"px"}):e.height=g.clientHeight-i+"px"}}))})},"gridx/modules/ColumnResizer":function(){define(["dojo/_base/declare","dojo/_base/sniff","dojo/_base/window","dojo/dom","dojo/dom-style","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/query","../core/_Module"],function(n,m,o,l,i,f,g,e,d,c){function b(a){var b=a.target;if(b){if(/table/i.test(b.tagName)){for(var a=a.offsetX||a.layerX||0,c=0,b=b.rows[0].cells;a>0;)a-=b[c].offsetWidth,c++;
return b[c]||null}for(;b&&b.tagName;){if(b.tagName.toLowerCase()=="th")return b;b=b.parentNode}}return null}var a=f.remove;return c.register(n(c,{name:"columnResizer",minWidth:20,detectWidth:5,load:function(){var a=this.grid;this.batchConnect([a.header.innerNode,"mousemove","_mousemove"],[a,"onHeaderMouseOut","_mouseout"],[a,"onHeaderMouseDown","_mousedown",this,this.name],[o.doc,"mousemove","_docMousemove"],[o.doc,"onmouseup","_mouseup"]);this.loaded.callback()},getAPIPath:function(){return{columnResizer:this}},
columnMixin:{setWidth:function(a){this.grid.columnResizer.setWidth(this.id,a)}},setWidth:function(a,b){var c=this.grid,e=this.arg("minWidth"),f,b=parseInt(b,10);b<e&&(b=e);c._columnsById[a].width=b+"px";d('[colid="'+a+'"]',c.domNode).forEach(function(a){f||(f=m("webkit")?a.offsetWidth:i.get(a,"width"));a.style.width=b+"px"});c.vLayout.reLayout();c.header.onRender();c.body.onRender();this.onResize(a,b,f)},onResize:function(){},_mousemove:function(c){var d=b(c),e=this.grid._eventFlags;if(d&&(this._resizing&&
a(d,"gridxHeaderCellOver"),!this._resizing&&d&&!this._ismousedown))c=this._readyToResize=this._isInResizeRange(c),e.onHeaderMouseDown=e.onHeaderCellMouseDown=c?this.name:void 0,f.toggle(o.body(),"gridxColumnResizing",c),c&&a(d,"gridxHeaderCellOver")},_docMousemove:function(a){this._resizing&&this._updateResizerPosition(a)},_mouseout:function(){if(!this._resizing)this._readyToResize=0,a(o.body(),"gridxColumnResizing")},_updateResizerPosition:function(a){var b=a.pageX-this._startX,c=this._targetCell,
d=this.grid,e=d.hScroller,f=0,a=a.pageX-this._gridX,f=this.arg("minWidth");c.offsetWidth+b<f&&(a=this._startX-this._gridX-c.offsetWidth+f);b=e&&e.container.offsetHeight?e.container:d.bodyNode;f=b.parentNode.offsetTop+b.offsetHeight-d.header.domNode.offsetTop;i.set(this._resizer,{top:d.header.domNode.offsetTop+"px",left:a+"px",height:f+"px"})},_showResizer:function(a){if(!this._resizer)this._resizer=g.create("div",{className:"gridxColumnResizer"},this.grid.domNode,"last"),this.connect(this._resizer,
"mouseup","_mouseup");this._resizer.style.display="block";this._updateResizerPosition(a)},_hideResizer:function(){this._resizer.style.display="none"},_mousedown:function(a){var b=this.grid.bodyNode;this._readyToResize?(l.setSelectable(this.grid.domNode,!1),o.doc.onselectstart=function(){return!1},this._resizing=1,this._startX=a.pageX,this._gridX=e.position(b).x-b.offsetLeft,this._showResizer(a)):this._ismousedown=1},_mouseup:function(b){this._ismousedown=0;if(this._resizing){this._readyToResize=this._resizing=
0;a(o.body(),"gridxColumnResizing");l.setSelectable(this.grid.domNode,!0);o.doc.onselectstart=null;var c=this._targetCell,b=b.pageX-this._startX,b=(m("webkit")?c.offsetWidth:i.get(c,"width"))+b,d=this.arg("minWidth");b<d&&(b=d);this.setWidth(c.getAttribute("colid"),b);this._hideResizer()}},_isInResizeRange:function(a){var c=b(a),d;var e=a.target,f=b(a);if(f)if(/table/i.test(e.tagName))d=0;else{d=a.offsetX;if(d==void 0)d=a.layerX;/th/i.test(e.tagName)||(d+=e.offsetLeft);m("ff")&&/th/i.test(e.tagName)&&
(a=d-parseInt(f.parentNode.parentNode.parentNode.style.marginLeft,10)-f.offsetLeft,a>=0&&(d=a))}else d=1E5;a=this.arg("detectWidth");if(d<a)return!!(this._targetCell=c.previousSibling);else if(d>c.offsetWidth-a&&d<=c.offsetWidth)return this._targetCell=c,1;return 0}}))})},"gridx/core/_Module":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect"],function(n,m,o,l){var i=m.isFunction,n=n([],{constructor:function(f,e){this.grid=f;this.model=f.model;this._cnnts=
[];this._sbscs=[];m.mixin(this,e)},destroy:function(){var f=o.forEach;f(this._cnnts,l.disconnect);f(this._sbscs,l.unsubscribe)},arg:function(f,e,d){arguments.length==2&&i(e)&&(d=e,e=void 0);var c=this.grid,b=this[f];if(!this.hasOwnProperty(f)){var a=this.name+f.substring(0,1).toUpperCase()+f.substring(1);c[a]===void 0?e!==void 0&&(b=e):b=c[a]}this[f]=d&&!d(b)?e:b;return b},connect:function(f,e,d,c,b){var a=this.grid,h=c||this,f=f===a&&typeof e=="string"?l.connect(f,e,function(){var c=arguments;a._eventFlags[e]===
b&&(i(d)?d.apply(h,c):i(h[d])&&h[d].apply(h,c))}):l.connect(f,e,h,d);this._cnnts.push(f);return f},batchConnect:function(){for(var f=0,e=arguments,d=e.length;f<d;++f)m.isArrayLike(e[f])&&this.connect.apply(this,e[f])},subscribe:function(f,e,d){f=l.subscribe(f,d||this,e);this._sbscs.push(f);return f}}),f=n._modules={};n.register=function(g){var e=g.prototype;return f[e.name||e.declaredClass]=g};n._markupAttrs=["id","name","field","width","dataType","!formatter","!decorator","!sortable"];return n})},
"gridx/core/model/extensions/Sort":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","../_Extension"],function(n,m,o,l){return n(l,{name:"sort",priority:20,constructor:function(i,f){var g=f.baseSort;this.clear();this._mixinAPI("sort");if(g&&g.length)this._baseSort=g,this._sort()},clear:function(){},sort:function(){this.model._addCmd({name:"_cmdSort",scope:this,args:arguments})},_cmdSort:function(){var i=arguments;this._sort.apply(this,i[i.length-1])},_sort:function(i){var f=
this.model,g=this._baseSort,e=f._cache,d=e.options=e.options||{},c,b,a;if(m.isArrayLike(i)){for(c=0;c<i.length;++c)b=i[c],b.colId!==void 0?b.attribute=e.columns?e.columns[b.colId].field||b.colId:b.colId:b.colId=b.attribute;g&&(i=i.concat(g))}else i=g;d.sort&&d.sort.length?o.toJson(d.sort)!==o.toJson(i)&&(a=1):i&&i.length&&(a=1);d.sort=m.clone(i);a&&e.clear();f._msg("storeChange")}})})},"gridx/tests/support/modules":function(){define(["gridx/core/model/extensions/FormatSort","gridx/modules/Focus",
"gridx/modules/VScroller","gridx/modules/ColumnResizer","gridx/modules/VirtualVScroller","gridx/modules/SingleSort","gridx/modules/NestedSort","gridx/modules/ColumnLock","gridx/modules/select/Row","gridx/modules/select/Column","gridx/modules/select/Cell","gridx/modules/extendedSelect/Row","gridx/modules/extendedSelect/Column","gridx/modules/extendedSelect/Cell","gridx/modules/move/Row","gridx/modules/move/Column","gridx/modules/dnd/Row","gridx/modules/dnd/Column","gridx/modules/AutoScroll","gridx/modules/pagination/Pagination",
"gridx/modules/pagination/PaginationBar","gridx/modules/pagination/PaginationBarDD","gridx/modules/filter/Filter","gridx/modules/filter/FilterBar","gridx/modules/CellWidget","gridx/modules/Edit","gridx/modules/RowHeader","gridx/modules/IndirectSelect","gridx/modules/Persist","gridx/modules/exporter/Exporter","gridx/modules/exporter/CSV","gridx/modules/exporter/Table","gridx/modules/Printer","gridx/modules/Menu","gridx/modules/Dod","gridx/modules/TitleBar","gridx/modules/Tree","gridx/modules/RowLock",
"gridx/modules/ToolBar"],function(n,m,o,l,i,f,g,e,d,c,b,a,h,k,r,s,x,E,w,u,v,t,z,C,y,B,A,D,G,F,H,I,J,K,L,M,N,O,P){return{FormatSort:n,Focus:m,VScroller:o,ColumnResizer:l,VirtualVScroller:i,SingleSort:f,NestedSort:g,ColumnLock:e,SelectRow:d,SelectColumn:c,SelectCell:b,ExtendedSelectRow:a,ExtendedSelectColumn:h,ExtendedSelectCell:k,MoveRow:r,MoveColumn:s,DndRow:x,DndColumn:E,AutoScroll:w,Pagination:u,PaginationBar:v,PaginationBarDD:t,Filter:z,FilterBar:C,CellWidget:y,Edit:B,RowHeader:A,IndirectSelect:D,
Persist:G,Exporter:F,ExportCSV:H,ExportTable:I,Printer:J,Menu:K,Dod:L,TitleBar:M,Tree:N,RowLock:O,ToolBar:P}})},"gridx/modules/Edit":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/_base/Deferred","dojo/_base/sniff","dojo/dom-class","dojo/keys","../core/_Module","../util","dojo/date/locale","dijit/form/TextBox"],function(n,m,o,l,i,f,g,e,d,c){function b(a,b,d){if(a.storePattern&&(a.dataType=="date"||a.dataType=="time"))return c.parse(b,a.storePattern);return d}function a(a,
b,d,h){return(b=c.parse(h[a],b))?c.format(b,d):h[a]}function h(a){return a&&function(b,c,d){b=a(c,b);d.gridCellEditField.set("value",b)}}e._markupAttrs.push("!editable","!alwaysEditing","editor","!editorArgs");return e.register(n(e,{name:"edit",forced:["cellWidget"],constructor:function(){this._editingCells={};for(var b=0,c=this.grid._columns,d=c.length;b<d;++b){var h=c[b];if(h.storePattern&&h.field&&(h.dataType=="date"||h.dataType=="time")){h.gridPattern=h.gridPattern||!m.isFunction(h.formatter)&&
(m.isObject(h.formatter)||typeof h.formatter=="string")&&h.formatter||h.storePattern;var e;if(m.isString(h.storePattern))e=h.storePattern,h.storePattern={},h.storePattern[h.dataType+"Pattern"]=e;h.storePattern.selector=h.dataType;if(m.isString(h.gridPattern))e=h.gridPattern,h.gridPattern={},h.gridPattern[h.dataType+"Pattern"]=e;h.gridPattern.selector=h.dataType;h.formatter=m.partial(a,h.field,h.storePattern,h.gridPattern)}}},getAPIPath:function(){return{edit:this}},preload:function(){this.connect(this.grid,
"onCellDblClick","_onUIBegin");this.connect(this.grid.cellWidget,"onCellWidgetCreated","_onCellWidgetCreated");this._initAlwaysEdit();this._initFocus()},cellMixin:{beginEdit:function(){return this.grid.edit.begin(this.row.id,this.column.id)},cancelEdit:function(){this.grid.edit.cancel(this.row.id,this.column.id);return this},applyEdit:function(){return this.grid.edit.apply(this.row.id,this.column.id)},isEditing:function(){return this.grid.edit.isEditing(this.row.id,this.column.id)}},columnMixin:{isEditable:function(){var a=
this.grid._columnsById[this.id];return a.editable||a.alwaysEditing},isAlwaysEditing:function(){return this.grid._columnsById[this.id].alwaysEditing},setEditable:function(a){this.grid._columnsById[this.id].editable=!!a;return this},editor:function(){return this.grid._columnsById[this.id].editor},setEditor:function(a,b){this.grid.edit.setEditor(this.id,a,b);return this}},begin:function(a,c){var d=new l,e=this;if(e.isEditing(a,c))e._record(a,c),e._focusEditor(a,c),d.callback(!0);else{var f=e.grid,g=
e.model.idToIndex(a),i=f._columnsById[c];g>=0&&i.editable?(f.cellWidget.setCellDecorator(a,c,e._getDecorator(c),h(i.editorArgs&&i.editorArgs.toEditor||m.partial(b,i))),e._record(a,c),f.body.refreshCell(g,i.index).then(function(){e._focusEditor(a,c);d.callback(!0)})):d.callback(!1)}return d},cancel:function(a,b){var c=new l,d=this.model,h=d.idToIndex(a);if(h>=0){var e=this.grid,f=e.cellWidget,g=e._columnsById[b];g&&(g.alwaysEditing?(d=d.byId(a),f=f.getCellWidget(a,b),f.setValue(d.data[b],d.rawData[g.field]),
c.callback()):(this._erase(a,b),f.restoreCellDecorator(a,b),e.body.refreshCell(h,g.index).then(function(){c.callback()})))}else c.callback();return c},apply:function(a,b){var d=new l,h=this,e=h.grid,f=e.cell(a,b,1);if(f){var g=e.cellWidget.getCellWidget(a,b);if(g&&g.gridCellEditField){g=g.gridCellEditField.get("value");try{var i=f.column.editorArgs;i&&i.fromEditor?g=i.fromEditor(g):f.column.storePattern&&(g=c.format(g,f.column.storePattern));f.setRawData(g).then(function(){f.column.alwaysEditing?
(h._erase(a,b),d.callback(!0)):(e.cellWidget.restoreCellDecorator(a,b),h._erase(a,b),e.body.refreshCell(f.row.index(),f.column.index()).then(function(){d.callback(!0)}))})}catch(m){e.cellWidget.restoreCellDecorator(a,b),h._erase(a,b),console.warn("Can not apply change! Error message: ",m),d.callback(!1)}return d}}d.callback(!1);return d},isEditing:function(a,b){var c=this.grid._columnsById[b];if(c&&c.alwaysEditing)return!0;c=this.grid.cellWidget.getCellWidget(a,b);return!!c&&!!c.gridCellEditField},
setEditor:function(a,b,c){var a=this.grid._columnsById[a],d=a.editorArgs=a.editorArgs||{};a.editor=b;if(c)d.toEditor=c.toEditor,d.fromEditor=c.fromEditor,d.dijitProperties=c.dijitProperties},_initAlwaysEdit:function(){for(var a=this.grid._columns,c=a.length-1;c>=0;--c){var d=a[c];if(d.alwaysEditing)d.navigable=!0,d.userDecorator=this._getDecorator(d.id),d.setCellValue=h(d.editorArgs&&d.editorArgs.toEditor||m.partial(b,d)),d.decorator=function(){return""},d._cellWidgets={},d._backupWidgets=[]}},_getColumnEditor:function(a){a=
this.grid._columnsById[a].editor;return m.isFunction(a)?a.prototype.declaredClass:m.isString(a)?a:"dijit.form.TextBox"},_onCellWidgetCreated:function(a,b){if(a.gridCellEditField&&b.alwaysEditing){var c=this;a.connect(a.gridCellEditField,"onBlur",function(){for(var d=a.domNode.parentNode;d&&!f.contains(d,"gridxRow");)d=d.parentNode;d&&c.apply(d.getAttribute("rowid"),b.id)})}},_focusEditor:function(a,b){var c=this.grid.cellWidget,d=function(){var d=c.getCellWidget(a,b);d&&d.gridCellEditField&&d.gridCellEditField.focus()};
i("webkit")?d():setTimeout(d,1)},_getDecorator:function(a){var b=this._getColumnEditor(a),c,d=this.grid._columnsById[a],a=d.editorArgs&&d.editorArgs.dijitProperties||{};if(d=d.gridPattern||d.storePattern)m.mixin(a.constraints=a.constraints||{},d);c=o.toJson(a);return function(){return["<div data-dojo-type='",b,"' data-dojo-attach-point='gridCellEditField' class='gridxCellEditor gridxHasGridCellValue gridxUseStoreData' data-dojo-props='",c.substring(1,c.length-1),"'></div>"].join("")}},_record:function(a,
b){var c=this._editingCells,d=c[a];d||(d=c[a]={});d[b]=1},_erase:function(a,b){var c=this._editingCells[a];c&&delete c[b]},_applyAll:function(){var a=this._editingCells,b,c;for(b in a)for(c in a[b])this.apply(b,c)},_onUIBegin:function(a){this._applyAll();return this.begin(a.rowId,a.columnId)},_initFocus:function(){var a=this.grid.focus;a&&a.registerArea({name:"edit",priority:1,scope:this,doFocus:this._onFocus,doBlur:this._doBlur,onFocus:this._onFocus,onBlur:this._onBlur,connects:[this.connect(this.grid,
"onCellKeyPress","_onKey"),this.connect(this,"_focusEditor","_focus")]})},_onFocus:function(a){if(a){for(var b=a.target;b&&!f.contains(b,"gridxCell");)b=b.parentNode;if(b&&(a=b.getAttribute("colid"),b=b.parentNode.parentNode.parentNode.parentNode.getAttribute("rowid"),this.isEditing(b,a)))return this._record(b,a),this._editing=!0;return!1}return this._editing},_doBlur:function(a,b){var c=this,h=c.grid,e=h.body;if(c._editing){var f=e.getRowInfo({parentId:c.model.treePath(c._focusCellRow).pop(),rowIndex:c.model.idToIndex(c._focusCellRow)}).visualIndex;
e._nextCell(f,h._columnsById[c._focusCellCol].index,b>0?1:-1,function(a,b){return h._columns[b].editable}).then(function(b){d.stopEvent(a);c._applyAll();c._focusCellCol=h._columns[b.c].id;var f=e.getRowInfo({visualIndex:b.r});c._focusCellRow=c.model.indexToId(f.rowIndex,f.parentId);e._focusCellCol=b.c;e._focusCellRow=b.r;c.begin(c._focusCellRow,c._focusCellCol)});return!1}return!0},_onBlur:function(){this._applyAll();this._editing=!1;return!0},_focus:function(a,b){this._editing=!0;this._focusCellCol=
b;this._focusCellRow=a;this.grid.focus.focusArea("edit")},_blur:function(){this._editing=!1;var a=this.grid.focus;a&&(i("ie")?setTimeout(function(){a.focusArea("body")},1):a.focusArea("body"))},_onKey:function(a){var b=this;if(b.grid._columnsById[a.columnId].editable){var c=b.isEditing(a.rowId,a.columnId);a.keyCode==g.ENTER?c?b.apply(a.rowId,a.columnId).then(function(a){a&&b._blur()}):b.grid.focus.currentArea()=="body"&&(d.stopEvent(a),b._onUIBegin(a)):a.keyCode==g.ESCAPE&&c&&b.cancel(a.rowId,a.columnId).then(m.hitch(b,
b._blur))}b._editing&&a.keyCode!==g.TAB&&a.stopPropagation()}}))})},"gridx/modules/Header":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-class","dojo/dom-geometry","dojo/_base/query","dojo/keys","../util","../core/_Module"],function(n,m,o,l,i,f,g,e){return e.register(n(e,{name:"header",required:["vLayout"],forced:["hLayout"],getAPIPath:function(){return{header:this}},constructor:function(){var d=this.domNode=m.create("div",{"class":"gridxHeaderRow",role:"presentation"}),c=
this.innerNode=m.create("div",{"class":"gridxHeaderRowInner",role:"row",innerHTML:'<table border="0" cellpadding="0" cellspacing="0"><tr><th class="gridxCell"></th></tr></table>'});d.appendChild(c)},preload:function(){var d=this.grid,c=this.domNode;d.headerNode.appendChild(c);d.vLayout.register(this,"domNode","headerNode");this.batchConnect([d,"onHScroll","_onHScroll"],[d,"onHeaderCellMouseOver","_onHeaderCellMouseOver"],[d,"onHeaderCellMouseOut","_onHeaderCellMouseOver"],d.columnResizer&&[d.columnResizer,
"onResize","_onColumnResize"]);this._initFocus();d._connectEvents(c,"_onMouseEvent",this)},destroy:function(){this.inherited(arguments);m.destroy(this.domNode)},columnMixin:{headerNode:function(){return this.grid.header.getHeaderNode(this.id)}},getHeaderNode:function(d){return i("[colid='"+d+"']",this.domNode)[0]},refresh:function(){var d=this,c=d.grid,b=c.focus,a=['<table role="presentation" border="0" cellpadding="0" cellspacing="0"><tr>'];c.columns().forEach(function(c){a.push('<th colid="',c.id,
'" class="gridxCell ',b&&b.currentArea()=="header"&&c.id==d._focusHeaderId?d._focusClass:"",'" role="columnheader" aria-readonly="true" tabindex="-1" style="width: ',c.getWidth(),'"><div class="gridxSortNode">',c.name(),"</div></th>")});a.push("</tr></table>");d.innerNode.innerHTML=a.join("");d._onHScroll(d._scrollLeft);d.onRender()},onRender:function(){},onMoveToHeaderCell:function(){},_scrollLeft:0,_onColumnResize:function(d,c,b){d=this.grid;d.autoWidth?(c=this._columnsWidth+=c-b,d.bodyNode.style.width=
c+"px",d.domNode.style.width=d.hLayout.lead+d.hLayout.tail+c+"px"):this._onHScroll(d.hScrollerNode.scrollLeft)},_onHScroll:function(d){var c=this.grid.isLeftToRight();this.innerNode.firstChild.style[c?"marginLeft":"marginRight"]=(c?-d:d)+"px";this._scrollLeft=d},_onMouseEvent:function(d,c){var b=this.grid,a="onHeaderCell"+d,h="onHeader"+d;if(b._isConnected(a)||b._isConnected(h)){this._decorateEvent(c);if(c.columnIndex>=0)b[a](c);b[h](c)}},_decorateEvent:function(d){for(var c=d.target;c&&c!==this.domNode;c=
c.parentNode)if(c.tagName.toLowerCase()=="th"){if(c=this.grid._columnsById[c.getAttribute("colid")])d.columnId=c.id,d.columnIndex=c.index;break}},_onHeaderCellMouseOver:function(d){o.toggle(this.getHeaderNode(d.columnId),"gridxHeaderCellOver",d.type=="mouseover")},_focusHeaderId:null,_focusClass:"gridxHeaderCellFocus",_initFocus:function(){var d=this,c=d.grid;c.focus&&c.focus.registerArea({name:"header",priority:0,focusNode:d.domNode,scope:d,doFocus:d._doFocus,doBlur:d._blurNode,onBlur:d._blurNode,
connects:[d.connect(d.domNode,"onkeydown","_onKeyDown"),d.connect(c,"onHeaderCellMouseDown",function(b){d._focusNode(d.getHeaderNode(b.columnId))})]})},_doFocus:function(d){var c=this._focusNode(this._focusHeaderId&&this.getHeaderNode(this._focusHeaderId)||i("th.gridxCell",this.domNode)[0]);g.stopEvent(c&&d);return c},_focusNode:function(d){if(d){var c=this.grid;if(this._focusHeaderId=d.getAttribute("colid")){this._blurNode();if(c.hScroller){var b=l.position(d),a=l.position(this.domNode),h=b.x+b.w-
a.x-a.w;h<0&&(h=b.x-a.x,h>0&&(h=0));h+=this._scrollLeft;this._onHScroll(h);c.hScroller.scroll(h)}o.add(d,this._focusClass);d.focus();return!0}}return!1},_blurNode:function(){var d=i("th."+this._focusClass,this.domNode)[0];d&&o.remove(d,this._focusClass);return!0},_onKeyDown:function(d){var c=this.grid,b;b=c.isLeftToRight()?1:-1;var a=d.keyCode==f.LEFT_ARROW?-b:b;if(this._focusHeaderId&&(d.keyCode==f.LEFT_ARROW||d.keyCode==f.RIGHT_ARROW))if(g.stopEvent(d),b=c._columnsById[this._focusHeaderId],b=c._columns[b.index+
a])this._focusNode(this.getHeaderNode(b.id)),this.onMoveToHeaderCell(b.id,d)}}))})},"gridx/modules/dnd/Column":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/dom-geometry","dojo/dom-class","dojo/_base/query","./_Base","../../core/_Module","./_Dnd"],function(n,m,o,l,i,f,g){return g.register(n(f,{name:"dndColumn",required:["_dnd","selectColumn","moveColumn"],getAPIPath:function(){return{dnd:{column:this}}},preload:function(){this.inherited(arguments);this._selector=this.grid.select.column},
accept:[],provide:["grid/columns"],_checkDndReady:function(e){if(this._selector.isSelected(e.columnId))return this._selectedColIds=this._selector.getSelected(),this.grid.dnd._dnd.profile=this,!0;return!1},onDraggedOut:function(){},_cssName:"Column",_onBeginDnd:function(e){e.delay=this.arg("delay")},_getDndCount:function(){return this._selectedColIds.length},_onEndDnd:function(){},_buildDndNodes:function(){var e=this.grid.id;return m.map(this._selectedColIds,function(d){return["<div id='",e,"_dndcolumn_",
d,"' gridid='",e,"' columnid='",d,"'></div>"].join("")}).join("")},_onBeginAutoScroll:function(){var e=this.grid.autoScroll;this._autoScrollV=e.vertical;e.vertical=!1},_onEndAutoScroll:function(){this.grid.autoScroll.vertical=this._autoScrollV},_getItemData:function(e){return e.substring((this.grid.id+"_dndcolumn_").length)},_calcTargetAnchorPos:function(e,d){for(var c=e.target,b=this,a=b.grid,h=a.isLeftToRight(),k=a._columns,f={height:d.h+"px",width:"",top:""},g=function(c){var g=c.getAttribute("colid"),
l=a._columnsById[g].index,s=c,m=c,n=c=l;if(b._selector.isSelected(g)){for(c=l;c>0&&b._selector.isSelected(k[c-1].id);)--c;s=i(".gridxHeaderRow [colid='"+k[c].id+"']",a.headerNode)[0];for(n=l;n<k.length-1&&b._selector.isSelected(k[n+1].id);)++n;m=i(".gridxHeaderRow [colid='"+k[n].id+"']",a.headerNode)[0]}s&&m?(g=o.position(s),l=o.position(m),h^e.clientX<(g.x+l.x+l.w)/2?(f.left=g.x-d.x-1+"px",b._target=c):(f.left=l.x+l.w-d.x-1+"px",b._target=n+1)):delete b._target;return f};c;){if(l.contains(c,"gridxCell"))return g(c);
c=c.parentNode}var m=i(".gridxRow",a.bodyNode)[0],n=o.position(m.firstChild);if(n.x+n.w<=e.clientX)f.left=n.x+n.w-d.x-1+"px",b._target=k.length;else if(n.x>=e.clientX)f.left=n.x-d.x-1+"px",b._target=0;else if(i(".gridxCell",m).some(function(a){var b=o.position(a);if(b.x<=e.clientX&&b.x+b.w>=e.clientX)return c=a,!0}))return g(c);return f},_onDropInternal:function(){var e=this;if(e._target>=0){var d=m.map(e._selectedColIds,function(c){return e.grid._columnsById[c].index});e.grid.move.column.move(d,
e._target)}},_onDropExternal:function(){}}))})},"gridx/core/model/extensions/Query":function(){define(["dojo/_base/declare","../_Extension"],function(n,m){return n(m,{name:"query",priority:30,constructor:function(m,l){this.clear();this._mixinAPI("query");l.query&&this.query(l.query)},clear:function(){},query:function(){this.model._addCmd({name:"_cmdQuery",scope:this,args:arguments})},_cmdQuery:function(){var m=arguments,m=m[m.length-1],l=this.model,i=l._cache,f=i.options=i.options||{};f.query=m[0];
f.queryOptions=m[1];l._msg("storeChange");i.clear()}})})},"gridx/modules/filter/FilterDialog":function(){define(["dojo/_base/kernel","dijit","dojo/_base/declare","dijit/Dialog","dojo/text!../../templates/FilterDialog.html","./FilterPane","./Filter","dijit/layout/AccordionContainer","dojo/data/ItemFileReadStore","dojo/_base/array","dojo/_base/html","dojo/query"],function(n,m,o,l,i,f){return o(l,{title:"Filter",cssClass:"gridxFilterDialog",grid:null,autofocus:!1,postCreate:function(){this.inherited(arguments);
this.set("content",i);this._initWidgets();n.addClass(this.domNode,"gridxFilterDialog")},done:function(){this.hide();this.grid.filterBar.applyFilter(this.getData())},getData:function(){return{type:this._sltMatch.get("value"),conditions:n.map(this._accordionContainer.getChildren(),function(f){return f.getData()})}},setData:function(f){this.removeChildren();f&&f.conditions.length&&(this._sltMatch.set("value",f&&f.type),n.forEach(f.conditions,function(e){this.addRule().setData(e)},this))},removeChildren:function(){n.forEach(this._accordionContainer.getChildren(),
n.hitch(this._accordionContainer,"removeChild"))},clear:function(){this.grid.filterBar.confirmToExecute(function(){this.grid.filterBar.clearFilter(!0);this.hide()},this)},cancel:function(){this.hide()},show:function(){this.inherited(arguments);this._accordionContainer.hasChildren()||this.addRule()},addRule:function(){var g=this._accordionContainer;g.getChildren().length===3&&(g._contentBox.w-=dojox.html.metrics.getScrollbar().w);var e=new f({grid:this.grid,title:"Rule"});g.addChild(e);g.selectChild(e);
if(!this._titlePaneHeight)this._titlePaneHeight=n.position(e._buttonWidget.domNode).h+3;e._initCloseButton();e._onColumnChange();try{e.tbSingle.focus()}catch(d){}n.toggleClass(g.domNode,"gridxFilterSingleRule",g.getChildren().length===1);this.connect(e,"onChange","_updateButtons");this._updateButtons();this._updateAccordionContainerHeight();g.domNode.parentNode.scrollTop=1E5;return e},_initWidgets:function(){this._accordionContainer=m.byNode(n.query(".dijitAccordionContainer",this.domNode)[0]);this._sltMatch=
m.byNode(n.query(".dijitSelect",this.domNode)[0]);var f=n.query(".dijitButton",this.domNode);this._btnAdd=m.byNode(f[0]);this._btnFilter=m.byNode(f[1]);this._btnClear=m.byNode(f[2]);this._btnCancel=m.byNode(f[3]);this.connect(this._btnAdd,"onClick","addRule");this.connect(this._btnFilter,"onClick","done");this.connect(this._btnClear,"onClick","clear");this.connect(this._btnCancel,"onClick","cancel");this.connect(this._accordionContainer,"removeChild","_updateButtons");this.connect(this._accordionContainer,
"removeChild","_updatePaneTitle")},_updatePaneTitle:function(){n.forEach(this._accordionContainer.getChildren(),function(f){f._updateTitle()})},_updateButtons:function(){var f=this._accordionContainer.getChildren();n.some(f,function(d){return d.getData()===null})?this._btnFilter.set("disabled",!0):this._btnFilter.set("disabled",!1);var e=this.grid.filterBar.maxRuleCount;this._btnAdd.set("disabled",f.length>=e&&e>0);this._btnClear.set("disabled",!this.grid.filterBar.filterData)},_updateAccordionContainerHeight:function(){var f=
this._accordionContainer,e=f.getChildren().length;n.style(f.domNode,"height",145+e*this._titlePaneHeight+"px");f.resize()}})})},"gridx/modules/SingleSort":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/keys","../core/model/extensions/Sort","../core/_Module"],function(n,m,o,l,i){return i.register(n(i,{name:"sort",forced:["header"],modelExtensions:[l],getAPIPath:function(){return{sort:this}},preload:function(){var f=this,g=f.grid,e;f.connect(g,"onHeaderCellClick","_onClick");f.connect(g,
"onHeaderCellKeyDown","_onKeyDown");g.persist&&(e=g.persist.registerAndLoad("sort",function(){return[{colId:f._sortId,descending:f._sortDescend}]}));e=e||f.arg("preSort");m.isArrayLike(e)&&(e=e[0]);if(e&&e.colId)f._sortId=e.colId,f._sortDescend=e.descending,f.model.sort([e])},load:function(){var f=this,g,e=function(){f._sortId&&f._updateHeader(f._sortId,f._sortDescend)};f.connect(f.grid.header,"onRender",e);for(g in f.grid._columnsById)f._initHeader(g);e();f.loaded.callback()},columnMixin:{sort:function(f,
g){this.grid.sort.sort(this.id,f,g);return this},isSorted:function(){return this.grid.sort.isSorted(this.id)},clearSort:function(f){this.isSorted()&&this.grid.sort.clear(f);return this},isSortable:function(){var f=this.grid._columnsById[this.id];return f.sortable||f.sortable===void 0},setSortable:function(f){this.grid._columnsById[this.id].sortable=!!f;return this}},sort:function(f,g,e){var d=this.grid,c=d._columnsById[f];if(c&&(c.sortable||c.sortable===void 0))(this._sortId!=f||this._sortDescend==
!g)&&this._updateHeader(f,g),this.model.sort([{colId:f,descending:g}]),e||d.body.refresh()},isSorted:function(f){if(f==this._sortId)return this._sortDescend?-1:1;return 0},clear:function(f){if(this._sortId!==null)this._initHeader(this._sortId),this._sortId=this._sortDescend=null,this.model.sort(),f||this.grid.body.refresh()},getSortData:function(){return this._sortId?[{colId:this._sortId,descending:this._sortDescend}]:null},_sortId:null,_sortDescend:null,_initHeader:function(f){var g=this.grid.header.getHeaderNode(f);
g.innerHTML=["<div class='gridxSortNode'>",this.grid.column(f,1).name(),"</div>"].join("");g.removeAttribute("aria-sort")},_updateHeader:function(f,g){this._sortId&&this._sortId!=f&&this._initHeader(this._sortId);this._sortId=f;this._sortDescend=!!g;var e=this.grid,d=e.header.getHeaderNode(f);d.innerHTML=["<div class='gridxSortNode ",g?"gridxSortDown":"gridxSortUp","'><div class='gridxArrowButtonChar'>",g?"&#9662;":"&#9652;","</div><div role='presentation' class='gridxArrowButtonNode'></div><div class='gridxColCaption'>",
e.column(f,1).name(),"</div></div>"].join("");d.setAttribute("aria-sort",g?"descending":"ascending");e.vLayout.reLayout()},_onClick:function(f){this.sort(f.columnId,this._sortId!=f.columnId?0:!this._sortDescend)},_onKeyDown:function(f){f.keyCode==o.ENTER&&this._onClick(f)}}))})},"gridx/core/model/cache/Sync":function(){define(["dojo/_base/declare","dojo/_base/Deferred","./_Cache"],function(n,m,o){return n(o,{keep:function(){},free:function(){},when:function(l,i){var f=new m;try{i&&i(),f.callback()}catch(g){f.errback(g)}return f},
prepare:function(){this._size[""]<0&&(this._storeFetch({start:0}),this.store.getChildren&&this._fetchChildren())},_fetchChildren:function(){for(var l=this._struct,i=l[""].slice(1),f;i.length;)f=i.shift(),this._loadChildren(f).then(function(){[].push.apply(i,l[f].slice(1))})}})})},"gridx/modules/extendedSelect/Row":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/query","dojo/_base/lang","dojo/_base/Deferred","dojo/_base/sniff","dojo/dom-class","dojo/mouse","dojo/keys","../../core/_Module",
"./_RowCellBase"],function(n,m,o,l,i,f,g,e,d,c,b){return c.register(n(b,{name:"selectRow",rowMixin:{select:function(){this.grid.select.row.selectById(this.id);return this},deselect:function(){this.grid.select.row.deselectById(this.id);return this},isSelected:function(){return this.model.isMarked(this.id)}},triggerOnCell:!1,getSelected:function(){return this.model.getMarkedIds()},isSelected:function(){return m.every(arguments,function(a){return this.model.isMarked(a)},this)},clear:function(a){o(".gridxRowSelected",
this.grid.bodyNode).forEach(function(a){g.remove(a,"gridxRowSelected")});this.model.clearMark();a||this._onSelectionChange()},onHighlightChange:function(){},_type:"row",_init:function(){var a=this,b=a.grid;a.inherited(arguments);a.model._spTypes.select=1;a.batchConnect(b.rowHeader&&[b.rowHeader,"onMoveToRowHeaderCell","_onMoveToRowHeaderCell"],[b,"onRowMouseDown",function(b){if(e.isLeft(b)&&(a.arg("triggerOnCell")||!b.columnId))a._isOnCell=b.columnId,a._start({row:b.visualIndex},b.ctrlKey,b.shiftKey)}],
[b,"onRowMouseOver",function(c){if(a._selecting&&a.arg("triggerOnCell")&&c.columnId)b.body._focusCellCol=c.columnIndex;a._highlight({row:c.visualIndex})}],[b,f("ff")<4?"onRowKeyUp":"onRowKeyDown",function(b){if((a.arg("triggerOnCell")||!b.columnId)&&b.keyCode===d.SPACE)a._isOnCell=b.columnId,a._start({row:b.visualIndex},b.ctrlKey,b.shiftKey),a._end()}])},_markById:function(a,b){var c=this.model;m.forEach(a,function(a){c.markById(a,b)});c.when()},_markByIndex:function(a,b){var c=this.model,d=this.grid.body;
m.forEach(a,function(a){if(l.isArrayLike(a)){var e=a[0],a=a[1],f;if(e>=0&&e<Infinity){f=a>=e&&a<Infinity?a-e+1:d.visualCount-e;e=d.getRowInfo({visualIndex:e}).rowIndex;for(a=0;a<f;++a)c.markByIndex(a+e,b)}}else if(a>=0&&a<Infinity)a=d.getRowInfo({visualIndex:a}).rowIndex,c.markByIndex(a,b)});return c.when()},_onRender:function(a,b){var c,d=a+b;for(c=a;c<d;++c){var e={row:c};(this._isSelected(e)||this._selecting&&this._toSelect&&this._inRange(c,this._startItem.row,this._currentItem.row,1))&&this._doHighlight(e,
1)}},_onMark:function(a,b,c){if(c=="select"&&!this._marking&&(b=o('[rowid="'+b+'"]',this.grid.bodyNode)[0]))g.toggle(b,"gridxRowSelected",a),this.onHighlightChange({row:parseInt(b.getAttribute("visualindex"),10)},!!a)},_onMoveToCell:function(a,b,c){if(this.arg("triggerOnCell")&&c.shiftKey&&(c.keyCode==d.UP_ARROW||c.keyCode==d.DOWN_ARROW))this._start({row:a},c.ctrlKey,1),this._end()},_onMoveToRowHeaderCell:function(a,b){b.shiftKey&&(this._start({row:a},b.ctrlKey,1),this._end())},_isSelected:function(a){a=
this._getRowId(a.row);return this._isRange?m.indexOf(this._refSelectedIds,a)>=0:this.model.isMarked(a)},_beginAutoScroll:function(){var a=this.grid.autoScroll;this._autoScrollH=a.horizontal;a.horizontal=!1},_endAutoScroll:function(){this.grid.autoScroll.horizontal=this._autoScrollH},_doHighlight:function(a,b){o('[visualindex="'+a.row+'"]',this.grid.bodyNode).forEach(function(a){g.toggle(a,"gridxRowSelected",b)});this.onHighlightChange(a,b)},_end:function(){this.inherited(arguments);delete this._isOnCell},
_focus:function(a){var b=this.grid,c=b.focus;if(c)b.body._focusCellRow=a.row,c.focusArea(this._isOnCell?"body":"rowHeader",!0)},_addToSelected:function(a,b,c){var d=this,e=d.grid.body,f=d.model,g,i,l;i=d._lastEndItem;if(!d._isRange)d._refSelectedIds=f.getMarkedIds();if(d._isRange&&d._inRange(b.row,a.row,i.row))return g=Math.min(b.row,i.row),i=Math.max(b.row,i.row),a=e.getRowInfo({visualIndex:g}).rowIndex+1,b=e.getRowInfo({visualIndex:i}).rowIndex,f.when({start:a,count:b-a+1},function(){for(l=a;l<=
b;++l){var c=f.indexToId(l),e=m.indexOf(d._refSelectedIds,c)>=0;f.markById(c,e)}});else{g=Math.min(a.row,b.row);i=Math.max(a.row,b.row);a=e.getRowInfo({visualIndex:g}).rowIndex;b=e.getRowInfo({visualIndex:i}).rowIndex;for(l=a;l<=b;++l)f.markByIndex(l,c);return f.when()}}}))})},"gridx/modules/ColumnWidth":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/Deferred","dojo/_base/query","dojo/_base/sniff","dojo/dom-geometry","dojo/dom-class","dojo/dom-style","dojo/keys","../core/_Module"],
function(n,m,o,l,i,f,g,e,d,c){return c.register(n(c,{name:"columnWidth",forced:["hLayout","header"],getAPIPath:function(){return{columnWidth:this}},constructor:function(){this._ready=new o},preload:function(){var b=this,a=b.grid;if(!a.hScroller)b.autoResize=!0;b.batchConnect([a,"_onResizeBegin",function(c,d){d.header=new o;if(b.arg("autoResize")){var e=a.domNode.clientWidth-a.hLayout.lead-a.hLayout.tail;a.bodyNode.style.width=(e<0?0:e)+"px"}else b._adaptWidth();d.header.callback()}],[a.hLayout,"onUpdateWidth",
function(){b._adaptWidth();b._ready.callback()}],[a,"setColumns","_adaptWidth"])},load:function(){var b=this.loaded;this._ready.then(function(){b.callback()})},"default":60,autoResize:!1,_adaptWidth:function(){var b=this,a=b.grid,c=a.domNode,d=a.header,r=a.isLeftToRight(),s=r?"marginLeft":"marginRight",n=r?"marginRight":"marginLeft",r=a.hLayout.lead,o=a.hLayout.tail,w=d.innerNode,u=a.bodyNode.style,v=w.style,t=(c.clientWidth||e.get(c,"width"))-r-o,z=l(".gridxCell",w)[0],C=f.getMarginBox(z).w-f.getContentBox(z).w,
y=!c.offsetHeight,z=e.get(z,"borderCollapse")=="collapse";v[s]=u[s]=r+"px";v[n]=o+"px";t=t<0?0:t;y&&z&&C--;if(a.autoWidth){m.forEach(a._columns,function(a){if(!a.width)a.width=b.arg("default")+"px"});d.refresh();var s=l("th.gridxCell",w),B=z?2:0;s.forEach(function(b){var c=e.get(b,"width");if(!i("webkit")||!y)c+=C;B+=c;b=a._columnsById[b.getAttribute("colid")];if(!b.width||/%$/.test(b.width))b.width=c+"px"});d._columnsWidth=B;u.width=B+"px";c.style.width=r+o+B+"px"}else{if(b.arg("autoResize"))u.width=
t+"px",g.add(c,"gridxPercentColumnWidth"),m.forEach(a._columns,function(a){if(!a.width||!/%$/.test(a.width))a.width="auto"});else{var A=[],D=z?2:0;u.width=t+"px";m.forEach(a._columns,function(a){if(!a.width||a.width=="auto")a.width="auto",A.push(a);else if(/%$/.test(a.width))a.width=parseInt(t*parseFloat(a.width,10)/100-C,10)+"px"});try{d.refresh()}catch(G){alert(G)}m.forEach(a._columns,function(a){if(a.width!="auto"){var b=e.get(d.getHeaderNode(a.id),"width");if(!a.width||/%$/.test(a.width))a.width=
b+"px";if(!i("webkit")||!y)b+=C;D+=b}});if(A.length){i("webkit")&&(C=0);var F=t>D?(t-D)/A.length-C:b.arg("default"),F=parseInt(F,10)+"px";m.forEach(A,function(a){a.width=F})}}d.refresh()}if(i("ie")<8)v.width=t+"px";a.hScroller&&(a.hScroller.scroll(0),d._onHScroll(0))}}))})},"gridx/modules/ToolBar":function(){define(["dojo/_base/declare","dijit/Toolbar","gridx/core/_Module"],function(n,m,o){return o.register(n(o,{name:"toolBar",getAPIPath:function(){return{toolBar:this}},constructor:function(l,i){this.widget=
new m(i);this.domNode=this.widget.domNode},preload:function(){var l=this.widget,i=this.grid.vLayout;i.register(this,"domNode","headerNode",-10);this.batchConnect([l,"addChild","reLayout",i],[l,"removeChild","reLayout",i]);this._initFocus()},_initFocus:function(){var l=this.grid.focus;l&&l.registerArea({name:this.name,priority:-1,focusNode:this.domNode,scope:this,doFocus:this._doFocus})},_doFocus:function(){var l=this.widget.getChildren();l[0]&&l[0].focus();return l.length}}))})},"gridx/modules/select/Row":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/_base/sniff","dojo/dom-class","dojo/keys","./_RowCellBase","../../core/_Module"],function(n,m,o,l,i,f,g){return g.register(n(f,{name:"selectRow",rowMixin:{select:function(){this.grid.select.row.selectById(this.id);return this},deselect:function(){this.grid.select.row.deselectById(this.id);return this},isSelected:function(){return this.model.isMarked(this.id)}},triggerOnCell:!1,getSelected:function(){return this.model.getMarkedIds()},clear:function(){if(this.arg("enabled")){var e=
this.model;m.forEach(e.getMarkedIds(),function(d){e.markById(d,0)});e.when()}},_type:"row",_init:function(){var e=this,d=e.grid;e.inherited(arguments);e.model._spTypes.select=1;e.batchConnect([d,"onRowMouseDown",function(c){(e.arg("triggerOnCell")||!c.columnId)&&e._select(c.rowId,c.ctrlKey)}],[d,o("ff")<4?"onRowKeyUp":"onRowKeyDown",function(c){(e.arg("triggerOnCell")||!c.columnId)&&c.keyCode==i.SPACE&&e._select(c.rowId,c.ctrlKey)}])},_onMark:function(e,d,c){if(c=="select"){var b=this;b._highlight(d,
e);b.model.when({id:d},function(){b[e?"onSelected":"onDeselected"](b.grid.row(d,!0))})}},_highlight:function(e,d){var c=this.grid.body.getRowNode({rowId:e});c&&(l.toggle(c,"gridxRowSelected",d),this.onHighlightChange({row:parseInt(c.getAttribute("visualindex"),10)},!!d))},_markById:function(e,d){var c=this.model;c.markById(e,d);c.when()},_onRender:function(e,d){var c=this.model,b=e+d,a,h;for(a=e;a<b;++a)h=c.indexToId(this.grid.body.getRowInfo({visualIndex:a}).rowIndex),c.isMarked(h)&&this._highlight(h,
1)}}))})},"gridx/modules/ColumnLock":function(){define(["dojo/_base/kernel","dojo/_base/lang","../core/_Module","dojo/_base/declare","dojo/_base/array","dojo/_base/html","dojo/query"],function(n,m,o,l,i,f,g){return l(o,{name:"columnLock",required:["body"],count:0,load:function(e,d){this.count=this.arg("count");var c=this,b=this.grid;f.body();d.then(function(){c.connect(b.body,"onAfterRow",function(a){this._lockColumns(b.body.getRowNode(a))});b.columnResizer&&c.connect(b.columnResizer,"onResize","_updateUI");
b.header&&b.header.loaded.then(function(){c._updateHeader()});c._hackHScroller();c.count&&(f.addClass(this.grid.domNode,"gridxColumnLock"),c._updateScroller());c.loaded.callback()})},getAPIPath:function(){return{columnLock:this}},lock:function(e){e>=this.grid._columns.length?console.warn("Warning: lock count is larger than columns count, do nothing."):(this.unlock(),e&&f.addClass(this.grid.domNode,"gridxColumnLock"),this.count=e,this._updateUI())},unlock:function(){f.removeClass(this.grid.domNode,
"gridxColumnLock");this._unlockColumns(g(".gridxHeaderRowInner",this.grid.headerNode)[0]);i.forEach(this.grid.bodyNode.childNodes,this._unlockColumns,this);this.count=0;this._updateUI()},_unlockColumns:function(e){for(var d=e.firstChild.rows[0],c=0;c<this.count;c++){var b=d.cells[c];f.removeClass(b,"gridxLockedCell");f.style(b,{height:"auto"})}e.style.paddingLeft="0px"},_updateUI:function(){this.grid.header&&this._updateHeader();this._updateBody();this._updateScroller();this.grid.hScroller&&this.grid.hScroller._doScroll();
this.grid.header.onRender()},_lockColumns:function(e){if(this.count){var d=e.firstChild.rows[0],c;for(c=0;c<this.count;c++)n.style(d.cells[c],"height","auto");var b=n.contentBox(d.cells[d.cells.length-1]).h,a=0;n.style(d.cells[d.cells.length-1],"height",b+"px");for(c=0;c<this.count;c++){var h=d.cells[c];f.addClass(h,"gridxLockedCell");f.style(h,{height:b+"px",left:a+"px"});a+=h.offsetWidth}e.style.paddingLeft=a+"px"}},_updateHeader:function(){this._lockColumns(g(".gridxHeaderRowInner",this.grid.headerNode)[0])},
_updateBody:function(){i.forEach(this.grid.bodyNode.childNodes,this._lockColumns,this)},_updateScroller:function(){this.grid.hScroller&&this.grid.hScroller.refresh()},_hackHScroller:function(){var e=this;m.mixin(this.grid.hScroller,{_doScroll:function(){var d=this.domNode.scrollLeft;e.count?i.forEach(this.grid.bodyNode.childNodes,function(c){c.scrollLeft=d}):this.grid.bodyNode.scrollLeft=d;this.grid.onHScroll(d)}})}})})},"gridx/core/model/extensions/Mark":function(){define(["dojo/_base/declare","dojo/_base/array",
"dojo/_base/Deferred","../_Extension"],function(n,m,o,l){return n(l,{name:"move",priority:5,constructor:function(i){this.clear();this._mixinAPI("isMarked","getMarkedIds","markById","markByIndex","clearMark");i.onMarked=function(){};i.onMarkRemoved=function(){};this.connect(i,"_msg","_receiveMsg");i._spTypes={}},clear:function(){this._byId={}},clearMark:function(i){this._byId[this._initMark(i)]={}},getMarkedIds:function(i){var f=[],g;if(i=this._byId[this._initMark(i)])for(g in i)f.push(g);return f},
isMarked:function(i,f){return!!this._byId[this._initMark(f)][i]},markById:function(i,f,g){this._cmd(i,f,g,1)},markByIndex:function(i,f,g){i>=0&&i<Infinity&&this._cmd(i,f,g)},_mark:function(i,f,g){var g=this._initMark(g),e=this.isMarked(i,g);f&&!e?this._addMark(i,g):!f&&e&&this._removeMark(i,g)},_cmdMark:function(){var i=this,f=arguments,g=[],e=i.model._model;m.forEach(f,function(d){d[3]||g.push({start:d[0],count:1})});return e._call("when",[{id:[],range:g},function(){m.forEach(f,function(d){d[3]||
(d[0]=e._call("indexToId",[d[0]]));d[0]&&i._mark.apply(i,d)})}])},_onDelete:function(i){var f,g=this._byId;for(f in g)delete g[this._initMark(f)][i];this.onDelete.apply(this,arguments)},_initMark:function(i){var f=this._byId,i=i||"select";f[i]=f[i]||{};return i},_addMark:function(i,f){var g=this._initMark(f);this._byId[g][i]=1;this.model.onMarked(i,g)},_removeMark:function(i,f){var g=this._initMark(f);delete this._byId[g][i];this.model.onMarkRemoved(i,g)},_cmd:function(){this.model._addCmd({name:"_cmdMark",
scope:this,args:arguments,async:1})},_receiveMsg:function(i,f){if(i=="filter"){var g,e=this.model._spTypes,d;for(g in e)if(e[g])for(d in this._byId[g])f[d]||this._removeMark(d,g)}}})})},"gridx/modules/dnd/Row":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/Deferred","dojo/_base/lang","dojo/dom-class","dojo/dom-geometry","dojo/_base/sniff","./_Base","../../core/_Module","./_Dnd"],function(n,m,o,l,i,f,g,e,d){function c(c,d){if(c.grid){var e=new o,f=b(e,e.callback),g=b(e,e.errback),
i=[],m=c.grid,n=m.dnd.row._selectedRowIds;m.model.when({id:n},function(){a(n,function(a){m.model.idToIndex(a);(a=m.model.byId(a))&&i.push(l.clone(a.rawData))})}).then(function(){f(i)},g);return e}else return c.getGridDndRowData&&c.getGridDndRowData(d)||[]}var b=l.hitch,a=m.forEach;return d.register(n(e,{name:"dndRow",required:["_dnd","moveRow"],getAPIPath:function(){return{dnd:{row:this}}},accept:["grid/rows"],provide:["grid/rows"],onDraggedOut:function(b){var c=[];if(b.grid)c=b.grid.dnd._dnd.profile.arg("accept");
else for(var d in b.accept)c.push(d);if(!this.checkArg("copyWhenDragOut",c)){var b=this.grid,e=b.model,f=b.store,g=this._selectedRowIds;if(f.fetch){var i=[];b.model.when({id:g},function(){a(g,function(a){(a=e.byId(a))&&i.push(a.item)})}).then(function(){a(i,f.deleteItem,f);f.save()})}else a(g,f.remove,f)}},_checkDndReady:function(a){var b=this.model;if(!b.isMarked||b.isMarked(a.rowId))return this.grid.dnd._dnd.profile=this,this._selectedRowIds=b.getMarkedIds?b.getMarkedIds():[a.rowId],!0;return!1},
_cssName:"Row",_onBeginDnd:function(a){a.delay=this.arg("delay")},_getDndCount:function(){return this._selectedRowIds.length},_onEndDnd:function(){},_buildDndNodes:function(){var a=this.grid.id;return m.map(this._selectedRowIds,function(b){return["<div id='",a,"_dndrow_",b,"' gridid='",a,"' rowid='",b,"'></div>"].join("")}).join("")},_onBeginAutoScroll:function(){var a=this.grid.autoScroll;this._autoScrollH=a.horizontal;a.horizontal=!1},_onEndAutoScroll:function(){this.grid.autoScroll.horizontal=
this._autoScrollH},_getItemData:function(a){return a.substring((this.grid.id+"_dndrow_").length)},_calcTargetAnchorPos:function(a,b){var c=this,d=a.target,e=c.grid.body,l={width:b.w+"px",height:"",left:""},n=function(a){return c.model.isMarked&&c.model.isMarked(a.getAttribute("rowid"))},o=function(a){return parseInt(a.getAttribute("visualindex"),10)},v=function(d){var e=d,g=e,i=e;if(n(e)){for(g=e.previousSibling;g&&n(g);)e=g,g=g.previousSibling;g=e;e=d;for(i=e.nextSibling;i&&n(i);)e=i,i=i.nextSibling;
i=e}g&&i?(e=f.position(g),d=f.position(i),a.clientY<(e.y+d.y+d.h)/2?(c._target=o(g),l.top=e.y-b.y+"px"):(c._target=o(i)+1,l.top=d.y+d.h-b.y+"px")):delete c._target;return l};if(!g("ff"))for(;d;){if(i.contains(d,"gridxRow"))return v(d);d=d.parentNode}var t=e.domNode,z=t.childNodes;if(z.length){var d=t.firstChild,C=o(d),y=f.position(d);if(C===0&&a.clientY<=y.y+y.h)l.top=y.y-b.y+"px",c._target=0;else if(d=t.lastChild,C=o(d),y=f.position(d),C===e.visualCount-1&&a.clientY>y.y+y.h)l.top=y.y+y.h-b.y+"px",
c._target=e.visualCount;else return m.some(z,function(b){y=f.position(b);if(y.y<=a.clientY&&y.y+y.h>=a.clientY)return d=b,!0})?v(d):null}else l.top="0px",c._target=0;return l},_onDropInternal:function(){var a=this;a._target>=0&&a.model.when({id:a._selectedRowIds},function(){var b=m.map(a._selectedRowIds,function(b){return a.model.idToIndex(b)});a.grid.move.row.move(b,a._target)})},_onDropExternal:function(a,d){var e=new o,f=b(e,e.callback),g=b(e,e.errback),i=this.grid,l=this._target,m,n,t=c(a,d);
i.model.when([l-1,l],function(){m=i.model.byIndex(l);n=i.model.byIndex(l-1)}).then(function(){o.when(t,function(a){a&&a.length&&(a=i.model.insert(a,n&&n.item,m&&m.item),o.when(a,f,g))},g)},g);return e}}))})},"gridx/modules/NestedSort":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/connect","dojo/_base/event","dojo/_base/query","dojo/_base/window","dojo/dom-class","dojo/dom-construct","dojo/dom-style","dojo/keys","../core/_Module","../core/model/extensions/Sort","dojo/i18n!../nls/NestedSort"],
function(n,m,o,l,i,f,g,e,d,c,b,a,h){var k=m.forEach,r=m.filter,s=m.indexOf,x=g.contains,E=g.remove,w=g.add;return n(b,{name:"sort",forced:["header"],modelExtensions:[a],_a11yText:{dojoxGridDescending:"&#9662;",dojoxGridAscending:"&#9652;",dojoxGridAscendingTip:"&#1784;",dojoxGridDescendingTip:"&#1783;",dojoxGridUnsortedTip:"x"},constructor:function(){this._sortData=[]},getAPIPath:function(){return{sort:this}},preload:function(){var a=this;a._sortData=a.arg("preSort")||a._sortData;if(a.grid.persist){var b=
a.grid.persist.registerAndLoad("sort",function(){return a._sortData});if(b)a._sortData=b}a._sortData=r(a._sortData,function(b){return a.isSortable(b.colId)});a._sortData.length&&a.grid.model.sort(a._sortData)},load:function(){this._init();this.loaded.callback()},columnMixin:{isSorted:function(){return this.grid.sort.isSorted(this.id)},isSortable:function(){return this.grid.sort.isSortable(this.id)}},getSortData:function(){return this._sortData},sort:function(a){var b=this;b._sortData=r(a,function(a){return b.isSortable(a.colId)});
b._doSort();b._updateUI()},isSorted:function(a){return m.some(this._sortData,function(b){return b.colId==a})},_doSort:function(){var a=this.grid,b=this._sortData;a.model.sort(b.length?b:null);a.body.refresh()},clear:function(){this._sortData.length=0;this._doSort();this._updateUI()},isSortable:function(a){return(a=this.grid._columnsById[a])&&(a.sortable||a.sortable===void 0)},_init:function(){var a=this,b=a.grid.header.domNode,c=function(){a._initHeader();a._initFocus();a._updateUI()};a.connect(b,
"onclick","_onHeaderClick");a.connect(b,"onmouseover","_onMouseOver");a.connect(b,"onmouseout","_onMouseOver");a.connect(a.grid.header,"onRender",c);c()},_initHeader:function(){var a=this;k(a.grid.header.domNode.firstChild.firstChild.rows[0].cells,function(b){var c=b.getAttribute("colid");a.isSortable(c)&&(e.create("div",{className:"gridxSortBtn gridxSortBtnNested"},b,"first"),e.create("div",{className:"gridxSortBtn gridxSortBtnSingle"},b,"first"))})},_onHeaderClick:function(a){var b=a.target,c=this._sortData,
d;this._markFocus(a);if(x(b,"gridxSortBtn")){d=b.parentNode.getAttribute("colid");if(x(b,"gridxSortBtnSingle")){if(c.length>1)c.length=0;b=r(c,function(a){return a.colId===d})[0];c.length=0;b&&c.push(b);this._sortColumn(d)}else x(b,"gridxSortBtnNested")&&this._sortColumn(d);l.stop(a)}},_onMouseOver:function(a){var b=this.grid;g.toggle(b.header.domNode,"gridxHeaderHover",a.type=="mouseover");b.autoHeight&&b.vLayout.reLayout()},_sortColumn:function(a){var b=this._sortData;if(this.isSortable(a)){var c=
r(b,function(b){return b.colId===a})[0];c?(c.descending&&b.splice(s(b,c),1),c.descending=!c.descending):b.push({colId:a,descending:!1});this._doSort();this._updateUI()}},_updateUI:function(){var a=this,b=a.grid,c=b.domNode,d=a._sortData;E(c,"gridxSingleSorted");E(c,"gridxNestedSorted");i("th",b.header.domNode).forEach(function(b){var c=b.getAttribute("colid");if(a.isSortable(c)){k(["","Desc","Asc","Main"],function(a){E(b,"gridxCellSorted"+a)});var e=b.childNodes[0],g=b.childNodes[1],i=x(f.body(),
"dijit_a11y"),l=a._a11yText;e.title=h.singleSort+" - "+h.ascending;g.title=h.nestedSort+" - "+h.ascending;e.innerHTML=i?l.dojoxGridAscendingTip:"&nbsp;";g.innerHTML=d.length+1+(i?l.ascending:"");var m=r(d,function(a){return a.colId===c})[0];a._setWaiState(b,c,m);if(m){g.innerHTML=s(d,m)+1;w(b,"gridxCellSorted");m==d[0]&&w(b,"gridxCellSortedMain");var n=d.length;if(m.descending)if(w(b,"gridxCellSortedDesc"),n==1){if(e.title=h.singleSort+" - "+h.unsorted,i)e.innerHTML=l.dojoxGridUnsortedTip}else{if(g.title=
h.nestedSort+" - "+h.unsorted,i)g.innerHTML=l.dojoxGridUnsortedTip}else if(w(b,"gridxCellSortedAsc"),n==1){if(e.title=h.singleSort+": "+h.descending,i)e.innerHTML=l.dojoxGridDescendingTip}else if(g.title=h.nestedSort+" - "+h.descending,i)g.innerHTML=l.dojoxGridDescendingTip}}});d.length==1?w(c,"gridxSingleSorted"):d.length>1&&w(c,"gridxNestedSorted")},_initFocus:function(){var a=this.grid,b=a.header.domNode;a.focus&&(this._initRegions(),a.focus.registerArea({name:"header",priority:0,focusNode:b,scope:this,
doFocus:this._doFocus,doBlur:this._blurNode,onBlur:this._blurNode,connects:[this.connect(b,"onkeypress","_onKeyPress")]}))},_doFocus:function(){this._focusRegion(this._getCurrentRegion()||this._focusRegions[0]);return!0},_blurNode:function(){return!0},_onKeyPress:function(a){var b=this.grid.isLeftToRight(),d=b?c.RIGHT_ARROW:c.LEFT_ARROW,b=b?c.LEFT_ARROW:c.RIGHT_ARROW;switch(a.keyCode){case b:this._focusPrevious();break;case d:this._focusNext();break;case c.ENTER:case c.SPACE:this._onHeaderClick(a)}},
_onBlur:function(a){this._blurRegion(a.target)},_focusNext:function(){for(var a=this._currRegionIdx,b=this._focusRegions;b[a+1]&&d.get(b[++a],"display")==="none";);b[a]&&this._focusRegion(b[a])},_focusPrevious:function(){for(var a=this._currRegionIdx,b=this._focusRegions;b[a-1]&&(d.get(b[--a],"display")==="none"||x(b[a],"gridxSortBtn")););b[a]&&this._focusRegion(b[a])},_markFocus:function(a){a=a.target;s(this._focusRegions,a)>=0&&this._focusRegion(a)},_initRegions:function(){var a=this;k(a._nconns,
o.disconnect);a._focusRegions=[];a._nconns=[];i(".gridxCell",a.grid.header.domNode).forEach(function(b){var c=b.childNodes;k([2,1,0],function(b){c[b]&&(c[b].setAttribute("tabindex","-1"),a._focusRegions.push(c[b]),a._nconns.push(a.connect(c[b],"onblur","_onBlur")))})});a._currRegionIdx=-1},_focusRegion:function(a){if(a){a.focus();var b=this._getRegionHeader(a);w(b,"gridxCellSortFocus");x(a,"gridxSortNode")?w(a,"gridxSortNodeFocus"):x(a,"gridxSortBtn")&&w(a,"gridxSortBtnFocus");w(this.grid.header.domNode,
"gridxHeaderFocus");this._currRegionIdx=s(this._focusRegions,a);a.focus()}},_blurRegion:function(a){if(a){var b=this._getRegionHeader(a);E(b,"gridxCellSortFocus");E(a,"gridxSortNodeFocus");E(a,"gridxSortBtnFocus");E(this.grid.header.domNode,"gridxHeaderFocus")}},_getCurrentRegion:function(){return this._currRegionIdx===-1?null:this._focusRegions[this._currRegionIdx]},_getRegionHeader:function(a){for(;a&&!x(a,"gridxCell");)a=a.parentNode;return a},_setWaiState:function(a,b,c){var b="Column "+this.grid.column(b).name(),
d="none",h="ascending";c&&(d=c.descending?"descending":"ascending",h=c.descending?"none":"descending");c=b+" - is nested sorted by "+d+". Choose to nested sort by "+h;a.childNodes[0].setAttribute("aria-label",b+" - is sorted by "+d+". Choose to sort by "+h);a.childNodes[1].setAttribute("aria-label",c)}})})},"url:gridx/templates/FilterPane.html":'<ul class="gridxFilterPaneForm">\r\n\t<li><label>Column</label></li>\r\n\t<li name="sltColumn">\r\n\t\t<div data-dojo-type="dijit.form.Select" style="width:100%;"></div>\r\n\t</li>\r\n\t<li><label>Condition</label></li>\r\n\t<li name="sltCondition">\r\n\t\t<div data-dojo-type="dijit.form.Select"style="width:100%;"></div>\r\n\t</li>\r\n\t<li><label>Value</label></li>\r\n\t\r\n\t<li class="gridxFilterPaneFieldWrapper gridxFilterPaneTextWrapper">\r\n\t\t<input type="text" data-dojo-type="dijit.form.TextBox" intermediateChanges="true"\r\n\t\t style="width:100%;"/>\r\n\t</li>\r\n\t\r\n<\!--            dropDownClass="gridx.modules.filter.DistinctComboBoxMenu"--\>\r\n\t<li class="gridxFilterPaneFieldWrapper gridxFilterPaneComboWrapper">\r\n\t\t<input type="text" data-dojo-type="dijit.form.ComboBox" \r\n\t\t\tintermediateChanges="true" autoComplete="false" queryExpr="*${0}*" \r\n\t\t\tstyle="width:100%;"/>\r\n\t</li>\r\n\t\r\n\t<li class="gridxFilterPaneFieldWrapper gridxFilterPaneNumberWrapper">\r\n\t\t<input type="text" data-dojo-type="dijit.form.NumberTextBox" intermediateChanges="true" style="width:100%;"/>\r\n\t</li>\r\n\t\r\n\t<li class="gridxFilterPaneFieldWrapper gridxFilterPaneDateWrapper">\r\n\t\t<div data-dojo-type="dijit.form.DateTextBox" intermediateChanges="true" style="width: 100%"></div>\r\n\t</li>\r\n\t\r\n\t<li class="gridxFilterPaneFieldWrapper gridxFilterPaneDateRangeWrapper">\r\n\t\t<div data-dojo-type="dijit.form.DateTextBox" style="width:44%; float: left;" intermediateChanges="true"></div>\r\n\t\t<div style="width:10%; text-align: center; float: left;">to</div>\r\n\t\t<div data-dojo-type="dijit.form.DateTextBox" style="width:44%; float: right;" intermediateChanges="true"></div>\r\n\t</li>\r\n\t\r\n\t<li class="gridxFilterPaneFieldWrapper gridxFilterPaneTimeWrapper">\r\n\t\t<div data-dojo-type="dijit.form.TimeTextBox" style="width: 100%" intermediateChanges="true"></div>\r\n\t</li>\r\n\t\r\n\t<li class="gridxFilterPaneFieldWrapper gridxFilterPaneTimeRangeWrapper">\r\n\t\t<div data-dojo-type="dijit.form.TimeTextBox" style="width:44%; float: left;" intermediateChanges="true"></div>\r\n\t\t<div style="text-align: center; float: left; width: 10%;">to</div>\r\n\t\t<div data-dojo-type="dijit.form.TimeTextBox" style="width:44%; float: right;" intermediateChanges="true"></div>\r\n\t</li>\r\n\t\r\n\t<li class="gridxFilterPaneFieldWrapper gridxFilterPaneRadioWrapper">\r\n\t\t<span style="width:49%; float:left;">\r\n\t\t\t<div data-dojo-type="dijit.form.RadioButton" checked="true"></div><label for="">True</label>\r\n\t\t</span>\r\n\t\t<span style="width:49%; float: right;">\r\n\t\t\t<div data-dojo-type="dijit.form.RadioButton"></div><label for="">False</label>\r\n\t\t</span>\r\n\t</li>\r\n\t\r\n\t<li class="gridxFilterPaneFieldWrapper gridxFilterPaneSelectWrapper">\r\n\t\t<div data-dojo-type="dijit.form.Select" style="width: 100%"></div>\r\n\t</li>\r\n</ul>\r\n',
"gridx/modules/Menu":function(){define(["dojo/_base/declare","dojo/_base/connect","../core/_Module","dojo/dom-class","dojo/keys","dojo/_base/event","dojo/_base/lang","dijit/registry","dijit/Menu"],function(n,m,o,l,i,f,g,e){return o.register(n(o,{name:"menu",getAPIPath:function(){return{menu:this}},constructor:function(){this._menus={}},context:null,bind:function(d,c){var b=this,a=b.grid,h=c.hookPoint.toLowerCase(),f=c.selected?h+"-selected":h,i=b._evtMap[h],l=b._menus[f]=b._menus[f]||{},f=g.partial(b._showMenu,
f);m.disconnect(l.open);m.disconnect(l.close);l.menu=e.byId(d);l.open=i?b.connect(a,i,f):h=="body"?b.connect(a.bodyNode,"oncontextmenu",f):b.connect(a.domNode,"oncontextmenu",f);l.close=b.connect(l.menu,"onClose",function(){b._mutex=0})},unbind:function(d){var c,b=this._menus,a,d=e.byId(d);for(c in b)if(a=b[c],a.menu==d){m.disconnect(a.open);m.disconnect(a.close);delete b[c];break}},_evtMap:{header:"onHeaderContextMenu",headercell:"onHeaderCellContextMenu",cell:"onCellContextMenu",row:"onRowContextMenu"},
_showMenu:function(d,c){var b=this._menus;if(!this._mutex&&b[d].menu){var a=this.grid,h=c.rowId,e=c.columnId,g=!d.indexOf("row"),m=!d.indexOf("cell"),n=!d.indexOf("headercell"),o=d.indexOf("-")>0,w=!!(m&&l.contains(c.cellNode,"gridxCellSelected")||n&&l.contains(a.header.getHeaderNode(e),"gridxColumnSelected")||g&&l.contains(a.body.getRowNode({rowId:h}),"gridxRowSelected"));if(o==w||!o&&w&&!b[d+"-selected"])this.context={grid:a,column:n&&a.column(e,1),row:g&&a.row(h,1),cell:m&&a.cell(h,e,1)},f.stop(c),
this._mutex=1,b[d].menu._openMyself({target:c.target,coords:c.keyCode!=i.F10&&"pageX"in c?{x:c.pageX,y:c.pageY}:null})}}}))})},"gridx/modules/pagination/_PaginationBarBase":function(){define(["dojo/_base/declare","dojo/_base/array","../../core/_Module"],function(n,m,o){return n(o,{name:"paginationBar",required:["vLayout"],forced:["pagination"],getAPIPath:function(){return{paginationBar:this}},preload:function(){var l=this.grid,i=l.vLayout,l=l.pagination;this._pagers=[];this._exist("top")&&i.register(this,
"_topPagerNode","headerNode",-5);this._exist("bottom")&&i.register(this,"_bottomPagerNode","footerNode",5);if(!l.arg("initialPageSize"))l.initialPageSize=this.arg("sizes")[0]},load:function(l,i){var f=this;i.then(function(){f._init();f.loaded.callback()})},destroy:function(){this.inherited(arguments);m.forEach(this._pagers,function(l){l.destroyRecursive()})},sizes:[10,25,50,100,0],position:"bottom",sizeSwitch:!0,stepper:!0,description:!0,refresh:function(){m.forEach(this._pagers,function(l){l.refresh()});
this.grid.vLayout.reLayout()},_exist:function(l,i){var f=this.arg(i||"position");return(f=f&&String(f).toLowerCase())&&(f!="top"&&f!="bottom"||f==l)},_init:function(){var l=this;m.forEach(["top","bottom"],function(i){if(l._exist(i)){var f=new (l.arg("pagerClass"))({pagination:l.grid.pagination,module:l,position:i,focusPriority:{top:-5,bottom:5}[i]});l._pagers.push(f);l["_"+i+"PagerNode"]=f.domNode}})}})})},"gridx/core/Cell":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred"],
function(n,m,o){return n([],{constructor:function(l,i,f){this.grid=l;this.model=l.model;this.row=i;this.column=f},data:function(){return this.model.byId(this.row.id).data[this.column.id]},rawData:function(){var l=this.column.field();return l&&this.model.byId(this.row.id).rawData[l]},setRawData:function(l){var i=new o,f=this.column.field(),g=this.grid.store,e=m.hitch,d=e(i,i.callback),e=e(i,i.errback);if(f){var c=this.model.byId(this.row.id).item;g.setValue?(g.setValue(c,f,l),g.save({onComplete:d,
onError:e})):g.put&&(c=m.clone(c),c[f]=l,o.when(g.put(c),d,e))}else d();return i}})})},"url:gridx/templates/GotoPagePane.html":"<div class='gridxGotoPage'\r\n\t><table><tbody\r\n\t\t><tr><td class='gridxGotoPageMainMsg'>\r\n\t\t${gotoDialogMainMsg}\r\n\t\t</td></tr\r\n\t\t><tr><td class='gridxGotoPageInput'\r\n\t\t\t><input data-dojo-type='${numberTextBoxClass}'\r\n\t\t\t\tclass='gridxGotoPageInputBox'\r\n\t\t\t\tdata-dojo-attach-point='pageInputBox'\r\n\t\t\t\tdata-dojo-attach-event='onKeyUp: _updateStatus'></input\r\n\t\t\t><span\r\n\t\t\t\tclass='gridxPageCountMsg'\r\n\t\t\t\tdata-dojo-attach-point='pageCountMsgNode'></span\r\n\t\t></td></tr\r\n\t\t><tr><td class='gridxGotoPageBtns'\r\n\t\t\t><button data-dojo-type='${buttonClass}' \r\n\t\t\t\tdata-dojo-attach-point='okBtn'\r\n\t\t\t\tdata-dojo-attach-event='onClick: _onOK'>\r\n\t\t\t\t${gotoDialogOKBtn}\r\n\t\t\t</button\r\n\t\t\t><button data-dojo-type='${buttonClass}'\r\n\t\t\t\tdata-dojo-attach-event='onClick: _onCancel'>\r\n\t\t\t\t${gotoDialogCancelBtn}\r\n\t\t\t</button\r\n\t\t></td></tr\r\n\t></tbody></table\r\n></div>\r\n",
"gridx/modules/HScroller":function(){define(["dojo/_base/declare","dojo/dom-style","dojo/_base/sniff","dojo/_base/Deferred","dojox/html/metrics","../core/_Module"],function(n,m,o,l,i,f){return f.register(n(f,{name:"hScroller",forced:["header"],getAPIPath:function(){return this.grid.autoWidth?{}:{hScroller:this}},constructor:function(){this.grid._initEvents(["H"],["Scroll"])},preload:function(){var f=this,e=f.grid,d=e.hScrollerNode;if(!e.autoWidth&&(f.domNode=d,f.container=d.parentNode,f.stubNode=
d.firstChild,e.vLayout.register(f,"container","footerNode",0),d.style.display="block",f.batchConnect([e.header,"onRender","refresh"],[d,"onscroll","_onScroll"],[e,"_onResizeBegin",function(c,b){b.hScroller=new l}],[e,"_onResizeEnd",function(c,b){l.when(b.header,function(){f.refresh();b.hScroller.callback()})}]),o("ie")))d.style.height=i.getScrollbar().h+"px"},scroll:function(f){this.domNode.scrollLeft=f},refresh:function(){var f=this.grid,e=f.isLeftToRight(),d=e?"marginLeft":"marginRight",e=e?"marginRight":
"marginLeft",c=f.hLayout.lead,b=f.hLayout.tail,a=(f.domNode.clientWidth||m.get(f.domNode,"width"))-c-b,h=f.header.innerNode,k=m.get(h,"paddingLeft")||0,i=this.domNode.style,h=h.firstChild.offsetWidth+k,l=i.display,n=h<=a?"none":"block";i[d]=c+k+"px";i[e]=b+"px";i.width=(a-k<0?0:a-k)+"px";this.stubNode.style.width=(h-k<0?0:h-k)+"px";i.display=n;l=="block"&&n=="none"&&f.vLayout.reLayout()},_lastLeft:0,_onScroll:function(){var f=this.domNode.scrollLeft;if(this._lastLeft!=f)this._lastLeft=f,this._doScroll()},
_doScroll:function(){var f=this.grid;f.onHScroll(f.bodyNode.scrollLeft=this.domNode.scrollLeft)}}))})},"gridx/modules/exporter/Exporter":function(){define(["dojo/_base/declare","dojo/_base/lang","../../core/_Module","dojo/_base/Deferred","dojo/_base/array"],function(n,m,o,l,i){function f(d,c,b,a){return!d[c]||!1!==d[c](b,a)}function g(d,c,b){var a=[],h=0,e=0,f=d.progressStep;if(typeof d.start=="number"&&d.start>=0)h=d.start;typeof d.count=="number"&&d.count>0&&(e=h+d.count);e=e||b;if(c)if(c=i.filter(c,
function(a){return a>=h&&a<e}),!f||c.length<=f)a.push(c);else for(d=0;d<c.length;d+=f)a.push(c.slice(d,d+f));else if(c=e-h,!f||c<=f)a.push({start:h,count:c});else for(d=h;d<e;d+=f)a.push({start:d,count:d+f<e?f:e-d});a.p=0;return a}function e(d,c,b){var b=b.p+1,a=m.isArray(d);return b<(a?d.length:d.start+d.count)?{p:b,row:c.row(a?d[b]:b)}:null}return o.register(n(o,{name:"exporter",getAPIPath:function(){return{exporter:this}},_export:function(d,c){var b=new l,a=this,h=a.model,e=a._getColumns(c),r=
a.grid.select,n=r&&r.row,r=r&&r.column,o,E,w={columnIds:e},u=function(){f(d,"afterBody",c,w);b.callback(d.getResult())},v=m.hitch(b,b.errback);try{if(!c.omitHeader&&f(d,"beforeHeader",c,w)&&(i.forEach(e,function(a){w.columnId=a;f(d,"handleHeaderCell",c,w)}),f(d,"afterHeader",c,w)),f(d,"beforeBody",c,w)){if(c.selectedOnly&&n&&(!r||!r.getSelected().length))o=h.when().then(function(){E=n.getSelected()},v);l.when(o,function(){var e,f=E&&h.when({id:E},function(){e=arrary.map(E,function(a){return h.idToIndex(a)});
e.sort(function(a,b){return a-b})},v);l.when(f,function(){var f=new l,k=h.size();a._fetchRows(b,d,c,w,f,g(c,e,k));f.then(u,v)},v)},v)}}catch(t){v(t)}return b},_fetchRows:function(d,c,b,a,h,k){var g=this,i=g.grid,l=b.filter,n=a.columnIds,o=k[k.p++],u=m.hitch(h,h.errback);o?(d.progress(k.p/k.length),g.model.when(o,function(){for(var d=m.isArray(o)?{p:0,row:i.row(o[0])}:{p:o.start,row:i.row(o.start)};d;d=e(o,i,d))if(a.rowId=d.row.id,(!l||l(d.row))&&f(c,"beforeRow",b,a)){for(var h=0;h<n.length;++h){var k=
n[h];a.columnId=k;a.data=g._format(b,k,d.row);f(c,"handleCell",b,a)}f(c,"afterRow",b,a)}}).then(function(){g._fetchRows(d,c,b,a,h,k)},u)):h.callback()},_format:function(d,c,b){if(m.isFunction(d.formatter))return d.formatter(b.cell(c,1))||"";else if(d.useStoreData)return(d=this.grid._columnsById[c].field)?b.rawData()[d]:"";return b.data()[c]||""},_getColumns:function(d){var c=this.grid,b=c._columnsById;m.isArrayLike(d.columns)&&d.columns.length?(d=i.filter(d.columns,function(a){return b[a]}),d.sort(function(a,
c){return b[a].index-b[c].index})):d=i.map(c._columns,function(a){return a.id});return d}}))})},"gridx/modules/select/Cell":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/sniff","dojo/dom-class","dojo/keys","./_RowCellBase","../../core/_Module"],function(n,m,o,l,i,f,g){return g.register(n(f,{name:"selectCell",cellMixin:{select:function(){this.grid.select.cell.selectById(this.row.id,this.column.id);return this},deselect:function(){this.grid.select.cell.deselectById(this.row.id,
this.column.is);return this},isSelected:function(){return this.model.isMarked(this.row.id,this.column.id)}},getSelected:function(){var e=this,d=[];m.forEach(e.grid._columns,function(c){var b=e.model.getMarkedIds(e._getMarkType(c.id));d.push.apply(d,m.map(b,function(a){return[a,c.id]}))});return d},clear:function(){var e=this,d=e.model;e.arg("enabled")&&(m.forEach(e.grid._columns,function(c){var c=e._getMarkType(c.id),b=d.getMarkedIds(c),a=b.length,h;for(h=0;h<a;++h)d.markById(b[h],0,c)}),d.when())},
_type:"cell",_markTypePrefix:"select_",_getMarkType:function(e){e=this._markTypePrefix+e;this.model._spTypes[e]=1;return e},_init:function(){var e=this;e.inherited(arguments);e.batchConnect([e.grid,"onCellMouseDown",function(d){e._select([d.rowId,d.columnId],d.ctrlKey)}],[e.grid,o("ff")<4?"onCellKeyUp":"onCellKeyDown",function(d){d.keyCode==i.SPACE&&e._select([d.rowId,d.columnId],d.ctrlKey)}])},_onMark:function(e,d,c){var b=this;if(c.indexOf(b._markTypePrefix)===0){var a=c.substr(b._markTypePrefix.length);
b.grid._columnsById[a]&&(b._highlight(d,a,e),b.model.when({id:d},function(){b[e?"onSelected":"onDeselected"](b.grid.cell(d,a,1))}))}},_highlight:function(e,d,c){if(e=this.grid.body.getCellNode({rowId:e,colId:d}))l.toggle(e,"gridxCellSelected",c),this.onHighlightChange()},_markById:function(e,d){var c=this.model;c.markById(e[0],d,this._getMarkType(e[1]));c.when()},_onRender:function(e,d){var c=this.model,b=e+d,a,h,f,g,i=this.grid._columns;for(a=e;a<b;++a){f=c.indexToId(a);for(h=i.length-1;h>=0;--h)g=
i[h].id,c.isMarked(f,this._getMarkType(g))&&this._highlight(f,g,1)}}}))})},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(n,m,o){n.DeferredList=function(l,i,f,g){var e=[];m.call(this);var d=this;l.length===0&&!i&&this.resolve([0,[]]);var c=0;o.forEach(l,function(b,a){function h(b,h){e[a]=[b,h];c++;c===l.length&&d.resolve(e)}b.then(function(b){i?d.resolve([a,b]):h(!0,b)},function(a){f?d.reject(a):h(!1,a);if(g)return null;throw a;})})};n.DeferredList.prototype=
new m;n.DeferredList.prototype.gatherResults=function(l){l=new n.DeferredList(l,!1,!0,!1);l.addCallback(function(i){var f=[];o.forEach(i,function(g){f.push(g[1])});return f});return l};return n.DeferredList})},"gridx/modules/pagination/PaginationBarDD":function(){define(["dojo/_base/declare","../../core/_Module","./_PaginationBarBase","./DropDownPager","dijit/form/FilteringSelect","dijit/form/Select"],function(n,m,o,l,i,f){return m.register(n(o,{stepperClass:i,sizeSwitchClass:f,pagerClass:l}))})},
"gridx/modules/Persist":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/json","dojo/_base/unload","dojo/cookie","../core/_Module"],function(n,m,o,l,i,f,g){return g.register(n(g,{name:"persist",constructor:function(e){var d=this;d.key=window.location+"/"+d.arg("key",e.id,function(b){return b});d._persistedList={};var c=e.destroy;e.destroy=function(){d.save();c.call(e)};d._restoreColumnState();i.addOnWindowUnload(function(){d.save()})},getAPIPath:function(){return{persist:this}},
enabled:!0,options:null,key:"",put:function(e,d,c){d&&o.isObject(d)?f(e,l.toJson(d),c):f(e,null,{expires:-1})},get:function(e){return l.fromJson(f(e))},registerAndLoad:function(e,d,c){this._persistedList[e]={saver:d,scope:c,enabled:!0};return(d=this.get(this.key))?d[e]:null},enable:function(e){this._setEnable(e,1)},disable:function(e){this._setEnable(e,0)},isEnabled:function(e){var d=this._persistedList[e];if(d)return d.enabled;return e?!1:this.arg("enabled")},save:function(){var e=null;if(this.arg("enabled")){var d,
c=this._persistedList,e={};for(d in c)c[d].enabled&&(e[d]=c[d].saver.call(c[d].scope||o.global))}this.put(this.key,e,this.options)},_persistedList:null,_setEnable:function(e,d){var c=this._persistedList,d=!!d;if(c[e])c[e].enabled=d;else if(!e){for(e in c)c[e].enabled=d;this.enabled=d}},_restoreColumnState:function(){var e=this.grid,d=[],c=this.registerAndLoad("column",this._columnStateSaver,this);o.isArray(c)&&(m.forEach(c,function(b){m.some(e._columns,function(a,c){if(a.id==b.id)return d[b.index]=
e._columns[c],d[b.index].width=b.width,!0})}),e.setColumns(d))},_columnStateSaver:function(){return m.map(this.grid._columns,function(e){return{id:e.id,index:e.index,width:e.width}})}}))})},"gridx/modules/RowHeader":function(){define(["dojo/_base/declare","dojo/_base/query","dojo/_base/lang","dojo/_base/sniff","dojo/aspect","dojo/dom-construct","dojo/dom-class","dojo/dom-style","dojo/keys","../core/_Module","../util"],function(n,m,o,l,i,f,g,e,d,c,b){return c.register(n(c,{name:"rowHeader",getAPIPath:function(){return{rowHeader:this}},
constructor:function(){this.headerNode=f.create("div",{"class":"gridxRowHeaderHeader",innerHTML:['<table border="0" cellspacing="0" cellpadding="0" style="width: ',this.arg("width"),';"><tr><th class="gridxRowHeaderHeaderCell" tabindex="-1"></th></tr></table>'].join("")});this.bodyNode=f.create("div",{"class":"gridxRowHeaderBody"})},destroy:function(){this.inherited(arguments);this._b.remove();f.destroy(this.headerNode);f.destroy(this.bodyNode)},preload:function(){var a=this.headerNode,b=this.bodyNode,
c=this.grid,d=c.body,e=this.arg("width");c._initEvents(["RowHeaderHeader","RowHeaderCell"],c._eventNames);c.header.domNode.appendChild(a);a.style.width=e;this.headerCellNode=m("th",a)[0];c._connectEvents(a,"_onHeaderMouseEvent",this);c.mainNode.appendChild(b);b.style.width=e;c.hLayout.register(null,b);this.batchConnect([d,"onRender","_onRendered"],[d,"onAfterRow","_onAfterRow"],[d,"onUnrender","_onUnrender"],[c.bodyNode,"onscroll","_onScroll"],[b,"onscroll",function(){c.bodyNode.scrollTop=b.scrollTop}],
[c,"onRowMouseOver","_onRowMouseOver"],[c,"onRowMouseOut","_onRowMouseOver"],[c,"_onResizeEnd","_onResize"],c.columnResizer&&[c.columnResizer,"onResize","_onResize"]);this._b=i.before(d,"renderRows",o.hitch(this,this._onRenderRows),!0);c._connectEvents(b,"_onBodyMouseEvent",this);this._initFocus()},width:"20px",onMoveToRowHeaderCell:function(){},_onRenderRows:function(a,b,c){if(b>0){var d=this.bodyNode,a=this._buildRows(a,b);c=="top"?f.place(a,d,"first"):c=="bottom"?f.place(a,d,"last"):(d.scrollTop=
0,d.innerHTML=a)}},_onAfterRow:function(a){var b=m('[visualindex="'+a.visualIndex+'"].gridxRowHeaderRow',this.bodyNode)[0],c=m('[visualindex="'+a.visualIndex+'"].gridxRow .gridxRowTable',this.grid.bodyNode)[0],d=b.firstChild,e=this.arg("cellProvider");d.style.height=c.offsetHeight+"px";b.setAttribute("rowid",a.rowId);b.setAttribute("rowindex",a.rowIndex);b.setAttribute("parentId",a.parentId);if(e)d.firstChild.firstChild.firstChild.innerHTML=e.call(this,a)},_onRendered:function(){var a=this.arg("headerProvider");
if(a)this.headerCellNode.innerHTML=a();this._onScroll()},_onUnrender:function(a){(a=a&&m('[rowid="'+a+'"].gridxRowHeaderRow',this.bodyNode)[0])&&f.destroy(a)},_onScroll:function(){this.bodyNode.scrollTop=this.grid.bodyNode.scrollTop},_onResize:function(){for(var a=this.grid.bodyNode.firstChild,b=this.bodyNode.firstChild;a&&b;a=a.nextSibling,b=b.nextSibling)b.firstChild.style.height=a.firstChild.offsetHeight+"px"},_buildRows:function(a,b){for(var c=[],d=0;d<b;++d)c.push('<div class="gridxRowHeaderRow" visualindex="',
a+d,'"><table border="0" cellspacing="0" cellpadding="0" style="height: 24px;"><tr><td class="gridxRowHeaderCell" tabindex="-1"></td></tr></table></div>');return c.join("")},_onHeaderMouseEvent:function(a,b){var c=this.grid,d="onRowHeaderHeader"+a,e="onHeader"+a;if(c._isConnected(d))c[d](b);if(c._isConnected(e))c[e](b)},_onBodyMouseEvent:function(a,b){var c=this.grid,d="onRowHeaderCell"+a,e="onRow"+a,f=c._isConnected(d),g=c._isConnected(e);if(f||g)if(this._decorateBodyEvent(b),b.rowIndex>=0){if(b.isRowHeader&&
f)c[d](b);if(g)c[e](b)}},_decorateBodyEvent:function(a){for(var b=a.target||a.originalTarget;b&&b!=this.bodyNode;){if(g.contains(b,"gridxRowHeaderCell"))a.isRowHeader=!0;else if(b.tagName.toLowerCase()==="div"&&g.contains(b,"gridxRowHeaderRow")){a.rowId=b.getAttribute("rowid");a.parentId=b.getAttribute("parentid");a.rowIndex=parseInt(b.getAttribute("rowindex"),10);a.visualIndex=parseInt(b.getAttribute("visualindex"),10);break}b=b.parentNode}},_onRowMouseOver:function(a){var b=m('[rowid="'+a.rowId+
'"].gridxRowHeaderRow',this.bodyNode)[0];b&&g.toggle(b,"gridxRowOver",a.type.toLowerCase()=="mouseover")},_initFocus:function(){var a=this.grid.focus;a&&a.registerArea({name:"rowHeader",priority:0.9,focusNode:this.bodyNode,scope:this,doFocus:this._doFocus,onFocus:this._onFocus,doBlur:this._blur,onBlur:this._blur,connects:[this.connect(this.bodyNode,"onkeydown","_onKeyDown")]})},_doFocus:function(a){if(this._focusRow(this.grid.body._focusCellRow))return b.stopEvent(a),!0},_onFocus:function(a){for(a=
a.target;a!=this.bodyNode;){if(g.contains(a,"gridxRowHeaderRow"))return this._focusRow(this.grid.body._focusCellRow=parseInt(a.getAttribute("visualindex"),10)),!0;a=a.parentNode}},_focusRow:function(a){a=m('[visualindex="'+a+'"] .gridxRowHeaderCell',this.bodyNode)[0];this._blur();if(a=a||this.bodyNode.firstChild)g.add(a,"gridxCellFocus"),a.focus();return a},_blur:function(){m(".gridxCellFocus",this.bodyNode).forEach(function(a){g.remove(a,"gridxCellFocus")});return!0},_onKeyDown:function(a){var c=
this,e=c.grid;if(e.focus.currentArea()=="rowHeader"&&a.keyCode==d.UP_ARROW||a.keyCode==d.DOWN_ARROW){b.stopEvent(a);var f=e.body,g=f._focusCellRow+(a.keyCode==d.UP_ARROW?-1:1);f._focusCellRow=g=g<0?0:g>=f.visualCount?f.visualCount-1:g;e.vScroller.scrollToRow(g).then(function(){c._focusRow(g);c.onMoveToRowHeaderCell(g,a)})}}}))})},"gridx/modules/filter/FilterPane":function(){define(["dojo/_base/kernel","dijit","dojo/text!../../templates/FilterPane.html","dojo/_base/declare","./DistinctComboBoxMenu",
"./Filter","dijit/layout/ContentPane","dojo/data/ItemFileReadStore","dijit/form/Select","dijit/form/TextBox","dijit/form/DateTextBox","dijit/form/TimeTextBox","dijit/form/RadioButton","dijit/form/NumberTextBox","dijit/form/ComboBox","dojox/html/ellipsis","dojo/store/util/QueryResults","dojo/_base/array","dojo/_base/lang","dojo/_base/html","dojo/query"],function(n,m,o,l,i){return l([m.layout.ContentPane],{content:o,sltColumn:null,sltCondition:null,grid:null,title:"Rule",postCreate:function(){this.inherited(arguments);
this._initFields();this._initSltCol();this.connect(this.sltColumn,"onChange","_onColumnChange");this.connect(this.sltCondition,"onChange","_onConditionChange");this.comboText.dropDownClass=i},getData:function(){var f=this._getValue(),g=this.sltCondition.get("value");return g==="isEmpty"||f&&(g!=="range"||f.start&&f.end)?{colId:this.sltColumn.get("value"),condition:g,value:g==="isEmpty"?"":f,type:this._getType()}:null},setData:function(f){f!==null&&(this.sltColumn.set("value",f.colId,null),this._onColumnChange(),
this.sltCondition.set("value",f.condition,null),this._onConditionChange(),this._setValue(f.value))},close:function(){var f=this._getContainer();f.getChildren().length===4&&(f._contentBox.w+=dojox.html.metrics.getScrollbar().w);if(this===f.selectedChildWidget){var g=n.indexOf(f.getChildren(),this);g>0&&f.selectChild(f.getChildren()[g-1])}f.removeChild(this);n.toggleClass(f.domNode,"gridxFilterSingleRule",f.getChildren().length===1);this.grid.filterBar._filterDialog._updateAccordionContainerHeight()},
onChange:function(){},_getContainer:function(){return m.byNode(this.domNode.parentNode.parentNode.parentNode)},_initFields:function(){this.sltColumn=m.byNode(n.query("li>table",this.domNode)[0]);this.sltCondition=m.byNode(n.query("li>table",this.domNode)[1]);var f=this._fields=[this.tbSingle=m.byNode(n.query(".gridxFilterPaneTextWrapper > .dijitTextBox",this.domNode)[0]),this.tbNumber=m.byNode(n.query(".gridxFilterPaneNumberWrapper > .dijitTextBox",this.domNode)[0]),this.comboText=m.byNode(n.query(".gridxFilterPaneComboWrapper > .dijitComboBox",
this.domNode)[0]),this.sltSingle=m.byNode(n.query(".gridxFilterPaneSelectWrapper > .dijitSelect",this.domNode)[0]),this.dtbSingle=m.byNode(n.query(".gridxFilterPaneDateWrapper > .dijitDateTextBox",this.domNode)[0]),this.dtbStart=m.byNode(n.query(".gridxFilterPaneDateRangeWrapper > .dijitDateTextBox",this.domNode)[0]),this.dtbEnd=m.byNode(n.query(".gridxFilterPaneDateRangeWrapper > .dijitDateTextBox",this.domNode)[1]),this.ttbSingle=m.byNode(n.query(".gridxFilterPaneTimeWrapper > .dijitTimeTextBox",
this.domNode)[0]),this.ttbStart=m.byNode(n.query(".gridxFilterPaneTimeRangeWrapper > .dijitTimeTextBox",this.domNode)[0]),this.ttbEnd=m.byNode(n.query(".gridxFilterPaneTimeRangeWrapper > .dijitTimeTextBox",this.domNode)[1]),this.rbTrue=m.byNode(n.query(".gridxFilterPaneRadioWrapper .dijitRadio",this.domNode)[0]),this.rbFalse=m.byNode(n.query(".gridxFilterPaneRadioWrapper .dijitRadio",this.domNode)[1])];this.rbTrue.domNode.nextSibling.htmlFor=this.rbTrue.id;this.rbFalse.domNode.nextSibling.htmlFor=
this.rbFalse.id;var g="rb_name_"+Math.random();this.rbTrue.set("name",g);this.rbFalse.set("name",g);n.forEach(f,function(e){this.connect(e,"onChange","_onValueChange")},this)},_initSltCol:function(){var f=[{label:"Any Column",value:""}],g=this.sltColumn;n.forEach(this.grid.columns(),function(e){e.isFilterable()&&f.push({value:e.id,label:e.name()})},this);g.addOption(f)},_initCloseButton:function(){var f=this._buttonWidget;this.connect(n.create("span",{className:"gridxFilterPaneCloseButton",innerHTML:'<img src="'+
this._blankGif+'"/>',title:"Close"},f.domNode,"first"),"onclick","close");n.addClass(f.titleTextNode,"dojoxEllipsis")},_onColumnChange:function(){var f=this.grid.filterBar._getConditionOptions(this.sltColumn.get("value")),g=this.sltCondition;g.options&&g.options.length&&g.removeOption(g.options);g.addOption(n.clone(f));this._updateTitle();this.onChange()},_onConditionChange:function(){this._updateValueField();this._updateTitle();this.onChange()},_onValueChange:function(){this._updateTitle();this.onChange()},
_getDataType:function(){var f=this.sltColumn.get("value"),g="string";f!==""&&(g=this.grid.column(f).dataType());return g},_getType:function(){var f={string:"Text",number:"Number",date:"Date",time:"Time","boolean":"Radio"}[this._getDataType()];"range"===this.sltCondition.get("value")&&(f+="Range");return f},_updateTitle:function(){if(this._buttonWidget){var f;f=this._getValue();var g=this._getType(),e=this.sltCondition.get("value"),d=this._buttonWidget.titleTextNode;f=f&&(e!=="range"||f.start&&f.end)?
this.sltColumn.get("displayedValue")+" "+this.grid.filterBar._getRuleString(e,f,g):"Rule "+(n.indexOf(this._getContainer().getChildren(),this)+1);d.innerHTML=f;d.title=f.replace(/<\/?span[^>]*>/g,"").replace("&nbsp;"," ")}},_needComboBox:function(){var f=this.sltColumn.get("value");return this._getType()==="Text"&&!!f&&this.grid._columnsById[f].field},_updateValueField:function(){var f=this._getType(),g=this.sltColumn.get("value"),e=this._needComboBox();n.forEach(["Text","Combo","Date","Number","DateRange",
"Time","TimeRange","Select","Radio"],function(c){n.removeClass(this.domNode,"gridxFilterPane"+c)},this);n.addClass(this.domNode,"gridxFilterPane"+(e?"Combo":f));var d=this.sltCondition.get("value")==="isEmpty";n.forEach(this._fields,function(c){c.set("disabled",d)});if(e){if(!this._dummyCombo)this._dummyCombo=new m.form.ComboBox({store:this.grid.store});f=this.grid._columnsById[g];n.mixin(this.comboText,{store:this.grid.store,searchAttr:f.field,fetchProperties:{sort:[{attribute:f.field,descending:!1}]}})}},
_getValue:function(){var f=this._getType(),g=this._needComboBox();switch(f){case "Text":return(g?this.comboText:this.tbSingle).get("value")||null;case "Number":return this.tbNumber.get("value")||null;case "Select":return this.sltSingle.get("value")||null;case "Date":return this.dtbSingle.get("value")||null;case "DateRange":return{start:this.dtbStart.get("value"),end:this.dtbEnd.get("value")};case "Time":return this.ttbSingle.get("value")||null;case "TimeRange":return{start:this.ttbStart.get("value"),
end:this.ttbEnd.get("value")};case "Radio":return!!this.rbTrue.get("checked");default:return null}},_setValue:function(f){if(f){var g=this._getType(),e=this._needComboBox();switch(g){case "Text":(e?this.comboText:this.tbSingle).set("value",f);break;case "Number":this.tbNumber.set("value",f);break;case "Select":this.sltSingle.set("value",f);break;case "Date":this.dtbSingle.set("value",f);break;case "DateRange":this.dtbStart.set("value",f.start);this.dtbEnd.set("value",f.end);break;case "Time":this.ttbSingle.set("value",
f);break;case "TimeRange":this.ttbStart.set("value",f.start);this.ttbEnd.set("value",f.end);break;case "Radio":this.rbTrue.set("checked",!0)}}},uninitialize:function(){this._dummyCombo&&this._dummyCombo.destroyRecursive()}})})},"gridx/modules/Focus":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/connect","dojo/_base/lang","dojo/keys","../core/_Module","../util"],function(n,m,o,l,i,f,g){return f.register(n(f,{name:"focus",getAPIPath:function(){return{focus:this}},constructor:function(){this._areas=
{};this._tabQueue=[];this._focusNodes=[]},preload:function(){var e=this.grid,d=e.domNode;this.batchConnect([d,"onmousedown","_onMouseDown"],[d,"onkeydown","_onTabDown"],[d,"onfocus","_focus"],[e.lastFocusNode,"onfocus","_focus"],[e,"onBlur","_doBlur"])},destroy:function(){this._areaQueue=this._areas=null;this._focusNodes=[];this._queueIdx=-1;this.inherited(arguments)},registerArea:function(e){if(e&&e.name&&typeof e.priority=="number"){var d=this._tabQueue,c=function(b){e[b]=e[b]?l.hitch(e.scope||
e,e[b]):function(){return!0}};this._areas[e.name]&&this.removeArea(e.name);c("doFocus");c("doBlur");c("onFocus");c("onBlur");e.connects=e.connects||[];this._areas[e.name]=e;c=g.biSearch(d,function(b){return b.p-e.priority});d[c]&&d[c].p===e.priority?(d[c].stack.unshift(e.name),this._focusNodes[c]=e.focusNode||this._focusNodes[c]):(d.splice(c,0,{p:e.priority,stack:[e.name]}),this._focusNodes.splice(c,0,e.focusNode))}},focusArea:function(e,d){var c=this._areas[e];if(c){var b=this._areas[this.currentArea()];
if(b&&b.name===e)return d&&b.doFocus(),!0;else if(!b||b.doBlur()){if(b)this.onBlurArea(b.name);if(c.doFocus())return this.onFocusArea(c.name),this._updateCurrentArea(c),!0;this._updateCurrentArea()}}return!1},currentArea:function(){var e=this._tabQueue[this._queueIdx];return e?e.stack[this._stackIdx]:""},tab:function(e,d){var c=this._areas,b=c[this.currentArea()];if(!e)return b?b.name:"";var a=this._queueIdx+e,f=e>0?1:-1,k=this._tabQueue;if(b){var g=b.doBlur(d,e),i=c[g];if(g)this.onBlurArea(b.name);
if(i&&i.doFocus(d,e))return this.onFocusArea(i.name),this._updateCurrentArea(i),i.name;else if(!g)return b.name}for(;a>=0&&a<k.length;a+=f){g=k[a].stack;for(b=0;b<g.length;++b)if(i=g[b],c[i].doFocus(d,e))return this.onFocusArea(i),this._queueIdx=a,this._stackIdx=b,i}this._tabingOut=1;e<0?(this._queueIdx=-1,this.grid.domNode.focus()):(this._queueIdx=k.length,this.grid.lastFocusNode.focus());return""},removeArea:function(e){var d=this._areas[e];if(d){this.currentArea()===e&&this._updateCurrentArea();
var c=g.biSearch(this._tabQueue,function(a){return a.p-d.priority}),b,a=this._tabQueue[c].stack;for(b=a.length-1;b>=0;--b)if(a[b]===d.name){a.splice(b,1);break}a.length||(this._tabQueue.splice(c,1),this._focusNodes.splice(c,1));m.forEach(d.connects,o.disconnect);delete this._areas[e];return!0}return!1},onFocusArea:function(){},onBlurArea:function(){},_queueIdx:-1,_stackIdx:0,_onTabDown:function(e){e.keyCode===i.TAB&&this.tab(e.shiftKey?-1:1,e)},_onMouseDown:function(e){var d,c,b,a;c=this.grid.domNode;
b=e.target;for(var f=this._areas[this.currentArea()];b&&b!==c;){d=m.indexOf(this._focusNodes,b);if(d>=0){b=this._tabQueue[d].stack;for(c=0;c<b.length;++c)if(a=this._areas[b[c]],a.onFocus(e)){f&&f.name!==a.name&&(f.onBlur(e),this.onBlurArea(f.name));this.onFocusArea(a.name);this._queueIdx=d;this._stackIdx=c;break}return}b=b.parentNode}b==c&&f&&this._doBlur(e,f);(!b||b==c)&&g.stopEvent(e)},_focus:function(e){if(this._tabingOut)this._tabingOut=0;else if(e.target==this.grid.domNode)this._queueIdx=-1,
this.tab(1);else if(e.target===this.grid.lastFocusNode)this._queueIdx=this._tabQueue.length,this.tab(-1)},_doBlur:function(e,d){!d&&this.currentArea()&&(d=this._areas[this.currentArea()]);d&&(d.onBlur(e),this.onBlurArea(d.name),this._updateCurrentArea())},_updateCurrentArea:function(e){var d=this._tabQueue;if(e){var c=this._queueIdx=g.biSearch(d,function(b){return b.p-e.priority});this._stackIdx=m.indexOf(d[c].stack,e.name)}else this._queueIdx=null,this._stackIdx=0}}))})},"gridx/core/model/cache/Async":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","dojo/DeferredList","./_Cache"],function(n,m,o,l,i,f){function g(b,a){if(!a.length||!b.length)return b;var c=[],d=0,e,f=[];e=function(a,b){var d,e;for(d=a.length-1;d>=0;--d){e=a[d];var f=e.start,k=b;c[f]=c[f]||0;c[f]+=k;e.count&&(e=e.start+e.count,f=-b,c[e]=c[e]||0,c[e]+=f)}};e(b,1);e(a,2);for(var g=0,i=c.length;g<i;++g)if(c[g])if(d+=c[g],d===1)f.push({start:g});else{if(d===3)f._overlap=!0;if((e=f[f.length-1])&&!e.count)e.count=g-e.start}return f}
function e(b){for(var a=[],c=b.range,d,e,f,g,i,l;c.length>0;){i=f=c.pop();l=0;for(d=c.length-1;d>=0;--d){g=c[d];f.start<g.start&&(e=g,g=f,f=e);if(g.count)if(f.start<=g.start+g.count)if(f.count&&f.start+f.count>g.start+g.count)g.count=f.start+f.count-g.start;else{if(!f.count)g.count=null}else{f=i;continue}c[d]=g;l=1;break}l||a.push(i)}b.range=a;return b}function d(b,a){var c=b.range,d=[],e,f;for(c.sort(function(a,b){return a.start-b.start});c.length;){e=c.shift();if(c.length)if(f=c[0],f.count&&f.count+
f.start-e.start<=a){f.count=f.count+f.start-e.start;f.start=e.start;continue}else if(!f.count&&f.start-e.start<a){f.start=e.start;continue}d.push(e)}b.range=d;return b}var c=o.hitch;return n(f,{isAsync:!0,constructor:function(b,a){var c=a.cacheSize,d=a.pageSize;this.cacheSize=typeof c=="number"&&!isNaN(c)?c:-1;this.pageSize=typeof d=="number"&&!isNaN(d)&&d>0?d:100},prepare:function(){},when:function(b,a){var d=b._def=new l,e=this,f=c(d,d.errback),g=function(a){e._requests.pop();f(a)};e._fetchById(b).then(function(b){e._fetchByIndex(b).then(function(b){e._fetchByParentId(b).then(function(b){l.when(b._req,
c(e,"_finish",b,a,d))},g)},g)},f);return d},keep:function(b){var a=this._kept;if(this._cache[b]&&this._struct[b])return a[b]||(a[b]=1,++this._keptSize),!0;return!1},free:function(b){b===void 0?(this._kept={},this._keptSize=0):this._kept[b]&&(delete this._kept[b],--this._keptSize)},clear:function(){this._requests&&this._requests.length?this._clearLock=!0:(this.inherited(arguments),this._requests=[],this._priority=[],this._kept={},this._keptSize=0)},_finish:function(b,a,c){var d;if(a)try{a()}catch(e){d=
e}this._requests.shift();d?c.errback(d):c.callback()},_findMissingIds:function(b){var a=this._cache;return m.filter(b,function(b){return!a[b]})},_searchRootLevel:function(b){var a=this,d,e=new l,f=c(e,e.errback),g=a._struct[""],i=[];d=1;for(len=g.length;d<len;++d)g[d]===void 0&&i.push({start:d-1,count:1});i.push({start:g.length-2<0?0:g.length-2});var m=function(){i.length?a._storeFetch(i.shift()).then(function(){b=a._findMissingIds(b);b.length?m():e.callback(b)},f):e.callback(b)};m();return e},_searchChildLevel:function(b){var a=
this,d=new l,e=c(d,d.errback),f=a._struct[""].slice(1),g=function(){if(f.length){var c=f.shift();a._loadChildren(c).then(function(){[].push.apply(f,a._struct[c].slice(1));b=a._findMissingIds(b);b.length?g():d.callback(b)},e)}else d.callback(b)};g();return d},_fetchById:function(b){var a=this,d=new l,e,f,g=c(d,d.errback),i=b.range,m=a.store.getChildren;b.pids=[];if(m)for(e=i.length-1;e>=0;--e)if(f=i[e],f=f.parentId)b.id.push(f),b.pids.push(f),i.splice(e,1);var n=a._findMissingIds(b.id),o=[];if(n.length){e=
0;for(f=n.length;e<f;++e){var v=n[v],t=a.idToIndex(v);t>=0?a.treePath(v).pop()?o.push(v):i.push({start:t,count:1}):o.push(v)}a._searchRootLevel(o).then(function(c){c.length&&m?a._searchChildLevel(c).then(function(a){a.length&&console.warn("Requested row ids are not found: ",a);d.callback(b)},g):d.callback(b)},g)}else d.callback(b);return d},_fetchByParentId:function(b){for(var a=0,d=new l,e=[],f=b.pids.length;a<f;++a)e.push(this._loadChildren(b.pids[a]));(new i(e)).then(c(d,d.callback,b),c(d,d.errback));
return d},_fetchByIndex:function(b){var a=new l,b=d(this._mergePendingRequests(this._findMissingIndexes(e(b))),this.pageSize);if(b.range.length)for(var f=b.range.length,g=function(){--f||a.callback(b)},i=0,m=f;i<m;++i)this._storeFetch(b.range[i]).then(g,c(a,a.errback));else a.callback(b);return a},_findMissingIndexes:function(b){var a,c,d,e,f,g=[],i=this._struct[""],l=this._size[""];for(a=b.range.length-1;a>=0;--a){d=b.range[a];e=d.count?d.start+d.count:i.length-1;f=1;for(c=d.start;c<e;++c){var m=
i[c+1];m===void 0||!this._cache[m]?(f?g.push({start:c,count:1}):++g[g.length-1].count,f=0):f=1}d.count||(f?(l<0||c<l)&&g.push({start:c}):delete g[g.length-1].count)}b.range=g;return b},_mergePendingRequests:function(b){var a,c,d=[],e=this._requests;for(a=e.length-1;a>=0;--a)c=e[a],b.range=g(b.range,c.range),b.range._overlap&&d.push(c._def);b._req=d.length&&new i(d);e.push(b);return b},_checkSize:function(){var b,a=this.cacheSize,c=this._priority;if(this._clearLock)delete this._clearLock,this.clear();
else if(a>=0)for(a+=this._keptSize;c.length>a;)b=c.shift(),this._kept[b]?c.push(b):delete this._cache[b]}})})},"gridx/core/Column":function(){define(["dojo/_base/declare"],function(n){return n([],{constructor:function(m,n){this.grid=m;this.model=m.model;this.id=n},index:function(){var m=this.grid._columnsById[this.id];return m?m.index:-1},cell:function(m,n){return this.grid.cell(m,this,n)},name:function(){return this.grid._columnsById[this.id].name||""},setName:function(m){this.grid._columnsById[this.id].name=
m;return this},field:function(){return this.grid._columnsById[this.id].field||null},getWidth:function(){return this.grid._columnsById[this.id].width}})})},"gridx/core/model/_Extension":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/_base/array"],function(n,m,o){return n([],{constructor:function(l){var i=this.inner=l._model;this._cnnts=[];this.model=l;l._model=this;i&&(this.connect(i,"onDelete","_onDelete"),this.connect(i,"onNew","_onNew"),this.connect(i,"onSet","_onSet"),this.connect(i,
"onSizeChange","_onSizeChange"))},destroy:function(){o.forEach(this._cnnts,m.disconnect)},connect:function(l,i,f,g){l=m.connect(l,i,g||this,f);this._cnnts.push(l);return l},_onNew:function(){this.onNew.apply(this,arguments)},_onSet:function(){this.onSet.apply(this,arguments)},_onDelete:function(){this.onDelete.apply(this,arguments)},_onSizeChange:function(){this.onSizeChange.apply(this,arguments)},onNew:function(){},onDelete:function(){},onSet:function(){},onSizeChange:function(){},_call:function(l,
i){var f=this[l],g=this.inner;return f?f.apply(this,i||[]):g&&g._call(l,i)},_mixinAPI:function(){var l,i=this.model,f=arguments,g=function(e){return function(){return i._model._call(e,arguments)}};for(l=f.length-1;l>=0;--l)i[f[l]]=g(f[l])}})})},"gridx/modules/dnd/_Base":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","../../core/_Module"],function(n,m,o,l){return n(l,{delay:2,enabled:!0,canRearrange:!0,copyWhenDragOut:!1,preload:function(){this.grid.dnd._dnd.register(this.name,
this)},checkArg:function(i,f){var g=this.arg(i);return g&&o.isObject(g)?m.some(f,function(e){return g[e]}):g}})})},"gridx/modules/move/Column":function(){define(["dojo/_base/declare","../../core/_Module"],function(n,m){return m.register(n(m,{name:"moveColumn",getAPIPath:function(){return{move:{column:this}}},columnMixin:{moveTo:function(m,l){this.grid.move.column.moveRange(this.index(),1,m,l);return this}},move:function(m,l,i){typeof m==="number"&&(m=[m]);var f=[],g,e,d=this.grid._columns,c,b=[];
g=0;for(e=m.length;g<e;++g)f[m[g]]=!0;for(g=f.length-1;g>=0;--g)f[g]&&(b.unshift(d[g]),d.splice(g,1));g=0;for(e=d.length;g<e;++g)if(d[g].index>=l){c=g;break}if(c===void 0)c=d.length;this._moveComplete(b,c,i)},moveRange:function(m,l,i,f){if(i<m||i>m+l)i>m+l&&(i-=l),this._moveComplete(this.grid._columns.splice(m,l),i,f)},onMoved:function(){},_moveComplete:function(m,l,i){var f=this.grid,g={},e,d=f._columns;for(e=m.length-1;e>=0;--e)g[m[e].index]=l+e;d.splice.apply(d,[l,0].concat(m));for(e=d.length-
1;e>=0;--e)d[e].index=e;i||(f.header.refresh(),f.body.refresh(),this.onMoved(g))}}))})},"gridx/modules/extendedSelect/Column":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/query","dojo/_base/lang","dojo/_base/sniff","dojo/dom-class","dojo/mouse","dojo/keys","../../core/_Module","./_Base"],function(n,m,o,l,i,f,g,e,d,c){return d.register(n(c,{name:"selectColumn",columnMixin:{select:function(){this.grid.select.column.selectById(this.id);return this},deselect:function(){this.grid.select.column.deselectById(this.id);
return this},isSelected:function(){return this.grid._columnsById[this.id]._selected}},getSelected:function(){return m.map(m.filter(this.grid._columns,function(b){return b._selected}),function(b){return b.id})},clear:function(b){o(".gridxColumnSelected",this.grid.domNode).forEach(function(a){f.remove(a,"gridxColumnSelected")});m.forEach(this.grid._columns,function(a){a._selected=0});b||this._onSelectionChange()},isSelected:function(){var b=this.grid._columnsById;return m.every(arguments,function(a){return(a=
b[a])&&a._selected})},_type:"column",_markById:function(b,a){m.forEach(b,function(b){if(b=this.grid._columnsById[b])b._selected=a,this._doHighlight({column:b.index},a)},this)},_markByIndex:function(b,a){var c,d,e=this.grid._columns;for(c=0;c<b.length;++c){var f=b[c];if(l.isArrayLike(f)){var g=f[0],f=f[1];if(g>=0&&g<Infinity)for(f>=g&&f<Infinity||(f=e.length-1);g<f+1;++g)if(d=e[g])d._selected=a,this._doHighlight({column:d.index},a)}else if(f>=0&&f<Infinity&&(d=e[f]))d._selected=a,this._doHighlight({column:f},
a)}},_init:function(){var b=this,a=b.grid;b.batchConnect([a,"onHeaderCellMouseDown",function(a){g.isLeft(a)&&!f.contains(a.target,"gridxArrowButtonNode")&&b._start({column:a.columnIndex},a.ctrlKey,a.shiftKey)}],[a,"onHeaderCellMouseOver",function(a){b._highlight({column:a.columnIndex})}],[a,"onCellMouseOver",function(a){b._highlight({column:a.columnIndex})}],[a,i("ff")<4?"onHeaderCellKeyUp":"onHeaderCellKeyDown",function(a){if((a.keyCode==e.SPACE||a.keyCode==e.ENTER)&&!f.contains(a.target,"gridxArrowButtonNode"))b._start({column:a.columnIndex},
a.ctrlKey,a.shiftKey),b._end()}],[a.header,"onMoveToHeaderCell","_onMoveToHeaderCell"])},_onRender:function(b,a){var c,d,e=b+a;c=this.grid;var g=c.bodyNode,i,l=m.filter(c._columns,function(a){return a._selected});for(c=l.length-1;c>=0;--c)for(d=b;d<e;++d)i=o(['[visualindex="',d,'"] [colid="',l[c].id,'"]'].join(""),g)[0],f.add(i,"gridxColumnSelected")},_onMoveToHeaderCell:function(b,a){if(a.shiftKey&&(a.keyCode==e.LEFT_ARROW||a.keyCode==e.RIGHT_ARROW))this._start({column:this.grid._columnsById[b].index},
a.ctrlKey,1),this._end()},_isSelected:function(b){var b=this.grid._columns[b.column],a=b.id;return this._isRange?m.indexOf(this._refSelectedIds,a)>=0:b._selected},_beginAutoScroll:function(){var b=this.grid.autoScroll;this._autoScrollV=b.vertical;b.vertical=!1},_endAutoScroll:function(){this.grid.autoScroll.vertical=this._autoScrollV},_doHighlight:function(b,a){o('[colid="'+this.grid._columns[b.column].id+'"].gridxCell',this.grid.domNode).forEach(function(b){f.toggle(b,"gridxColumnSelected",a)})},
_focus:function(b){var a=this.grid;a.focus&&a.header._focusNode(o('[colid="'+a._columns[b.column].id+'"].gridxCell',a.header.domNode)[0])},_addToSelected:function(b,a,c){var d=this.grid,e;if(!this._isRange)this._refSelectedIds=this.getSelected();if(this._isRange&&this._inRange(a.column,b.column,this._lastEndItem.column)){b=Math.min(a.column,this._lastEndItem.column);for(a=Math.max(a.column,this._lastEndItem.column);b<=a;++b)d._columns[b]._selected=m.indexOf(this._refSelectedIds,d._columns[b].id)>=
0}else{e=Math.min(b.column,a.column);a=Math.max(b.column,a.column);for(b=e;b<=a;++b)d._columns[b]._selected=c}}}))})},"url:gridx/templates/Grid.html":'<div class="gridx" role="grid" tabindex="0"\r\n\t><div class="gridxHeader" role="presentation" data-dojo-attach-point="headerNode"></div\r\n\t><div class="gridxMain" role="presentation" data-dojo-attach-point="mainNode"\r\n\t\t><div class="gridxBodyEmpty" data-dojo-attach-point="emptyNode"></div\r\n\t\t><div class="gridxBody" role="presentation" data-dojo-attach-point="bodyNode"></div\r\n\t\t><div class="gridxVScroller" data-dojo-attach-point="vScrollerNode"\r\n\t\t\t><div style=\'width: 1px;\'></div\r\n\t\t></div\r\n\t></div\r\n\t><div class="gridxFooter" data-dojo-attach-point="footerNode"\r\n\t\t><div class="gridxHScroller"\r\n\t\t\t><div class="gridxHScrollerInner" data-dojo-attach-point="hScrollerNode"><div style="width:1px; height: 1px;"></div></div\r\n\t\t></div\r\n\t></div\r\n\t><span data-dojo-attach-point="lastFocusNode" tabindex="0"></span\r\n></div>\r\n',
"gridx/core/model/extensions/FormatSort":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/data/util/sorter","../_Extension"],function(n,m,o,l,i){function f(e,d,c,b){return function(a,f){return d*c(b.getValue(a,e),b.getValue(f,e))}}function g(e,d,c,b,a,f){var g={};return function(e,i){var l=b.getIdentity(e),m=b.getIdentity(i);g[l]||(g[l]=f(a._itemToObject(e)));g[m]||(g[m]=f(a._itemToObject(i)));return d*c(g[l],g[m])}}return n(i,{name:"formatSort",priority:50,constructor:function(e){var a;
a=this.cache=e._cache,e=a;this.connect(e,"onBeforeFetch","_onBeforeFetch");this.connect(e,"onAfterFetch","_onAfterFetch")},_onBeforeFetch:function(){this._oldCreateSortFunction=l.createSortFunction;l.createSortFunction=o.hitch(this,this._createComparator)},_onAfterFetch:function(){if(this._oldCreateSortFunction)l.createSortFunction=this._oldCreateSortFunction,delete this._oldCreateSortFunction},_createComparator:function(e,d){var c=[],b=this.cache,a=d.comparatorMap,h=l.basicComparator;m.forEach(e,
function(e){var i=e.attribute,l=e.descending?-1:1,m=h,e=b.columns&&b.columns[e.colId];a&&(typeof i!=="string"&&i.toString&&(i=i.toString()),m=a[i]||h);if(e&&e.comparator)m=e.comparator;e=e&&e.sortFormatted&&e.formatter;c.push(e?g(i,l,m,d,b,e):f(i,l,m,d))});return function(a,b){var d,e,f=0;d=0;for(e=c.length;!f&&d<e;++d)f=c[d](a,b);return f}}})})},"gridx/modules/RowLock":function(){define(["dojo/_base/kernel","dojo/_base/lang","../core/_Module","dojo/_base/declare","dojo/_base/array","dojo/_base/html",
"dojo/query"],function(n,m,o,l,i,f){return o.register(l(o,{name:"rowLock",required:["vLayout"],forced:["hLayout","vScroller"],count:0,getAPIPath:function(){return{rowLock:this}},load:function(f,e){this.count=this.arg("count");var d=this,c=this.grid;e.then(function(){d.connect(c.vScrollerNode,"onscroll",function(){d._updatePosition()});d.loaded.callback()})},lock:function(g){this.unlock();this.count=g;this._foreachLockedRows(function(e){e.style.position="absolute";f.addClass(e,"gridxLockedRow")});
this._adjustBody();this._updatePosition()},unlock:function(){this._foreachLockedRows(function(g){g.style.position="static";f.removeClass(g,"gridxLockedRow")});this.grid.bodyNode.style.paddingTop="0px";this.count=0},_adjustBody:function(){var f=0;this._foreachLockedRows(function(e){f+=e.offsetHeight});this.grid.bodyNode.style.paddingTop=f+"px"},_updatePosition:function(){if(this.count){var f=this.grid.bodyNode.scrollTop,e=0;this._foreachLockedRows(function(d){d.style.top=f+e+"px";e+=d.offsetHeight})}},
_foreachLockedRows:function(f){for(var e=this.grid.bodyNode.childNodes,d=0;d<this.count;d++)f(e[d])}}))})},"gridx/nls/Body":function(){define({root:{emptyInfo:"No items to display"}})},"gridx/modules/VirtualVScroller":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/sniff","dojo/_base/event","dojo/_base/Deferred","dojo/query","./VScroller","../core/_Module"],function(n,m,o,l,i,f,g,e,d){return d.register(n(e,{constructor:function(c,b){c.autoHeight?m.mixin(this,
new e(c,b)):this._scrolls=[]},buffSize:5,lazy:!1,lazyTimeout:50,scrollToRow:function(c,b){var a=new f,d=this,e=d._scrolls,g=function(){d._subScrollToRow(c,a,b)};e.push(a);e.length>1?e[e.length-2].then(g):g();return a},_subScrollToRow:function(c,b,a){var d=this,e=0,f=d._avgRowHeight,i=d.grid.bodyNode,l=d.domNode,e=i.scrollTop,m=l.scrollTop,n=g('[visualindex="'+c+'"]',i)[0],u=function(a){d._scrolls.splice(o.indexOf(d._scrolls,b),1);b.callback(a)};if(n)if(f=n.offsetTop,f+n.offsetHeight>e+i.clientHeight)e=
f-e,a||(e+=n.offsetHeight-i.clientHeight);else if(f<e||a&&f>e)e=f-e;else{u(!0);return}else if(i.childNodes.length){for(n=i.firstChild;n&&n.offsetTop<e;)n=n.nextSibling;var v=n&&n.getAttribute("visualindex");if(n&&c<v)e=(c-v)*f;else{for(n=i.lastChild;n&&n.offsetTop+n.offsetHeight>e+i.clientHeight;)n=n.previousSibling;v=n&&n.getAttribute("visualindex");if(n&&c>v)e=(c-v)*f;else{u(!1);return}}}else{u(!1);return}f=m===0&&e<0;m=m>=l.scrollHeight-l.offsetHeight&&e>0;f||m?d._doVirtualScroll(1):l.scrollTop+=
e/d._ratio;f&&i.firstChild.getAttribute("visualindex")==0||m&&i.lastChild.getAttribute("visualindex")==d.grid.body.visualCount-1?u(!1):setTimeout(function(){d._subScrollToRow(c,b,a)},5)},_init:function(){var c=this;c._rowHeight={};c._syncHeight();c.connect(c.grid,"_onResizeEnd",function(){c._doScroll(0,1)});c._doScroll(0,1)},_doVirtualScroll:function(c){var b=this.domNode,a=b.scrollTop,d=this._ratio*(a-(this._lastScrollTop||0));if(c||d){this._lastScrollTop=a;var e=this.arg("buffSize"),c=b.scrollHeight-
b.offsetHeight,f=this.grid.body,i=f.visualStart,l=i+f.visualCount,m=this.grid.bodyNode,n=m.firstChild,o=n&&n.offsetTop-d,v=m.lastChild,t=v&&v.offsetTop-d+v.offsetHeight,z=m.scrollTop,C=z+m.clientHeight,y=this._avgRowHeight,b=Math.ceil(b.offsetHeight/y)+2*e,B,A,D;if(n&&o>z&&o<C)A=f.renderStart,D=Math.ceil((o-z)/y)+e,B=a===0?i:Math.max(A-D,i),D="top";else if(v&&t>z&&t<C)B=f.renderStart+f.renderCount,D=Math.ceil((C-t)/y)+e,A=a===c?l:Math.min(B+D,l),D="bottom";else if(!n||o>C||!v||t<z)a<c/2?(B=a===0?
i:i+Math.max(Math.floor(a/y)-e,0),A=Math.min(B+b,l)):(A=a===c?l:l+Math.min(b-Math.floor((c-a)/y),0),B=Math.max(A-b,i)),D="clear";else if(n)a===0?(l=f.renderStart,l>i&&(B=i,A=l,D="top")):a===c&&(i=f.renderStart+f.renderCount-1,i<l-1&&(B=i+1,A=l,D="bottom"));typeof B=="number"&&typeof A=="number"&&(f.renderRows(B,A-B,D),a&&B<A&&(B=g('[visualindex="'+A+'"]',m)[0])&&(d+=B.offsetTop));a===0?m.scrollTop=0:a>=c?m.scrollTop=m.scrollHeight:D!="clear"&&(m.scrollTop+=d)}},_doScroll:function(c,b){this.arg("lazy")?
(this._lazyScrollHandle&&clearTimeout(this._lazyScrollHandle),this._lazyScrollHandle=setTimeout(m.hitch(this,this._doVirtualScroll,b),this.arg("lazyTimeout"))):this._doVirtualScroll(b)},_onMouseWheel:function(c){this.domNode.scrollTop-=(typeof c.wheelDelta==="number"?c.wheelDelta/3:-40*c.detail)/this._ratio;i.stop(c)},_onBodyChange:function(){this._doScroll(0,1);this._doVirtual()},_onForcedScroll:function(){this._onBodyChange()},_avgRowHeight:24,_rowHeight:null,_ratio:1,_syncHeight:function(){var c=
this._avgRowHeight*this.grid.body.visualCount,b=1342177;l("ff")?b=17895697:l("webkit")&&(b=134217726);if(c>b)this._ratio=c/b,c=b;this.stubNode.style.height=c+"px"},_doVirtual:function(){var c=this;clearTimeout(c._pVirtual);c._pVirtual=setTimeout(function(){c._update()},100)},_update:function(){var c=0,b=0,a=this.grid,d=a.body,a=a.bodyNode,e=this.buffSize*this._avgRowHeight,f=a.scrollTop,g=f-e,i=f+a.clientHeight+e,l=this._rowHeight;o.forEach(a.childNodes,function(a){l[a.getAttribute("rowid")]=a.offsetHeight;
a.offsetTop>i?++b:a.offsetTop+a.offsetHeight<g&&++c});d.unrenderRows(c);d.unrenderRows(b,"post");var m,a=d=0;for(m in l)d+=l[m],++a;if(a)this._avgRowHeight=d/a,this._syncHeight()}}))})},"gridx/modules/TitleBar":function(){define(["dojo/_base/declare","dojo/dom-construct","../core/_Module"],function(n,m,o){return o.register(n(o,{name:"titleBar",getAPIPath:function(){return{titleBar:this}},constructor:function(){this.domNode=m.create("div",{"class":"gridxTitleBar",innerHTML:this.arg("label")})},preload:function(){this.grid.vLayout.register(this,
"domNode","headerNode",-15)},destroy:function(){this.inherited(arguments);m.destroy(this.domNode)},label:"",setLabel:function(l){this.domNode.innerHTML=this.label=l}}))})},"gridx/modules/CellWidget":function(){define(["dojo/_base/declare","dojo/_base/query","dojo/_base/event","dojo/_base/sniff","dojo/dom-class","dojo/keys","dijit/registry","dijit/a11y","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","../core/_Module"],function(n,m,o,l,i,f,g,e,d,c,b,a){var h=function(){return""},
k=n([d,c,b],{content:"",setCellValue:null,postMixInProperties:function(){this.templateString=['<div class="gridxCellWidget">',this.content,"</div>"].join("")},setValue:function(a,b){m(".gridxHasGridCellValue",this.domNode).map(function(a){return g.byNode(a)}).forEach(function(c){if(c){var d=i.contains(c.domNode,"gridxUseStoreData");c.set("value",d?b:a)}});this.setCellValue&&this.setCellValue(a,b,this)}});a._markupAttrs.push("!widgetsInCell","!setCellValue");return a.register(n(a,{name:"cellWidget",
getAPIPath:function(){return{cellWidget:this}},constructor:function(){this._decorators={};var a,b,c=this.grid._columns;for(a=c.length-1;a>=0;--a)if(b=c[a],b.decorator&&b.widgetsInCell)b.userDecorator=b.decorator,b.decorator=h,b._cellWidgets={},b._backupWidgets=[]},preload:function(){var a=this.grid.body;this.batchConnect([a,"onAfterRow","_showDijits"],[a,"onAfterCell","_showDijit"],[a,"onUnrender","_onUnrenderRow"]);this._initFocus()},destory:function(){this.inherited(arguments);var a,b,c,d,e=this.grid._columns;
for(a=e.length-1;a>=0;--a)if(c=e[a],d=c._cellWidgets){for(b in d)d[b].destroyRecursive();delete c._cellWidgets}},backupCount:20,setCellDecorator:function(a,b,c,d){var e=this._decorators[a];e||(e=this._decorators[a]={});(a=e[b])||(a=e[b]={});a.decorator=c;a.setCellValue=d;a.widget=null},restoreCellDecorator:function(a,b){var c=this._decorators[a];if(c){var d=c[b];if(d&&d.widget){var e=d.widget.domNode.parentNode;if(e)e.innerHTML=null;window.setTimeout(function(){d.widget.destroyRecursive();d.widget=
null;d.decorator=null;d.setCellValue=null},100)}delete c[b]}},getCellWidget:function(a,b){var c=this.grid.body.getCellNode({rowId:a,colId:b});if(c&&(c=m(".gridxCellWidget",c)[0]))return g.byNode(c);return null},onCellWidgetCreated:function(){},_showDijits:function(a,b){var c=m('[rowid="'+a.rowId+'"]',this.grid.bodyNode)[0],d,e,f,g=this.grid._columns;for(d=g.length-1;d>=0;--d)if(e=g[d],e.userDecorator||this._getSpecialCellDec(a.rowId,e.id))if(f=m('[colid="'+e.id+'"]',c)[0]){e=this._getCellWidget(e,
a,b);if(l("ie"))for(;f.childNodes.length;)f.removeChild(f.firstChild);else f.innerHTML="";e.placeAt(f);e.startup()}},_showDijit:function(a,b,c,d){if(c.userDecorator||this._getSpecialCellDec(b.rowId,c.id))cellWidget=this._getCellWidget(c,b,d),a.innerHTML="",cellWidget.placeAt(a),cellWidget.startup()},_getCellWidget:function(a,b,c){var d=this._getSpecialWidget(a,b,c),e=c.data[a.id],c=c.rawData[a.field];d||(d=a._backupWidgets.pop(),d||(d=new k({content:a.userDecorator(),setCellValue:a.setCellValue}),
this.onCellWidgetCreated(d,a)),a._cellWidgets[b.rowId]=d);d.setValue(e,c);return d},_onUnrenderRow:function(a){for(var b=this.grid._columns,c=this.arg("backupCount"),d=function(a,b){var d=a._cellWidgets[b];a._backupWidgets.length<c?a._backupWidgets.push(d):d.destroyRecursive()},e=0,f=b.length;e<f;++e){var g=b[e],h=g._cellWidgets;if(h)if(a&&h[a])d(g,a),delete h[a];else{for(var i in h)d(g,i);g._cellWidgets={}}}},_getSpecialCellDec:function(a,b){var c=this._decorators[a];return c&&c[b]},_getSpecialWidget:function(a,
b,c){var d=this._decorators[b.rowId];if(d&&(d=d[a.id])){if(!d.widget&&d.decorator)d.widget=new k({content:d.decorator(c.data[a.id],b.rowId,b.rowIndex),setCellValue:d.setCellValue});return d.widget}return null},_initFocus:function(){var a=this.grid.focus;a&&a.registerArea({name:"celldijit",priority:1,scope:this,doFocus:this._doFocus,doBlur:this._doBlur,onFocus:this._onFocus,onBlur:this._endNavigate,connects:[this.connect(this.grid,"onCellKeyPress","_onKey")]})},_doFocus:function(a,b){if(this._navigating){var c=
this._navElems,d=function(){var a=b<0?c.highest||c.last:c.lowest||c.first;a&&a.focus()};l("webkit")?d():setTimeout(d,5);return!0}return!1},_doBlur:function(a,b){if(a){var c=this,d=c.model,e=c.grid,f=e.body,g=c._navElems,h=g.lowest||g.first,g=g.last||g.highest||h;if((l("ie")?a.srcElement:a.target)==(b>0?g:h))o.stop(a),d.when({id:c._focusRowId},function(){var a=f.getRowInfo({parentId:d.treePath(c._focusRowId).pop(),rowIndex:d.idToIndex(c._focusRowId)}).visualIndex;f._nextCell(a,e._columnsById[c._focusColId].index,
b>0?1:-1,function(a,b){return c._isNavigable(e._columns[b].id)}).then(function(a){c._focusColId=e._columns[a.c].id;var g=f.getRowInfo({visualIndex:a.r});c._focusRowId=d.indexToId(g.rowIndex,g.parentId);f._focusCellCol=a.c;f._focusCellRow=a.r;c._beginNavigate(c._focusRowId,c._focusColId);c._doFocus(null,b)})});return!1}else return c._navigating=!1,!0},_isNavigable:function(a){return(a=this.grid._columnsById[a])&&a.navigable&&a.decorator},_beginNavigate:function(a,b){if(this._isNavigable(b))return this._navigating=
!0,this._focusColId=b,this._focusRowId=a,this._navElems=e._getTabNavigable(this.grid.body.getCellNode({rowId:a,colId:b})),!0;return!1},_endNavigate:function(){this._navigating=!1},_onFocus:function(a){for(var a=a.target,b=this.grid.domNode;a&&a!==b&&!i.contains(a,"gridxCell");)a=a.parentNode;if(a&&a!==b){for(b=a.getAttribute("colid");a&&!i.contains(a,"gridxRow");)a=a.parentNode;if(a)return this._beginNavigate(a.getAttribute("rowid"),b)}return!1},_onKey:function(a){var b=this.grid.focus;if(a.keyCode==
f.F2&&!this._navigating&&b.currentArea()=="body")this._beginNavigate(a.rowId,a.columnId)&&(o.stop(a),b.focusArea("celldijit"));else if(a.keyCode==f.ESCAPE&&this._navigating&&b.currentArea()=="celldijit")this._navigating=!1,b.focusArea("body")}}))})},"gridx/nls/NestedSort":function(){define({root:{singleSort:"Single Sort",nestedSort:"Nested Sort",ascending:"Click to sort Ascending",descending:"Click to sort Descending",sortingState:"${0} - ${1}",unsorted:"Do not sort this column"}})}}});
define("gridx/gridx-all",[],1);