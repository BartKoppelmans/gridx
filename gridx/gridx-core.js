//>>built
require({cache:{"gridx/core/model/_Extension":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/_base/array"],function(l,h,j){return l([],{constructor:function(e){var f=this.inner=e._model;this._cnnts=[];this.model=e;e._model=this;f&&(this.connect(f,"onDelete","_onDelete"),this.connect(f,"onNew","_onNew"),this.connect(f,"onSet","_onSet"))},destroy:function(){j.forEach(this._cnnts,h.disconnect)},connect:function(e,f,o,k){e=h.connect(e,f,k||this,o);this._cnnts.push(e);return e},_onNew:function(){this.onNew.apply(this,
arguments)},_onSet:function(){this.onSet.apply(this,arguments)},_onDelete:function(){this.onDelete.apply(this,arguments)},onNew:function(){},onDelete:function(){},onSet:function(){},_call:function(e,f){var o=this[e],k=this.inner;return o?o.apply(this,f||[]):k&&k._call(e,f)},_mixinAPI:function(){var e,f=this.model,o=arguments,k=function(g){return function(){return f._model._call(g,arguments)}};for(e=o.length-1;e>=0;--e)f[o[e]]=k(o[e])}})})},"gridx/modules/VScroller":function(){define(["dojo/_base/declare",
"dojo/_base/Deferred","dojo/_base/event","dojo/_base/sniff","dojo/_base/query","dojo/keys","dojox/html/metrics","../core/_Module"],function(l,h,j,e,f,o,k,g){return l(g,{name:"vScroller",forced:["body","vLayout","columnWidth"],optional:["pagination"],getAPIPath:function(){return{vScroller:this}},preload:function(){var d=this.grid,a=this.domNode=d.vScrollerNode;this.stubNode=a.firstChild;if(e("ie")<8)this.stubNode.style.width=k.getScrollbar().w+"px";d.autoHeight?a.style.display="none":this.domNode.style.width=
k.getScrollbar().w+"px";d.hLayout.register(null,a,1)},load:function(d,a){var c=this,b=c.grid,i=b.bodyNode;c.batchConnect([c.domNode,"onscroll","_doScroll"],[i,"onmousewheel","_onMouseWheel"],[b.mainNode,"onkeypress","_onKeyScroll"],[b.body,"onRender","_onBodyChange"],[b.body,"onForcedScroll","_onForcedScroll"],[b,"_onResizeEnd","_onBodyChange"],e("ff")&&[i,"DOMMouseScroll","_onMouseWheel"]);a.then(function(){h.when(c._init(d),function(){c.domNode.style.width="";c.loaded.callback()})})},scrollToRow:function(d,
a){var c=new h,b=this.grid.bodyNode,i=this.domNode,n=0,p=f('[visualindex="'+d+'"]',b)[0];if(p){var n=p.offsetTop,m=b.scrollTop;if(a)return i.scrollTop=n,c.callback(!0),c;else if(n<m)n-=m;else if(n+p.offsetHeight>m+b.clientHeight)n=n+p.offsetHeight-m-b.clientHeight;else return c.callback(!0),c;i.scrollTop+=n}c.callback(!!p);return c},_init:function(){this._onForcedScroll()},_doScroll:function(){this.grid.bodyNode.scrollTop=this.domNode.scrollTop},_onMouseWheel:function(d){this.grid.autoHeight||(this.domNode.scrollTop-=
typeof d.wheelDelta==="number"?d.wheelDelta/3:-40*d.detail,j.stop(d))},_onBodyChange:function(){var d=this,a=d.grid;window.setTimeout(function(){d.stubNode.style.height=a.bodyNode.scrollHeight+"px";d._doScroll();a.vScrollerNode.scrollTop=a.vScrollerNode.scrollTop||0},0)},_onForcedScroll:function(){var d=this,a=d.grid.body;return d.model.when({start:a.rootStart,count:a.rootCount},function(){a.renderRows(0,a.rootCount||d.model.size()-a.rootStart)})},_onKeyScroll:function(d){var m;var i;var a=this.grid.body,
c=this.grid.focus,b=this.domNode;if(!c||c.currentArea()=="body"){if(d.keyCode==o.HOME)a._focusCellRow=0,b.scrollTop=0;else if(d.keyCode==o.END)a._focusCellRow=a.visualCount-1,b.scrollTop=this.stubNode.clientHeight-a.domNode.offsetHeight;else if(d.keyCode==o.PAGE_UP)i=a._focusCellRow=Math.max(a.renderStart-a.renderCount,0),a=i,this.scrollToRow(a,1);else if(d.keyCode==o.PAGE_DOWN)m=a._focusCellRow=Math.min(a.visualCount-1,a.renderStart+a.renderCount),a=m,this.scrollToRow(a,1);else return;j.stop(d)}}})})},
"gridx/core/model/Model":function(){define(["require","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","dojo/DeferredList","dojo/_base/connect"],function(l,h,j,e,f,o,k){var g=e.isArrayLike,d=e.isString;return h([],{constructor:function(a){var c=a.cacheClass,c=typeof c=="string"?l(c):c;this.store=a.store;this._exts={};this._cmdQueue=[];this._model=this._cache=new c(this,a);this._createExts(a.modelExtensions||[],a);a=this._model;this._connects=[k.connect(a,"onDelete",
this,"onDelete"),k.connect(a,"onNew",this,"onNew"),k.connect(a,"onSet",this,"onSet")]},destroy:function(){j.forEach(this._connects,k.disconnect);for(var a in this._exts)this._exts[a].destroy()},when:function(){this._oldSize=this.size();this._addCmd({name:"_cmdRequest",scope:this,args:arguments,async:1});return this._exec()},scan:function(a,c){var b=new f,i=a.start||0,n=a.pageSize||this._cache.pageSize||1,d=a.count,m=d>0?i+d:Infinity,g=a.whenScope||this,k=a.whenFunc||g.when,e=function(a){b.progress(a/
(d>0?a+d:g.size()));k.call(g,{id:[],range:[{start:a,count:n}]},function(){var b,i,d=[];for(b=a;b<a+n&&b<m;++b)if(i=g.byIndex(b))d.push(i);else{m=-1;break}if(c(d,a)||b==m)m=-1}).then(function(){m==-1?b.callback():e(a+n)})};e(i);return b},onDelete:function(){},onNew:function(){},onSet:function(){},onSizeChange:function(){},_msg:function(){},_addCmd:function(a){var c=this._cmdQueue,b=c[c.length-1];b&&b.name==a.name&&b.scope==a.scope?b.args.push(a.args||[]):(a.args=[a.args||[]],c.push(a))},_onSizeChange:function(){var a=
this._oldSize,c=this._oldSize=this.size();if(a!=c)this.onSizeChange(c,a)},_execEvents:function(a,c){this._onSizeChange();c&&c.call(a)},_cmdRequest:function(){var a=this;return new o(j.map(arguments,function(c){var b=c[0],i=e.hitch(a,a._execEvents,c[2],c[1]);if(b===null||!c.length)return c=new f,i(),c.callback(),c;return a._model._call("when",[a._normArgs(b),i])}),0,1)},_exec:function(){var a=this,c=a._cache,b=new f,i=a._cmdQueue,n=function(b,i){a._busy=0;c.skipCacheSizeCheck=0;c._checkSize&&c._checkSize();
i?b.errback(i):b.callback()},d=function(){if(j.some(i,function(b){return b.name=="_cmdRequest"}))try{for(;i.length;){var a=i.shift(),c=a.scope[a.name].apply(a.scope,a.args);if(a.async){f.when(c,d,e.partial(n,b));return}}}catch(g){n(b,g);return}n(b)};if(a._busy)return a._busy;a._busy=b;c.skipCacheSizeCheck=1;d();return b},_createExts:function(a,c){a=j.filter(a,function(b){return(b=typeof b=="string"?l(b):b)&&b.prototype});a.sort(function(b,a){return b.prototype.priority-a.prototype.priority});for(var b=
0,i=a.length;b<i;++b)if(b==a.length-1||a[b]!=a[b+1]){var n=new a[b](this,c);this._exts[n.name]=n}},_normArgs:function(a){var c,b=[],i=[],n={range:b,id:i},p=function(b){return typeof b=="number"&&b>=0},m=function(a){if(a&&p(a.start))b.push(a);else if(p(a))b.push({start:a,count:1});else if(g(a))for(c=a.length-1;c>=0;--c)p(a[c])?b.push({start:a[c],count:1}):a[c]&&p(a[c].start)?b.push(a[c]):d(a)&&i.push(a[c]);else d(a)&&i.push(a)};if(a&&(a.index||a.range||a.id))if(m(a.index),m(a.range),g(a.id))for(c=
a.id.length-1;c>=0;--c)i.push(a.id[c]);else a.id&&i.push(a.id);else m(a);!b.length&&!i.length&&this.size()<0&&b.push({start:0,count:this._cache.pageSize||1});return n}})})},"gridx/core/_Module":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/_base/connect"],function(l,h,j,e,f){var o=h.isFunction,l=l([],{constructor:function(g,d){this.grid=g;this.model=g.model;this.loaded=new e;this._cnnts=[];this._sbscs=[];h.mixin(this,d)},destroy:function(){var g=
j.forEach;g(this._cnnts,f.disconnect);g(this._sbscs,f.unsubscribe)},arg:function(g,d,a){arguments.length==2&&o(d)&&(a=d,d=void 0);var c=this.grid,b=this[g];if(!this.hasOwnProperty(g)){var i=this.name+g.substring(0,1).toUpperCase()+g.substring(1);c[i]===void 0?d!==void 0&&(b=d):b=c[i]}this[g]=a&&!a(b)?d:b;return b},connect:function(g,d,a,c,b){var i=this.grid,n=c||this,g=g===i&&typeof d=="string"?f.connect(g,d,function(){var c=arguments;i._eventFlags[d]===b&&(o(a)?a.apply(n,c):o(n[a])&&n[a].apply(n,
c))}):f.connect(g,d,n,a);this._cnnts.push(g);return g},batchConnect:function(){for(var g=0,d=arguments,a=d.length;g<a;++g)h.isArrayLike(d[g])&&this.connect.apply(this,d[g])},subscribe:function(g,d,a){g=f.subscribe(g,a||this,d);this._sbscs.push(g);return g}}),k=l._modules={};l.register=function(g){var d=g.prototype;return k[d.name||d.declaredClass]=g};l._markupAttrs=["id","name","field","width","dataType","!formatter","!decorator","!sortable"];return l})},"gridx/modules/VLayout":function(){define(["dojo/_base/declare",
"dojo/dom-geometry","dojo/DeferredList","../core/_Module"],function(l,h,j,e){return l(e,{name:"vLayout",getAPIPath:function(){return{vLayout:this}},preload:function(){var f=this,e=f.grid;f.connect(e,"_onResizeEnd",function(k,g){var d,a=[];for(d in g)a.push(g[d]);(new j(a)).then(function(){f.reLayout()})});e.autoHeight?f.connect(e.body,"onRender","reLayout"):f.connect(e,"setColumns",function(){setTimeout(function(){f.reLayout()},0)})},load:function(f,e){var k=this;e.then(function(){k._defs&&k._mods?
(new j(k._defs)).then(function(){k._layout();k.loaded.callback()}):k.loaded.callback()})},register:function(f,e,k,g,d){this._defs=this._defs||[];this._mods=this._mods||{};this._mods[k]=this._mods[k]||[];this._defs.push(d||f.loaded);this._mods[k].push({p:g||0,mod:f,nodeName:e})},reLayout:function(){var f,e=0,k;for(f in this._mods)(k=this.grid[f])&&(e+=h.getMarginBox(k).h);this._updateHeight(e)},_layout:function(){var f,e=0,k=this._mods,g,d,a,c,b;for(f in k)if(g=this.grid[f]){a=k[f];a.sort(function(b,
a){return b.p-a.p});for(d=0;d<a.length;++d)c=a[d].mod,b=a[d].nodeName,c&&c[b]&&g.appendChild(c[b]);e+=h.getMarginBox(g).h}this._updateHeight(e)},_updateHeight:function(e){var h=this.grid,k=h.domNode,g=h.mainNode.style;h.autoHeight?h.vScroller.loaded.then(function(){var d=h.bodyNode.lastChild,d=d?d.offsetTop+d.offsetHeight:0;k.style.height=d+e+"px";g.height=d+"px"}):g.height=k.clientHeight-e+"px"}})})},"gridx/util":function(){define({stopEvent:function(l){l&&l.stopPropagation&&l.preventDefault&&(l.stopPropagation(),
l.preventDefault())},biSearch:function(l,h){var j=0,e=l.length,f;for(f=Math.floor((j+e)/2);j+1<e;f=Math.floor((j+e)/2))h(l[f])>0?e=f:j=f;return l.length&&h(l[j])>=0?j:e}})},"gridx/core/model/cache/_Cache":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","../_Extension"],function(l,h,j,e,f){var o=j.hitch,k=j.mixin,g=h.indexOf;return l(f,{constructor:function(d,a){var c=this,b=c.store=a.store,i=b.fetch;c.columns=a.columns;!i&&b.notify?c.connect(b,"notify",
function(b,a){b===void 0?c._onDelete(a):a===void 0?c._onNew(b):c._onSet(b)}):(c.connect(b,i?"onSet":"put","_onSet"),c.connect(b,i?"onNew":"add","_onNew"),c.connect(b,i?"onDelete":"remove","_onDelete"));c.clear();c._mixinAPI("byIndex","byId","indexToId","idToIndex","size","treePath","hasChildren","keep","free")},destroy:function(){this.inherited(arguments);this.clear()},clear:function(){this._filled=0;this._priority=[];this._struct={};this._cache={};this._size={};this._struct[""]=[];this._size[""]=
-1},byIndex:function(d,a){this._init("byIndex",arguments);return this._cache[this.indexToId(d,a)]},byId:function(d){this._init("byId",arguments);return this._cache[d]},indexToId:function(d,a){this._init("indexToId",arguments);var c=this._struct[a||""];return typeof d=="number"&&d>=0?c&&c[d+1]:void 0},idToIndex:function(d){this._init("idToIndex",arguments);var a=this._struct,a=g(a[a[d]&&a[d][0]]||[],d);return a>0?a-1:-1},treePath:function(d){for(var a=this._struct,c=[];d!==void 0;)c.unshift(d),d=a[d]&&
a[d][0];return c[0]!==""?[]:(c.pop(),c)},hasChildren:function(d){var a=this.store,c;this._init("hasChildren",arguments);c=this.byId(d);return a.hasChildren&&a.hasChildren(d,c&&c.item)},size:function(d){this._init("size",arguments);var a=this._size[d||""];return a>=0?a:-1},onBeforeFetch:function(){},onAfterFetch:function(){},onSetColumns:function(d){var a,c,b,i;this.columns=d;for(a in this._cache)for(b in c=this._cache[a],d)i=d[b],c.data[b]=this._formatCell(i.id,c.rawData)},_itemToObject:function(d){var a=
this.store;if(a.fetch){var c={};h.forEach(a.getAttributes(d),function(b){c[b]=a.getValue(d,b)});return c}return d},_formatCell:function(d,a){var c=this.columns[d];return c.formatter?c.formatter(a):a[c.field||d]},_formatRow:function(d){var a=this.columns,c={},b;for(b in a)c[b]=this._formatCell(b,d);return c},_addRow:function(d,a,c,b,i){var i=i||"",n=this._struct,p=this._priority,m=n[i];if(!m)throw Error("Fatal error of cache._addRow: parent item "+i+" of "+d+" is not loaded");if(m[a+1]){if(m[a+1]!==
d)throw Error("Fatal error of cache._addRow: different row id "+d+" and "+m[a+1]+" for same row index "+a);}else m[a+1]=d;n[d]=n[d]||[i];i||(a=g(p,d),a>=0&&p.splice(a,1),p.push(d));this._cache[d]={data:this._formatRow(c),rawData:c,item:b};this._filled=1},_loadChildren:function(d){var a=this,c=new e,b=a.store,i=a.byId(d),i=i&&b.getChildren&&b.getChildren(i.item)||[];e.when(i,function(i){for(var p=0,m,g=a._size[d]=i.length;p<g;++p)m=i[p],a._addRow(b.getIdentity(m),p,a._itemToObject(m),m,d);c.callback()},
o(c,c.errback));return c},_onBegin:function(d){this._size[""]=parseInt(d,10)},_onComplete:function(d,a,c){try{for(var b=0,i;i=c[b];++b)this._addRow(this.store.getIdentity(i),a+b,this._itemToObject(i),i);d.callback()}catch(n){d.errback(n)}},_storeFetch:function(d){var a=this.store,c=new e,b=k({},this.options||{},d),i=o(this,this._onBegin),d=o(this,this._onComplete,c,d.start),n=o(c,c.errback);this.onBeforeFetch();a.fetch?a.fetch(k(b,{onBegin:i,onComplete:d,onError:n})):(a=a.query(b.query,b),e.when(a.total,
i),e.when(a,d,n));c.then(o(this,this.onAfterFetch));return c},_onSet:function(d){var a=this.store.getIdentity(d),c=this.idToIndex(a),b=this.treePath(a);b.length&&this._addRow(a,c,this._itemToObject(d),d,b.pop());this.onSet(a,c,this._cache[a])},_onNew:function(d,a){var c=this.store,b=this._itemToObject(d),i=a&&a[c.fetch?"item":"parent"];i&&c.getIdentity(i);var n=this._size[""];this.clear();this.onNew(c.getIdentity(d),0,{data:this._formatRow(b),rawData:b,item:d});!i&&n>=0&&(this._size[""]=n+1,this.model._onSizeChange())},
_onDelete:function(d){var a=this.store,c=this._struct,d=a.fetch?a.getIdentity(d):d,b=this.treePath(d);if(b.length){var i,n,a=[d],p=b.pop(),m=this._size,e=m[""],f=g(c[p],d);c[p].splice(f,1);--m[p];for(i=0;i<a.length;++i)if(b=c[a[i]])for(n=b.length-1;n>0;--n)a.push(b[n]);for(i=a.length-1;i>=0;--i)n=a[i],delete this._cache[n],delete c[n],delete m[n];i=g(this._priority,d);i>=0&&this._priority.splice(i,1);this.onDelete(d,f-1);!p&&e>=0&&(m[""]=e-1,this.model._onSizeChange())}else this.onDelete(d)}})})},
"gridx/Grid":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-class","dojo/dom-geometry","dojo/_base/query","dijit/_WidgetBase","dijit/_FocusMixin","dijit/_TemplatedMixin","dojo/text!./templates/Grid.html","./core/Core","./core/_Module","./modules/Header","./modules/Body","./modules/VLayout","./modules/HLayout","./modules/VScroller","./modules/HScroller","./modules/ColumnWidth"],function(l,h,j,e,f,o,k,g,d,a,c,b,i,n,p,m,w,t,v){var s=h.forEach,q=function(){},l=
l("gridx.Grid",[k,d,g,c],{templateString:a,coreModules:[i,n,p,m,w,t,v],coreExtensions:[],postCreate:function(){this.inherited(arguments);this._eventFlags={};this.modules=this.coreModules.concat(this.modules||[]);this.modelExtensions=this.coreExtensions.concat(this.modelExtensions||[]);e.toggle(this.domNode,"gridxRtl",!this.isLeftToRight());this.lastFocusNode.setAttribute("tabIndex",this.domNode.getAttribute("tabIndex"));this._initEvents(this._compNames,this._eventNames);this._reset(this);this._postCreate()},
startup:function(){this._started||(this.inherited(arguments),this._deferStartup.callback())},destroy:function(){this._uninit();this.inherited(arguments)},resize:function(b){var a={};b&&(this.autoWidth&&delete b.w,this.autoHeight&&delete b.h,f.setMarginBox(this.domNode,b));this._onResizeBegin(b,a);this._onResizeEnd(b,a)},_onResizeBegin:function(){},_onResizeEnd:function(){},_compNames:["Cell","HeaderCell","Row","Header"],_eventNames:["Click","DblClick","MouseDown","MouseUp","MouseOver","MouseOut",
"MouseMove","ContextMenu","KeyDown","KeyPress","KeyUp"],_initEvents:function(b,a){var i=this;s(b,function(b){s(a,function(a){a="on"+b+a;i[a]=i[a]||q})})},_connectEvents:function(b,a,i){s(this._eventNames,function(c){this.connect(b,"on"+c.toLowerCase(),j.hitch(i,a,c))},this)},_isConnected:function(b){return this[b]!==q}});l.markupFactory=function(a,i,c){if(!a.structure&&i.nodeName.toLowerCase()=="table"){var n=a.structure=[];o("thead > tr > th",i).forEach(function(a){var i={};s(b._markupAttrs,function(b){b[0]==
"!"?(b=b.slice(1),i[b]=eval(a.getAttribute(b))):i[b]=a.getAttribute(b)});i.name=i.name||a.innerHTML;n.push(i)})}return new c(a,i)};return l})},"gridx/nls/Body":function(){define({root:{loadingInfo:"Loading...",emptyInfo:"No items to display",loadFailInfo:"Failed to load data!"}})},"gridx/modules/HScroller":function(){define(["dojo/_base/declare","dojo/dom-style","dojo/_base/sniff","dojo/_base/Deferred","dojox/html/metrics","../core/_Module"],function(l,h,j,e,f,o){return l(o,{name:"hScroller",forced:["header"],
getAPIPath:function(){return this.grid.autoWidth?{}:{hScroller:this}},constructor:function(){this.grid._initEvents(["H"],["Scroll"])},preload:function(){var k=this,g=k.grid,d=g.hScrollerNode;if(!g.autoWidth&&(k.domNode=d,k.container=d.parentNode,k.stubNode=d.firstChild,g.vLayout.register(k,"container","footerNode",0),d.style.display="block",k.batchConnect([g.header,"onRender","refresh"],[d,"onscroll","_onScroll"],[g,"_onResizeBegin",function(a,c){c.hScroller=new e}],[g,"_onResizeEnd",function(a,c){e.when(c.header,
function(){k.refresh();c.hScroller.callback()})}]),j("ie")))d.style.height=f.getScrollbar().h+"px"},scroll:function(e){var g=this.domNode;if((j("webkit")||j("ie")<8)&&!this.grid.isLeftToRight())e=g.scrollWidth-g.offsetWidth-e;g.scrollLeft=e},refresh:function(){var e=this.grid,g=e.isLeftToRight(),d=g?"marginLeft":"marginRight",g=g?"marginRight":"marginLeft",a=e.hLayout.lead,c=e.hLayout.tail,b=(e.domNode.clientWidth||h.get(e.domNode,"width"))-a-c,i=e.header.innerNode,n=h.get(i,"paddingLeft")||0,p=this.domNode.style,
i=i.firstChild.offsetWidth+n,m=p.display,f=i<=b?"none":"block";p[d]=a+n+"px";p[g]=c+"px";p.width=(b-n<0?0:b-n)+"px";this.stubNode.style.width=(i-n<0?0:i-n)+"px";p.display=f;m=="block"&&f=="none"&&e.vLayout.reLayout()},_lastLeft:0,_onScroll:function(){var e=this.domNode.scrollLeft;if((j("webkit")||j("ie")<8)&&!this.grid.isLeftToRight())e=this.domNode.scrollWidth-this.domNode.offsetWidth-e;if(this._lastLeft!=e)this._lastLeft=e,this._doScroll()},_doScroll:function(){var e=this.grid;e.bodyNode.scrollLeft=
this.domNode.scrollLeft;e.onHScroll(this._lastLeft)}})})},"gridx/core/model/cache/Sync":function(){define(["dojo/_base/declare","dojo/_base/Deferred","./_Cache"],function(l,h,j){return l(j,{keep:function(){},free:function(){},when:function(e,f){var j=new h;try{f&&f(),j.callback()}catch(k){j.errback(k)}return j},_init:function(){this._filled||(this._storeFetch({start:0}),this.store.getChildren&&this._fetchChildren())},_fetchChildren:function(){for(var e=this._struct,f=e[""].slice(1),j;f.length;)j=
f.shift(),h.when(this._loadChildren(j),function(){[].push.apply(f,e[j].slice(1))})}})})},"gridx/modules/HLayout":function(){define(["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/DeferredList","../core/_Module"],function(l,h,j,e,f,o,k){return l(k,{name:"hLayout",getAPIPath:function(){return{hLayout:this}},load:function(e,d){var a=this;d.then(function(){a._layout();a.loaded.callback()})},lead:0,tail:0,register:function(e,d,a){var c=this._regs=
this._regs||[];e||(e=new h,e.callback());c.push([e,d,a])},onUpdateWidth:function(){},_layout:function(){var g=this,d=g._regs;if(d){var a=0,c=0,b=j.map(d,function(b){return b[0]});(new o(b)).then(function(){j.forEach(d,function(b){var n=e.getMarginBox(b[1]).w||f.get(b[1],"width");b[2]?c+=n:a+=n});g.lead=a;g.tail=c;g.onUpdateWidth(a,c)})}else g.onUpdateWidth(0,0)}})})},"gridx/core/Cell":function(){define(["dojo/_base/declare"],function(l){return l([],{constructor:function(h,j,e){this.grid=h;this.model=
h.model;this.row=j;this.column=e},data:function(){return this.model.byId(this.row.id).data[this.column.id]},rawData:function(){var h=this.column.field();return h&&this.model.byId(this.row.id).rawData[h]},setRawData:function(h){var j={};j[this.column.field()]=h;return this.row.setRawData(j)}})})},"gridx/modules/Body":function(){define(["dojo/_base/declare","dojo/_base/query","dojo/_base/array","dojo/dom-construct","dojo/dom-class","dojo/_base/Deferred","dojo/_base/sniff","dojo/keys","../core/_Module",
"../util","dojo/i18n!../nls/Body"],function(l,h,j,e,f,o,k,g,d,a,c){return l(d,{name:"body",optional:["tree"],getAPIPath:function(){return{body:this}},preload:function(){var b=this.grid,a=this.domNode=b.bodyNode;b.emptyNode.innerHTML=this.arg("loadingInfo",c.loadingInfo);b._connectEvents(a,"_onMouseEvent",this);this._initFocus()},load:function(){var b=this,a=b.model,c=b.grid;b.batchConnect([a,"onDelete","_onDelete"],[a,"onSet","_onSet"],[a,"onSizeChange","_onSizeChange"],[c,"onRowMouseOver","_onRowMouseOver"],
[c,"onCellMouseOver","_onCellMouseOver"],[c,"onCellMouseOut","_onCellMouseOver"],[c.bodyNode,"onmouseleave",function(){var a=h(".gridxRowOver",b.domNode)[0];a&&f.remove(a,"gridxRowOver")}],[c,"setColumns",function(){b.refresh()}]);a.when({},function(){var d=b.rootCount,d=b.rootCount=d?d:a.size();b.visualCount=c.tree?c.tree.getVisualSize(b.rootStart,d):d;b.loaded.callback()}).then(null,function(a){b._loadFail(a);b.loaded.callback()})},destroy:function(){this.inherited(arguments);this.domNode.innerHTML=
""},rowMixin:{node:function(){return this.grid.body.getRowNode({rowId:this.id})},visualIndex:function(){var b=this.id;return this.grid.body.getRowInfo({rowId:b,rowIndex:this.index(),parentId:this.model.treePath(b).pop()}).visualIndex}},cellMixin:{node:function(){return this.grid.body.getCellNode({rowId:this.row.id,cellId:this.column.id})}},getRowNode:function(b){return(b=this._getRowNodeQuery(b))?h(b,this.domNode)[0]||null:null},getCellNode:function(b){var a=b.colId,c=this._getRowNodeQuery(b);if(c){if(!a&&
typeof b.colIndex=="number")a=this.grid._columns[b.colIndex].id;c+=" [colid='"+a+"'].gridxCell";return h(c,this.domNode)[0]||null}return null},getRowInfo:function(b){var a=this.model,c=this.grid,d=b.rowId;if(d)b.rowIndex=a.idToIndex(d),b.parentId=a.treePath(d).pop();if(typeof b.rowIndex=="number"&&b.rowIndex>=0)b.visualIndex=c.tree?c.tree.getVisualIndexByRowInfo(parentId,rowIndex,this.rootStart):b.rowIndex-this.rootStart;else if(typeof b.visualIndex=="number"&&b.visualIndex>=0)c.tree?(c=c.tree.getRowInfoByVisualIndex(b.visualIndex,
this.rootStart),b.rowIndex=c.start,b.parentId=c.parentId):b.rowIndex=this.rootStart+b.visualIndex;else return b;b.rowId=d||a.indexToId(b.rowIndex,b.parentId);return b},refresh:function(b){var a=this;delete a._err;return a.model.when({}).then(function(){var c=a.renderStart,d=a.renderCount;if(typeof b=="number"&&b>=0){b=c>b?c:b;var m=c+d-b,c=h('[visualindex="'+b+'"]',a.domNode)[0],d=[],g=[];if(c){var f=a._buildRows(b,m,d,g);if(f){e.place(f,c,"before");for(var f=0,j=g.length;f<j;++f)a.onAfterRow.apply(a,
g[f])}}for(;c;)g=c.nextSibling,e.destroy(c),c=g;o.when(a._buildUncachedRows(d),function(){a.onRender(b,m)})}else a.renderRows(c,d,0,1),a.onForcedScroll()},function(b){a._loadFail(b)})},refreshCell:function(b,a){var c=new o,d=this,e=d.model,g=d.grid,f=g._columns[a],h=f&&d.getCellNode({visualIndex:b,colId:f.id});if(h){var j,k=d.getRowInfo({visualIndex:b}),r=k.rowIndex,u=k.parentId;e.when({start:r,count:1,parentId:u},function(){if(j=e.byIndex(r,u))k.rowId=e.indexToId(r,u),h.innerHTML=d._buildCellContent(f,
k,j.data,g.tree&&j.data[f.id]===void 0),d.onAfterCell(h,k,f,j)}).then(function(){c.callback(!!j)});return c}c.callback(0);return c},rootStart:0,rootCount:0,renderStart:0,renderCount:0,visualStart:0,visualCount:0,autoUpdate:1,autoChangeSize:1,updateRootRange:function(b,a){var c=this.grid.tree,c=this.visualCount=c?c.getVisualSize(b,a):a;this.rootStart=b;this.rootCount=a;if(this.renderStart+this.renderCount>c&&(this.renderStart=c-this.renderCount,this.renderStart<0))this.renderStart=0,this.renderCount=
c;if(!this.renderCount&&c)this.onForcedScroll()},renderRows:function(b,a,d,g){var m=this,f=m.grid,h="",j=[],l=[],q=m.domNode,r=f.emptyNode,u=m.arg("emptyInfo",c.emptyInfo);if(!m._err)if(a>0){r.innerHTML=m.arg("loadingInfo",c.loadingInfo);d!="top"&&d!="bottom"&&m.model.free();h=m._buildRows(b,a,j,l);if(d=="top")m.renderCount+=m.renderStart-b,m.renderStart=b,e.place(h,q,"first");else if(d=="bottom")m.renderCount=b+a-m.renderStart,e.place(h,q,"last");else{m.renderStart=b;m.renderCount=a;d=g?q.scrollTop:
0;q.scrollTop=0;if(k("ie"))for(;q.childNodes.length;)q.removeChild(q.firstChild);q.innerHTML=h;q.scrollTop=d;q.scrollLeft=f.hScrollerNode.scrollLeft;r.innerHTML=h?"":u;m.onUnrender()}f=0;for(h=l.length;f<h;++f)m.onAfterRow.apply(m,l[f]);o.when(m._buildUncachedRows(j),function(){m.onRender(b,a)})}else if(!{top:1,bottom:1}[d])q.scrollTop=0,q.innerHTML="",r.innerHTML=u,m.onUnrender(),m.model.free()},unrenderRows:function(b,a){if(b>0){var c=0,d,e=this.domNode;if(a=="post")for(;c<b&&e.lastChild;++c)d=
e.lastChild.getAttribute("rowid"),this.model.free(d),e.removeChild(e.lastChild),this.onUnrender(d);else{for(var f=e.scrollTop;c<b&&e.firstChild;++c)d=e.firstChild.getAttribute("rowid"),this.model.free(d),f-=e.firstChild.offsetHeight,e.removeChild(e.firstChild),this.onUnrender(d);this.renderStart+=c;e.scrollTop=f>0?f:0}this.renderCount-=c;this.model.when()}},onAfterRow:function(){},onAfterCell:function(){},onRender:function(){},onUnrender:function(){},onDelete:function(){},onSet:function(){},collectCellWrapper:function(){},
onMoveToCell:function(){},onForcedScroll:function(){},_getRowNodeQuery:function(b){var a;b.rowId?a="[rowid='"+b.rowId+"']":typeof b.rowIndex=="number"&&b.rowIndex>=0?(a="[rowindex='"+b.rowIndex+"']",b.parentId&&(a+="[parentid='"+b.parentId+"']")):typeof b.visualIndex=="number"&&b.visualIndex>=0&&(a="[visualindex='"+b.visualIndex+"']");return a&&a+".gridxRow"},_buildRows:function(b,a,c,d){for(var a=b+a,e=[],f=this.model,g=this.domNode.scrollWidth;b<a;++b){var h=this.getRowInfo({visualIndex:b}),j=f.byIndex(h.rowIndex,
h.parentId);e.push('<div class="gridxRow ',b%2?"gridxRowOdd":"",'" role="row" visualindex="',b);j?(f.keep(h.rowId),e.push('" rowid="',h.rowId,'" rowindex="',h.rowIndex,'" parentid="',h.parentId,'">',this._buildCells(j.data,h),"</div>"),d.push([h,j])):(e.push('"><div class="gridxRowDummy" style="width:',g,'px;"></div></div>'),h.start=h.rowIndex,h.count=1,c.push(h))}return e.join("")},_buildUncachedRows:function(b){var a=this;return b.length&&a.model.when(b,function(){try{for(var c=0,d=b.length;c<d;++c)a._buildRowContent(b[c])}catch(e){a._loadFail(e)}}).then(null,
function(b){a._loadFail(b)})},_loadFail:function(b){console.error(b);this.grid.emptyNode.innerHTML=this.arg("loadFailInfo",c.loadFailInfo);this.domNode.innerHTML="";this._err=1},_buildRowContent:function(b){var a=this.model,c=h('[visualindex="'+b.visualIndex+'"]',this.domNode)[0];if(c){var d=a.byIndex(b.rowIndex,b.parentId);if(d)b.rowId=a.indexToId(b.rowIndex,b.parentId),a.keep(b.rowId),c.setAttribute("rowid",b.rowId),c.setAttribute("rowindex",b.rowIndex),c.setAttribute("parentid",b.parentId||""),
c.innerHTML=this._buildCells(d.data,b),this.onAfterRow(b,d);else throw Error("Row is not in cache:"+b.rowIndex);}},_buildCells:function(b,a){for(var c,d,e=this.grid,f=e._columns,g=e.focus&&e.focus.currentArea()=="body",h=['<table class="gridxRowTable" role="presentation" border="0" cellpadding="0" cellspacing="0"><tr>'],j=0,k=f.length;j<k;++j)c=f[j],d=e.tree&&b[c.id]===void 0,h.push('<td class="gridxCell '),d&&h.push("gridxPaddingCell"),g&&this._focusCellRow===a.visualIndex&&this._focusCellCol===
j&&h.push("gridxCellFocus"),h.push('" role="gridcell" tabindex="-1" colid="',c.id,'" style="width: ',c.width,'">',this._buildCellContent(c,a,b,d),"</td>");h.push("</tr></table>");return h.join("")},_buildCellContent:function(b,a,c,d){var e="";d||(e=this._wrapCellData(b.decorator?b.decorator(c[b.id],a.rowId,a.visualIndex):c[b.id],a.rowId,b.id));return!e&&k("ie")<8?"$nbsp;":e},_wrapCellData:function(b,a,c){var d=[];this.collectCellWrapper(d,a,c);var e=d.length-1;for(e>0&&d.sort(function(b,a){return b.priority-
a.priority});e>=0;--e)b=d[e].wrap(b,a,c);return b},_onMouseEvent:function(b,a){var c=this.grid,d="onCell"+b,e="onRow"+b;if(c._isConnected(d)||c._isConnected(e))if(this._decorateEvent(a),a.rowId){if(a.columnId)c[d](a);c[e](a)}},_decorateEvent:function(b){for(var a=b.target||b.originalTarget,c=this.grid,d;a&&a!=c.bodyNode;a=a.parentNode){d=a.tagName.toLowerCase();if(d=="td"&&f.contains(a,"gridxCell")){var e=c._columnsById[a.getAttribute("colid")];b.cellNode=a;b.columnId=e.id;b.columnIndex=e.index}if(d==
"div"&&f.contains(a,"gridxRow")){b.rowId=a.getAttribute("rowid");b.parentId=a.getAttribute("parentid");b.rowIndex=parseInt(a.getAttribute("rowindex"),10);b.visualIndex=parseInt(a.getAttribute("visualindex"),10);break}}},_onSet:function(a,c,d){if(this.autoUpdate){var e=this.getRowNode({rowId:a});if(e&&d){var f=this.getRowInfo({rowId:a,rowIndex:c});e.innerHTML=this._buildCells(d.data,f);this.onAfterRow(f,d);this.onSet(a,c,d);this.onRender(c,1)}}},_onDelete:function(a){if(this.autoUpdate){var c=this.getRowNode({rowId:a});
if(c){for(var d=0,f=parseInt(c.getAttribute("rowindex"),10),g=c.getAttribute("parentid"),h={id:1},k=[c],l,o=[a],c=c.nextSibling;c&&h[c.getAttribute("parentid")];c=c.nextSibling)l=c.getAttribute("rowid"),o.push(l),k.push(c),h[l]=1;for(;c;c=c.nextSibling)c.getAttribute("parentid")==g&&c.setAttribute("rowindex",parseInt(c.getAttribute("rowindex"),10)-1),c.setAttribute("visualindex",parseInt(c.getAttribute("visualindex"),10)-1),++d;j.forEach(k,e.destroy);j.forEach(o,this.onUnrender,this);this.autoChangeSize&&
this.rootStart===0&&!g&&this.updateRootRange(0,this.rootCount-1);this.onDelete(a,f);this.onRender(f,d)}}},_onSizeChange:function(a,c){if(this.autoChangeSize&&this.rootStart===0&&(this.rootCount===c||c<0))this.updateRootRange(0,a),this.refresh()},_onRowMouseOver:function(a){var c=h("> div.gridxRowOver",this.domNode)[0],a=this.getRowNode({rowId:a.rowId});c!=a&&(c&&f.remove(c,"gridxRowOver"),f.add(a,"gridxRowOver"))},_onCellMouseOver:function(a){f.toggle(a.cellNode,"gridxCellOver",a.type=="mouseover")},
_focusCellCol:0,_focusCellRow:0,_initFocus:function(){var a=this,c=a.grid,d=c.isLeftToRight(),e=c.bodyNode,f=c.focus;f&&(f.registerArea({name:"body",priority:1,focusNode:e,scope:a,doFocus:a._doFocus,doBlur:a._blurCell,onFocus:a._onFocus,onBlur:a._blurCell}),a.connect(c.mainNode,"onkeypress",function(e){if(f.currentArea()=="body"&&(!c.tree||!e.ctrlKey)){f._noBlur=1;var h={},j=d?1:-1;h[g.LEFT_ARROW]=[0,-j,e];h[g.RIGHT_ARROW]=[0,j,e];h[g.UP_ARROW]=[-1,0,e];h[g.DOWN_ARROW]=[1,0,e];a._moveFocus.apply(a,
h[e.keyCode]||[]);f._noBlur=0}}),a.connect(c,"onCellClick",function(c){a._focusCellRow=c.visualIndex;a._focusCellCol=c.columnIndex}),a.connect(a,"onRender",function(c,d){a._focusCellRow>=c&&a._focusCellRow<c+d&&f.currentArea()=="body"&&a._focusCell()}),c.hScroller&&a.connect(e,"onscroll",function(){c.hScroller.scroll(!d&&(k("webkit")||k("ie")<8)?e.scrollWidth-e.offsetWidth-e.scrollLeft:e.scrollLeft)}))},_doFocus:function(a){return this._focusCell(a)||this._focusCell(0,-1,-1)},_focusCell:function(b,
c,d){a.stopEvent(b);d=d>=0?d:this._focusCellCol;c=c>=0?c:this._focusCellRow;if(b=this.getCellNode({visualIndex:c,colId:this.grid._columns[d].id})){var e=h(".gridxCellFocus",this.domNode)[0];if(b!=e)e&&f.remove(e,"gridxCellFocus"),f.add(b,"gridxCellFocus"),this._focusCellRow=c,this._focusCellCol=d;k("ie")<8||b.focus()}else if(!this.grid.rowCount())return this.grid.emptyNode.focus(),!0;return b},_moveFocus:function(b,c,d){if(b||c){a.stopEvent(d);var e,f,g=this,h=g.grid,j=h._columns,k=g.visualCount;
e=g._focusCellRow+b;e=e<0?0:e>=k?k-1:e;f=g._focusCellCol+c;f=f<0?0:f>=j.length?j.length-1:f;h.vScroller.scrollToRow(e).then(function(){g._focusCell(0,e,f);g.onMoveToCell(e,f,d)})}},_nextCell:function(a,c,d,e){var f=new o,g=this.grid,h=g._columns.length,j=this.visualCount;do if(c+=d,c<0||c>=h)a+=d,c=c<0?h-1:0,a<0?(a=j-1,c=h-1):a>=j&&(c=a=0);while(!e(a,c));g.vScroller.scrollToRow(a).then(function(){f.callback({r:a,c:c})});return f},_blurCell:function(){var a=h(".gridxCellFocus",this.domNode)[0];a&&
f.remove(a,"gridxCellFocus");return!0},_onFocus:function(a){for(a=a.target;a&&a!=this.domNode;a=a.parentNode)if(f.contains(a,"gridxCell")){for(var c=this.grid._columnsById[a.getAttribute("colid")].index;!f.contains(a,"gridxRow");)a=a.parentNode;return this._focusCell(0,parseInt(a.getAttribute("visualindex"),10),c)}return!1}})})},"gridx/core/Column":function(){define(["dojo/_base/declare"],function(l){return l([],{constructor:function(h,j){this.grid=h;this.model=h.model;this.id=j},index:function(){var h=
this.grid._columnsById[this.id];return h?h.index:-1},cell:function(h,j){return this.grid.cell(h,this,j)},name:function(){return this.grid._columnsById[this.id].name||""},setName:function(h){this.grid._columnsById[this.id].name=h;return this},field:function(){return this.grid._columnsById[this.id].field||null},getWidth:function(){return this.grid._columnsById[this.id].width}})})},"gridx/modules/ColumnWidth":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/Deferred","dojo/_base/query",
"dojo/_base/sniff","dojo/dom-geometry","dojo/dom-class","dojo/dom-style","dojo/keys","../core/_Module"],function(l,h,j,e,f,o,k,g,d,a){return l(a,{name:"columnWidth",forced:["hLayout","header"],getAPIPath:function(){return{columnWidth:this}},constructor:function(){this._ready=new j},preload:function(){var a=this,b=a.grid;if(!b.hScroller)a.autoResize=!0;a.batchConnect([b,"_onResizeBegin",function(d,e){e.header=new j;if(a.arg("autoResize")){var f=b.domNode.clientWidth-b.hLayout.lead-b.hLayout.tail;b.bodyNode.style.width=
(f<0?0:f)+"px"}else a._adaptWidth();e.header.callback()}],[b.hLayout,"onUpdateWidth",function(){a._adaptWidth();a._ready.callback()}],[b,"setColumns","_adaptWidth"])},load:function(){var a=this.loaded;this._ready.then(function(){a.callback()})},"default":60,autoResize:!1,_adaptWidth:function(){var a=this,b=a.grid,d=b.domNode,j=b.header,l=b.isLeftToRight(),m=l?"marginLeft":"marginRight",w=l?"marginRight":"marginLeft",l=b.hLayout.lead,t=b.hLayout.tail,v=j.innerNode,s=b.bodyNode.style,q=v.style,r=(d.clientWidth||
g.get(d,"width"))-l-t,u=e(".gridxCell",v)[0],x=o.getMarginBox(u).w-o.getContentBox(u).w,D=!d.offsetHeight,y=g.get(u,"borderCollapse")=="collapse";q[m]=s[m]=l+"px";q[w]=t+"px";r=r<0?0:r;D&&y&&x--;if(b.autoWidth){h.forEach(b._columns,function(b){if(!b.width)b.width=a.arg("default")+"px"});j.refresh();var m=e("th.gridxCell",v),z=y?2:0;m.forEach(function(a){var c=g.get(a,"width");if(!f("webkit")||!D)c+=x;z+=c;f("ie")&&y&&z--;a=b._columnsById[a.getAttribute("colid")];if(!a.width||/%$/.test(a.width))a.width=
c+"px"});j._columnsWidth=z;s.width=z+"px";d.style.width=l+t+z+"px"}else{if(a.arg("autoResize"))s.width=r+"px",k.add(d,"gridxPercentColumnWidth"),h.forEach(b._columns,function(a){if(!a.width||!/%$/.test(a.width))a.width="auto"});else{var A=[],B=y?2:0;s.width=r+"px";h.forEach(b._columns,function(a){if(!a.width||a.width=="auto")a.width="auto",A.push(a);else if(/%$/.test(a.width))a.width=parseInt(r*parseFloat(a.width,10)/100-x,10)+"px"});j.refresh();h.forEach(b._columns,function(a){if(a.width!="auto"){var b=
g.get(j.getHeaderNode(a.id),"width");if(!a.width||/%$/.test(a.width))a.width=b+"px";if(!f("webkit")||!D)b+=x;B+=b}});if(A.length){f("webkit")&&(x=0);var C=r>B?(r-B)/A.length-x:a.arg("default");r>B&&f("ie")&&y&&(C+=b._columns.length/A.length);C=parseInt(C,10);h.forEach(A,function(a){a.width=C+"px"})}}j.refresh()}if(f("ie")<8)q.width=r+"px";b.hScroller&&(b.hScroller.scroll(0),j._onHScroll(0))}})})},"gridx/modules/Header":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-class",
"dojo/dom-geometry","dojo/_base/query","dojo/_base/sniff","dojo/keys","../util","../core/_Module"],function(l,h,j,e,f,o,k,g,d){return l(d,{name:"header",forced:["hLayout"],getAPIPath:function(){return{header:this}},constructor:function(){var a=this.domNode=h.create("div",{"class":"gridxHeaderRow",role:"presentation"}),c=this.innerNode=h.create("div",{"class":"gridxHeaderRowInner",role:"row",innerHTML:'<table border="0" cellpadding="0" cellspacing="0"><tr><th class="gridxCell"></th></tr></table>'});
a.appendChild(c)},preload:function(){var a=this.grid,c=this.domNode;a.headerNode.appendChild(c);a.vLayout.register(this,"domNode","headerNode");this.batchConnect([a,"onHScroll","_onHScroll"],[a,"onHeaderCellMouseOver","_onHeaderCellMouseOver"],[a,"onHeaderCellMouseOut","_onHeaderCellMouseOver"],a.columnResizer&&[a.columnResizer,"onResize","_onColumnResize"]);this._initFocus();a._connectEvents(c,"_onMouseEvent",this)},destroy:function(){this.inherited(arguments);h.destroy(this.domNode)},columnMixin:{headerNode:function(){return this.grid.header.getHeaderNode(this.id)}},
getHeaderNode:function(a){return f("[colid='"+a+"']",this.domNode)[0]},refresh:function(){var a=this,c=a.grid,b=c.focus,d=['<table role="presentation" border="0" cellpadding="0" cellspacing="0"><tr>'];c.columns().forEach(function(c){d.push('<th colid="',c.id,'" class="gridxCell ',b&&b.currentArea()=="header"&&c.id==a._focusHeaderId?a._focusClass:"",'" role="columnheader" aria-readonly="true" tabindex="-1" style="width: ',c.getWidth(),'"><div class="gridxSortNode">',c.name(),"</div></th>")});d.push("</tr></table>");
a.innerNode.innerHTML=d.join("");a._onHScroll(a._scrollLeft);a.onRender()},onRender:function(){},onMoveToHeaderCell:function(){},_scrollLeft:0,_onColumnResize:function(a,c,b){a=this.grid;a.autoWidth?(c=this._columnsWidth+=c-b,a.bodyNode.style.width=c+"px",a.domNode.style.width=a.hLayout.lead+a.hLayout.tail+c+"px"):this.grid.hScroller&&this.grid.hScroller._onScroll()},_onHScroll:function(a){var c=this.grid.isLeftToRight();this.innerNode.firstChild.style[c?"marginLeft":"marginRight"]=(!c&&o("ff")?a:
-a)+"px";this._scrollLeft=a},_onMouseEvent:function(a,c){var b=this.grid,d="onHeaderCell"+a,e="onHeader"+a;if(b._isConnected(d)||b._isConnected(e)){this._decorateEvent(c);if(c.columnIndex>=0)b[d](c);b[e](c)}},_decorateEvent:function(a){for(var c=a.target;c&&c!==this.domNode;c=c.parentNode)if(c.tagName.toLowerCase()=="th"){if(c=this.grid._columnsById[c.getAttribute("colid")])a.columnId=c.id,a.columnIndex=c.index;break}},_onHeaderCellMouseOver:function(a){j.toggle(this.getHeaderNode(a.columnId),"gridxHeaderCellOver",
a.type=="mouseover")},_focusHeaderId:null,_focusClass:"gridxHeaderCellFocus",_initFocus:function(){var a=this,c=a.grid;c.focus&&c.focus.registerArea({name:"header",priority:0,focusNode:a.domNode,scope:a,doFocus:a._doFocus,doBlur:a._blurNode,onBlur:a._blurNode,connects:[a.connect(a.domNode,"onkeydown","_onKeyDown"),a.connect(c,"onHeaderCellMouseDown",function(b){a._focusNode(a.getHeaderNode(b.columnId))})]})},_doFocus:function(a){var c=this._focusNode(this._focusHeaderId&&this.getHeaderNode(this._focusHeaderId)||
f("th.gridxCell",this.domNode)[0]);g.stopEvent(c&&a);return c},_focusNode:function(a){if(a){var c=this.grid;if(this._focusHeaderId=a.getAttribute("colid")){this._blurNode();if(c.hScroller){var b=e.position(a),d=e.position(this.domNode),f=b.x+b.w-d.x-d.w;f<0&&(f=b.x-d.x,f>0&&(f=0));f+=this._scrollLeft;this._onHScroll(f);c.hScroller.scroll(f)}j.add(a,this._focusClass);a.focus();return!0}}return!1},_blurNode:function(){var a=f("th."+this._focusClass,this.domNode)[0];a&&j.remove(a,this._focusClass);return!0},
_onKeyDown:function(a){var c=this.grid,b;b=c.isLeftToRight()?1:-1;var d=a.keyCode==k.LEFT_ARROW?-b:b;if(this._focusHeaderId&&(a.keyCode==k.LEFT_ARROW||a.keyCode==k.RIGHT_ARROW))if(g.stopEvent(a),b=c._columnsById[this._focusHeaderId],b=c._columns[b.index+d])this._focusNode(this.getHeaderNode(b.id)),this.onMoveToHeaderCell(b.id,a)}})})},"gridx/core/Row":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred"],function(l,h,j){return l([],{constructor:function(e,f){this.grid=e;
this.model=e.model;this.id=f},index:function(){return this.model.idToIndex(this.id)},cell:function(e,f){return this.grid.cell(this,e,f)},data:function(){return this.model.byId(this.id).data},rawData:function(){return this.model.byId(this.id).rawData},item:function(){return this.model.byId(this.id).item},setRawData:function(e){var f=this.grid.store,l=this.item(),k,g;if(f.setValue){g=new j;try{for(k in e)f.setValue(l,k,e[k]);f.save({onComplete:h.hitch(g,g.callback),onError:h.hitch(g,g.errback)})}catch(d){g.errback(d)}}return g||
j.when(f.put(h.mixin(h.clone(l),e)))}})})},"url:gridx/templates/Grid.html":'<div class="gridx" role="grid" tabindex="0"\r\n\t><div class="gridxHeader" role="presentation" data-dojo-attach-point="headerNode"></div\r\n\t><div class="gridxMain" role="presentation" data-dojo-attach-point="mainNode"\r\n\t\t><div class="gridxBodyEmpty" role="alert" tabindex="-1" data-dojo-attach-point="emptyNode"></div\r\n\t\t><div class="gridxBody" role="presentation" data-dojo-attach-point="bodyNode"></div\r\n\t\t><div class="gridxVScroller" data-dojo-attach-point="vScrollerNode"\r\n\t\t\t><div style=\'width: 1px;\'></div\r\n\t\t></div\r\n\t></div\r\n\t><div class="gridxFooter" data-dojo-attach-point="footerNode"\r\n\t\t><div class="gridxHScroller"\r\n\t\t\t><div class="gridxHScrollerInner" data-dojo-attach-point="hScrollerNode"><div style="width:1px; height: 1px;"></div></div\r\n\t\t></div\r\n\t></div\r\n\t><span data-dojo-attach-point="lastFocusNode" tabindex="0"></span\r\n></div>\r\n',
"gridx/core/Core":function(){define(["require","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","dojo/DeferredList","./model/Model","./Row","./Column","./Cell","./_Module"],function(l,h,j,e,f,o,k,g,d,a,c){function b(a){a=a.moduleClass.prototype;return(a.forced||[]).concat(a.optional||[])}function i(a,b){if(b)for(var c in b){var d=a[c],f=b[c];d&&e.isObject(d)&&!t(d)?i(d,f):a[c]=f}}function n(a,b){var c=[],d=b&&b.length||0;q(a.modules,function(a,b){if(t(a)||v(a))a={moduleClass:a};
if(a){var e=a.moduleClass;if(v(e))try{e=a.moduleClass=l(e)}catch(f){console.error(f)}if(t(e)){c.push(a);return}}console.error(["The ",b+1-d,"-th declared module can NOT be found, please require it before using it"].join(""))});a.modules=c;return a}function p(a){var b,c={},d=[];q(a.modules,function(a){c[a.moduleClass.prototype.name]=a});for(b in c)d.push(c[b]);a.modules=d;return a}function m(a){var c=a.modules,d,e,f,g,h=function(a){for(var b=c.length-1;b>=0;--b)if(c[b].moduleClass.prototype.name==
a)return c[b];return null};for(d=c.length-1;e=c[d];--d){f=e.moduleClass.prototype.name;for(g=b(e);g.length;){e=g.shift();if(e==f)throw Error("Module '"+e+"' is in a dependancy circle!");(e=h(e))&&(g=g.concat(b(e)))}}return a}var w=e.delegate,t=e.isFunction,v=e.isString,s=e.hitch,q=j.forEach;return h([],{_reset:function(a){this._uninit();var b={},d;for(d in a)b[d]=a[d];a=b;this.store=a.store;a.modules=a.modules||[];a.modelExtensions=a.modelExtensions||[];this.setColumns(a.structure);a.columns=this._columnsById;
d=n(a,this.coreModules);var a=c._modules,b=d.modules,e,f,g,h,j,i,l;for(e=0;e<b.length;++e){h=b[e].moduleClass.prototype;j=(h.forced||[]).concat(h.required||[]);for(f=0;f<j.length;++f){i=j[f];for(g=b.length-1;g>=0;--g)if(b[g].moduleClass.prototype.name===i)break;g<0&&(a[i]?b.push({moduleClass:a[i]}):(l=1,console.error(["Forced/Required dependent module '",i,"' is NOT found for '",h.name,"' module."].join(""))))}}if(l)throw Error("Some forced/required dependent modules are NOT found.");l=m(p(d));d=
l.modules;for(a=d.length-1;a>=0;--a)(b=d[a].moduleClass.prototype.modelExtensions)&&[].push.apply(l.modelExtensions,b);a=l;this.model=new k(a);this._create(a)},_postCreate:function(){var a=this._deferStartup=new f;this._preload();this._load(a).then(s(this,"onModulesLoaded"))},onModulesLoaded:function(){},setStore:function(a){this.store=a;this._reset(this);this._postCreate();this._deferStartup.callback()},setColumns:function(a){this.structure=a;var a=this._columns=e.clone(a),b={},c,d,f;if(e.isArray(a)){d=
0;for(f=a.length;d<f;++d)c=a[d],c.index=d,c.id=c.id||String(d+1),b[c.id]=c}this._columnsById=b;if(this.model)this.model._cache.onSetColumns(this._columnsById)},row:function(a,b){typeof a=="number"&&!b&&(a=this.model.indexToId(a));if(this.model.idToIndex(a)>=0)return this._rowObj=this._rowObj||this._mixin(new g(this),"row"),w(this._rowObj,{id:a});return null},column:function(a,b){var r;var c,e,f={};typeof a=="number"&&!b&&(r=(c=this._columns[a])&&c.id,a=r);if(c=this._columnsById[a]){this._colObj=this._colObj||
this._mixin(new d(this),"column");for(e in c)this._colObj[e]===void 0&&(f[e]=c[e]);return w(this._colObj,f)}return null},cell:function(b,c,e){if(b=b instanceof g?b:this.row(b,e))if(c=c instanceof d?c:this.column(c,e))return this._cellObj=this._cellObj||this._mixin(new a(this),"cell"),w(this._cellObj,{row:b,column:c});return null},columnCount:function(){return this._columns.length},rowCount:function(a){return this.model.size(a)},columns:function(a,b){return this._arr(this._columns.length,"column",
a,b)},rows:function(a,b){return this._arr(this.model.size(),"row",a,b)},_uninit:function(){var a=this._modules,b;for(b in a){b=a[b].mod;if(b.getAPIPath){var c=b.getAPIPath();if(c){var d=void 0;for(d in c)delete this[d]}}b.destroy()}this.model&&this.model.destroy()},_arr:function(a,b,c,d){for(var f=c||0,c=d>=0?c+d:a,d=[];f<c&&f<a;++f)d.push(this[b](f));for(var g in j)t(j[g])&&(d[g]=e.partial(j[g],d));return d},_preload:function(){var a,b=this._modules;for(a in b)a=b[a],a.mod.preload&&a.mod.preload(a.args)},
_load:function(a){var b=[],c;for(c in this._modules)b.push(this._initMod(a,c));return new o(b,0,1)},_mixin:function(a,b){var c,d,f=this._modules;for(c in f)c=f[c].mod,d=c[b+"Mixin"],t(d)&&(d=d.apply(c)),e.mixin(a,d||{});return a},_create:function(a){var c=this,d=c._modules={};q(a.modules,function(a){var e;e=a.moduleClass.prototype.name;d[e]||(d[e]={args:a,mod:e=new a.moduleClass(c,a),deps:b(a)},e.getAPIPath&&i(c,e.getAPIPath()))})},_initMod:function(a,b){var c=this._modules,d=c[b],e=d.mod,f=e.loaded;
if(!d.done)d.done=1,(new o(j.map(j.filter(d.deps,function(a){return c[a]}),s(this,this._initMod,a)),0,1)).then(function(){e.load?e.load(d.args,a):f.fired<0&&f.callback()});return f}})})}}});define("gridx/gridx-core",[],1);